[build-system]
requires = ["setuptools>=68", "wheel"]
build-backend = "setuptools.build_meta"

[project]
name = "idb-mcp"
version = "0.0.8"
description = "An MCP server and importable Python module that wraps Facebook IDB to control iOS simulators for automation. Implemented by AskUI."
readme = "README.md"
requires-python = ">=3.10"
license = { text = "MIT" }
authors = [{ name = "askui GmbH" }, { email = "info@askui.com" }]
classifiers = [
    "Programming Language :: Python :: 3",
    "License :: OSI Approved :: MIT License",
    "Operating System :: MacOS :: MacOS X",
]
dependencies = [
    "fb-idb==1.1.7",
    "pillow==11.3.0",
    "fastmcp==2.12.3",
]

[dependency-groups]
dev = [
    "ruff>=0.14.0",
    "mypy>=1.18.2",
    "cyclonedx-bom>=7.2.1",
]

[project.urls]
Homepage = "https://github.com/askui/idb-mcp"

[project.scripts]
idb-mcp = "idb_mcp.__main__:main"

[tool.pdm.scripts]
lint-check = "ruff check src/"
format-check = "ruff format --check src/"
format-fix = "ruff format src/"
lint-fix = "ruff check --fix src/"
"type-check" = "mypy ."
"generate:SBOM" = "cyclonedx-py environment --pyproject ./pyproject.toml  --output-format JSON --output-file bom.json --spec-version 1.6 --gather-license-texts "



[tool.setuptools]
packages = { find = { include = ["idb_mcp*"], exclude = ["idb_mcp.tests*"], where = ["src"] } }

[tool.ruff]
target-version = "py310"
line-length = 88
lint.select = [
    "ANN", # Type annotations - handled by mypy
    "E",  # pycodestyle errors
    "W",  # pycodestyle warnings
    "F",  # pyflakes
    "I",  # isort
    "B",  # flake8-bugbear
    "C4", # flake8-comprehensions
    "UP", # pyupgrade
]
lint.ignore = [
    "E501",  # line too long, handled by black
    "B008",  # do not perform function calls in argument defaults
    "C901",  # too complex
]

exclude = [
    ".bzr",
    ".direnv",
    ".eggs",
    ".git",
    ".git-rewrite",
    ".hg",
    ".mypy_cache",
    ".nox",
    ".pants.d",
    ".pytype",
    ".ruff_cache",
    ".svn",
    ".tox",
    ".venv",
    "__pypackages__",
    "_build",
    "buck-out",
    "build",
    "dist",
    "node_modules",
    "venv",
]

[tool.ruff.lint.per-file-ignores]
"__init__.py" = ["F401"]

[tool.ruff.lint.isort]
known-first-party = ["idb_mcp", "mypy"]


[tool.ruff.format]
quote-style = "double"
indent-style = "space"
skip-magic-trailing-comma = false
line-ending = "auto"

[tool.mypy]
exclude = "build"
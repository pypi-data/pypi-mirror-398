import{y as Ia,p as St,F as Pt,e as o,v as kt,l as B,g as e,m as p,H as k,b as Ra,i as It,f as S,k as d,w as R,t as x,c as Rt,n as v,r as h,S as V,Q as nt,I as _,J as re,U as fe,Z as Ht,Y,R as Ct,N as ce,_ as ie,G as F}from"../chunks/Cjo0f8hx.js";import{_ as Ea}from"../chunks/PPVm8Dsz.js";import{w as Et,h as Da,f as Ta}from"../chunks/CZmdasm_.js";import{D as La}from"../chunks/D4wk-9zb.js";import{P as Oa}from"../chunks/CNqIdfOw.js";const Ma=()=>({title:"Lithology & Porosity",subtitle:"Lithology and porosity estimations for the selected well"}),so=Object.freeze(Object.defineProperty({__proto__:null,load:Ma},Symbol.toStringTag,{value:"Module"}));var Va=S('<div class="text-sm text-red-500 mb-2"> </div>'),ja=S('<div class="text-xs text-green-600 mt-2"> </div>'),Aa=S('<div class="text-xs text-muted-foreground mt-2"> </div>'),Ba=S('<div class="w-full h-[220px]"></div>'),Fa=S('<div class="flex items-center justify-center h-full text-sm text-gray-500">No lithology data available. Click "Estimate Lithology" first.</div>'),$a=S('<div class="text-xs text-green-600 mt-2"> </div>'),za=S('<div class="w-full h-[220px]"></div>'),qa=S('<div class="flex items-center justify-center h-full text-sm text-gray-500">No porosity data available. Click "Estimate Porosity" first.</div>'),Ya=S('<div class="text-xs text-green-600 mt-2"> </div>'),Ua=S("<div><strong>Calculated PHIT:</strong> </div>"),Wa=S("<div><strong>Calculated PHIT:</strong> No data</div>"),Ja=S('<div><strong>Core Porosity (CPORE):</strong> <span class="inline-block w-2 h-2 bg-red-600 rounded-full"></span> </div>'),Ka=S('<div class="text-gray-500">No core porosity data (CPORE) found</div>'),Za=S('<div class="bg-panel rounded p-3"><div class="grid grid-cols-2 gap-2 mb-3"><div><label class="text-xs" for="dry-sand-nphi">Dry sand (NPHI)</label> <input id="dry-sand-nphi" class="input" type="number" step="any"/></div> <div><label class="text-xs" for="dry-sand-rhob">Dry sand (RHOB)</label> <input id="dry-sand-rhob" class="input" type="number" step="any"/></div> <div><label class="text-xs" for="dry-clay-nphi">Dry clay (NPHI)</label> <input id="dry-clay-nphi" class="input" type="number" step="any"/></div> <div><label class="text-xs" for="dry-clay-rhob">Dry clay (RHOB)</label> <input id="dry-clay-rhob" class="input" type="number" step="any"/></div> <div><label class="text-xs" for="fluid-nphi">Fluid (NPHI)</label> <input id="fluid-nphi" class="input" type="number" step="any"/></div> <div><label class="text-xs" for="fluid-rhob">Fluid (RHOB)</label> <input id="fluid-rhob" class="input" type="number" step="any"/></div> <div><label class="text-xs" for="silt-line-angle">Silt line angle</label> <input id="silt-line-angle" class="input" type="number" step="1"/></div></div> <!> <div class="space-y-3"><div><div><div class="font-medium text-sm mb-1">NPHI - RHOB Crossplot</div> <div class="bg-surface rounded p-2"><div class="w-full max-w-[600px] h-[500px] mx-auto"></div></div></div> <div class="px-2 py-2 border-t border-border/50 mt-2"><div class="font-medium text-sm mb-3 mt-4">Hydrocarbon Correction</div> <div class="bg-surface rounded p-2"><div class="grid grid-cols-2 gap-2 mb-3"><div><label class="text-xs" for="hc-corr-angle">HC Correction Angle (Â°)</label> <input id="hc-corr-angle" class="input" type="number" step="0.1"/></div> <div><label class="text-xs" for="hc-buffer">HC Buffer</label> <input id="hc-buffer" class="input" type="number" step="0.001"/></div></div> <div class="flex gap-2 mb-3"><button class="btn px-3 py-1 text-sm font-medium rounded-md bg-blue-600 text-white hover:bg-blue-700 shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500" aria-label="Apply HC correction" title="Apply hydrocarbon correction to NPHI/RHOB data"><!></button> <button class="btn px-3 py-1 text-sm font-medium rounded-md bg-emerald-700 text-white hover:bg-emerald-600 shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-emerald-600" aria-label="Save HC corrected data" title="Save corrected NPHI_HC and RHOB_HC to database"><!></button></div> <div class="flex items-center"><input type="checkbox" id="use-hc-corrected" class="mr-2"/> <label for="use-hc-corrected">Use HC corrected NPHI/RHOB for lithology and porosity estimation</label></div> <!> <!></div></div> <div class="px-2 py-2 border-t border-border/50 mt-2"><div class="font-medium text-sm mb-1">Lithology (VSAND / VSILT / VCLAY)</div> <div class="bg-surface rounded p-2"><button class="btn px-3 py-1 text-sm font-semibold rounded-md bg-gray-900 text-white hover:bg-gray-800 shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-gray-700" aria-label="Run lithology classification" title="Run lithology classification">Estimate Lithology</button> <button class="btn px-3 py-1 text-sm font-medium rounded-md bg-emerald-700 text-white hover:bg-emerald-600 shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-emerald-600" aria-label="Save lithology" title="Save lithology results to database"><!></button> <div class="h-[220px] w-full overflow-hidden"><!></div> <!></div></div> <div><div class="font-medium text-sm mb-1">Porosity (PHIT)</div> <div class="bg-surface rounded p-2"><button class="btn px-3 py-1 text-sm font-medium rounded-md bg-gray-800 text-gray-100 hover:bg-gray-700 shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-gray-600" aria-label="Estimate porosity" title="Estimate porosity">Estimate Porosity</button> <button class="btn px-3 py-1 text-sm font-medium rounded-md bg-emerald-700 text-white hover:bg-emerald-600 shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-emerald-600" aria-label="Save porosity" title="Save porosity results to database"><!></button> <div class="flex items-center ml-2"><input type="checkbox" id="depth-matching-poro" class="mr-2"/> <label for="depth-matching-poro">Depth Matching</label></div> <div class="h-[220px] w-full overflow-hidden"><!></div> <!></div> <div class="text-xs text-muted-foreground space-y-1 mt-2"><!> <!></div></div></div></div></div>'),Ga=S('<div class="text-sm">Select a well.</div>'),Qa=S('<div class="ws-lithology"><div class="mb-2"><div class="text-sm mb-2">Tools for lithology and porosity estimations.</div></div> <!> <!></div>');function Xa(Be,be){St(be,!1);const U=p(),T=p(),$=p(),j=p(),W=p();let P=Pt(be,"projectId",8),C=Pt(be,"wellName",8);const z="http://localhost:6312";let L=p({enabled:!1,minDepth:null,maxDepth:null}),ye=p({enabled:!1,zones:[]}),q=p([]),g=p(!1),b=p(null),Ee=p(null),De=p(null),Te=p(null),ge=p(!1),xe=p(!1),Ne=p(null),_e=p(null),J=p(-.02),K=p(2.65),Z=p(.35),G=p(2.71),Q=p(1),X=p(1),ee=p(117),ue=p(!1),Fe=p(50),$e=p(.01),A=p(!1),I=p([]),ze=p(!1),we=p(!1),Pe=p(null),He=p([]),Le=[],Ce=[],te=p([]),E=p([]),O=p([]),se=p(null),qe=null,ae=p(null),oe=p(null);async function Ye(){if(!qe){const t=await Ea(()=>import("../chunks/BJMC0GYJ.js").then(r=>r.p),[],import.meta.url);qe=t?.default??t}return qe}function Dt(t,r){const[[s,i],[u,l]]=t,[[f,c],[N,m]]=r,H=(s-u)*(c-m)-(i-l)*(f-N);if(Math.abs(H)<1e-10)return null;const y=((s-f)*(c-m)-(i-c)*(f-N))/H,D=-((s-u)*(i-c)-(i-l)*(s-f))/H;return y>=0&&y<=1&&D>=0&&D<=1?[s+y*(u-s),i+y*(l-i)]:[s+y*(u-s),i+y*(l-i)]}async function lt(){if(!e(se))return;const t=await Ye(),r=[Number(e(J)),Number(e(K))],s=[Number(e(Z)),Number(e(G))],i=[Number(e(Q)),Number(e(X))],u=[Number(e(U)),2.68],l=[];let f=[],c=[];if(e(He)&&e(He).length>0&&(f=Oe(),f.length>0))for(let m=0;m<f.length;m++){const H=[f[m].nphi,f[m].rhob],y=Dt([r,s],[i,H]);y&&c.push(y)}f.length>0&&l.push({x:f.map(m=>m.nphi),y:f.map(m=>m.rhob),mode:"markers",type:"scatter",name:"Data",marker:{color:Array.from({length:f.length},(m,H)=>H),colorscale:"Rainbow",showscale:!1,size:6},hovertemplate:"NPHI: %{x}<br>RHOB: %{y}<extra></extra>"}),e(A)&&e(I)&&e(I).length>0&&l.push({x:e(I).map(m=>m.nphi),y:e(I).map(m=>m.rhob),mode:"markers",type:"scatter",name:"HC Corrected Data",marker:{color:"red",size:6,symbol:"diamond",opacity:.7},hovertemplate:"NPHI (HC): %{x}<br>RHOB (HC): %{y}<extra></extra>"}),l.push({x:[i[0],r[0]],y:[i[1],r[1]],mode:"lines",type:"scatter",name:"Mineral 1 Line",line:{color:"blue",width:2},showlegend:!0}),l.push({x:[i[0],s[0]],y:[i[1],s[1]],mode:"lines",type:"scatter",name:"Clay Line",line:{color:"gray",width:2},showlegend:!0}),l.push({x:[r[0],s[0]],y:[r[1],s[1]],mode:"lines",type:"scatter",name:"Rock Line",line:{color:"black",width:2},showlegend:!0}),l.push({x:[i[0],u[0]],y:[i[1],u[1]],mode:"lines",type:"scatter",name:"Silt Line",line:{color:"green",width:2},showlegend:!0}),c.length>0&&l.push({x:c.map(m=>m[0]),y:c.map(m=>m[1]),mode:"markers",type:"scatter",name:"Projected Point",marker:{color:"purple",size:4},showlegend:!0}),l.push({x:[r[0]],y:[r[1]],mode:"markers",type:"scatter",name:`Mineral Point (${r[0]}, ${r[1]})`,marker:{color:"yellow",size:9,line:{color:"black",width:1}},showlegend:!0}),l.push({x:[s[0]],y:[s[1]],mode:"markers",type:"scatter",name:`Dry Clay (${s[0]}, ${s[1]})`,marker:{color:"black",size:9},showlegend:!0}),l.push({x:[u[0]],y:[u[1]],mode:"markers",type:"scatter",name:"Dry Silt Point",marker:{color:"orange",size:8},showlegend:!0}),l.push({x:[i[0]],y:[i[1]],mode:"markers",type:"scatter",name:`Fluid (${i[0]}, ${i[1]})`,marker:{color:"blue",size:9},showlegend:!0});const N={title:"NPHI-RHOB Crossplot",xaxis:{title:"NPHI",range:[-.1,1],tickformat:".2f"},yaxis:{title:"RHOB",autorange:!1,range:[3,0],tickformat:".2f"},legend:{orientation:"v",yanchor:"top",y:.99,xanchor:"left",x:.01,bgcolor:"rgba(255,255,255,0.8)"},template:"plotly_white",margin:{l:40,r:10,t:40,b:40},height:500,autosize:!0,hovermode:"closest"};try{t.react(e(se),l,N,{responsive:!0})}catch{t.newPlot(e(se),l,N,{responsive:!0})}}async function Tt(){if(!e(ae))return;const t=await Ye();if(!e(T)||e(T).length===0){t.purge(e(ae));return}const r=e(T).map(c=>c.x),s=e(T).map(c=>c.vclay),i=e(T).map(c=>c.vsilt),u=e(T).map(c=>c.vsand),l=[{x:r,y:s,name:"VCLAY",mode:"lines",line:{color:"#949494"},fill:"tozeroy"},{x:r,y:i,name:"VSILT",mode:"lines",line:{color:"#FE9800"},fill:"tonexty"},{x:r,y:u,name:"VSAND",mode:"lines",line:{color:"#F6F674"},fill:"tonexty"}],f={height:220,margin:{l:60,r:20,t:20,b:40},dragmode:"zoom",xaxis:{title:"Depth",tickformat:",.0f",fixedrange:!1},yaxis:{title:"Volume Fraction",range:[0,1],tickformat:".1f",fixedrange:!0},showlegend:!1};try{await t.react(e(ae),l,f,{responsive:!0})}catch{await t.newPlot(e(ae),l,f,{responsive:!0})}}async function Lt(){if(!e(oe))return;const t=await Ye();if((!e($)||e($).length===0)&&(!e(W)||e(W).length===0)){t.purge(e(oe));return}const r=[];if(e($)&&e($).length>0){const i=e($).map(l=>l.x),u=e($).map(l=>l.y);r.push({x:i,y:u,name:"PHIT",mode:"lines",line:{color:"#000000",width:2},xaxis:"x",yaxis:"y"})}if(e(j)&&e(j).length>0){const i=e(j).map(l=>l.x),u=e(j).map(l=>l.y);r.push({x:i,y:u,name:"PHIE",mode:"lines",line:{color:"#2563eb",width:1,dash:"dot"},fill:"tozeroy",fillcolor:"rgba(37,99,235,0.3)",xaxis:"x",yaxis:"y"})}e(W)&&e(W).length>0&&r.push({x:e(W).map(i=>i.x),y:e(W).map(i=>i.y),name:"CPORE",mode:"markers",marker:{color:"#dc2626",size:8,line:{color:"white",width:1}},xaxis:e(ue)?"x2":"x",yaxis:"y"});const s={height:220,margin:{l:60,r:20,t:50,b:40},dragmode:"zoom",xaxis:{title:"Log Depth",titlefont:{color:"#2563eb"},tickfont:{color:"#2563eb"},tickformat:",.0f",side:"bottom"},xaxis2:{title:"Core Depth",titlefont:{color:"#dc2626"},tickfont:{color:"#dc2626"},tickformat:",.0f",overlaying:"x",side:"top",fixedrange:e(ue)},yaxis:{title:"Porosity (fraction)",range:[0,.5],tickformat:".2f",fixedrange:!0},showlegend:!0,legend:{x:0,y:1,bgcolor:"rgba(255,255,255,0.8)",bordercolor:"rgba(0,0,0,0.2)",borderwidth:1}};try{t.react(e(oe),r,s,{responsive:!0})}catch{t.newPlot(e(oe),r,s,{responsive:!0})}}async function Ot(){if(!(!P()||!C())){o(g,!0),o(b,null);try{const t=await fetch(`${z}/quick_pp/database/projects/${P()}/wells/${encodeURIComponent(String(C()))}/merged`);if(!t.ok)throw new Error(await t.text());const r=await t.json(),s=r&&r.data?r.data:r;if(!Array.isArray(s))throw new Error("Unexpected data format from backend");o(He,s)}catch(t){console.warn("Failed to load well data",t),o(b,String(t?.message??t))}finally{o(g,!1)}}}function Oe(){const t=e(q),r=[];if(e(ze)&&e(I)&&e(I).length>0)return e(I);for(const s of t){const i=Number(s.nphi??s.NPHI??s.Nphi??NaN),u=Number(s.rhob??s.RHOB??s.Rhob??NaN);!isNaN(i)&&!isNaN(u)&&r.push({nphi:i,rhob:u})}return r}function Mt(){const t=e(q),r=[];for(const s of t){const i=Number(s.depth??s.DEPTH??NaN),u=Number(s.cpore??s.CPORE??s.Cpore??s.KPORE??s.kpore??NaN);!isNaN(i)&&!isNaN(u)&&u>0&&r.push({depth:i,CPORE:u})}return r.sort((s,i)=>s.depth-i.depth)}async function Vt(){const t=Oe();if(!t.length){o(b,"No NPHI/RHOB data available in well rows");return}o(g,!0),o(b,null);try{const r={dry_sand_point:[Number(e(J)),Number(e(K))],dry_clay_point:[Number(e(Z)),Number(e(G))],water_point:[Number(e(Q)),Number(e(X))],corr_angle:Number(e(Fe)),buffer:Number(e($e)),data:t},s=await fetch(`${z}/quick_pp/qaqc/hc_correction`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok)throw new Error(await s.text());o(I,await s.json()),o(A,!0),o(b,null),lt()}catch(r){console.warn("HC correction error",r),o(b,String(r?.message??r)),o(A,!1)}finally{o(g,!1)}}async function jt(){if(!P()||!C()){o(b,"Project and well must be selected before saving");return}if(!e(I)||e(I).length===0){o(b,"No HC corrected data to save");return}o(we,!0),o(Pe,null),o(b,null);try{const t=e(q),r=[];let s=0;for(const c of t){const N=Number(c.nphi??c.NPHI??c.Nphi??NaN),m=Number(c.rhob??c.RHOB??c.Rhob??NaN);if(!(!isNaN(N)&&!isNaN(m)))continue;const y=e(I)[s++]??{nphi:N,rhob:m},D={DEPTH:Number(c.depth??c.DEPTH??NaN),NPHI_HC:Number(y.nphi??N),RHOB_HC:Number(y.rhob??m)};r.push(D)}if(!r.length)throw new Error("No rows prepared for save");const i={data:r},u=`${z}/quick_pp/database/projects/${P()}/wells/${encodeURIComponent(String(C()))}/data`,l=await fetch(u,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!l.ok)throw new Error(await l.text());const f=await l.json().catch(()=>null);o(Pe,f&&f.message?String(f.message):"HC corrected data saved");try{window.dispatchEvent(new CustomEvent("qpp:data-updated",{detail:{projectId:P(),wellName:C(),kind:"hc-correction"}}))}catch{}}catch(t){console.warn("Save HC correction error",t),o(Pe,null),o(b,String(t?.message??t))}finally{o(we,!1)}}async function At(){const t=Oe();if(!t.length){o(b,"No NPHI/RHOB data available in well rows");return}o(g,!0),o(b,null);try{const r={dry_sand_point:[Number(e(J)),Number(e(K))],fluid_point:[Number(e(Q)),Number(e(X))],dry_clay_point:[Number(e(Z)),Number(e(G))],method:"default",silt_line_angle:Number(e(ee)),data:t},s=await fetch(`${z}/quick_pp/lithology/ssc`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok)throw new Error(await s.text());Le=await s.json(),zt()}catch(r){console.warn("SSC error",r),o(b,String(r?.message??r))}finally{o(g,!1)}}async function Bt(){if(!P()||!C()){o(b,"Project and well must be selected before saving");return}if(!Le||Le.length===0){o(b,"No lithology results to save");return}o(ge,!0),o(Ne,null),o(b,null);try{const t=e(te).map(l=>({DEPTH:l.depth,VSAND:Math.min(Math.max(Number(l.VSAND??0),0),1),VSILT:Math.min(Math.max(Number(l.VSILT??0),0),1),VCLAY:Math.min(Math.max(Number(l.VCLAY??0),0),1)}));if(!t.length)throw new Error("No rows prepared for save");const r={data:t},s=`${z}/quick_pp/database/projects/${P()}/wells/${encodeURIComponent(String(C()))}/data`,i=await fetch(s,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!i.ok)throw new Error(await i.text());const u=await i.json().catch(()=>null);o(Ne,u&&u.message?String(u.message):"Lithology saved");try{window.dispatchEvent(new CustomEvent("qpp:data-updated",{detail:{projectId:P(),wellName:C(),kind:"lithology"}}))}catch{}}catch(t){console.warn("Save lithology error",t),o(Ne,null),o(b,String(t?.message??t))}finally{o(ge,!1)}}async function Ft(){const t=Oe();if(!t.length){o(b,"No NPHI/RHOB data available in well rows");return}o(g,!0),o(b,null);try{const r={dry_sand_point:[Number(e(J)),Number(e(K))],fluid_point:[Number(e(Q)),Number(e(X))],dry_clay_point:[Number(e(Z)),Number(e(G))],silt_line_angle:Number(e(ee)),method:"ssc",data:t},s=await fetch(`${z}/quick_pp/porosity/neu_den`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok)throw new Error(await s.text());Ce=await s.json(),qt()}catch(r){console.warn("Poro error",r),o(b,String(r?.message??r))}finally{o(g,!1)}}async function $t(){if(!P()||!C()){o(b,"Project and well must be selected before saving");return}if(!Ce||Ce.length===0){o(b,"No porosity results to save");return}o(xe,!0),o(_e,null),o(b,null);try{const t=e(q),r=[];let s=0;for(const c of t){const N=Number(c.nphi??c.NPHI??c.Nphi??NaN),m=Number(c.rhob??c.RHOB??c.Rhob??NaN);if(!(!isNaN(N)&&!isNaN(m)))continue;const y=Ce[s++]??{},D=Math.min(Math.max(Number(y.PHIT??0),0),1),ne=y.PHIE!==void 0?Number(y.PHIE):y.PHIE??null,pe=ne!==null&&!isNaN(Number(ne))?Math.min(Math.max(Number(ne),0),1):null,Se={DEPTH:Number(c.depth??c.DEPTH??NaN),PHIT:D,PHIE:pe};pe!==null&&(Se.PHIE=pe),r.push(Se)}if(!r.length)throw new Error("No rows prepared for save");const i={data:r},u=`${z}/quick_pp/database/projects/${P()}/wells/${encodeURIComponent(String(C()))}/data`,l=await fetch(u,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!l.ok)throw new Error(await l.text());const f=await l.json().catch(()=>null);o(_e,f&&f.message?String(f.message):"Porosity saved");try{window.dispatchEvent(new CustomEvent("qpp:data-updated",{detail:{projectId:P(),wellName:C(),kind:"porosity"}}))}catch{}}catch(t){console.warn("Save porosity error",t),o(_e,null),o(b,String(t?.message??t))}finally{o(xe,!1)}}function zt(){const t=e(q),r=[];let s=0;for(const i of t){const u=Number(i.depth??i.DEPTH??NaN);if(isNaN(u))continue;const l=Number(i.nphi??i.NPHI??i.Nphi??NaN),f=Number(i.rhob??i.RHOB??i.Rhob??NaN);if(!isNaN(l)&&!isNaN(f)){const N=Le[s++]??{VSAND:null,VSILT:null,VCLAY:null},m=Math.min(Math.max(Number(N.VSAND??0),0),1),H=Math.min(Math.max(Number(N.VSILT??0),0),1),y=Math.min(Math.max(Number(N.VCLAY??0),0),1);r.push({depth:u,VSAND:m,VSILT:H,VCLAY:y})}}r.sort((i,u)=>i.depth-u.depth),o(te,r)}function qt(){const t=e(q),r=[];let s=0;for(const i of t){const u=Number(i.depth??i.DEPTH??NaN);if(isNaN(u))continue;const l=Number(i.nphi??i.NPHI??i.Nphi??NaN),f=Number(i.rhob??i.RHOB??i.Rhob??NaN);if(!isNaN(l)&&!isNaN(f)){const N=Ce[s++]??{PHIT:null,PHIE:null},m=Math.min(Math.max(Number(N.PHIT??0),0),1),H=N.PHIE!==void 0?Number(N.PHIE):N.PHIE??null,y=H!==null&&!isNaN(Number(H))?Math.min(Math.max(Number(H),0),1):null,D={depth:u,PHIT:m};y!==null&&(D.PHIE=y),r.push(D)}}r.sort((i,u)=>i.depth-u.depth),o(E,r),o(O,Mt())}const Yt=Et.subscribe(t=>{t?.depthFilter&&o(L,{...t.depthFilter}),t?.zoneFilter&&o(ye,{...t.zoneFilter})});kt(()=>{Yt()});let Ue=p("");B(()=>e(ee),()=>{o(U,1-1.68*Math.tan((e(ee)-90)*Math.PI/180))}),B(()=>e(te),()=>{o(T,e(te).map(t=>({x:t.depth,vclay:t.VCLAY,vsilt:t.VCLAY+t.VSILT,vsand:t.VCLAY+t.VSILT+t.VSAND})))}),B(()=>e(E),()=>{o($,e(E).map(t=>({x:t.depth,y:t.PHIT})))}),B(()=>e(E),()=>{o(j,e(E).map(t=>({x:t.depth,y:t.PHIE})).filter(t=>t.y!==void 0&&t.y!==null&&!isNaN(Number(t.y))))}),B(()=>e(O),()=>{o(W,e(O).map(t=>({x:t.depth,y:t.CPORE})))}),B(()=>(e(He),e(L),e(ye)),()=>{o(q,(()=>{let t=e(He)||[];return t=Da(t,e(L)),t=Ta(t,e(ye)),t})())}),B(()=>(k(P()),k(C()),e(Ue)),()=>{const t=`${P()}_${C()}`;P()&&C()&&t!==e(Ue)&&(o(Ue,t),Ot())}),B(()=>(e(se),e(q),e(J),e(K),e(Z),e(G),e(U),e(Q),e(X),e(ee),e(L),e(ye),e(A),e(I),e(Ee)),()=>{e(se)&&(e(q)||e(J)!==void 0||e(K)!==void 0||e(Z)!==void 0||e(G)!==void 0||e(U)!==void 0||e(Q)!==void 0||e(X)!==void 0||e(ee)!==void 0||e(L)||e(ye)||e(A)||e(I))&&(e(Ee)&&clearTimeout(e(Ee)),o(Ee,setTimeout(()=>lt(),150)))}),B(()=>(e(ae),e(te),e(L),e(De)),()=>{e(ae)&&(e(te)||e(L))&&(e(De)&&clearTimeout(e(De)),o(De,setTimeout(()=>Tt(),150)))}),B(()=>(e(oe),e(E),e(O),e(L),e(ue),e(Te)),()=>{e(oe)&&(e(E)||e(O)||e(L)||e(ue)!==void 0)&&(e(Te)&&clearTimeout(e(Te)),o(Te,setTimeout(()=>Lt(),150)))}),Ra(),It();var We=Qa(),dt=d(v(We),2);La(dt,{});var Ut=d(dt,2);{var Wt=t=>{var r=Za(),s=v(r),i=v(s),u=d(v(i),2);V(u),h(i);var l=d(i,2),f=d(v(l),2);V(f),h(l);var c=d(l,2),N=d(v(c),2);V(N),h(c);var m=d(c,2),H=d(v(m),2);V(H),h(m);var y=d(m,2),D=d(v(y),2);V(D),h(y);var ne=d(y,2),pe=d(v(ne),2);V(pe),h(ne);var Se=d(ne,2),ct=d(v(Se),2);V(ct),h(Se),h(s);var ut=d(s,2);{var Kt=a=>{var n=Va(),w=v(n);h(n),re(()=>ce(w,`Error: ${e(b)??""}`)),x(a,n)};R(ut,a=>{e(b)&&a(Kt)})}var pt=d(ut,2),vt=v(pt),Je=v(vt),ht=d(v(Je),2),Zt=v(ht);nt(Zt,a=>o(se,a),()=>e(se)),h(ht),h(Je);var Ke=d(Je,2),mt=d(v(Ke),2),Ze=v(mt),Ge=v(Ze),ft=d(v(Ge),2);V(ft),h(Ge);var bt=d(Ge,2),yt=d(v(bt),2);V(yt),h(bt),h(Ze);var Qe=d(Ze,2),ve=v(Qe);ve.__click=Vt;var Gt=v(ve);{var Qt=a=>{var n=ie("Applying...");x(a,n)},Xt=a=>{var n=ie("Apply HC Correction");x(a,n)};R(Gt,a=>{e(g)?a(Qt):a(Xt,!1)})}h(ve);var ke=d(ve,2);ke.__click=jt;var ea=v(ke);{var ta=a=>{var n=ie("Saving...");x(a,n)},aa=a=>{var n=ie("Save HC Data");x(a,n)};R(ea,a=>{e(we)?a(ta):a(aa,!1)})}h(ke),h(Qe);var Xe=d(Qe,2),Me=v(Xe);V(Me);var oa=d(Me,2);h(Xe);var gt=d(Xe,2);{var ra=a=>{var n=ja(),w=v(n,!0);h(n),re(()=>ce(w,e(Pe))),x(a,n)};R(gt,a=>{e(Pe)&&a(ra)})}var ia=d(gt,2);{var sa=a=>{var n=Aa(),w=v(n);h(n),re(()=>ce(w,`HC correction applied. ${e(I),_(()=>e(I).length)??""} points corrected. Red diamond markers show corrected data in plot above.`)),x(a,n)};R(ia,a=>{e(A)&&a(sa)})}h(mt),h(Ke);var et=d(Ke,2),xt=d(v(et),2),Ve=v(xt);Ve.__click=At;var he=d(Ve,2);he.__click=Bt;var na=v(he);{var la=a=>{var n=ie("Saving...");x(a,n)},da=a=>{var n=ie("Save Lithology");x(a,n)};R(na,a=>{e(ge)?a(la):a(da,!1)})}h(he);var tt=d(he,2),ca=v(tt);{var ua=a=>{var n=Ba();nt(n,w=>o(ae,w),()=>e(ae)),x(a,n)},pa=a=>{var n=Fa();x(a,n)};R(ca,a=>{e(te),_(()=>e(te).length>0)?a(ua):a(pa,!1)})}h(tt);var va=d(tt,2);{var ha=a=>{var n=$a(),w=v(n,!0);h(n),re(()=>ce(w,e(Ne))),x(a,n)};R(va,a=>{e(Ne)&&a(ha)})}h(xt),h(et);var Nt=d(et,2),at=d(v(Nt),2),je=v(at);je.__click=Ft;var me=d(je,2);me.__click=$t;var ma=v(me);{var fa=a=>{var n=ie("Saving...");x(a,n)},ba=a=>{var n=ie("Save Porosity");x(a,n)};R(ma,a=>{e(xe)?a(fa):a(ba,!1)})}h(me);var ot=d(me,2),Ae=v(ot);V(Ae);var ya=d(Ae,2);h(ot);var rt=d(ot,2),ga=v(rt);{var xa=a=>{var n=za();nt(n,w=>o(oe,w),()=>e(oe)),x(a,n)},Na=a=>{var n=qa();x(a,n)};R(ga,a=>{e(E),e(O),_(()=>e(E).length>0||e(O).length>0)?a(xa):a(Na,!1)})}h(rt);var _a=d(rt,2);{var wa=a=>{var n=Ya(),w=v(n,!0);h(n),re(()=>ce(w,e(_e))),x(a,n)};R(_a,a=>{e(_e)&&a(wa)})}h(at);var _t=d(at,2),wt=v(_t);{var Pa=a=>{const n=F(()=>(e(E),_(()=>e(E).map(M=>M.PHIT)))),w=F(()=>(k(e(n)),_(()=>e(n).reduce((M,de)=>M+de,0)/e(n).length))),Ie=F(()=>(k(e(n)),_(()=>Math.min(...e(n))))),Re=F(()=>(k(e(n)),_(()=>Math.max(...e(n)))));var le=Ua(),it=d(v(le));h(le),re((M,de,st)=>ce(it,` Avg: ${M??""} | Min: ${de??""} | Max: ${st??""} | Count: ${k(e(n)),_(()=>e(n).length)??""}`),[()=>(k(e(w)),_(()=>e(w).toFixed(3))),()=>(k(e(Ie)),_(()=>e(Ie).toFixed(3))),()=>(k(e(Re)),_(()=>e(Re).toFixed(3)))]),x(a,le)},Ha=a=>{var n=Wa();x(a,n)};R(wt,a=>{e(E),_(()=>e(E).length>0)?a(Pa):a(Ha,!1)})}var Ca=d(wt,2);{var Sa=a=>{const n=F(()=>(e(O),_(()=>e(O).map(M=>M.CPORE)))),w=F(()=>(k(e(n)),_(()=>e(n).reduce((M,de)=>M+de,0)/e(n).length))),Ie=F(()=>(k(e(n)),_(()=>Math.min(...e(n))))),Re=F(()=>(k(e(n)),_(()=>Math.max(...e(n)))));var le=Ja(),it=d(v(le),3);h(le),re((M,de,st)=>ce(it,` Avg: ${M??""} | Min: ${de??""} | Max: ${st??""} | Count: ${k(e(n)),_(()=>e(n).length)??""}`),[()=>(k(e(w)),_(()=>e(w).toFixed(3))),()=>(k(e(Ie)),_(()=>e(Ie).toFixed(3))),()=>(k(e(Re)),_(()=>e(Re).toFixed(3)))]),x(a,le)},ka=a=>{var n=Ka();x(a,n)};R(Ca,a=>{e(O),_(()=>e(O).length>0)?a(Sa):a(ka,!1)})}h(_t),h(Nt),h(vt),h(pt),h(r),re(()=>{ve.disabled=e(g),fe(ve,e(g)?"opacity:0.5; pointer-events:none;":""),ke.disabled=e(g)||e(we)||!e(A),fe(ke,e(g)||e(we)||!e(A)?"opacity:0.5; pointer-events:none;":""),Me.disabled=e(g)||!e(A),Ht(oa,1,`text-sm cursor-pointer ${e(g)||!e(A)?"opacity-50":""}`),Ve.disabled=e(g),fe(Ve,e(g)?"opacity:0.5; pointer-events:none;":""),he.disabled=e(g)||e(ge),fe(he,e(g)||e(ge)?"opacity:0.5; pointer-events:none;":""),je.disabled=e(g),fe(je,e(g)?"opacity:0.5; pointer-events:none;":""),me.disabled=e(g)||e(xe),fe(me,e(g)||e(xe)?"opacity:0.5; pointer-events:none;":""),Ae.disabled=e(g),Ht(ya,1,`text-sm cursor-pointer ${e(g)?"opacity-50":""}`)}),Y(u,()=>e(J),a=>o(J,a)),Y(f,()=>e(K),a=>o(K,a)),Y(N,()=>e(Z),a=>o(Z,a)),Y(H,()=>e(G),a=>o(G,a)),Y(D,()=>e(Q),a=>o(Q,a)),Y(pe,()=>e(X),a=>o(X,a)),Y(ct,()=>e(ee),a=>o(ee,a)),Y(ft,()=>e(Fe),a=>o(Fe,a)),Y(yt,()=>e($e),a=>o($e,a)),Ct(Me,()=>e(ze),a=>o(ze,a)),Ct(Ae,()=>e(ue),a=>o(ue,a)),x(t,r)},Jt=t=>{var r=Ga();x(t,r)};R(Ut,t=>{C()?t(Wt):t(Jt,!1)})}h(We),x(Be,We),Rt()}Ia(["click"]);var eo=S('<div slot="left"><!></div>');function no(Be,be){St(be,!1);let U=p(null),T=p(null);const $=Et.subscribe(j=>{o(U,j?.project??null),o(T,j?.selectedWell??null)});kt(()=>$()),It(),Oa(Be,{get selectedWell(){return e(T)},get project(){return e(U)},$$slots:{left:(j,W)=>{var P=eo(),C=v(P);{let z=F(()=>e(U)?.project_id??""),L=F(()=>e(T)?.name??"");Xa(C,{get projectId(){return e(z)},get wellName(){return e(L)}})}h(P),x(j,P)}}}),Rt()}export{no as component,so as universal};

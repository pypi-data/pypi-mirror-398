[build-system]
# setuptools 61.0 broke, see !488
requires = ["setuptools >=62", "wheel", "Cython"]
build-backend = "setuptools.build_meta"

[tool.ruff]
line-length = 100
target-version = "py310"
extend-exclude = ["tests", "__init__.py", "clease/gui/*", "__pycache__"]

[tool.ruff.lint]
select = ["E", "F", "NPY", "RUF", "I", "UP"]
ignore = [
    "E402",  # Allow module level import not at top of file
    "N802",  # Allow class names to start with an underscore
    "N803",  # Allow function names to start with an underscore
    "N806",   # Allow function names to start with an underscore
    "NPY002", # Checks for the use of legacy np.random function calls.
    "NPY201", # Checks for deprecated function calls removed in NumPy 2.0.
    "RUF012", # Mutable class attributes should be annotated with typing.ClassVar
    "RUF015", # Prefer next({iterable}) over single element slice
    "RUF022", #  `__all__` is not sorted
]

[tool.ruff.lint.per-file-ignores]
"__init__.py" = ["F401", "F403", "F405"]

[tool.ruff.lint.isort]
force-sort-within-sections = true

[tool.cibuildwheel]
# Documentation: https://cibuildwheel.pypa.io/en/stable/options/#options
# cibuildwheel automatically reads the supported Python versions from setup.cfg

environment = "CLEASE_OMP='-fopenmp'"
skip = ["cp3??t-*"]  # Disable free-threading builds
build = "cp*"  # Must be CPython
archs = ["auto"]

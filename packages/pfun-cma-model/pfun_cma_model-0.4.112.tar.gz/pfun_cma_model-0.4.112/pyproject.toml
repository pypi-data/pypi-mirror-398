[project]
name = "pfun-cma-model"
urls = { homepage = "https://github.com/rocapp/pfun-cma-model" }
version = "0.4.112"
description = "A Python package for the Physiofunctional CMA model, a generative model that functionally replicates neuroendocrine dynamics."
authors = [{name = "Robbie Capps", email = "robbie@pfun.me"}]
readme = "README.md" # Additional properties are not allowed ('package' was unexpected)
requires-python = "==3.12.*" # Additional properties are not allowed (package' was unexpected)

dependencies = [
    "setuptools>=78.1.1",
    "pandas>=2.1.1",
    "scipy>=1.11.3",
    "matplotlib>=3.8.0",
    "pydantic==2.4.2",
    "click>=8.1.7",
    "pfun_path_helper>=0.1.4",
    "boto3>=1.28.57",
    "botocore>=1.31.57",
    "jinja2>=3.1.2",
    "gunicorn>=23.0.0",
    "PyYAML>=6.0.1",
    "graphql-core>=3.2.3",
    "scikit-learn>=1.3.2",
    "tabulate>=0.9.0",
    "requests>=2.32.4",
    "pyarrow>=20.0.0",
    "ipykernel>=6.29.5",
    "websockets>=15.0.1",
    "fastapi==0.116.1",
    "redis>=6.4.0",
    "python-socketio>=5.13.0",
    "boto3-stubs[essential]>=1.40.7",
    "botocore-stubs>=1.38.46",
    "python-socketio-stubs>=5.13.0.12.20250809",
    "aioredis>=2.0.1",
    "mss>=10.1.0",
    "pip>=25.1.1",
    "numpy>=2.2.6",
    "flask>=3.0.3",
    "flask-oauthlib>=0.9.6",
    "dotenv>=0.9.9",
    "seaborn>=0.13.2",
    "pydantic-settings>=2.2.1",
    "pfun-common",
    "pfun-gradio",
    "pfun-data",
    "numba>=0.63.1",
]
optional-dependencies = { ui = ["dash>=2.18.2","plotly>=5.18.0",], dev = [
        "click>=8.1.7",
        "pytest>=6.0",
        "ipykernel>=6.25.2",
        "ipython>=8.16.1",
        "zappa>=0.58.0",
        "tox-poetry-installer>=0.10.3",
        "notebook>=7.4.3",
        "fastapi[standard]>=0.115.12",
        "pandas-stubs>=2.2.3.250527",
        "types-requests>=2.32.4.20250611",
        "types-tabulate>=0.9.0.20241207",
        "dash>=3.0.4",
], numba = [
   "numba>=0.58.0",
], cext = [
    # c extension is compiled
]}

[project.scripts]
pfun-cma-model = "pfun_cma_model.cli:cli"

[build-system]
requires = ["hatchling", "wheel", "setuptools"]
build-backend = "hatchling.build"

[dependency-groups]
# Development dependencies
dev = [
    "dash>=3.0.4",
    "dash-html-components>=2.0.0",
    "dotenv>=0.9.9",
    "fastapi[standard]>=0.115.12",
    "ipykernel>=6.29.5",
    "ipython>=8.37.0",
    "mypy>=1.18.1",
    "nbconvert>=7.16.6",
    "openapi-generator-cli[jdk4py]>=7.17.0",
    "pandas-stubs>=2.2.3.250527",
    "types-requests>=2.32.4.20250611",
    "types-tabulate>=0.9.0.20241207",
]
# Google-related dependencies
google = [
    "google>=3.0.0",
    "google-genai>=1.36.0"
]
# Perplexity-related dependencies
perplexity = [
    "perplexityai>=0.22.0",
]
# gradio UI dependencies
gradio = [
    "gradio>=5.50.0",
]

# setuptools configurations
[tool.setuptools]
include-package-data = true
packages = [
    "pfun_cma_model", "pfun_cma_model.engine",
    "pfun_llm",
    "pfun_common", "pfun_common.utils", "pfun_common.settings",
    "pfun-gradio"
]
# package_data
[tool.setuptools.package-data]
pfun_data = ["*.csv"]

[tool.setuptools.ext_modules]
# This defines the compiled module (pfun-cma-engine)
[tool.setuptools.ext_modules.pfun_cma_engine]
sources = ["pfun_cma_model/engine/pfun_cma_engine.c"]
# Enable optimization + native CPU instructions
extra_compile_args = ["-O3", "-march=native"]
# Build the module inside the Python package namespace
module_name = "pfun_cma_model.engine.pfun_cma_engine"
# Make the C extension optional (fail gracefully if build tools aren't available.)

[tool.uv.sources]
pfun-data = { url = "https://github.com/pfun-health/pfun-data/archive/refs/tags/0.1.3.tar.gz" }
pfun-gradio = { workspace = true }
pfun-common = { path = "./packages/pfun_common" }

[tool.uv.workspace]
members = [
    "pfun_gradio",
]

# generated by datamodel-codegen:
#   filename:  kaleidoswap.json
#   timestamp: 2025-12-22T23:19:38+00:00

from __future__ import annotations

from enum import Enum

from pydantic import AwareDatetime, BaseModel, ConfigDict, EmailStr, Field, RootModel


class AssetDeliveryStatus(Enum):
    not_required = 'NOT_REQUIRED'
    pending = 'PENDING'
    in_progress = 'IN_PROGRESS'
    completed = 'COMPLETED'
    failed = 'FAILED'
    rate_changed = 'RATE_CHANGED'


class AssetsOptions(BaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    name: str | None = Field('US Dollar Notes', title='Name')
    asset_id: str | None = Field(
        'rgb:$i4cFKwt-2C5LZ3X-l$kOTGN-O6l1AOP-aP9COyn-7IeBkEM', title='Asset Id'
    )
    ticker: str | None = Field('USDT', title='Ticker')
    precision: int | None = Field(6, title='Precision')
    issued_supply: int | None = Field(0, title='Issued Supply')
    min_initial_client_amount: int | None = Field(
        0, ge=0, title='Min Initial Client Amount'
    )
    max_initial_client_amount: int | None = Field(
        0, ge=0, title='Max Initial Client Amount'
    )
    min_initial_lsp_amount: int | None = Field(0, ge=0, title='Min Initial Lsp Amount')
    max_initial_lsp_amount: int | None = Field(
        10000, ge=0, title='Max Initial Lsp Amount'
    )
    min_channel_amount: int | None = Field(0, ge=0, title='Min Channel Amount')
    max_channel_amount: int | None = Field(10000, ge=0, title='Max Channel Amount')


class BitcoinNetwork(Enum):
    mainnet = 'Mainnet'
    testnet = 'Testnet'
    signet = 'Signet'
    regtest = 'Regtest'


class ChannelDetails(BaseModel):
    channel_id: str | None = Field(None, title='Channel Id')
    temporary_channel_id: str | None = Field(None, title='Temporary Channel Id')
    funded_at: AwareDatetime | None = Field(None, title='Funded At')
    funding_outpoint: str | None = Field(None, title='Funding Outpoint')
    expires_at: AwareDatetime | None = Field(None, title='Expires At')


class ChannelFees(BaseModel):
    setup_fee: int = Field(..., title='Setup Fee')
    capacity_fee: int = Field(..., title='Capacity Fee')
    duration_fee: int = Field(..., title='Duration Fee')
    total_fee: int = Field(..., title='Total Fee')
    applied_discount: float | None = Field(None, title='Applied Discount')
    discount_code: str | None = Field(None, title='Discount Code')


class ConfirmSwapRequest(BaseModel):
    swapstring: str = Field(
        ...,
        examples=[
            '30/rgb:2dkSTbr-jFhznbPmo-TQafzswCN-av4gTsJjX-ttx6CNou5-M98k8Zd/10/rgb:2eVw8uw-8G88LQ2tQ-kexM12SoD-nCX8DmQrw-yLMu6JDfK-xx1SCfc/1715896416/9d342c6ba006e24abee84a2e034a22d5e30c1f2599fb9c3574d46d3cde3d65a2'
        ],
        title='Swapstring',
    )
    taker_pubkey: str = Field(
        ...,
        examples=['034eedc97802d7e2766704bd06d6bfded8aa2d35a1a007e277fd7278f3dc962706'],
        title='Taker Pubkey',
    )
    payment_hash: str = Field(
        ...,
        examples=['9d342c6ba006e24abee84a2e034a22d5e30c1f2599fb9c3574d46d3cde3d65a2'],
        title='Payment Hash',
    )


class ConfirmSwapResponse(BaseModel):
    status: int = Field(..., examples=[200], title='Status')
    message: str = Field(..., examples=['Swap executed successfully.'], title='Message')


class CreateOrderRequest(BaseModel):
    client_pubkey: str = Field(..., title='Client Pubkey')
    lsp_balance_sat: int = Field(..., ge=0, title='Lsp Balance Sat')
    client_balance_sat: int = Field(..., ge=0, title='Client Balance Sat')
    required_channel_confirmations: int = Field(
        ..., ge=0, title='Required Channel Confirmations'
    )
    funding_confirms_within_blocks: int = Field(
        ..., ge=1, title='Funding Confirms Within Blocks'
    )
    channel_expiry_blocks: int = Field(..., ge=1, title='Channel Expiry Blocks')
    token: str | None = Field(None, title='Token')
    refund_onchain_address: str | None = Field(None, title='Refund Onchain Address')
    announce_channel: bool | None = Field(True, title='Announce Channel')
    asset_id: str | None = Field(None, title='Asset Id')
    lsp_asset_amount: int | None = Field(None, title='Lsp Asset Amount')
    client_asset_amount: int | None = Field(None, title='Client Asset Amount')
    rfq_id: str | None = Field(None, title='Rfq Id')
    email: str | None = Field(
        None, description='Optional email for notifications', title='Email'
    )


class Fee(BaseModel):
    base_fee: int = Field(..., examples=[1000000], title='Base Fee')
    variable_fee: int = Field(..., examples=[1000000], title='Variable Fee')
    fee_rate: float = Field(..., examples=[0.0001], title='Fee Rate')
    final_fee: int = Field(..., examples=[2000000], title='Final Fee')
    fee_asset: str = Field(
        ...,
        examples=['rgb:2dkSTbr-jFhznbPmo-TQafzswCN-av4gTsJjX-ttx6CNou5-M98k8Zd'],
        title='Fee Asset',
    )
    fee_asset_precision: int = Field(..., examples=[6], title='Fee Asset Precision')


class GetOrderRequest(BaseModel):
    order_id: str = Field(..., title='Order Id')


class Layer(Enum):
    btc_l1 = 'BTC_L1'
    btc_ln = 'BTC_LN'
    btc_spark = 'BTC_SPARK'
    btc_arkade = 'BTC_ARKADE'
    btc_liquid = 'BTC_LIQUID'
    btc_cashu = 'BTC_CASHU'
    rgb_l1 = 'RGB_L1'
    rgb_ln = 'RGB_LN'
    tapass_l1 = 'TAPASS_L1'
    tapass_ln = 'TAPASS_LN'
    liquid_liquid = 'LIQUID_LIQUID'
    arkade_arkade = 'ARKADE_ARKADE'
    spark_spark = 'SPARK_SPARK'


class Media(BaseModel):
    file_path: str = Field(..., examples=['/path/to/media'], title='File Path')
    digest: str = Field(
        ...,
        examples=['5891b5b522d5df086d0ff0b110fbd9d21bb4fc7163af34d08286a2e846f6be03'],
        title='Digest',
    )
    mime: str = Field(..., examples=['text/plain'], title='Mime')


class NetworkInfoResponse(BaseModel):
    network: BitcoinNetwork
    height: int = Field(..., examples=[805434], title='Height')


class MinOnchainPaymentConfirmations(RootModel[int]):
    root: int = Field(..., ge=0, title='Min Onchain Payment Confirmations')


class OrderOptions(BaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    min_required_channel_confirmations: int | None = Field(
        0, ge=0, title='Min Required Channel Confirmations'
    )
    min_funding_confirms_within_blocks: int | None = Field(
        0, ge=0, title='Min Funding Confirms Within Blocks'
    )
    min_onchain_payment_confirmations: MinOnchainPaymentConfirmations | None = Field(
        None, title='Min Onchain Payment Confirmations'
    )
    supports_zero_channel_reserve: bool | None = Field(
        True, title='Supports Zero Channel Reserve'
    )
    min_onchain_payment_size_sat: int | None = Field(
        None, title='Min Onchain Payment Size Sat'
    )
    max_channel_expiry_blocks: int | None = Field(
        20160, ge=1, title='Max Channel Expiry Blocks'
    )
    min_initial_client_balance_sat: int | None = Field(
        0, ge=0, title='Min Initial Client Balance Sat'
    )
    max_initial_client_balance_sat: int | None = Field(
        1000000, ge=0, title='Max Initial Client Balance Sat'
    )
    min_initial_lsp_balance_sat: int | None = Field(
        0, ge=0, title='Min Initial Lsp Balance Sat'
    )
    max_initial_lsp_balance_sat: int | None = Field(
        16777215, ge=0, title='Max Initial Lsp Balance Sat'
    )
    min_channel_balance_sat: int | None = Field(
        50000, ge=0, title='Min Channel Balance Sat'
    )
    max_channel_balance_sat: int | None = Field(
        16777215, ge=0, title='Max Channel Balance Sat'
    )


class OrderState(Enum):
    created = 'CREATED'
    channel_opening = 'CHANNEL_OPENING'
    completed = 'COMPLETED'
    failed = 'FAILED'
    pending_rate_decision = 'PENDING_RATE_DECISION'


class OrderStatsResponse(BaseModel):
    status_counts: dict[str, int] = Field(
        ..., description='Count of orders by status', title='Status Counts'
    )
    filled_orders_volume: int = Field(
        ..., description='Total volume of filled orders', title='Filled Orders Volume'
    )
    filled_orders_count: int = Field(
        ..., description='Total count of filled orders', title='Filled Orders Count'
    )


class PaginationMeta(BaseModel):
    total: int = Field(
        ..., description='Total number of items matching the filter', title='Total'
    )
    limit: int = Field(..., description='Number of items per page', title='Limit')
    skip: int = Field(..., description='Number of items skipped', title='Skip')
    current_page: int = Field(
        ..., description='Current page number (1-indexed)', title='Current Page'
    )
    total_pages: int = Field(
        ..., description='Total number of pages', title='Total Pages'
    )
    has_next: bool = Field(
        ..., description='Whether there is a next page', title='Has Next'
    )
    has_previous: bool = Field(
        ..., description='Whether there is a previous page', title='Has Previous'
    )


class PaymentState(Enum):
    expect_payment = 'EXPECT_PAYMENT'
    hold = 'HOLD'
    paid = 'PAID'
    refunded = 'REFUNDED'
    to_refund = 'TO_REFUND'


class PaymentStatus(Enum):
    not_paid = 'NOT_PAID'
    underpaid = 'UNDERPAID'
    paid = 'PAID'
    overpaid = 'OVERPAID'


class RateDecisionRequest(BaseModel):
    order_id: str = Field(..., title='Order Id')
    accept_new_rate: bool = Field(..., title='Accept New Rate')


class RateDecisionResponse(BaseModel):
    order_id: str = Field(..., title='Order Id')
    decision_accepted: bool = Field(..., title='Decision Accepted')
    message: str = Field(..., title='Message')
    refund_txid: str | None = Field(None, title='Refund Txid')


class ReachabilityCell(BaseModel):
    from_asset: str = Field(..., description='Source asset ticker', title='From Asset')
    to_asset: str = Field(..., description='Destination asset ticker', title='To Asset')
    layers: list[str] = Field(
        ...,
        description="Available layer combinations (e.g., 'RGB_LN->BTC_SPARK')",
        title='Layers',
    )
    min_hops: int = Field(
        ..., description='Minimum number of hops required', title='Min Hops'
    )


class ReachabilityMatrixResponse(BaseModel):
    matrix: list[ReachabilityCell] = Field(
        ..., description='Reachability cells', title='Matrix'
    )
    assets: list[str] = Field(
        ..., description='All assets in the matrix', title='Assets'
    )
    timestamp: int = Field(..., description='Response timestamp', title='Timestamp')


class ReceiverAddressFormat(Enum):
    btc_address = 'BTC_ADDRESS'
    bolt11 = 'BOLT11'
    bolt12 = 'BOLT12'
    ln_address = 'LN_ADDRESS'
    rgb_invoice = 'RGB_INVOICE'
    liquid_address = 'LIQUID_ADDRESS'
    liquid_invoice = 'LIQUID_INVOICE'
    spark_address = 'SPARK_ADDRESS'
    spark_invoice = 'SPARK_INVOICE'
    arkade_address = 'ARKADE_ADDRESS'
    arkade_invoice = 'ARKADE_INVOICE'
    cashu_token = 'CASHU_TOKEN'


class RetryDeliveryRequest(BaseModel):
    order_id: str = Field(
        ..., description='Order ID to retry asset delivery for', title='Order Id'
    )


class RetryDeliveryStatus(Enum):
    processing = 'processing'
    not_found = 'not_found'
    no_pending_delivery = 'no_pending_delivery'
    error = 'error'


class IndicativePrice(RootModel[str]):
    model_config = ConfigDict(
        regex_engine="python-re",
    )
    root: str = Field(
        ...,
        description='Indicative price from cached pair data',
        pattern='^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$',
        title='Indicative Price',
    )


class RouteStep(BaseModel):
    from_asset: str = Field(..., description='Source asset ticker', title='From Asset')
    from_layer: Layer = Field(..., description='Source layer')
    to_asset: str = Field(..., description='Destination asset ticker', title='To Asset')
    to_layer: Layer = Field(..., description='Destination layer')
    pair_ticker: str = Field(
        ..., description="Trading pair ticker (e.g., 'USDT/BTC')", title='Pair Ticker'
    )
    indicative_price: IndicativePrice | None = Field(
        None,
        description='Indicative price from cached pair data',
        title='Indicative Price',
    )


class RoutesRequest(BaseModel):
    from_asset: str = Field(
        ..., description='Source asset ticker or ID', title='From Asset'
    )
    from_layer: Layer | None = Field(
        None, description='Filter by source layer (optional)'
    )
    to_asset: str | None = Field(
        None,
        description='Destination asset (if None, returns all reachable assets)',
        title='To Asset',
    )
    to_layer: Layer | None = Field(
        None, description='Filter by destination layer (optional)'
    )
    max_hops: int | None = Field(
        2, description='Maximum number of hops (1-5)', ge=1, le=5, title='Max Hops'
    )


class SwapLeg(BaseModel):
    asset_id: str = Field(
        ...,
        description="Unique identifier for the asset (e.g., 'BTC', RGB contract ID, etc.)",
        title='Asset Id',
    )
    name: str = Field(
        ..., description='Full name of the asset', examples=['Bitcoin'], title='Name'
    )
    ticker: str = Field(
        ...,
        description="Asset ticker symbol for display (e.g., 'BTC', 'USDT', 'EURX')",
        examples=['BTC'],
        title='Ticker',
    )
    layer: Layer = Field(..., description="Settlement layer (e.g., 'BTC_LN', 'RGB_L1')")
    amount: int = Field(
        ...,
        description='Amount of the asset in smallest unit. Must be greater than or equal to zero.',
        examples=[100000],
        ge=0,
        title='Amount',
    )
    precision: int = Field(
        ...,
        description='Number of decimal places for this asset (e.g., 8 for BTC, 6 or 8 for stablecoins)',
        examples=[8],
        ge=0,
        le=18,
        title='Precision',
    )


class SwapLegInput(BaseModel):
    asset_id: str = Field(
        ...,
        description="Asset identifier (e.g., 'BTC', RGB contract ID)",
        examples=['BTC'],
        title='Asset Id',
    )
    layer: Layer = Field(
        ...,
        description="Settlement layer (e.g., 'BTC_LN', 'RGB_L1')",
        examples=['BTC_LN'],
    )
    amount: int | None = Field(
        None,
        description='Amount in smallest unit (optional - one side must have amount)',
        examples=[1000000],
        title='Amount',
    )


class SwapNodeInfoResponse(BaseModel):
    pubkey: str | None = Field(
        ...,
        examples=['034eedc97802d7e2766704bd06d6bfded8aa2d35a1a007e277fd7278f3dc962706'],
        title='Pubkey',
    )
    network: str | None = Field(..., examples=['Signet'], title='Network')
    block_height: int | None = Field(..., examples=[805434], title='Block Height')


class SwapOrderRateDecisionRequest(BaseModel):
    order_id: str = Field(..., description='Swap order ID', title='Order Id')
    accept_new_rate: bool = Field(
        ...,
        description='True to accept new rate, False to request refund',
        title='Accept New Rate',
    )


class SwapOrderRateDecisionResponse(BaseModel):
    order_id: str = Field(..., title='Order Id')
    decision_accepted: bool = Field(..., title='Decision Accepted')
    message: str = Field(..., title='Message')
    refund_txid: str | None = Field(
        None,
        description='Present if refund was requested and processed',
        title='Refund Txid',
    )


class SwapOrderStatus(Enum):
    open = 'OPEN'
    pending_payment = 'PENDING_PAYMENT'
    paid = 'PAID'
    executing = 'EXECUTING'
    filled = 'FILLED'
    cancelled = 'CANCELLED'
    expired = 'EXPIRED'
    failed = 'FAILED'
    pending_rate_decision = 'PENDING_RATE_DECISION'


class SwapOrderStatusRequest(BaseModel):
    order_id: str = Field(..., title='Order Id')


class SwapRequest(BaseModel):
    rfq_id: str = Field(..., examples=['1234567890'], title='Rfq Id')
    from_asset: str = Field(..., examples=['BTC'], title='From Asset')
    from_amount: int = Field(..., examples=[1000000], title='From Amount')
    to_asset: str = Field(
        ...,
        examples=['rgb:2dkSTbr-jFhznbPmo-TQafzswCN-av4gTsJjX-ttx6CNou5-M98k8Zd'],
        title='To Asset',
    )
    to_amount: int = Field(..., examples=[1000000], title='To Amount')


class SwapResponse(BaseModel):
    swapstring: str = Field(
        ...,
        examples=[
            '30/rgb:2dkSTbr-jFhznbPmo-TQafzswCN-av4gTsJjX-ttx6CNou5-M98k8Zd/10/rgb:2eVw8uw-8G88LQ2tQ-kexM12SoD-nCX8DmQrw-yLMu6JDfK-xx1SCfc/1715896416/9d342c6ba006e24abee84a2e034a22d5e30c1f2599fb9c3574d46d3cde3d65a2'
        ],
        title='Swapstring',
    )
    payment_hash: str = Field(
        ...,
        examples=['9d342c6ba006e24abee84a2e034a22d5e30c1f2599fb9c3574d46d3cde3d65a2'],
        title='Payment Hash',
    )


class SwapRoute(BaseModel):
    from_layer: str
    to_layer: str


class SwapStatus(Enum):
    waiting = 'Waiting'
    pending = 'Pending'
    succeeded = 'Succeeded'
    expired = 'Expired'
    failed = 'Failed'


class SwapStatusRequest(BaseModel):
    payment_hash: str = Field(
        ...,
        examples=['9d342c6ba006e24abee84a2e034a22d5e30c1f2599fb9c3574d46d3cde3d65a2'],
        title='Payment Hash',
    )


class TradingLimits(BaseModel):
    layer: str = Field(..., description="Settlement layer (e.g., 'BTC_LN', 'RGB_LN')")
    min_amount: int = Field(
        ...,
        description='Minimum amount for trading (in smallest unit)',
        title='Min Amount',
    )
    max_amount: int = Field(
        ...,
        description='Maximum amount for trading (in smallest unit)',
        title='Max Amount',
    )
    is_active: bool | None = Field(
        True, description='Whether this layer is active for trading', title='Is Active'
    )


class Price(RootModel[str]):
    model_config = ConfigDict(
        regex_engine="python-re",
    )
    root: str = Field(..., pattern='^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$', title='Price')


class ValidationError(BaseModel):
    loc: list[str | int] = Field(..., title='Location')
    msg: str = Field(..., title='Message')
    type: str = Field(..., title='Error Type')


class Asset(BaseModel):
    ticker: str = Field(
        ..., description="Display ticker (e.g., 'BTC', 'USDT')", title='Ticker'
    )
    name: str = Field(..., description='Full name', title='Name')
    precision: int = Field(
        ...,
        description='Decimal places (e.g., 8 for BTC, 6 for USDT)',
        ge=0,
        le=18,
        title='Precision',
    )
    protocol_ids: dict[str, str] | None = Field(
        None,
        description="Asset IDs per protocol (e.g., {'RGB': 'rgb:xxx', 'TAPASS': 'tap:xxx'})",
        title='Protocol Ids',
    )
    media: Media | None = Field(None, description='Logo/media')
    issued_supply: int | None = Field(
        None, description='Total issued supply', title='Issued Supply'
    )
    timestamp: int | None = Field(
        None, description='Creation timestamp', title='Timestamp'
    )
    endpoints: list[TradingLimits] | None = Field(
        None, description='Layer endpoints with trading limits', title='Endpoints'
    )
    is_active: bool | None = Field(
        True, description='Active for trading', title='Is Active'
    )
    added_at: int | None = Field(
        None, description='When added to wallet', title='Added At'
    )
    supported_layers: list[str] | None = Field(
        None,
        description="Supported settlement layers (e.g., 'BTC_LN', 'RGB_L1')",
        title='Supported Layers',
    )


class AssetsResponse(BaseModel):
    assets: list[Asset] = Field(..., title='Assets')
    network: str | None = Field('regtest', title='Network')
    total: int = Field(..., title='Total')
    limit: int = Field(..., title='Limit')
    offset: int = Field(..., title='Offset')
    timestamp: int | None = Field(None, title='Timestamp')


class GetInfoResponseModel(BaseModel):
    lsp_connection_url: str = Field(..., title='Lsp Connection Url')
    options: OrderOptions
    assets: list[AssetsOptions] = Field(..., title='Assets')


class HTTPValidationError(BaseModel):
    detail: list[ValidationError] | None = Field(None, title='Detail')


class MultiHopRoute(BaseModel):
    steps: list[RouteStep] = Field(
        ..., description='Ordered list of route steps', title='Steps'
    )
    total_hops: int = Field(
        ..., description='Number of hops in the route', title='Total Hops'
    )


class OrderHistorySummary(BaseModel):
    id: str = Field(..., description='Order ID', title='Id')
    status: SwapOrderStatus = Field(..., description='Order status')
    from_asset: str = Field(
        ..., description='Asset being swapped from', title='From Asset'
    )
    from_amount: int = Field(
        ..., description='Amount of from_asset', title='From Amount'
    )
    to_asset: str = Field(..., description='Asset being swapped to', title='To Asset')
    to_amount: int = Field(..., description='Amount of to_asset', title='To Amount')
    created_at: int = Field(
        ..., description='Order creation timestamp', title='Created At'
    )
    filled_at: int | None = Field(
        None, description='Order completion timestamp', title='Filled At'
    )


class PairQuoteRequest(BaseModel):
    from_asset: SwapLegInput = Field(
        ..., description='Source leg specification (asset_id, layer, amount)'
    )
    to_asset: SwapLegInput = Field(
        ..., description='Destination leg specification (asset_id, layer, amount)'
    )


class PairQuoteResponse(BaseModel):
    rfq_id: str = Field(..., examples=['1234567890'], title='Rfq Id')
    from_asset: SwapLeg = Field(
        ..., description='Complete source leg specification with amount and details'
    )
    to_asset: SwapLeg = Field(
        ...,
        description='Complete destination leg specification with amount and details',
    )
    price: int = Field(
        ...,
        description='Price of 1 whole unit of from_asset (e.g., 1 BTC) in terms of the smallest unit of to_asset (e.g., USDT with precision 6). Matches PriceData.price for the given rfq_id.',
        examples=[50000123456],
        title='Price',
    )
    fee: Fee
    timestamp: int = Field(
        ...,
        description='Quote creation timestamp (seconds since epoch)',
        title='Timestamp',
    )
    expires_at: int = Field(
        ...,
        description='Quote expiry timestamp (seconds since epoch)',
        title='Expires At',
    )


class PaymentBolt11(BaseModel):
    state: PaymentState
    expires_at: AwareDatetime = Field(..., title='Expires At')
    fee_total_sat: int = Field(..., title='Fee Total Sat')
    order_total_sat: int = Field(..., title='Order Total Sat')
    invoice: str = Field(..., title='Invoice')


class PaymentOnchain(BaseModel):
    state: PaymentState
    expires_at: AwareDatetime = Field(..., title='Expires At')
    fee_total_sat: int = Field(..., title='Fee Total Sat')
    order_total_sat: int = Field(..., title='Order Total Sat')
    address: str = Field(..., title='Address')
    min_fee_for_0conf: int = Field(..., title='Min Fee For 0Conf')
    min_onchain_payment_confirmations: int = Field(
        ..., title='Min Onchain Payment Confirmations'
    )
    refund_onchain_address: str | None = Field(None, title='Refund Onchain Address')
    payment_status: str | None = Field(None, title='Payment Status')
    payment_difference: int | None = Field(
        None,
        description='Payment difference in satoshis. Positive for overpayment, negative for underpayment, zero for exact payment',
        title='Payment Difference',
    )
    last_payment_check: int | None = Field(None, title='Last Payment Check')


class ReceiverAddress(BaseModel):
    address: str = Field(
        ..., description='The actual address, invoice, or token string', title='Address'
    )
    format: ReceiverAddressFormat = Field(
        ..., description='Format of the receiver address'
    )


class RetryDeliveryResponse(BaseModel):
    status: RetryDeliveryStatus = Field(..., description='Status of the request')
    message: str = Field(
        ..., description='Human-readable message about the result', title='Message'
    )


class RoutesResponse(BaseModel):
    routes: list[MultiHopRoute] = Field(
        ..., description='List of discovered routes', title='Routes'
    )
    timestamp: int = Field(..., description='Response timestamp', title='Timestamp')


class Swap(BaseModel):
    qty_from: int = Field(..., examples=[30], title='Qty From')
    qty_to: int = Field(..., examples=[10], title='Qty To')
    from_asset: str | None = Field(
        None,
        examples=['rgb:2dkSTbr-jFhznbPmo-TQafzswCN-av4gTsJjX-ttx6CNou5-M98k8Zd'],
        title='From Asset',
    )
    to_asset: str | None = Field(
        None,
        examples=['rgb:2eVw8uw-8G88LQ2tQ-kexM12SoD-nCX8DmQrw-yLMu6JDfK-xx1SCfc'],
        title='To Asset',
    )
    payment_hash: str = Field(
        ...,
        examples=['7c2c95b9c2aa0a7d140495b664de7973b76561de833f0dd84def3efa08941664'],
        title='Payment Hash',
    )
    status: SwapStatus
    requested_at: int = Field(..., examples=[1691160765], title='Requested At')
    initiated_at: int | None = Field(None, examples=[1691168512], title='Initiated At')
    expires_at: int = Field(..., examples=[1691172703], title='Expires At')
    completed_at: int | None = Field(None, examples=[1691171075], title='Completed At')


class SwapOrder(BaseModel):
    id: str = Field(..., description='Order identifier', title='Id')
    rfq_id: str = Field(
        ..., description='Quote identifier used to create the order', title='Rfq Id'
    )
    maker_pubkey: str | None = Field(
        None, description='Maker node public key', title='Maker Pubkey'
    )
    from_asset: SwapLeg = Field(
        ...,
        description='Complete specification for input: asset, ticker, network, protocol, and amount',
    )
    to_asset: SwapLeg = Field(
        ...,
        description='Complete specification for output: asset, ticker, network, protocol, and amount',
    )
    price: int = Field(..., title='Price')
    deposit_address: ReceiverAddress | None = Field(
        None, description='Address/Invoice for the user to deposit funds into'
    )
    payout_address: ReceiverAddress | None = Field(
        None,
        description='Destination address/invoice for receiving the to_asset payout',
    )
    refund_address: str | None = Field(
        None, description='Onchain refund address if provided', title='Refund Address'
    )
    status: SwapOrderStatus | None = Field('OPEN', description='Current order status')
    created_at: int | None = Field(
        None,
        description='Creation timestamp (seconds since epoch)',
        examples=[1766414814],
        title='Created At',
    )
    expires_at: int | None = Field(
        None, description='Expiry timestamp (seconds since epoch)', title='Expires At'
    )
    filled_at: int | None = Field(
        None, description='Timestamp when the order was filled', title='Filled At'
    )
    refund_txid: str | None = Field(
        None, description='Transaction ID of any refund sent', title='Refund Txid'
    )
    requires_manual_refund: bool | None = Field(
        False,
        description='Whether the order requires manual refund handling',
        examples=[False],
        title='Requires Manual Refund',
    )
    payment_status: PaymentStatus | None = Field(
        None, description='Status of onchain payment verification'
    )
    payment_difference: int | None = Field(
        None,
        description='Payment difference in satoshis (positive for overpayment, negative for underpayment)',
        title='Payment Difference',
    )
    last_payment_check: int | None = Field(
        None,
        description='Timestamp of the last payment verification',
        title='Last Payment Check',
    )
    email: str | None = Field(
        None,
        description='Notification email address',
        examples=['swap@example.com'],
        title='Email',
    )
    failure_reason: str | None = Field(
        None,
        description='Reason the order failed, if applicable',
        title='Failure Reason',
    )
    fee: Fee = Field(..., description='Fee information from the quote')


class SwapOrderStatusResponse(BaseModel):
    order_id: str = Field(..., title='Order Id')
    status: SwapOrderStatus
    order: SwapOrder


class SwapStatusResponse(BaseModel):
    swap: Swap | None = None


class TradableAsset(BaseModel):
    ticker: str = Field(
        ..., description="Display ticker (e.g., 'BTC', 'USDT')", title='Ticker'
    )
    name: str = Field(..., description='Full name', title='Name')
    precision: int = Field(
        ...,
        description='Decimal places (e.g., 8 for BTC, 6 for USDT)',
        ge=0,
        le=18,
        title='Precision',
    )
    protocol_ids: dict[str, str] | None = Field(
        None,
        description="Asset IDs per protocol (e.g., {'RGB': 'rgb:xxx', 'TAPASS': 'tap:xxx'})",
        title='Protocol Ids',
    )
    media: Media | None = Field(None, description='Logo/media')
    issued_supply: int | None = Field(
        None, description='Total issued supply', title='Issued Supply'
    )
    timestamp: int | None = Field(
        None, description='Creation timestamp', title='Timestamp'
    )
    endpoints: list[TradingLimits] | None = Field(
        None, description='Layer endpoints with trading limits', title='Endpoints'
    )


class TradingPair(BaseModel):
    id: str | None = Field(None, title='Id')
    base: TradableAsset
    quote: TradableAsset
    price: Price | None = Field(None, title='Price')
    routes: list[SwapRoute] | None = Field(None, title='Routes')
    is_active: bool | None = Field(True, title='Is Active')


class TradingPairsResponse(BaseModel):
    pairs: list[TradingPair] = Field(..., title='Pairs')
    total: int = Field(..., title='Total')
    limit: int = Field(..., title='Limit')
    offset: int = Field(..., title='Offset')
    timestamp: int = Field(..., title='Timestamp')


class CreateSwapOrderRequest(BaseModel):
    rfq_id: str = Field(
        ..., description='RFQ ID cannot be empty', min_length=1, title='Rfq Id'
    )
    from_asset: SwapLeg = Field(
        ...,
        description='Complete input specification: asset, ticker, network, protocol, and amount',
    )
    to_asset: SwapLeg = Field(
        ...,
        description='Complete output specification: asset, ticker, network, protocol, and amount',
    )
    receiver_address: ReceiverAddress = Field(
        ..., description='Destination address/invoice for receiving the to_asset payout'
    )
    min_onchain_conf: int | None = Field(1, title='Min Onchain Conf')
    refund_address: str | None = Field(None, title='Refund Address')
    email: EmailStr | None = Field(
        None, description='Optional email for notifications', title='Email'
    )


class CreateSwapOrderResponse(BaseModel):
    id: str = Field(..., title='Id')
    rfq_id: str = Field(..., title='Rfq Id')
    deposit_address: ReceiverAddress | None = None
    status: SwapOrderStatus


class OrderHistoryResponse(BaseModel):
    data: list[OrderHistorySummary] = Field(
        ..., description='List of orders', title='Data'
    )
    pagination: PaginationMeta


class PaymentDetails(BaseModel):
    bolt11: PaymentBolt11
    onchain: PaymentOnchain


class ChannelOrderResponse(BaseModel):
    order_id: str = Field(..., title='Order Id')
    client_pubkey: str = Field(..., title='Client Pubkey')
    lsp_balance_sat: int = Field(..., title='Lsp Balance Sat')
    client_balance_sat: int = Field(..., title='Client Balance Sat')
    required_channel_confirmations: int = Field(
        ..., title='Required Channel Confirmations'
    )
    funding_confirms_within_blocks: int = Field(
        ..., title='Funding Confirms Within Blocks'
    )
    channel_expiry_blocks: int = Field(..., title='Channel Expiry Blocks')
    token: str | None = Field('', title='Token')
    created_at: AwareDatetime | None = Field(None, title='Created At')
    announce_channel: bool = Field(..., title='Announce Channel')
    order_state: OrderState
    payment: PaymentDetails
    channel: ChannelDetails | None = None
    asset_id: str | None = Field(None, title='Asset Id')
    lsp_asset_amount: int | None = Field(None, title='Lsp Asset Amount')
    client_asset_amount: int | None = Field(None, title='Client Asset Amount')
    rfq_id: str | None = Field(None, title='Rfq Id')
    asset_price_sat: int | None = Field(None, title='Asset Price Sat')
    asset_delivery_status: AssetDeliveryStatus | None = None
    asset_delivery_payment_hash: str | None = Field(
        None, title='Asset Delivery Payment Hash'
    )
    asset_delivery_completed_at: AwareDatetime | None = Field(
        None, title='Asset Delivery Completed At'
    )
    asset_delivery_error: str | None = Field(None, title='Asset Delivery Error')
    failure_reason: str | None = Field(None, title='Failure Reason')

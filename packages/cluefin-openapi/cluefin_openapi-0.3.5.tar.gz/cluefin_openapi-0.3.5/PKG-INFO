Metadata-Version: 2.4
Name: cluefin-openapi
Version: 0.3.5
Summary: OpenAPI Client for Cluefin
Author-email: Hangoo Kang <kgcrom@hotmail.com>
Requires-Python: >=3.10
Requires-Dist: defusedxml>=0.7.1
Requires-Dist: loguru>=0.7.3
Requires-Dist: pydantic<3.0.0,>=2.12.0
Requires-Dist: requests>=2.32.4
Description-Content-Type: text/markdown

# cluefin-openapi

> **cluefin-openapi**: íˆ¬ì OpenAPIë¥¼ ìœ„í•œ Python í´ë¼ì´ì–¸íŠ¸

---

## ğŸš€ ì£¼ìš” ê¸°ëŠ¥

- **ê³„ì¢Œ ì •ë³´ ì¡°íšŒ**: ì”ê³ , ë³´ìœ ì¢…ëª©, ìˆ˜ìµë¥  ë“± ê³„ì¢Œ ê´€ë ¨ ì •ë³´
- **êµ­ë‚´/í•´ì™¸ ì£¼ì‹ ì •ë³´**: ì‹¤ì‹œê°„ ì‹œì„¸, ì¢…ëª© ì •ë³´, ê¸°ì—… ì •ë³´
- **ì°¨íŠ¸ ë°ì´í„° ë° ë¶„ì„**: ì¼/ì£¼/ì›” ì°¨íŠ¸, ê¸°ìˆ ì  ì§€í‘œ, ì‹œê³„ì—´ ë°ì´í„°
- **ETF, ì„¹í„°, í…Œë§ˆ**: ETF ì •ë³´, ì—…ì¢…ë³„ ì •ë³´, í…Œë§ˆë³„ ì¢…ëª© ë¶„ë¥˜
- **ì‹œì¥ ìƒí™© ëª¨ë‹ˆí„°ë§**: ì‹œì¥ ì§€ìˆ˜, ê±°ë˜ëŸ‰, ì‹œì¥ ë™í–¥
- **KRX ì‹œì¥ ë°ì´í„°**: KOSPI/KOSDAQ/KONEX ì¼ë³„ë§¤ë§¤ì •ë³´, ì‹œì¥ì§€ìˆ˜, ì¢…ëª© ê¸°ë³¸ì •ë³´
- **ì±„ê¶Œ ì‹œì¥ ì •ë³´**: êµ­ê³ ì±„, ì¼ë°˜ì±„ê¶Œ, ì†Œì•¡ì±„ê¶Œ ì‹œì¥ ë°ì´í„°
- **ìƒì¥ ìƒí’ˆ ì •ë³´**: ETF, ETN, ELW ë“± ê±°ë˜ì†Œ ìƒì¥ ìƒí’ˆ ë°ì´í„°
- **ê¸°ì—… ê³µì‹œ ë¶„ì„ (DART)**: ê³µì‹œ ì›ë¬¸, ì¬ë¬´ì œí‘œ, ëŒ€ëŸ‰ë³´ìœ ìƒí™© ë“± ê³µì‹œ ë°ì´í„°

## âš¡ Quick Start

### ì„¤ì¹˜

```bash
# ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì„¤ì¹˜ (ê¶Œì¥)
git clone https://github.com/kgcrom/cluefin
cd cluefin
uv venv --python 3.10
uv sync --all-packages

# íŒ¨í‚¤ì§€ë§Œ ë‹¨ë… ì„¤ì¹˜
pip install cluefin-openapi
```

## ğŸ¯ ì™œ cluefin-openapiì¸ê°€ìš”?

### í†µí•©ëœ ì¸í„°í˜ì´ìŠ¤
í‚¤ì›€ì¦ê¶Œ, í•œêµ­íˆ¬ìì¦ê¶Œ(KIS), KRX, DART ë“± ì—¬ëŸ¬ ê¸ˆìœµ OpenAPIë¥¼ í•˜ë‚˜ì˜ Python ì¸í„°í˜ì´ìŠ¤ë¡œ í†µí•©í•˜ì—¬ ì œê³µí•©ë‹ˆë‹¤.

### ê°œë°œ ì‹œê°„ ë‹¨ì¶•
ë³µì¡í•œ ê¸ˆìœµ API í†µí•© ì‘ì—…ì„ ëŒ€ì‹  ì²˜ë¦¬í•˜ì—¬, íˆ¬ì ë„êµ¬ ê°œë°œì— ì§‘ì¤‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### íƒ€ì… ì•ˆì „ì„±
Pydanticì„ í™œìš©í•œ ê°•ë ¥í•œ íƒ€ì… ê²€ì¦ìœ¼ë¡œ ëŸ°íƒ€ì„ ì—ëŸ¬ë¥¼ ë°©ì§€í•©ë‹ˆë‹¤.

### í’ë¶€í•œ ê¸°ëŠ¥
- ì‹¤ì‹œê°„ ë°ì´í„° ìŠ¤íŠ¸ë¦¬ë°
- ìë™ í† í° ê°±ì‹ 
- ìš”ì²­ ì œí•œ ê´€ë¦¬
- í¬ê´„ì ì¸ ì—ëŸ¬ ì²˜ë¦¬

## ğŸ“– ì‹œì‘í•˜ê¸°

### 1. í‚¤ì›€ì¦ê¶Œ API ì‹ ì²­

1. [í‚¤ì›€ì¦ê¶Œ OpenAPI ì‚¬ì´íŠ¸](https://apiportal.kiwoom.com/)ì—ì„œ ê³„ì • ìƒì„±
2. API ì‚¬ìš© ì‹ ì²­ ë° ìŠ¹ì¸ ëŒ€ê¸°
3. APP_KEY ë° SECRET_KEY ë°œê¸‰ ë°›ê¸°

### 2. í•œêµ­íˆ¬ìì¦ê¶Œ API ì‹ ì²­

1. [í•œêµ­íˆ¬ìì¦ê¶Œ OpenAPI ì‚¬ì´íŠ¸](https://apiportal.koreainvestment.com/)ì—ì„œ ê³„ì • ìƒì„±
2. API ì‚¬ìš© ì‹ ì²­ ë° ìŠ¹ì¸ ëŒ€ê¸°
3. APP_KEY ë° SECRET_KEY ë°œê¸‰ ë°›ê¸°

### 3. í•œêµ­ê±°ë˜ì†Œ OpenAPI ì‹ ì²­

1. [í•œêµ­ê±°ë˜ì†Œ OpenAPI ì‚¬ì´íŠ¸](http://openapi.krx.co.kr/contents/OPP/MAIN/main/index.cmd)ì—ì„œ ê³„ì • ìƒì„±
2. API ì¸ì¦í‚¤ ì‹ ì²­ ë° ìŠ¹ì¸ ëŒ€ê¸°
3. ì‚¬ìš©í•  API ë§ˆë‹¤ ì‹ ì²­ ë° ìŠ¹ì¸ ëŒ€ê¸°

### 4. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

```bash
# ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì—ì„œ
cp apps/cluefin-cli/.env.sample .env

# .env íŒŒì¼ ìˆ˜ì • (ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ë£¨íŠ¸ì— ìƒì„±)

# í‚¤ì›€ì¦ê¶Œ API í‚¤ ì„¤ì • (OAuth2-style ì¸ì¦)
KIWOOM_APP_KEY=your_app_key_here
KIWOOM_SECRET_KEY=your_secret_key_here
KIWOOM_ENV=dev # options: prod | dev(default)

# í•œêµ­íˆ¬ìì¦ê¶Œ API í‚¤ ì„¤ì • (í† í° ê¸°ë°˜ ì¸ì¦)
KIS_APP_KEY=your_kis_app_key_here
KIS_SECRET_KEY=your_kis_secret_key_here
KIS_ENV=dev # options: prod | dev(default)

# í•œêµ­ê±°ë˜ì†Œ API í‚¤ ì„¤ì • (ë‹¨ìˆœ ì¸ì¦í‚¤)
KRX_AUTH_KEY=your_krx_auth_key_here

# ê¸ˆìœµê°ë…ì› DART API í‚¤ ì„¤ì •
DART_AUTH_KEY=your_dart_auth_key_here
```

### ê¸°ë³¸ ì‚¬ìš©ë²•

```python
from loguru import logger
from pydantic import SecretStr
import os
from cluefin_openapi.kiwoom._auth import Auth
from cluefin_openapi.kiwoom._client import Client
import dotenv

# ì¸ì¦ ì„¤ì •
dotenv.load_dotenv(dotenv_path=".env")
auth = Auth(
    app_key=os.getenv("KIWOOM_APP_KEY"),
    secret_key=SecretStr(os.getenv("KIWOOM_SECRET_KEY")),
    env="dev",  # ê°œë°œí™˜ê²½: "dev", ìš´ì˜í™˜ê²½: "prod"
)

# í† í° ìƒì„± ë° í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”
token = auth.generate_token()
client = Client(token=token.get_token(), env="dev")

# ì‚¼ì„±ì „ì(005930) ì¼ë³„ ì‹¤í˜„ì†ìµ ì¡°íšŒ
response = client.account.get_daily_stock_realized_profit_loss_by_date("005930", "20250630")
logger.info(f"ì‘ë‹µ í—¤ë”: ${response.headers}")
logger.info(f"ì‘ë‹µ ë°ì´í„°: ${response.body}")
```

## ğŸ“š API ë¬¸ì„œ

### ì¸ì¦ (Authentication)

```python
# í‚¤ì›€ì¦ê¶Œ
from loguru import logger
import os
from pydantic import SecretStr
import dotenv
from cluefin_openapi.kiwoom._auth import Auth

# ì¸ì¦ ì„¤ì •
dotenv.load_dotenv(dotenv_path=".env")

auth = Auth(
    app_key=os.getenv("KIWOOM_APP_KEY"),
    secret_key=SecretStr(os.getenv("KIWOOM_SECRET_KEY")),
    env="dev",  # ê°œë°œí™˜ê²½: "dev", ìš´ì˜í™˜ê²½: "prod"
)

# í† í° ìƒì„±
token = auth.generate_token()
logger.info(f"token => ${token}")
```

### í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”

```python
# í‚¤ì›€ì¦ê¶Œ
from cluefin_openapi.kiwoom._client import Client

client = Client(
    token=token.get_token(),
    env="dev",
)
```

```python
# í•œêµ­íˆ¬ìì¦ê¶Œ
from loguru import logger
import os
from pydantic import SecretStr
import dotenv
from cluefin_openapi.kis._auth import Auth
from cluefin_openapi.kis._client import Client as KISClient

# ì¸ì¦ ì„¤ì •
dotenv.load_dotenv(dotenv_path=".env")

# í† í° ìƒì„±
auth = Auth(
    app_key=os.getenv("KIS_APP_KEY"),
    secret_key=SecretStr(os.getenv("KIS_SECRET_KEY")),
    env="dev",
)
token = auth.generate()

# í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”
kis_client = KISClient(
    app_key=os.getenv("KIS_APP_KEY"),
    secret_key=SecretStr(os.getenv("KIS_SECRET_KEY")),
    token=token,
    env="dev",
)
logger.info(f"kis_client => ${kis_client}")
```

```python
# í•œêµ­ê±°ë˜ì†Œ
from loguru import logger
import os
from pydantic import SecretStr
import dotenv
from cluefin_openapi.krx._client import Client as KRXClient

# ì¸ì¦ ì„¤ì •
dotenv.load_dotenv(dotenv_path=".env")

krx_client = KRXClient(auth_key=os.getenv("KRX_AUTH_KEY"), timeout=30)
logger.info(f"krx_client => ${krx_client}")
```

## ğŸ“Š KIS API ì‚¬ìš© ì˜ˆì œ

### êµ­ë‚´ ì£¼ì‹ ì‹œì„¸ ì¡°íšŒ

```python
from loguru import logger
from cluefin_openapi.kis._client import Client as KISClient

# ì£¼ì‹ í˜„ì¬ê°€ ì‹œì„¸ ì¡°íšŒ
current_price = kis_client.domestic_basic_quote.get_inquire_price(
    fid_cond_mrkt_div_code="J",  # ì‹œì¥ ë¶„ë¥˜ ì½”ë“œ (J: ì£¼ì‹)
    fid_input_iscd="005930"      # ì¢…ëª© ì½”ë“œ (ì‚¼ì„±ì „ì)
)
logger.info(f"í˜„ì¬ê°€: {current_price}")

# ì£¼ì‹ ì¼ë³„ ì‹œì„¸ ì¡°íšŒ
daily_price = kis_client.domestic_basic_quote.get_inquire_daily_itemchartprice(
    fid_cond_mrkt_div_code="J",
    fid_input_iscd="005930",
    fid_input_date_1="20250101",  # ì¡°íšŒ ì‹œì‘ì¼
    fid_input_date_2="20250131",  # ì¡°íšŒ ì¢…ë£Œì¼
    fid_period_div_code="D"        # ê¸°ê°„ ë¶„ë¥˜ ì½”ë“œ (D: ì¼)
)
logger.info(f"ì¼ë³„ ì‹œì„¸: {daily_price}")
```

### êµ­ë‚´ ê³„ì¢Œ ì¡°íšŒ

```python
# ì£¼ì‹ ì”ê³  ì¡°íšŒ
balance = kis_client.domestic_account.get_inquire_balance(
    cano="12345678",      # ì¢…í•©ê³„ì¢Œë²ˆí˜¸
    acnt_prdt_cd="01",    # ê³„ì¢Œìƒí’ˆì½”ë“œ
    afhr_flpr_yn="N",     # ì‹œê°„ì™¸ë‹¨ì¼ê°€ì—¬ë¶€
    ofl_yn="N",           # ì˜¤í”„ë¼ì¸ì—¬ë¶€
    inqr_dvsn="01",       # ì¡°íšŒêµ¬ë¶„
    unpr_dvsn="01",       # ë‹¨ê°€êµ¬ë¶„
    fund_sttl_icld_yn="N", # í€ë“œê²°ì œë¶„í¬í•¨ì—¬ë¶€
    fncg_amt_auto_rdpt_yn="N", # ìœµìê¸ˆì•¡ìë™ìƒí™˜ì—¬ë¶€
    prcs_dvsn="00",       # ì²˜ë¦¬êµ¬ë¶„
    ctx_area_fk100="",    # ì—°ì†ì¡°íšŒê²€ìƒ‰ì¡°ê±´100
    ctx_area_nk100=""     # ì—°ì†ì¡°íšŒí‚¤100
)
logger.info(f"ì”ê³ : {balance}")
```

### í•´ì™¸ ì£¼ì‹ ì‹œì„¸ ì¡°íšŒ

```python
# í•´ì™¸ ì£¼ì‹ í˜„ì¬ê°€ ì¡°íšŒ (ë¯¸êµ­ ì£¼ì‹)
overseas_price = kis_client.overseas_basic_quote.get_inquire_price(
    exch="NAS",           # ê±°ë˜ì†Œ ì½”ë“œ (NAS: ë‚˜ìŠ¤ë‹¥)
    symb="AAPL"           # ì¢…ëª© ì½”ë“œ (ì• í”Œ)
)
logger.info(f"í•´ì™¸ ì£¼ì‹ í˜„ì¬ê°€: {overseas_price}")
```

## ğŸ“Š KRX API ì‚¬ìš© ì˜ˆì œ

### ì£¼ì‹ ì‹œì¥ ë°ì´í„°

```python
from loguru import logger
from cluefin_openapi.krx._client import Client as KRXClient

# KRX í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”
krx_client = KRXClient(auth_key="your_krx_auth_key")

# KOSPI ì¼ë³„ë§¤ë§¤ì •ë³´ ì¡°íšŒ
kospi_data = krx_client.stock.get_kospi("20250721")
logger.info(f"KOSPI ë°ì´í„°: ${kospi_data.body}")

# KOSDAQ ì¼ë³„ë§¤ë§¤ì •ë³´ ì¡°íšŒ
kosdaq_data = krx_client.stock.get_kosdaq("20250721")
logger.info(f"KOSDAQ ë°ì´í„°: ${kosdaq_data.body}")

# KONEX ì¼ë³„ë§¤ë§¤ì •ë³´ ì¡°íšŒ
konex_data = krx_client.stock.get_konex("20250721")
logger.info(f"KONEX ë°ì´í„°: ${konex_data.body}")

# ì›ŒëŸ°íŠ¸ ë° ì‹ ì£¼ì¸ìˆ˜ê¶Œì¦ì„œ ì¡°íšŒ
warrant_data = krx_client.stock.get_warrant("20250721")
subscription_warrant_data = krx_client.stock.get_subscription_warrant("20250721")

# ì¢…ëª© ê¸°ë³¸ì •ë³´ ì¡°íšŒ
kospi_base_info = krx_client.stock.get_kospi_base_info("20250721")
kosdaq_base_info = krx_client.stock.get_kosdaq_base_info("20250721")
konex_base_info = krx_client.stock.get_konex_base_info("20250721")
```

### ì‹œì¥ ì§€ìˆ˜ ì •ë³´

```python
# KRX ì¢…í•©ì§€ìˆ˜ ì¡°íšŒ
krx_index = krx_client.index.get_krx("20250721")
logger.info(f"KRX ì¢…í•©ì§€ìˆ˜: ${krx_index.body}")

# KOSPI ì§€ìˆ˜ ì¡°íšŒ
kospi_index = krx_client.index.get_kospi("20250721")
logger.info(f"KOSPI ì§€ìˆ˜: ${kospi_index.body")

# KOSDAQ ì§€ìˆ˜ ì¡°íšŒ
kosdaq_index = krx_client.index.get_kosdaq("20250721")
logger.info(f"KOSDAQ ì§€ìˆ˜: ${kosdaq_index.body}")

# ì±„ê¶Œ ì§€ìˆ˜ ì¡°íšŒ
bond_index = krx_client.index.get_bond("20250721")

# íŒŒìƒìƒí’ˆ ì§€ìˆ˜ ì¡°íšŒ
derivatives_index = krx_client.index.get_derivatives("20250721")
```

### ì¼ê´„ ë°ì´í„° ì¡°íšŒ ì˜ˆì œ

```python
import asyncio
from datetime import datetime, timedelta
from loguru import logger

# íŠ¹ì • ë‚ ì§œì˜ ì£¼ìš” ì‹œì¥ ë°ì´í„° ì¼ê´„ ì¡°íšŒ
def get_market_overview(date: str):
    """íŠ¹ì • ë‚ ì§œì˜ ì‹œì¥ ê°œìš” ë°ì´í„°ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤."""
    try:
        # ì£¼ì‹ ì‹œì¥ ë°ì´í„°
        kospi = krx_client.stock.get_kospi(date)
        kosdaq = krx_client.stock.get_kosdaq(date)
        
        # ì§€ìˆ˜ ë°ì´í„°
        krx_index = krx_client.index.get_krx(date)
        
        # ETF ë°ì´í„°
        etf = krx_client.exchange_traded_product.get_etf(date)
        
        return {
            "date": date,
            "kospi": kospi.body,
            "kosdaq": kosdaq.body,
            "index": krx_index.body,
            "etf": etf.body
        }
    except Exception as e:
        logger.info(f"ë°ì´í„° ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}")
        return None

# ì‚¬ìš© ì˜ˆì œ
market_data = get_market_overview("20250721")
if market_data:
    logger.info("ì‹œì¥ ê°œìš” ë°ì´í„° ì¡°íšŒ ì™„ë£Œ")
```

## ğŸ”§ êµ¬ì„± ì˜µì…˜

### ë¡œê¹… ì„¤ì •

```python
import logging
from loguru import logger

# ë¡œê·¸ ë ˆë²¨ ì„¤ì •
logger.add("kiwoom_api.log", level="INFO", rotation="10 MB")
```

### ìš”ì²­ ì œí•œ ê´€ë¦¬

ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ìë™ìœ¼ë¡œ API ìš”ì²­ ì œí•œì„ ê´€ë¦¬í•©ë‹ˆë‹¤:

- ì´ˆë‹¹ ìš”ì²­ ìˆ˜ ì œí•œ
- ì¼ì¼ ìš”ì²­ ìˆ˜ ì œí•œ
- ìë™ ì¬ì‹œë„ ë©”ì»¤ë‹ˆì¦˜

## âš ï¸ ì—ëŸ¬ ì²˜ë¦¬

### í‚¤ì›€ì¦ê¶Œ API ì—ëŸ¬ ì²˜ë¦¬

```python
from loguru import logger
from cluefin_openapi.kiwoom._exceptions import KiwoomAPIError

try:
    response = client.account.get_inquire_balance()
except KiwoomAPIError as e:
    logger.info(f"API ì—ëŸ¬: {e.message}")
    logger.info(f"ì—ëŸ¬ ì½”ë“œ: {e.error_code}")
except Exception as e:
    logger.info(f"ì¼ë°˜ ì—ëŸ¬: {str(e)}")
```

### í•œêµ­íˆ¬ìì¦ê¶Œ API ì—ëŸ¬ ì²˜ë¦¬

```python
from loguru import logger
from cluefin_openapi.kis._exceptions import KISAPIError

try:
    response = kis_client.domestic_basic_quote.get_inquire_price(
        fid_cond_mrkt_div_code="J",
        fid_input_iscd="005930"
    )
except KISAPIError as e:
    logger.error(f"KIS API ì—ëŸ¬: {e.message}")
    logger.error(f"ì—ëŸ¬ ì½”ë“œ: {e.error_code}")
except Exception as e:
    logger.error(f"ì¼ë°˜ ì—ëŸ¬: {str(e)}")
```

### ì¼ë°˜ì ì¸ ì—ëŸ¬ ì‹œë‚˜ë¦¬ì˜¤

**í‚¤ì›€ì¦ê¶Œ API ì—ëŸ¬ ì½”ë“œ:**
- `40010000`: ì˜ëª»ëœ ìš”ì²­ í˜•ì‹
- `40080000`: í† í° ë§Œë£Œ
- `50010000`: ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜

**í•œêµ­íˆ¬ìì¦ê¶Œ API ì—ëŸ¬ ì½”ë“œ:**
- `EGW00001`: ì˜ëª»ëœ ìš”ì²­ í˜•ì‹
- `EGW00123`: API í‚¤ ì˜¤ë¥˜
- `EGW00201`: í† í° ë§Œë£Œ - í† í° ì¬ìƒì„± í•„ìš” (1ë¶„ ê°„ê²© ì œí•œ)
- `40000000`: ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜

**KRX API ì—ëŸ¬ ì‹œë‚˜ë¦¬ì˜¤:**
- `401`: ì¸ì¦ ì‹¤íŒ¨ - AUTH_KEY í™•ì¸ í•„ìš”
- `403`: ì ‘ê·¼ ê¶Œí•œ ì—†ìŒ - API ì‚¬ìš© ì‹ ì²­ ìƒíƒœ í™•ì¸ í•„ìš”
- `400`: ì˜ëª»ëœ ìš”ì²­ - ë‚ ì§œ í˜•ì‹(YYYYMMDD) ë“± íŒŒë¼ë¯¸í„° í™•ì¸ í•„ìš”
- `500`: ì„œë²„ ì˜¤ë¥˜ - ë„¤íŠ¸ì›Œí¬ ìƒíƒœ í™•ì¸ ë° ì¬ì‹œë„ í•„ìš”

## ğŸ§ª í…ŒìŠ¤íŠ¸

```bash
# ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ë£¨íŠ¸ì—ì„œ ì‹¤í–‰

# ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰ (í†µí•© í…ŒìŠ¤íŠ¸ ì œì™¸)
uv run pytest -m "not integration"

# í†µí•© í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰ (API í‚¤ í•„ìš”)
uv run pytest -m "integration"

# cluefin-openapi íŒ¨í‚¤ì§€ í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
uv run pytest packages/cluefin-openapi/tests/ -v

# íŠ¹ì • ëª¨ë“ˆ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
uv run pytest packages/cluefin-openapi/tests/kiwoom/test_auth_unit.py -v

# ì½”ë“œ ì»¤ë²„ë¦¬ì§€ í™•ì¸
uv run pytest --cov=cluefin_openapi --cov-report=html
```

## ğŸ—ï¸ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
packages/cluefin-openapi/
â”œâ”€â”€ src/cluefin_openapi/
â”‚   â”œâ”€â”€ dart/                      # ê¸ˆìœµê°ë…ì› DART ê³µì‹œ í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ kiwoom/                    # í‚¤ì›€ì¦ê¶Œ API í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ kis/                       # í•œêµ­íˆ¬ìì¦ê¶Œ API í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ krx/                      # í•œêµ­ê±°ë˜ì†Œ API í´ë¼ì´ì–¸íŠ¸
â”‚   â””â”€â”€ __init__.py
â”œâ”€â”€ tests/                        # í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸
â”‚   â”œâ”€â”€ kiwoom/                   # í‚¤ì›€ì¦ê¶Œ API í…ŒìŠ¤íŠ¸
â”‚   â”‚   â”œâ”€â”€ test_*_unit.py        # ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (requests_mock ì‚¬ìš©)
â”‚   â”‚   â””â”€â”€ test_*_integration.py # í†µí•© í…ŒìŠ¤íŠ¸ (@pytest.mark.integration)
â”‚   â”œâ”€â”€ kis/                       # í•œêµ­íˆ¬ìì¦ê¶Œ API í…ŒìŠ¤íŠ¸
â”‚   â”‚   â”œâ”€â”€ test_*_unit.py        # ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (Mock ì‚¬ìš©, JSON í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤)
â”‚   â”‚   â””â”€â”€ test_*_integration.py # í†µí•© í…ŒìŠ¤íŠ¸ (@pytest.mark.integration)
â”‚   â”œâ”€â”€ krx/                      # KRX API í…ŒìŠ¤íŠ¸
â”‚   â”‚   â”œâ”€â”€ test_*_unit.py        # ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
â”‚   â”‚   â””â”€â”€ test_*_integration.py # í†µí•© í…ŒìŠ¤íŠ¸
â”‚   â””â”€â”€ dart/                      # Dart API í…ŒìŠ¤íŠ¸
â”‚       â”œâ”€â”€ test_*_unit.py        # ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
â”‚       â””â”€â”€ test_*_integration.py # í†µí•© í…ŒìŠ¤íŠ¸
â”œâ”€â”€ pyproject.toml               # íŒ¨í‚¤ì§€ ì˜ì¡´ì„± ë° ì„¤ì •
â””â”€â”€ README.md                    # ì´ ë¬¸ì„œ
```

### í•µì‹¬ ì„¤ê³„ íŒ¨í„´

**ì‘ë‹µ ë˜í¼ íŒ¨í„´**: ëª¨ë“  API ì‘ë‹µì„ êµ¬ì¡°í™”ëœ í˜•íƒœë¡œ ë°˜í™˜
```python
@dataclass
class KiwoomHttpResponse(Generic[T]):
    headers: KiwoomHttpHeader  # í—¤ë” ì •ë³´ (ì—°ì†ì¡°íšŒí‚¤ ë“±)
    body: T                    # ì‘ë‹µ ë°ì´í„° (Pydantic ëª¨ë¸)
```

**í•œêµ­ ê¸ˆìœµ API íŠ¹í™” ê¸°ëŠ¥**:
- í•œêµ­ ì‹œì¥ ì‹œê°„ëŒ€(KST) ì²˜ë¦¬
- í•œêµ­ ì£¼ì‹ ì½”ë“œ í˜•ì‹ (6ìë¦¬, ì˜ˆ: "005930")
- í•œêµ­ì–´ í•„ë“œëª…ì— ëŒ€í•œ ì˜ì–´ ë³„ì¹­: `cont_yn: Literal["Y", "N"] = Field(..., alias="cont-yn")`

## ğŸ› ï¸ ê°œë°œ ê°€ì´ë“œ

í”„ë¡œì íŠ¸ëŠ” ë‹¤ìŒ ë„êµ¬ë“¤ì„ ì‚¬ìš©í•©ë‹ˆë‹¤:

- **Uv**: Rustë¡œ ë§Œë“¤ì–´ì§„ Python íŒ¨í‚¤ì§€ ë©”ë‹ˆì €
- **Ruff**: ì½”ë“œ í¬ë§·íŒ… ë° ë¦°íŒ…
- **pytest**: í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬
- **Pydantic**: ë°ì´í„° ê²€ì¦ ë° íƒ€ì… ì•ˆì „ì„±
- **requests**: HTTP í´ë¼ì´ì–¸íŠ¸
- **loguru**: êµ¬ì¡°í™”ëœ ë¡œê¹…

```bash
# ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ë£¨íŠ¸ì—ì„œ ì‹¤í–‰

# ì½”ë“œ í¬ë§·íŒ… (ì „ì²´ í”„ë¡œì íŠ¸)
uv run ruff format .

# ë¦°íŒ… í™•ì¸ ë° ìë™ ìˆ˜ì •
uv run ruff check . --fix

# cluefin-openapië§Œ í¬ë§·íŒ…
uv run ruff format packages/cluefin-openapi/

# cluefin-openapië§Œ ë¦°íŒ…
uv run ruff check packages/cluefin-openapi/
```

## ğŸ“ ë¼ì´ì„ ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” MIT ë¼ì´ì„ ìŠ¤ í•˜ì— ë°°í¬ë©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [LICENSE](../../LICENSE) íŒŒì¼ì„ ì°¸ì¡°í•˜ì„¸ìš”.

## ğŸ”— ê´€ë ¨ ë§í¬

- [í‚¤ì›€ì¦ê¶Œ OpenAPI í¬í„¸](https://openapi.kiwoom.com/)
- [í•œêµ­íˆ¬ìì¦ê¶Œ OpenAPI í¬í„¸](https://apiportal.koreainvestment.com/)
- [í•œêµ­ê±°ë˜ì†Œ OpenAPI í¬í„¸](http://openapi.krx.co.kr)
- [ê¸ˆìœµê°ë…ì› OpenAPI í¬í„¸](https://opendart.fss.or.kr/)

---

> âš ï¸ **íˆ¬ì ì£¼ì˜ì‚¬í•­**: ì´ í”„ë¡œì íŠ¸ëŠ” í‚¤ì›€ì¦ê¶Œ, í•œêµ­íˆ¬ìì¦ê¶Œê³¼ ê³µì‹ì ìœ¼ë¡œ ì—°ê´€ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
> íˆ¬ìëŠ” ì‹ ì¤‘í•˜ê²Œ í•˜ì‹œê³ , ëª¨ë“  íˆ¬ì ì†ì‹¤ì— ëŒ€í•œ ì±…ì„ì€ íˆ¬ìì ë³¸ì¸ì—ê²Œ ìˆìŠµë‹ˆë‹¤.

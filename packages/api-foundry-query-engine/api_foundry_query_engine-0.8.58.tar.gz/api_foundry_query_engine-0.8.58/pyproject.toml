[build-system]
requires = ["hatchling>=1.0"]
build-backend = "hatchling.build"

[project]
name = "api-foundry-query-engine"
dynamic = ["version"]
authors = [
    { name="Daniel Repik", email="danrepik@icloud.com" },
]
description = "The AWS lambda service handler use by the `api_foundry` project is a powerful tool designed to automate the deployment of REST APIs on AWS using Lambda services to access and interact with relational databases (RDBMS). This project leverages the OpenAPI specification to define and manage the APIs"
requires-python = ">=3.9"
classifiers = [
    "Programming Language :: Python :: 3.9",
    "Operating System :: OS Independent",
]
dependencies = [
    "boto3",
    "pyyaml",
    "pyhumps",
]
[project.optional-dependencies]
dev = [
    "pytest>=7.0",
    "pytest-cov>=4.0.0",
    "black>=23.0.0",
    "isort>=5.12.0",
    "fixture_foundry>=0.1.0",
    "simple-oauth-server"
]

[project.urls]
"Documentation" = "https://github.com/DanRepik/api-foundry"
"Source" = "https://github.com/DanRepik/api-foundry"

[tool.hatch.build.targets.sdist]
include = ["api_foundry_query_engine"]

[tool.hatch.build.targets.wheel]
include = ["api_foundry_query_engine"]

[tool.hatch.envs.dev]
dependencies = [
    "pytest>=7.0",
    "pytest-cov>=4.0.0",
    "black>=23.0.0",
    "isort>=5.12.0",
    "fixture_foundry>=0.1.0",
    "simple-oauth-server",
    ]

[project.scripts]

[tool.pytest.ini_options]
markers = [
    "unit: marks tests as unit tests that do not require a database",
    "integration: marks tests that operate on a real database",
]

[tool.hatch.version]
path = "api_foundry_query_engine/__init__.py"

[tool.hatch.envs.default]
dependencies = [
    "pytest>=7.0",
    "pytest-cov>=4.0.0",
]

[tool.hatch.envs.default.scripts]
test = "pytest {args:tests}"
test-cov = "pytest --cov=api_foundry_query_engine --cov-report=term-missing {args:tests}"
lint = [
    "black --check --diff .",
    "isort --check-only --diff .",
]
fmt = [
    "black .",
    "isort .",
]

[tool.hatch.envs.docs]
dependencies = [
    "mkdocs",
    "mkdocs-material",
]

[tool.hatch.envs.docs.scripts]
build = "mkdocs build --clean --strict"
serve = "mkdocs serve --dev-addr localhost:8000"

[tool.hatch.publish.index]
disable = true  # Disable publishing by default for safety

# Linting / formatting configuration
[tool.ruff]
line-length = 120

[tool.black]
line-length = 120

[project]
name = "tlo-runner"
version = "0.1.0"
description = "Lightweight async background task runner and orcestrator"
readme = "README.md"
authors = [
    { name = "TwilightSparkle42", email = "jaden.corr42@gmail.com" }
]
maintainers = [
    { name = "TwilightSparkle42", email = "jaden.corr42@gmail.com" }
]
requires-python = ">=3.12"
dependencies = [
    "hv-utils>=0.1.0",
    "typing-extensions>=4.15.0",
]
license = { file = "LICENSE" }
keywords = [
    "background task runner",
    "task runner",
    "background tasks",
    "async",
    "job queue",
]
classifiers = [
    "Development Status :: 3 - Alpha",
    "Intended Audience :: Developers",
    "License :: OSI Approved :: BSD License",
    "Operating System :: OS Independent",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: Python :: 3.13",
    "Programming Language :: Python :: 3.14",
    "Topic :: Utilities",
]

[project.urls]
Repository = "https://github.com/HovorunBot/tlo"
"Issue Tracker" = "https://github.com/HovorunBot/tlo/issues"

[build-system]
requires = ["uv_build>=0.9.7"]
build-backend = "uv_build"

[dependency-groups]
dev = [
    "commitizen>=4.10.1",
    "ruff>=0.14.10",
    "ty>=0.0.7",
    "pytest>=9.0.2",
    "pytest-cov>=5.0.0",
]



[tool.ruff]
target-version = "py312"
line-length = 120
# Enable all rule categories, then selectively ignore ones you truly don't want later
lint.select = ["ALL"]
# Some rules are noisy or overlap with MyPy / style preferences
lint.ignore = [
    "D203", # one-blank-line-before-class (conflicts with D211)
    "D213", # multi-line-summary-second-line (allow summary on same line)
    "E501", # line length handled by formatter
    "TD003", # missing issue link in TODO
    "COM812", # missing trailing comma (handled by formatter)
    "ANN401", # Any as a kwargs argument
    "TD002", # Missing author in TODO
    "FIX002", # Line contains TODO
    "S101", # asser are used not for logic, but ensuring incorrect code usage presented
]
# Optional: set per-file ignores for tests
lint.per-file-ignores = { "tests/**" = ["S101", "PLR2004"] }

# Fix mode (useful if you run `ruff check --fix`)
fix = true

[tool.ruff.format]
# Use Ruffâ€™s built-in formatter (Black-compatible)
quote-style = "double"
indent-style = "space"
skip-magic-trailing-comma = false
line-ending = "lf"
docstring-code-format = true

[tool.ruff.lint.isort]
known-first-party = ["tlo"]
combine-as-imports = true
force-sort-within-sections = true
section-order = ["future", "standard-library", "third-party", "first-party", "local-folder"]

[tool.ruff.lint.flake8-import-conventions]
# Forbid: from tlo import X
# Allow:  from tlo.queue import Y
banned-from = ["tlo"]

[tool.ruff.lint.pydocstyle]
convention = "pep257"

[tool.ruff.lint.pylint]
max-args = 12

[tool.uv]
package = true
default-groups = "all"

[tool.uv.build-backend]
module-name = "tlo"
source-exclude = ["tests/**"]
wheel-exclude = ["tests/**"]

[tool.commitizen]
name = "cz_conventional_commits"
version_provider = "pep621"
version_scheme = "pep440"
tag_format = "$version"
update_changelog_on_bump = false

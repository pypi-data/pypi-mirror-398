

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Work with subcircuits &mdash; SLiCAP 4.0.10 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=b8a5ba81"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Perform analysis" href="analysis.html" />
    <link rel="prev" title="Work with models" href="models.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            SLiCAP
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/SLiCAPintroduction.html">SLiCAP Version 4.0</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="SLiCAPuserguide.html">SLiCAP User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="install.html">Download, install, configure and test SLiCAP</a></li>
<li class="toctree-l2"><a class="reference internal" href="circuit.html">Create a SLiCAP circuit object</a></li>
<li class="toctree-l2"><a class="reference internal" href="schematics.html">Schematic capture for SLiCAP</a></li>
<li class="toctree-l2"><a class="reference internal" href="specifications.html">Work with specifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="parameters.html">Work with parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="models.html">Work with models</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Work with subcircuits</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#subcircuit-expansion">Subcircuit expansion</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#reference-designators-of-expanded-circuit-elements">Reference designators of expanded circuit elements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#expanded-circuit-node-names">Expanded circuit node names</a></li>
<li class="toctree-l4"><a class="reference internal" href="#expanded-circuit-parameter-names">Expanded circuit parameter names</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#subcircuit-creation">Subcircuit creation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#create-subcircuits-with-kicad">Create subcircuits with KiCAD</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#display-circuit-data-on-html-pages-and-in-latex-documents">Display circuit data on HTML pages and in LaTeX documents</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="analysis.html">Perform analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="matrices.html">SLiCAP circuit matrix equation</a></li>
<li class="toctree-l2"><a class="reference internal" href="laplace.html">SLiCAP Laplace analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="pz.html">SLiCAP pole-zero analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="time.html">SLiCAP time-domain analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="noise.html">SLiCAP noise analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="dcvar.html">SLiCAP DC and dcvar analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="feedback.html">Work with feedback circuits</a></li>
<li class="toctree-l2"><a class="reference internal" href="balanced.html">Work with balanced circuits</a></li>
<li class="toctree-l2"><a class="reference internal" href="math.html">Work with analysis results</a></li>
<li class="toctree-l2"><a class="reference internal" href="ngspice.html">Interface with NGspice</a></li>
<li class="toctree-l2"><a class="reference internal" href="plots.html">Create plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="reports.html">Create reports</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/SLiCAPtutorials.html">SLiCAP Examples and Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../syntax/SLiCAPnetlistSyntax.html">SLiCAP Netlist Syntax</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/SLiCAPreference.html">SLiCAP Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SLiCAP</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="SLiCAPuserguide.html">SLiCAP User Guide</a></li>
      <li class="breadcrumb-item active">Work with subcircuits</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/userguide/subcircuit.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="work-with-subcircuits">
<h1>Work with subcircuits<a class="headerlink" href="#work-with-subcircuits" title="Link to this heading"></a></h1>
<img alt="../_images/colorCode.svg" src="../_images/colorCode.svg" />
<p>Although SLiCAP is intended to be used for relatively small circuits, it supports unlimited netsing of subcircuits. The function <code class="docutils literal notranslate"><span class="pre">makeCircuit()</span></code> recursively expands subcircuits until the final circuit comprises devices with stamp models only (see <a class="reference external" href="models.html">Work with models</a>). Working with subcircuits, usually simplifies the design and is strongly recommended in the following cases:</p>
<ol class="arabic">
<li><p>The circuit consists of a number of topologically identical building blocks comprising multiple devices</p>
<ul>
<li><p>Examples are the built-in subcircuits for small-signal models of active devices and operational amplifiers.</p>
<p>Below the built-in definition (in <code class="docutils literal notranslate"><span class="pre">SLiCAPmodels.lib</span></code>) of the small-signal model of a MOS transistor</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos">38</span><span class="o">*</span> <span class="n">MOSFET</span>
<span class="linenos">39</span><span class="o">.</span><span class="n">subckt</span> <span class="n">M</span> <span class="n">d</span> <span class="n">g</span> <span class="n">s</span> <span class="n">b</span> <span class="n">gm</span><span class="o">=</span><span class="mi">1</span><span class="n">m</span> <span class="n">gb</span><span class="o">=</span><span class="mi">0</span> <span class="n">go</span><span class="o">=</span><span class="mi">0</span> <span class="n">cgs</span><span class="o">=</span><span class="mi">0</span> <span class="n">cdg</span><span class="o">=</span><span class="mi">0</span> <span class="n">cgb</span><span class="o">=</span><span class="mi">0</span> <span class="n">cdb</span><span class="o">=</span><span class="mi">0</span> <span class="n">csb</span><span class="o">=</span><span class="mi">0</span> <span class="p">;</span> <span class="n">default</span> <span class="n">values</span>
<span class="linenos">40</span><span class="n">Gm</span> <span class="n">d</span> <span class="n">s</span> <span class="n">g</span> <span class="n">s</span> <span class="n">g</span> <span class="n">value</span><span class="o">=</span><span class="p">{</span><span class="n">gm</span><span class="p">}</span>
<span class="linenos">41</span><span class="n">Gb</span> <span class="n">d</span> <span class="n">s</span> <span class="n">b</span> <span class="n">s</span> <span class="n">g</span> <span class="n">value</span><span class="o">=</span><span class="p">{</span><span class="n">gb</span><span class="p">}</span>
<span class="linenos">42</span><span class="n">Go</span> <span class="n">d</span> <span class="n">s</span> <span class="n">d</span> <span class="n">s</span> <span class="n">g</span> <span class="n">value</span><span class="o">=</span><span class="p">{</span><span class="n">go</span><span class="p">}</span>
<span class="linenos">43</span><span class="n">Cgs</span> <span class="n">g</span> <span class="n">s</span> <span class="p">{</span><span class="n">cgs</span><span class="p">}</span>
<span class="linenos">44</span><span class="n">Cdg</span> <span class="n">d</span> <span class="n">g</span> <span class="p">{</span><span class="n">cdg</span><span class="p">}</span>
<span class="linenos">45</span><span class="n">Cgb</span> <span class="n">g</span> <span class="n">b</span> <span class="p">{</span><span class="n">cgb</span><span class="p">}</span>
<span class="linenos">46</span><span class="n">Cdb</span> <span class="n">d</span> <span class="n">b</span> <span class="p">{</span><span class="n">cdb</span><span class="p">}</span>
<span class="linenos">47</span><span class="n">Csb</span> <span class="n">s</span> <span class="n">b</span> <span class="p">{</span><span class="n">csb</span><span class="p">}</span>
<span class="linenos">48</span><span class="o">.</span><span class="n">ends</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>The circuit consists of a number of building blocks that comprise multiple parameters with complex expressions</p>
<ul>
<li><p>Examples are the built-in subcircuits for MOS devices with EKV model equations that relate their small-signal parameters to geometry parameters (e.g. W, L) and operating point parameters (e.g ID).</p>
<p>Below the built-in definition (in <code class="docutils literal notranslate"><span class="pre">SLiCAP.lib</span></code>) of the small-signal model of an CMOS18 NMOS transistor with its small-signal circuit parameters related to its geometry and operating conditions.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos">346</span><span class="o">.</span><span class="n">subckt</span> <span class="n">CMOS18N</span> <span class="n">drain</span> <span class="n">gate</span> <span class="n">source</span> <span class="n">bulk</span> <span class="n">W</span><span class="o">=</span><span class="p">{</span><span class="n">W</span><span class="p">}</span> <span class="n">L</span><span class="o">=</span><span class="p">{</span><span class="n">L</span><span class="p">}</span> <span class="n">ID</span><span class="o">=</span><span class="p">{</span><span class="n">ID</span><span class="p">}</span>
<span class="linenos">347</span><span class="o">*</span> <span class="n">EKV</span> <span class="n">model</span> <span class="n">of</span> <span class="n">transistor</span> <span class="n">without</span> <span class="n">bulk</span> <span class="n">resistances</span>
<span class="linenos">348</span><span class="o">*</span> <span class="n">Voltage</span> <span class="n">dependency</span> <span class="n">of</span> <span class="n">bulk</span> <span class="n">capacitances</span> <span class="ow">not</span> <span class="n">modeled</span>
<span class="linenos">349</span><span class="o">*</span> <span class="n">Operating</span> <span class="ow">in</span> <span class="n">forward</span> <span class="n">saturation</span> <span class="n">region</span>
<span class="linenos">350</span><span class="o">*</span> 
<span class="linenos">351</span><span class="n">M1</span> <span class="n">drain</span> <span class="n">gate</span> <span class="n">source</span> <span class="n">bulk</span> <span class="n">CMOS18N</span>
<span class="linenos">352</span>
<span class="linenos">353</span><span class="o">.</span><span class="n">model</span> <span class="n">CMOS18N</span> <span class="n">M</span> 
<span class="linenos">354</span><span class="o">+</span> <span class="n">gm</span>      <span class="o">=</span> <span class="p">{</span><span class="n">g_m</span><span class="p">}</span> 
<span class="linenos">355</span><span class="o">+</span> <span class="n">go</span>      <span class="o">=</span> <span class="p">{</span><span class="n">g_o</span><span class="p">}</span> 
<span class="linenos">356</span><span class="o">+</span> <span class="n">gb</span>      <span class="o">=</span> <span class="p">{</span><span class="n">g_b</span><span class="p">}</span>
<span class="linenos">357</span><span class="o">+</span> <span class="n">cgs</span>     <span class="o">=</span> <span class="p">{</span><span class="n">c_gs</span><span class="p">}</span>
<span class="linenos">358</span><span class="o">+</span> <span class="n">cdg</span>     <span class="o">=</span> <span class="p">{</span><span class="n">c_dg</span><span class="p">}</span>
<span class="linenos">359</span><span class="o">+</span> <span class="n">cgb</span>     <span class="o">=</span> <span class="p">{</span><span class="n">c_gb</span><span class="p">}</span>
<span class="linenos">360</span><span class="o">+</span> <span class="n">cdb</span>     <span class="o">=</span> <span class="p">{</span><span class="n">c_db</span><span class="p">}</span>
<span class="linenos">361</span><span class="o">+</span> <span class="n">csb</span>     <span class="o">=</span> <span class="p">{</span><span class="n">c_sb</span><span class="p">}</span>
<span class="linenos">362</span><span class="o">.</span><span class="n">param</span>
<span class="linenos">363</span><span class="o">*</span> <span class="n">device</span> <span class="n">equations</span> <span class="n">EKV</span> <span class="n">model</span>
<span class="linenos">364</span><span class="o">*</span> <span class="n">See</span> <span class="n">Binkley</span><span class="p">:</span> <span class="s2">&quot;Tradeoffs and Optimization in Analog CMOS Design&quot;</span>
<span class="linenos">365</span><span class="o">+</span> <span class="n">IC_CRIT</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="o">/</span><span class="p">((</span><span class="mi">4</span><span class="o">*</span><span class="n">N_s_N18</span><span class="o">*</span><span class="n">U_T</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">Theta_N18</span><span class="o">+</span><span class="mi">1</span><span class="o">/</span><span class="n">L</span><span class="o">/</span><span class="n">E_CRIT_N18</span><span class="p">))</span><span class="o">^</span><span class="mi">2</span><span class="p">}</span>
<span class="linenos">366</span><span class="o">+</span> <span class="n">g_m</span>     <span class="o">=</span> <span class="p">{</span><span class="n">ID</span><span class="o">/</span><span class="p">(</span><span class="n">N_s_N18</span><span class="o">*</span><span class="n">U_T</span><span class="o">*</span><span class="n">sqrt</span><span class="p">(</span><span class="n">IC_g</span><span class="o">+</span><span class="mf">0.5</span><span class="o">*</span><span class="n">sqrt</span><span class="p">(</span><span class="n">IC_g</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">))}</span>
<span class="linenos">367</span><span class="o">+</span> <span class="n">g_o</span>     <span class="o">=</span> <span class="p">{</span><span class="n">g_CLM</span> <span class="o">+</span> <span class="n">g_DIBL</span><span class="p">}</span>
<span class="linenos">368</span><span class="o">+</span> <span class="n">g_CLM</span>   <span class="o">=</span> <span class="p">{</span><span class="n">ID</span><span class="o">/</span><span class="p">(</span><span class="n">VAL_N18</span><span class="o">*</span><span class="p">(</span><span class="n">L</span><span class="o">+</span><span class="mi">2</span><span class="o">*</span><span class="n">L_min_N18</span><span class="p">))}</span> <span class="p">;</span> 
<span class="linenos">369</span><span class="o">+</span> <span class="n">g_DIBL</span>  <span class="o">=</span> <span class="p">{</span><span class="o">-</span><span class="n">g_m</span><span class="o">*</span><span class="n">DVTDIBL_N18</span><span class="o">*</span><span class="p">(</span><span class="n">L_min_N18</span><span class="o">/</span><span class="n">L</span><span class="p">)</span><span class="o">^</span><span class="n">DVTIDBLEXP_N18</span><span class="p">}</span>
<span class="linenos">370</span><span class="o">+</span> <span class="n">g_b</span>     <span class="o">=</span> <span class="p">{(</span><span class="n">N_s_N18</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">g_m</span><span class="p">}</span>
<span class="linenos">371</span><span class="o">+</span> <span class="n">c_gs</span>    <span class="o">=</span> <span class="p">{(</span><span class="mi">2</span><span class="o">-</span><span class="n">x</span><span class="p">)</span><span class="o">/</span><span class="mi">3</span><span class="o">*</span><span class="n">W</span><span class="o">*</span><span class="n">L</span><span class="o">*</span><span class="n">C_OX_N18</span> <span class="o">+</span> <span class="n">CGSO_N18</span><span class="o">*</span><span class="n">W</span><span class="p">}</span> 
<span class="linenos">372</span><span class="o">+</span> <span class="n">c_dg</span>    <span class="o">=</span> <span class="p">{</span><span class="n">CGSO_N18</span><span class="o">*</span><span class="n">W</span><span class="p">}</span>
<span class="linenos">373</span><span class="o">+</span> <span class="n">c_gb</span>    <span class="o">=</span> <span class="p">{</span><span class="n">W</span><span class="o">*</span><span class="n">L</span><span class="o">*</span><span class="n">C_OX_N18</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">x</span><span class="p">)</span><span class="o">/</span><span class="mi">3</span><span class="o">*</span><span class="p">(</span><span class="n">N_s_N18</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="n">N_s_N18</span><span class="o">+</span><span class="n">CGBO_N18</span><span class="o">*</span><span class="mi">2</span><span class="o">*</span><span class="n">L</span><span class="p">}</span>
<span class="linenos">374</span><span class="o">+</span> <span class="n">c_db</span>    <span class="o">=</span> <span class="p">{</span><span class="n">CJB0_N18</span><span class="o">*</span><span class="n">W</span><span class="o">*</span><span class="n">LDS_N18</span><span class="p">}</span>
<span class="linenos">375</span><span class="o">+</span> <span class="n">c_sb</span>    <span class="o">=</span> <span class="p">{</span><span class="n">CJB0_N18</span><span class="o">*</span><span class="n">W</span><span class="o">*</span><span class="n">LDS_N18</span><span class="p">}</span>
<span class="linenos">376</span><span class="o">+</span> <span class="n">IC</span>      <span class="o">=</span> <span class="p">{</span><span class="n">ID</span><span class="o">*</span><span class="n">L</span><span class="o">/</span><span class="n">W</span><span class="o">/</span><span class="n">I_0_N18</span><span class="p">}</span>   
<span class="linenos">377</span><span class="o">+</span> <span class="n">IC_g</span>    <span class="o">=</span> <span class="p">{</span><span class="n">IC</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="p">(</span><span class="n">IC</span><span class="o">/</span><span class="n">IC_CRIT</span><span class="p">))}</span>           
<span class="linenos">378</span><span class="o">+</span> <span class="n">IC_v</span>    <span class="o">=</span> <span class="p">{</span><span class="n">IC</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="p">(</span><span class="n">IC</span><span class="o">/</span><span class="mi">4</span><span class="o">/</span><span class="n">IC_CRIT</span><span class="p">)</span><span class="o">^</span><span class="n">beta_N18</span><span class="p">)</span><span class="o">^</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">beta_N18</span><span class="p">)}</span>
<span class="linenos">379</span><span class="o">+</span> <span class="n">V_GS</span>    <span class="o">=</span> <span class="p">{</span><span class="mi">2</span><span class="o">*</span><span class="n">N_s_N18</span><span class="o">*</span><span class="n">U_T</span><span class="o">*</span><span class="n">ln</span><span class="p">(</span><span class="n">exp</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="n">IC_v</span><span class="p">))</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">Vth_N18</span><span class="p">}</span>
<span class="linenos">380</span><span class="o">+</span> <span class="n">f_T</span>     <span class="o">=</span> <span class="p">{</span><span class="n">g_m</span><span class="o">/</span><span class="mi">2</span><span class="o">/</span><span class="n">pi</span><span class="o">/</span><span class="n">c_iss</span><span class="p">}</span>
<span class="linenos">381</span><span class="o">+</span> <span class="n">c_iss</span>   <span class="o">=</span> <span class="p">{</span><span class="n">c_gs</span><span class="o">+</span><span class="n">c_dg</span><span class="o">+</span><span class="n">c_gb</span><span class="p">}</span>
<span class="linenos">382</span><span class="o">+</span> <span class="n">x</span>       <span class="o">=</span> <span class="p">{(</span><span class="n">sqrt</span><span class="p">(</span><span class="n">IC</span> <span class="o">+</span> <span class="mf">0.25</span><span class="p">)</span> <span class="o">+</span> <span class="mf">1.5</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="n">IC</span> <span class="o">+</span> <span class="mf">0.25</span><span class="p">)</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span><span class="o">^</span><span class="mi">2</span><span class="p">}</span>
<span class="linenos">383</span><span class="o">.</span><span class="n">ends</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>The circuit consists of an anti-series connection of two identical circuits.</p>
<ul class="simple">
<li><p>These circuits belong to the class of ‘balanced circuits’. Nodal voltages and branch currents in these circuits can be resolved in differential-mode and common-mode quantities. SLiCAP can decompose a balanced circuit into common-mode and differential-mode equivalent circuits. To this end, it needs pairing information for nodes and branches, which is easy to provide if the balanced circuit consists of the anti-series connection of two identical sub circuits. For more information see: <a class="reference external" href="balanced.html">Work with balanced circuits</a></p></li>
</ul>
</li>
</ol>
<img alt="../_images/colorCode.svg" src="../_images/colorCode.svg" />
<p>SLiCAP output displayed on this manual page, is generated with the script: <code class="docutils literal notranslate"><span class="pre">subcircuits.py</span></code>, imported by <code class="docutils literal notranslate"><span class="pre">Manual.py</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/usr/bin/env python3</span>
<span class="linenos"> 2</span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos"> 5</span><span class="sd">subcircuits.py: SLiCAP scripts for the HTML help file</span>
<span class="linenos"> 6</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos"> 7</span><span class="kn">import</span><span class="w"> </span><span class="nn">SLiCAP</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sl</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="c1">###############################################################################</span>
<span class="linenos">10</span><span class="c1"># work with subcircuits</span>
<span class="linenos">11</span><span class="c1">###############################################################################</span>
</pre></div>
</div>
<section id="subcircuit-expansion">
<h2>Subcircuit expansion<a class="headerlink" href="#subcircuit-expansion" title="Link to this heading"></a></h2>
<p>Below a schematic diagram of a circuit with nested subcircuits. The main circuit comprises one subcircuit “XA: bigAmp”. This subcircuit comprises two identical “smallAmp” subcircuits “X1” and “X2”.</p>
<a class="reference internal image-reference" href="../_images/hierarchy.svg"><img alt="../_images/hierarchy.svg" src="../_images/hierarchy.svg" style="width: 800px;" />
</a>
<p>Subcircuit “XA” has two parameters that can be set by the parent circuit: “A_i”, the voltage gain of “X1” and “R_o” the output resistance of both “X1” and “X2”. The resistance of “R1” of “XA” is defined symbolically as <span class="math notranslate nohighlight">\(R_i\)</span> to which no numeric value has been assigned.</p>
<p>Below the manually created netlist of the circuit.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="n">hierarchy</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="n">V1</span> <span class="mi">1</span> <span class="mi">0</span>     <span class="n">V</span>      <span class="n">value</span><span class="o">=</span><span class="p">{</span><span class="n">V_s</span><span class="p">}</span>
<span class="linenos"> 4</span><span class="n">R1</span> <span class="mi">1</span> <span class="mi">2</span>     <span class="n">R</span>      <span class="n">value</span><span class="o">=</span><span class="p">{</span><span class="n">R_s</span><span class="p">}</span>
<span class="linenos"> 5</span><span class="n">R2</span> <span class="mi">4</span> <span class="mi">0</span>     <span class="n">R</span>      <span class="n">value</span><span class="o">=</span><span class="p">{</span><span class="n">R_L</span><span class="p">}</span>
<span class="linenos"> 6</span><span class="n">XA</span> <span class="mi">2</span> <span class="mi">0</span> <span class="mi">4</span> <span class="mi">0</span> <span class="n">bigAmp</span> <span class="n">A_i</span><span class="o">=</span><span class="p">{</span><span class="n">A_i</span><span class="p">}</span> <span class="n">R_o</span><span class="o">=</span><span class="p">{</span><span class="n">R</span><span class="p">}</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="o">.</span><span class="n">param</span> <span class="n">V_s</span><span class="o">=</span><span class="mi">1</span> <span class="n">R_s</span><span class="o">=</span><span class="mi">50</span>  <span class="n">R</span><span class="o">=</span><span class="mi">50</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="o">.</span><span class="n">subckt</span> <span class="n">bigAmp</span> <span class="n">inP</span> <span class="n">inN</span> <span class="n">ouP</span> <span class="n">outN</span> <span class="n">A_i</span><span class="o">=</span><span class="mi">30</span> <span class="n">R_o</span><span class="o">=</span><span class="mi">30</span>
<span class="linenos">11</span><span class="n">R1</span> <span class="n">inP</span> <span class="n">inN</span>           <span class="n">R</span>        <span class="n">value</span><span class="o">=</span><span class="p">{</span><span class="n">R_i</span><span class="p">}</span>
<span class="linenos">12</span><span class="n">X1</span> <span class="n">inP</span> <span class="n">inN</span> <span class="mi">3</span>    <span class="mi">0</span>    <span class="n">smallAmp</span> <span class="n">A_v</span><span class="o">=</span><span class="p">{</span><span class="n">A_i</span><span class="p">}</span> <span class="n">R_o</span><span class="o">=</span><span class="mi">40</span>
<span class="linenos">13</span><span class="n">X2</span> <span class="mi">3</span>   <span class="mi">0</span>   <span class="n">outP</span> <span class="n">outN</span> <span class="n">smallAmp</span> <span class="n">A_v</span><span class="o">=</span><span class="mi">10</span> <span class="n">R_o</span><span class="o">=</span><span class="p">{</span><span class="n">R_o</span><span class="p">}</span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="o">.</span><span class="n">subckt</span> <span class="n">smallAmp</span> <span class="n">inP</span> <span class="n">inN</span> <span class="n">outP</span> <span class="n">outN</span> <span class="n">A_v</span><span class="o">=</span><span class="p">{</span><span class="n">A</span><span class="p">}</span> <span class="n">R_o</span><span class="o">=</span><span class="mi">10</span>
<span class="linenos">16</span><span class="n">E1</span> <span class="mi">1</span> <span class="n">outN</span> <span class="n">inP</span> <span class="n">inN</span> <span class="n">E</span> <span class="n">value</span><span class="o">=</span><span class="p">{</span><span class="n">A_v</span><span class="p">}</span>
<span class="linenos">17</span><span class="n">R1</span> <span class="mi">1</span> <span class="n">outP</span>         <span class="n">R</span> <span class="n">value</span><span class="o">=</span><span class="p">{</span><span class="n">R_o</span><span class="p">}</span>
<span class="linenos">18</span><span class="o">.</span><span class="n">ends</span> <span class="p">;</span> <span class="n">smallAmp</span>
<span class="linenos">19</span>
<span class="linenos">20</span><span class="o">.</span><span class="n">ends</span> <span class="p">;</span> <span class="n">bigAmp</span>
<span class="linenos">21</span>
<span class="linenos">22</span><span class="o">.</span><span class="n">end</span>
</pre></div>
</div>
<p>At the creation of a circuit object, SLiCAP expands or “flattens” this circuit. It converts the hierarchically structured netlist into a circuit that comprises devices with stamp models only (see <a class="reference external" href="models.html">Work with models</a>). The MNA matrix equation will be constructed from this “flattened” circuit.</p>
<section id="reference-designators-of-expanded-circuit-elements">
<h3>Reference designators of expanded circuit elements<a class="headerlink" href="#reference-designators-of-expanded-circuit-elements" title="Link to this heading"></a></h3>
<p>The table below shows the element data of the expanded circuit.</p>
<p>The first column of this table shows the reference designators of the expanded circuit elements.</p>
<div class="note admonition">
<p class="admonition-title">important</p>
<p>The reference designator of a subcircuit element in its expanded parent is that of the subcircuit element appended with <code class="docutils literal notranslate"><span class="pre">_&lt;refX&gt;</span></code>, where <code class="docutils literal notranslate"><span class="pre">refX</span></code> is the reference designator of the parent subcircuit.</p>
<p>Hence, the reference designator of “R1” in “XA” becomes “R1_XA” in its expanded parent.</p>
<p>This naming process is recursive, so “R1” in “X1” of “XA” becomes “R1_X1_XA” in the expanded parent of “XA”.</p>
</div>
<table class="docutils align-default" id="id2">
<caption><span class="caption-number">Table 7 </span><span class="caption-text">Expanded netlist data of hierarchy.cir</span><a class="headerlink" href="#id2" title="Link to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>ID</p></th>
<th class="head"><p>Nodes</p></th>
<th class="head"><p>Refs</p></th>
<th class="head"><p>Model</p></th>
<th class="head"><p>Param</p></th>
<th class="head"><p>Symbolic</p></th>
<th class="head"><p>Numeric</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>V1</p></td>
<td><p>1 0</p></td>
<td></td>
<td><p>V</p></td>
<td><p>value</p></td>
<td><p><span class="math notranslate nohighlight">\(V_{s}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(1\)</span></p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>dc</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>dcvar</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>noise</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-even"><td><p>R1</p></td>
<td><p>1 2</p></td>
<td></td>
<td><p>R</p></td>
<td><p>value</p></td>
<td><p><span class="math notranslate nohighlight">\(R_{s}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(50\)</span></p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>dcvar</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>noisetemp</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>noiseflow</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>dcvarlot</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-odd"><td><p>R2</p></td>
<td><p>4 0</p></td>
<td></td>
<td><p>R</p></td>
<td><p>value</p></td>
<td><p><span class="math notranslate nohighlight">\(R_{L}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(R_{L}\)</span></p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>dcvar</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>noisetemp</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>noiseflow</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>dcvarlot</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-even"><td><p>R1_XA</p></td>
<td><p>2 0</p></td>
<td></td>
<td><p>R</p></td>
<td><p>value</p></td>
<td><p><span class="math notranslate nohighlight">\(R_{i XA}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(R_{i XA}\)</span></p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>dcvar</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>noisetemp</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>noiseflow</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>dcvarlot</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-odd"><td><p>E1_X1_XA</p></td>
<td><p>1_X1_XA 0 2 0</p></td>
<td></td>
<td><p>E</p></td>
<td><p>value</p></td>
<td><p><span class="math notranslate nohighlight">\(A_{i}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(A_{i}\)</span></p></td>
</tr>
<tr class="row-even"><td><p>R1_X1_XA</p></td>
<td><p>1_X1_XA 3_XA</p></td>
<td></td>
<td><p>R</p></td>
<td><p>value</p></td>
<td><p><span class="math notranslate nohighlight">\(40\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(40\)</span></p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>dcvar</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>noisetemp</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>noiseflow</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>dcvarlot</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-odd"><td><p>E1_X2_XA</p></td>
<td><p>1_X2_XA 0 3_XA 0</p></td>
<td></td>
<td><p>E</p></td>
<td><p>value</p></td>
<td><p><span class="math notranslate nohighlight">\(10\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(10\)</span></p></td>
</tr>
<tr class="row-even"><td><p>R1_X2_XA</p></td>
<td><p>1_X2_XA outP_XA</p></td>
<td></td>
<td><p>R</p></td>
<td><p>value</p></td>
<td><p><span class="math notranslate nohighlight">\(R\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(50\)</span></p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>dcvar</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>noisetemp</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>noiseflow</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>dcvarlot</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
</tbody>
</table>
</section>
<section id="expanded-circuit-node-names">
<h3>Expanded circuit node names<a class="headerlink" href="#expanded-circuit-node-names" title="Link to this heading"></a></h3>
<p>The name of a connecting node of a subcircuit, will be that of the connecting parent node.
Unconnected nodes remain local. Their node names will be modified in a similar way as the element reference designator.</p>
<p>The name of a local node becomes <code class="docutils literal notranslate"><span class="pre">&lt;nodeID&gt;_&lt;refX&gt;</span></code>, where <code class="docutils literal notranslate"><span class="pre">nodeID</span></code> is the node name in the subcircuit, and <code class="docutils literal notranslate"><span class="pre">refX</span></code> is the reference designator of the subcircuit in the parent circuit.</p>
</section>
<section id="expanded-circuit-parameter-names">
<h3>Expanded circuit parameter names<a class="headerlink" href="#expanded-circuit-parameter-names" title="Link to this heading"></a></h3>
<p>Parents can pass parameter values or expression to child subcircuits. If so, all instances of this parameter in element expression in the subcircuit, in parameter definitions in the subcircuit, and in model definitions in the subcircuit, are substituted with the value or expression passed by the parent.</p>
<p>Parents can only pass parameters that are declared a value or expression in the subcircuit definition. See line 10 from the netlist above:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos">10</span><span class="o">.</span><span class="n">subckt</span> <span class="n">bigAmp</span> <span class="n">inP</span> <span class="n">inN</span> <span class="n">ouP</span> <span class="n">outN</span> <span class="n">A_i</span><span class="o">=</span><span class="mi">30</span> <span class="n">R_o</span><span class="o">=</span><span class="mi">30</span>
</pre></div>
</div>
<p>Hence, the parent can pass a value or expression to <span class="math notranslate nohighlight">\(A_i\)</span> and to <span class="math notranslate nohighlight">\(R_o\)</span> to an instance of the subcircuit “bigAmp”.</p>
<p>All other parameters will remain local and all instances of local parameters in subcircuit element expressions, in subcircuit parameter definitions, and in subcircuit model definitions, will be substituted with a new variable:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">new_param</span> <span class="o">=</span> <span class="n">sympy</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">old_param</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="n">refX</span><span class="p">)</span>

<span class="c1"># new_param is the new parameter name</span>
<span class="c1"># old_param is the old parameter name (type = sympy.Symbol)</span>
<span class="c1"># refX is the reference designator of the subcircuit in the parent circuit</span>
</pre></div>
</div>
<p>The tables below show how this applies to the circuit from above.</p>
<table class="docutils align-default" id="id3">
<caption><span class="caption-number">Table 8 </span><span class="caption-text">Expanded circuit parameter definitions</span><a class="headerlink" href="#id3" title="Link to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Symbolic</p></th>
<th class="head"><p>Numeric</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(V_{s}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(1\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(1\)</span></p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(R_{s}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(50\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(50\)</span></p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(R\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(50\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(50\)</span></p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default" id="id4">
<caption><span class="caption-number">Table 9 </span><span class="caption-text">Expanded circuit undefined parameters</span><a class="headerlink" href="#id4" title="Link to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(A_{i}\)</span></p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(R_{L}\)</span></p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(R_{i XA}\)</span></p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="subcircuit-creation">
<h2>Subcircuit creation<a class="headerlink" href="#subcircuit-creation" title="Link to this heading"></a></h2>
<p>Aside from using built-in subcircuits, the user can create subcircuits. There are two ways to create subcircuits:</p>
<ol class="arabic simple">
<li><p>Include a subcircuit definition in a circuit file</p></li>
<li><p>Create a subcircuit definition in a library file and store it in the <code class="docutils literal notranslate"><span class="pre">lib/</span></code> folder of the project directory</p></li>
</ol>
<p>Both methods can be done by manually editing circuit <code class="docutils literal notranslate"><span class="pre">.cir</span></code> files, the latter one can also be performed with a schematic capture program.</p>
<p>The manual approach is elucidated above.</p>
<section id="create-subcircuits-with-kicad">
<h3>Create subcircuits with KiCAD<a class="headerlink" href="#create-subcircuits-with-kicad" title="Link to this heading"></a></h3>
<p>KiCAD supports hierarchical design, but the approach differs from the subcircuit approach outlined above. SLiCAP subcircuits must be created as follows:</p>
<ol class="arabic">
<li><p>Create a KiCAD schematic for the subcircuit and put a command with the subcircuit decraration on the schematic. The subcircuit definition for “smallAmp” looks as depicted below.</p>
<a class="reference internal image-reference" href="../_images/smallAmp.svg"><img alt="../_images/smallAmp.svg" src="../_images/smallAmp.svg" style="width: 350px;" />
</a>
</li>
<li><p>With the <code class="docutils literal notranslate"><span class="pre">.subckt</span></code> directive on the schematic, <code class="docutils literal notranslate"><span class="pre">makeNetlist()</span></code> creates a library file in the <code class="docutils literal notranslate"><span class="pre">lib/</span></code> folder in the project directory. The name of this file defaults to the subcircuit name with extension <code class="docutils literal notranslate"><span class="pre">.lib</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos">15</span><span class="c1"># Create a subcircuit library file: &lt;sl.ini.user_lib_path&gt;smallAmp.lib</span>
<span class="linenos">16</span><span class="n">smallAmp</span> <span class="o">=</span> <span class="n">sl</span><span class="o">.</span><span class="n">makeCircuit</span><span class="p">(</span><span class="s2">&quot;kicad/smallAmp/smallAmp.kicad_sch&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The contents of <code class="docutils literal notranslate"><span class="pre">lib/smallAmp.lib</span></code> is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">smallAmp</span>
<span class="linenos">2</span><span class="o">.</span><span class="n">subckt</span> <span class="n">smallAmp</span> <span class="n">inP</span> <span class="n">inN</span> <span class="n">outP</span> <span class="n">outN</span> <span class="n">A_v</span><span class="o">=</span><span class="p">{</span><span class="n">A</span><span class="p">}</span> <span class="n">r_o</span><span class="o">=</span><span class="p">{</span><span class="n">R</span><span class="p">}</span>
<span class="linenos">3</span><span class="n">E1</span> <span class="mi">1</span> <span class="n">outN</span> <span class="n">inP</span> <span class="n">inN</span> <span class="n">E</span> <span class="n">value</span><span class="o">=</span><span class="p">{</span><span class="n">A_v</span><span class="p">}</span>
<span class="linenos">4</span><span class="n">R1</span> <span class="mi">1</span> <span class="n">outP</span> <span class="n">R</span> <span class="n">value</span><span class="o">=</span><span class="p">{</span><span class="n">r_o</span><span class="p">}</span> <span class="n">noisetemp</span><span class="o">=</span><span class="mi">0</span> <span class="n">noiseflow</span><span class="o">=</span><span class="mi">0</span> <span class="n">dcvar</span><span class="o">=</span><span class="mi">0</span> <span class="n">dcvarlot</span><span class="o">=</span><span class="mi">0</span>
<span class="linenos">5</span><span class="o">.</span><span class="n">ends</span>
<span class="linenos">6</span><span class="o">.</span><span class="n">end</span>
</pre></div>
</div>
<div class="note admonition">
<p class="admonition-title">Important</p>
<p>SLiCAP library files are like circuit netlists. The first line is taken as title and the last line must be <code class="docutils literal notranslate"><span class="pre">.end</span></code>.</p>
</div>
</li>
<li><p>Now create the subcircuit <code class="docutils literal notranslate"><span class="pre">bigAmp</span></code>. Use a 4-pin subcircuit symbol for <code class="docutils literal notranslate"><span class="pre">smallAmp</span></code>, or create a symbol yourself. Don’t forget to include the library with <code class="docutils literal notranslate"><span class="pre">smallAmp.lib</span></code>.</p>
<a class="reference internal image-reference" href="../_images/bigAmp.svg"><img alt="../_images/bigAmp.svg" src="../_images/bigAmp.svg" style="width: 350px;" />
</a>
<ol class="arabic simple">
<li><p>The subcircuit symbol must have four pins and the pin sequence must be according to the subcircuit definition: “inP”, “inN”, “outP”, “outN”. The SLiCAP KiCAD symbol <code class="docutils literal notranslate"><span class="pre">Xamp4</span></code> can be used for this purpose, it has the correct pin sequence.</p></li>
<li><p>Parameters to be passed to the subcircuit must added as <em>symbol properties</em>. The property <em>name</em> is the parameter name and the <em>value</em> can be any because it will be overruled by the definition in the <code class="docutils literal notranslate"><span class="pre">.subckt</span></code> directive.</p></li>
</ol>
<p>The following instruction creates the <code class="docutils literal notranslate"><span class="pre">bigAmp</span></code> library file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos">18</span><span class="c1"># Create a subcircuit library file: &lt;sl.ini.user_lib_path&gt;bigAmp.lib</span>
<span class="linenos">19</span><span class="n">bigAmp</span> <span class="o">=</span> <span class="n">sl</span><span class="o">.</span><span class="n">makeCircuit</span><span class="p">(</span><span class="s2">&quot;kicad/bigAmp/bigAmp.kicad_sch&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The contents of <code class="docutils literal notranslate"><span class="pre">lib/bigAmp.lib</span></code> is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">bigAmp</span>
<span class="linenos">2</span><span class="o">.</span><span class="n">subckt</span> <span class="n">bigAmp</span> <span class="n">inP</span> <span class="n">inN</span> <span class="n">outP</span> <span class="n">outN</span> <span class="n">A_i</span><span class="o">=</span><span class="mi">30</span> <span class="n">R_o</span><span class="o">=</span><span class="mi">30</span>
<span class="linenos">3</span><span class="o">.</span><span class="n">lib</span> <span class="n">smallAmp</span><span class="o">.</span><span class="n">lib</span>
<span class="linenos">4</span><span class="n">R1</span> <span class="n">inP</span> <span class="n">inN</span> <span class="n">R</span> <span class="n">value</span><span class="o">=</span><span class="p">{</span><span class="n">R_i</span><span class="p">}</span> <span class="n">noisetemp</span><span class="o">=</span><span class="mi">0</span> <span class="n">noiseflow</span><span class="o">=</span><span class="mi">0</span> <span class="n">dcvar</span><span class="o">=</span><span class="mi">0</span> <span class="n">dcvarlot</span><span class="o">=</span><span class="mi">0</span>
<span class="linenos">5</span><span class="n">X1</span> <span class="n">inP</span> <span class="n">inN</span> <span class="mi">1</span> <span class="mi">0</span> <span class="n">smallAmp</span> <span class="n">A_v</span><span class="o">=</span><span class="p">{</span><span class="n">A_i</span><span class="p">}</span> <span class="n">r_o</span><span class="o">=</span><span class="mi">40</span>
<span class="linenos">6</span><span class="n">X2</span> <span class="mi">1</span> <span class="mi">0</span> <span class="n">outP</span> <span class="n">outN</span> <span class="n">smallAmp</span> <span class="n">A_v</span><span class="o">=</span><span class="mi">10</span> <span class="n">r_o</span><span class="o">=</span><span class="p">{</span><span class="n">R_o</span><span class="p">}</span>
<span class="linenos">7</span><span class="o">.</span><span class="n">ends</span>
<span class="linenos">8</span><span class="o">.</span><span class="n">end</span>
</pre></div>
</div>
</li>
<li><p>Now create the main circuit and again use the <code class="docutils literal notranslate"><span class="pre">Xamp4</span></code> symbol for <code class="docutils literal notranslate"><span class="pre">bigAmp</span></code>.</p>
<a class="reference internal image-reference" href="../_images/mainAmp.svg"><img alt="../_images/mainAmp.svg" src="../_images/mainAmp.svg" style="width: 300px;" />
</a>
<p>The following instruction creates the main circuit object .</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos">17</span><span class="c1"># Create the main circuit</span>
<span class="linenos">18</span><span class="n">mainAmp</span> <span class="o">=</span> <span class="n">sl</span><span class="o">.</span><span class="n">makeCircuit</span><span class="p">(</span><span class="s2">&quot;kicad/mainAmp/mainAmp.kicad_sch&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The netlist of <code class="docutils literal notranslate"><span class="pre">cir/mainAmp.cir</span></code> is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">mainAmp</span>
<span class="linenos">2</span><span class="o">.</span><span class="n">lib</span> <span class="n">bigAmp</span><span class="o">.</span><span class="n">lib</span>
<span class="linenos">3</span><span class="o">.</span><span class="n">param</span> <span class="n">V_s</span><span class="o">=</span><span class="mi">1</span> <span class="n">R_s</span><span class="o">=</span><span class="mi">50</span> <span class="n">R</span><span class="o">=</span><span class="mi">50</span>
<span class="linenos">4</span><span class="n">R1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="n">R</span> <span class="n">value</span><span class="o">=</span><span class="p">{</span><span class="n">R_s</span><span class="p">}</span> <span class="n">noisetemp</span><span class="o">=</span><span class="mi">0</span> <span class="n">noiseflow</span><span class="o">=</span><span class="mi">0</span> <span class="n">dcvar</span><span class="o">=</span><span class="mi">0</span> <span class="n">dcvarlot</span><span class="o">=</span><span class="mi">0</span>
<span class="linenos">5</span><span class="n">R2</span> <span class="mi">3</span> <span class="mi">0</span> <span class="n">R</span> <span class="n">value</span><span class="o">=</span><span class="p">{</span><span class="n">R_L</span><span class="p">}</span> <span class="n">noisetemp</span><span class="o">=</span><span class="mi">0</span> <span class="n">noiseflow</span><span class="o">=</span><span class="mi">0</span> <span class="n">dcvar</span><span class="o">=</span><span class="mi">0</span> <span class="n">dcvarlot</span><span class="o">=</span><span class="mi">0</span>
<span class="linenos">6</span><span class="n">V1</span> <span class="mi">1</span> <span class="mi">0</span> <span class="n">V</span> <span class="n">value</span><span class="o">=</span><span class="p">{</span><span class="n">V_s</span><span class="p">}</span> <span class="n">noise</span><span class="o">=</span><span class="mi">0</span> <span class="n">dc</span><span class="o">=</span><span class="mi">0</span> <span class="n">dcvar</span><span class="o">=</span><span class="mi">0</span>
<span class="linenos">7</span><span class="n">XA</span> <span class="mi">2</span> <span class="mi">0</span> <span class="mi">3</span> <span class="mi">0</span> <span class="n">bigAmp</span> <span class="n">A_i</span><span class="o">=</span><span class="p">{</span><span class="n">A_i</span><span class="p">}</span> <span class="n">R_o</span><span class="o">=</span><span class="p">{</span><span class="n">R</span><span class="p">}</span>
<span class="linenos">8</span><span class="o">.</span><span class="n">end</span>
</pre></div>
</div>
<p>The expanded circuit data and the parameter definitions are as above:</p>
<table class="docutils align-default" id="id5">
<caption><span class="caption-number">Table 10 </span><span class="caption-text">Expanded netlist data of mainAmp.cir</span><a class="headerlink" href="#id5" title="Link to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>ID</p></th>
<th class="head"><p>Nodes</p></th>
<th class="head"><p>Refs</p></th>
<th class="head"><p>Model</p></th>
<th class="head"><p>Param</p></th>
<th class="head"><p>Symbolic</p></th>
<th class="head"><p>Numeric</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>R1</p></td>
<td><p>1 2</p></td>
<td></td>
<td><p>R</p></td>
<td><p>value</p></td>
<td><p><span class="math notranslate nohighlight">\(R_{s}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(50\)</span></p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>noisetemp</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>noiseflow</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>dcvar</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>dcvarlot</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-odd"><td><p>R2</p></td>
<td><p>3 0</p></td>
<td></td>
<td><p>R</p></td>
<td><p>value</p></td>
<td><p><span class="math notranslate nohighlight">\(R_{L}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(R_{L}\)</span></p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>noisetemp</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>noiseflow</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>dcvar</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>dcvarlot</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-even"><td><p>V1</p></td>
<td><p>1 0</p></td>
<td></td>
<td><p>V</p></td>
<td><p>value</p></td>
<td><p><span class="math notranslate nohighlight">\(V_{s}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(1\)</span></p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>noise</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>dc</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>dcvar</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-even"><td><p>R1_XA</p></td>
<td><p>2 0</p></td>
<td></td>
<td><p>R</p></td>
<td><p>value</p></td>
<td><p><span class="math notranslate nohighlight">\(R_{i XA}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(R_{i XA}\)</span></p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>noisetemp</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>noiseflow</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>dcvar</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>dcvarlot</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-odd"><td><p>E1_X1_XA</p></td>
<td><p>1_X1_XA 0 2 0</p></td>
<td></td>
<td><p>E</p></td>
<td><p>value</p></td>
<td><p><span class="math notranslate nohighlight">\(A_{i}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(A_{i}\)</span></p></td>
</tr>
<tr class="row-even"><td><p>R1_X1_XA</p></td>
<td><p>1_X1_XA 1_XA</p></td>
<td></td>
<td><p>R</p></td>
<td><p>value</p></td>
<td><p><span class="math notranslate nohighlight">\(40\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(40\)</span></p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>noisetemp</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>noiseflow</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>dcvar</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>dcvarlot</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-odd"><td><p>E1_X2_XA</p></td>
<td><p>1_X2_XA 0 1_XA 0</p></td>
<td></td>
<td><p>E</p></td>
<td><p>value</p></td>
<td><p><span class="math notranslate nohighlight">\(10\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(10\)</span></p></td>
</tr>
<tr class="row-even"><td><p>R1_X2_XA</p></td>
<td><p>1_X2_XA 3</p></td>
<td></td>
<td><p>R</p></td>
<td><p>value</p></td>
<td><p><span class="math notranslate nohighlight">\(R\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(50\)</span></p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>noisetemp</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>noiseflow</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>dcvar</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td></td>
<td></td>
<td><p>dcvarlot</p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(0\)</span></p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default" id="id6">
<caption><span class="caption-number">Table 11 </span><span class="caption-text">Expanded circuit parameter definitions</span><a class="headerlink" href="#id6" title="Link to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Symbolic</p></th>
<th class="head"><p>Numeric</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(V_{s}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(1\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(1\)</span></p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(R_{s}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(50\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(50\)</span></p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(R\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(50\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(50\)</span></p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default" id="id7">
<caption><span class="caption-number">Table 12 </span><span class="caption-text">Expanded circuit undefined parameters</span><a class="headerlink" href="#id7" title="Link to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(A_{i}\)</span></p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(R_{L}\)</span></p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(R_{i XA}\)</span></p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</section>
</section>
<section id="display-circuit-data-on-html-pages-and-in-latex-documents">
<h2>Display circuit data on HTML pages and in LaTeX documents<a class="headerlink" href="#display-circuit-data-on-html-pages-and-in-latex-documents" title="Link to this heading"></a></h2>
<p>The report module <a class="reference external" href="reports.html">Create reports</a>, discusses how HTML snippets and LaTeX snippets can be created for variables, expressions, equations and tables.</p>
<p>As a matter of fact, tables and figures on this page are created with this module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos">24</span><span class="c1"># Generate RST snippets for the Help file</span>
<span class="linenos">25</span><span class="n">rst</span> <span class="o">=</span> <span class="n">sl</span><span class="o">.</span><span class="n">RSTformatter</span><span class="p">()</span>
<span class="linenos">26</span>
<span class="linenos">27</span><span class="n">rst</span><span class="o">.</span><span class="n">elementData</span><span class="p">(</span><span class="n">cir</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="s2">&quot;Expanded netlist data of hierarchy.cir&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span>
<span class="linenos">28</span>    <span class="s2">&quot;table-hierarchy-expanded&quot;</span><span class="p">)</span>
<span class="linenos">29</span><span class="n">rst</span><span class="o">.</span><span class="n">parDefs</span><span class="p">(</span><span class="n">cir</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="s2">&quot;Expanded circuit parameter definitions&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span>
<span class="linenos">30</span>    <span class="s2">&quot;table-hierarchy-pardefs&quot;</span><span class="p">)</span>
<span class="linenos">31</span><span class="n">rst</span><span class="o">.</span><span class="n">params</span><span class="p">(</span><span class="n">cir</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="s2">&quot;Expanded circuit undefined parameters&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span>
<span class="linenos">32</span>    <span class="s2">&quot;table-hierarchy-params&quot;</span><span class="p">)</span>
<span class="linenos">33</span><span class="n">rst</span><span class="o">.</span><span class="n">elementData</span><span class="p">(</span><span class="n">mainAmp</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="s2">&quot;Expanded netlist data of mainAmp.cir&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span>
<span class="linenos">34</span>    <span class="s2">&quot;table-mainamp-expanded&quot;</span><span class="p">)</span>
<span class="linenos">35</span><span class="n">rst</span><span class="o">.</span><span class="n">parDefs</span><span class="p">(</span><span class="n">mainAmp</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="s2">&quot;Expanded circuit parameter definitions&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span>
<span class="linenos">36</span>    <span class="s2">&quot;table-mainamp-pardefs&quot;</span><span class="p">)</span>
<span class="linenos">37</span><span class="n">rst</span><span class="o">.</span><span class="n">params</span><span class="p">(</span><span class="n">mainAmp</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="s2">&quot;Expanded circuit undefined parameters&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span>
<span class="linenos">38</span>    <span class="s2">&quot;table-mainamp-params&quot;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/colorCode.svg" src="../_images/colorCode.svg" />
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="models.html" class="btn btn-neutral float-left" title="Work with models" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="analysis.html" class="btn btn-neutral float-right" title="Perform analysis" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, SLiCAP development team.
      <span class="lastupdated">Last updated on 2025, Dec 27.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
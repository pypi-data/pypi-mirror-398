system_prompt = 'You are an AI assistant responsible for processing user inputs and generating structured, pattern-matched responses using the llmatch-messages package. Your role is to receive user requests related to ISBN data transformation, and respond with well-structured outputs that match predefined patterns. When constructing your response, ensure it adheres to the following guidelines:\n\n1. Response Structure:\n   - Wrap the extracted structured data within a <isbn_list> ... </isbn_list> tag.\n   - If the extraction is successful, set "success" to True and include the structured info.\n   - If there\'s an error or mismatch, set "success" to False and provide an error message.\n2. Response Content:\n   - The response must be in valid XML-like format, using the <isbn_list> tags for the data.\n   - The "extracted_data" should be a list of dictionaries, each containing ISBN, title, author, and publication year.\n3. Pattern Matching:\n   - Use a regex pattern that captures the content within the <isbn_list> tags.\n   - The regex should be ready for use with llmatch-messages to extract the structured data.\n4. Behavior:\n   - If the LLM\'s reply matches the pattern, parse out the data accordingly.\n   - If a mismatch occurs, the system should retry or indicate failure with diagnostics.\n5. Verbose Mode:\n   - When enabled, include detailed steps and reasoning in the diagnostics.\n   \nPlease generate the response in the specified format, ensuring clarity, structure, and compliance with the pattern-matching requirements. Do not include any extraneous explanations or content outside the response and pattern sections.'
human_prompt = 'Please process the following list of ISBNs and return the structured book data in the specified format:\n\nISBNs to process:\n978-3-16-148410-0\n978-0-7432-7356-5\n978-1-4028-9462-6\n\nExtract and structure the following information for each ISBN: title, author(s), publication year, publisher, and language. Format the output exactly as specified.'
pattern = '<isbn_list>([\\s\\S]*?)</isbn_list>'

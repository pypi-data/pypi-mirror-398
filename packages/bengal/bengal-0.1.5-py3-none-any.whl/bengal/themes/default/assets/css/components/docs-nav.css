/* Documentation Sidebar Navigation */
.docs-nav {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.docs-nav-header {
  padding-bottom: 0.75rem;
  /* Editorial: no border, spacing separates */
}

.docs-nav-title {
  font-size: var(--text-xs);
  font-weight: var(--weight-semibold);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--color-text-tertiary);
  text-decoration: none;
  transition: color var(--transition-fast);
}

.docs-nav-title:hover {
  color: var(--color-primary);
}

.docs-nav-tree {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

/* Virtualize deep nav trees unless DevTools are open to keep the inspector stable. */
html:not([data-devtools-open]) .docs-nav-tree > * {
  content-visibility: auto;
  contain-intrinsic-size: 40px;
}

/* Navigation Groups (Sections) */
.docs-nav-group {
  display: flex;
  flex-direction: column;
}

/* ============================================================================
   ROOT NAVIGATION GROUP (depth 0)
   Static header, no toggle - reduces nesting by 1 level
   ============================================================================ */

.docs-nav-group--root {
  display: flex;
  flex-direction: column;
}

/* Root group header - similar to toggle-wrapper but without toggle button */
.docs-nav-group-header {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.375rem 0.5rem;
  margin-bottom: 0.5rem;
  border-bottom: 1px solid var(--color-border);
}

/* Root group title styling */
.docs-nav-group-title {
  font-size: var(--text-sm);
  font-weight: var(--weight-bold);
  color: var(--color-text-primary);
  text-decoration: none;
  transition: color var(--transition-fast);
}

.docs-nav-group-title:hover {
  color: var(--color-primary);
}

.docs-nav-group-title.active,
.docs-nav-group-title[aria-current="page"] {
  color: var(--color-primary);
}

/* Root group children - always expanded, no animation needed */
.docs-nav-group--root > .docs-nav-group-items {
  display: flex;
  opacity: 1;
  transform: none;
  padding-left: 0;
  margin-top: 0;
}

/* Root icon styling */
.docs-nav-group-header .docs-nav-icon {
  color: var(--color-text-tertiary);
}

.docs-nav-group-header:hover .docs-nav-icon {
  color: var(--color-primary);
}

/* Active root icon - subtle glow */
.docs-nav-group-header:has(.docs-nav-group-title.active) .docs-nav-icon,
.docs-nav-group-header:has(.docs-nav-group-title[aria-current="page"]) .docs-nav-icon {
  color: var(--color-primary);
  filter: drop-shadow(0 0 6px color-mix(in srgb, var(--color-primary) 40%, transparent));
}

/* Dark mode root header adjustments */
[data-theme="dark"] .docs-nav-group-header {
  border-bottom-color: var(--color-border);
}

[data-theme="dark"] .docs-nav-group-header .docs-nav-icon {
  color: var(--color-text-tertiary);
}

[data-theme="dark"] .docs-nav-group-header:hover .docs-nav-icon {
  color: var(--color-primary);
}

[data-theme="dark"] .docs-nav-group-header:has(.docs-nav-group-title.active) .docs-nav-icon,
[data-theme="dark"] .docs-nav-group-header:has(.docs-nav-group-title[aria-current="page"]) .docs-nav-icon {
  filter: drop-shadow(0 0 8px color-mix(in srgb, var(--color-primary) 50%, transparent));
}

/* Wrapper containing toggle button + link */
.docs-nav-group-toggle-wrapper {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  border-radius: var(--border-radius-medium);
  transition: all var(--transition-fast), box-shadow 0.2s ease;
  padding: 0.125rem;
  position: relative;
}

.docs-nav-group-toggle-wrapper::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  padding: 1px;
  background: var(--gradient-border-subtle);
  -webkit-mask:
    linear-gradient(#fff 0 0) content-box,
    linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  pointer-events: none;
  opacity: 0;
  transition: opacity var(--transition-fast);
}

/* Left accent bar for parent items with active children */
.docs-nav-group-toggle-wrapper::after {
  content: '';
  position: absolute;
  inset-inline-start: 0;
  top: 0;
  bottom: 0;
  width: 3px;
  background: var(--gradient-border-subtle);
  border-radius: 2px 0 0 2px;
  opacity: 0;
  transition: opacity var(--transition-fast);
  z-index: 1;
}

.docs-nav-group-toggle-wrapper:hover {
  background: var(--color-bg-hover);
  /* Light mode: Neumorphic hover */
  box-shadow:
    inset 0.3px 0.3px 0.8px rgba(255, 255, 255, 0.4),
    inset -0.3px -0.3px 0.8px rgba(0, 0, 0, 0.08),
    1px 1px 2px rgba(0, 0, 0, 0.05),
    -0.3px -0.3px 1px rgba(255, 255, 255, 0.3);
}

.docs-nav-group-toggle-wrapper:hover::before {
  opacity: 0;
  /* Hidden in light mode, shown in dark mode */
}

.docs-nav-group-toggle-wrapper:active {
  /* Light mode: Neumorphic pressed */
  box-shadow:
    inset 0.5px 0.5px 1px rgba(0, 0, 0, 0.1),
    inset -0.3px -0.3px 0.5px rgba(255, 255, 255, 0.2),
    0.3px 0.3px 0.5px rgba(0, 0, 0, 0.03);
  background: var(--color-bg-tertiary);
}

.docs-nav-group-toggle-wrapper:active::before {
  opacity: 0;
}

/* Toggle button (just the arrow icon) */
.docs-nav-group-toggle {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 1.875rem;
  /* 30px - 14px icon + 16px padding */
  min-width: 1.875rem;
  max-width: 1.875rem;
  height: 1.875rem;
  min-height: 1.875rem;
  padding: 0.5rem;
  background: none;
  border: none;
  border-radius: var(--border-radius-medium);
  cursor: pointer;
  transition: all var(--transition-fast);
  touch-action: manipulation;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
  flex-shrink: 0;
  overflow: hidden;
  /* No shadow - wrapper handles it */
}

.docs-nav-group-toggle svg {
  width: 14px;
  height: 14px;
  color: var(--color-text-secondary);
  transition: transform var(--transition-smooth);
  flex-shrink: 0;
  will-change: transform;
}

.docs-nav-group-toggle:hover svg {
  color: var(--color-text-primary);
}

.docs-nav-group-toggle-wrapper:active {
  background: var(--color-bg-tertiary);
}

.docs-nav-group-toggle[aria-expanded="true"] svg {
  transform: rotate(90deg);
}

/* Section link (the title, clickable to navigate) */
.docs-nav-group-link {
  flex: 1;
  padding: 0.375rem 0.5rem 0.375rem 0.25rem;
  font-size: var(--text-sm);
  font-weight: var(--weight-semibold);
  color: var(--color-text-primary);
  text-decoration: none;
  border-radius: var(--border-radius-medium);
  transition: all var(--transition-fast);
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
  /* No shadow - wrapper handles it */
}

.docs-nav-group-link:hover {
  color: var(--color-primary);
}

.docs-nav-group-link.active,
.docs-nav-group-link[aria-current="page"] {
  color: var(--color-primary);
}

/* Subtle indicator for parent groups containing active child - accent bar only */
/* Only show subtle accent bar, don't highlight the entire wrapper/link */
.docs-nav-group:has(.docs-nav-link.active) .docs-nav-group-toggle-wrapper::after,
.docs-nav-group:has(.docs-nav-link[aria-current="page"]) .docs-nav-group-toggle-wrapper::after {
  opacity: 0.7;
  /* Subtle accent bar to indicate parent contains active child */
  background: var(--gradient-border);
}

/* Keep parent groups expanded when they contain active children */
.docs-nav-group:has(.docs-nav-link.active) .docs-nav-group-items,
.docs-nav-group:has(.docs-nav-link[aria-current="page"]) .docs-nav-group-items {
  display: flex;
  opacity: 1;
  transform: translate3d(0, 0, 0);
}

.docs-nav-group:has(.docs-nav-link.active) .docs-nav-group-toggle[aria-expanded],
.docs-nav-group:has(.docs-nav-link[aria-current="page"]) .docs-nav-group-toggle[aria-expanded] {
  /* JavaScript will set aria-expanded="true" */
}

/* Also handle when the group link itself is active - accent bar only */
.docs-nav-group-toggle-wrapper:has(.docs-nav-group-link.active),
.docs-nav-group-toggle-wrapper:has(.docs-nav-group-link[aria-current="page"]) {
  /* No background highlight - accent bar provides indication */
}

.docs-nav-group-toggle-wrapper:has(.docs-nav-group-link.active)::after,
.docs-nav-group-toggle-wrapper:has(.docs-nav-group-link[aria-current="page"])::after {
  opacity: 1;
  background: var(--gradient-border);
}

[data-theme="dark"] .docs-nav-group-link.active,
[data-theme="dark"] .docs-nav-group-link[aria-current="page"] {
  /* No background highlight - accent bar provides indication */
}

.docs-nav-group-items {
  display: none;
  flex-direction: column;
  gap: 0.125rem;
  padding-left: 0.5rem;
  margin-top: 0.25rem;
  opacity: 0;
  transform: translate3d(0, -8px, 0);
  transition: opacity var(--transition-smooth), transform var(--transition-smooth);
  will-change: transform, opacity;
}

/* Show items when expanded (controlled by JavaScript) */
.docs-nav-group-items.expanded {
  display: flex;
  opacity: 1;
  transform: translate3d(0, 0, 0);
  will-change: auto;
}

/* Navigation Links */
.docs-nav-link {
  display: block;
  padding: 0.375rem 0.5rem;
  font-size: var(--text-sm);
  color: var(--color-text-secondary);
  text-decoration: none;
  border-radius: var(--border-radius-medium);
  border-inline-start: 2px solid transparent;
  margin-inline-start: -2px;
  transition: all var(--transition-fast), box-shadow 0.2s ease;
  position: relative;
}

.docs-nav-link::before {
  content: '';
  position: absolute;
  inset-inline-start: -2px;
  top: 0;
  bottom: 0;
  width: 2px;
  background: var(--gradient-border-subtle);
  border-radius: 2px 0 0 2px;
  opacity: 0;
  transition: opacity var(--transition-fast);
}

.docs-nav-link:hover {
  color: var(--color-text-primary);
  background: var(--color-bg-hover);
  /* Light mode: Neumorphic hover */
  box-shadow:
    inset 0.3px 0.3px 0.8px rgba(255, 255, 255, 0.4),
    inset -0.3px -0.3px 0.8px rgba(0, 0, 0, 0.08),
    1px 1px 2px rgba(0, 0, 0, 0.05),
    -0.3px -0.3px 1px rgba(255, 255, 255, 0.3);
}

.docs-nav-link:hover::before {
  opacity: 0;
  /* Hidden in light mode */
}

.docs-nav-link:active {
  background: var(--color-bg-tertiary);
  /* Light mode: Neumorphic pressed */
  box-shadow:
    inset 0.5px 0.5px 1px rgba(0, 0, 0, 0.1),
    inset -0.3px -0.3px 0.5px rgba(255, 255, 255, 0.2),
    0.3px 0.3px 0.5px rgba(0, 0, 0, 0.03);
}

.docs-nav-link:active::before {
  opacity: 0;
}

/* Ensure only one active link at a time - use aria-current for semantic correctness */
.docs-nav-link.active,
.docs-nav-link[aria-current="page"] {
  color: var(--color-primary);
  font-weight: var(--weight-medium);
  /* Unified neumorphic style - matches nav action buttons */
  background: linear-gradient(180deg,
      var(--color-surface, var(--color-bg-elevated)),
      var(--color-bg-secondary));
  border: 1px solid var(--color-border);
  box-shadow: var(--neumorphic-subtle);
}

.docs-nav-link.active::before,
.docs-nav-link[aria-current="page"]::before {
  opacity: 1;
  /* Gradient accent bar for active indication */
  background: var(--gradient-border);
  width: 2px;
}

/* Active trail (parent of active page) */
.docs-nav-link.active-trail {
  color: var(--color-text-primary);
  font-weight: var(--weight-medium);
}

/* Nested sections */
.docs-nav-group .docs-nav-group {
  margin-left: 0.25rem;
}

/* ============================================================================
   ALIGNED TEXT - Single pages and leaf sections align with directory text

   Directory text position from container edge:
     nested-margin (0.25rem) + toggle (1.875rem) + gap (0.25rem) + link-padding (0.25rem) = 2.625rem

   Single pages have padding-left: 0.5rem (from .docs-nav-link)
   Leaf sections have padding-left: 0.5rem + nested-margin: 0.25rem

   For text alignment at 2.625rem:
   - Single pages: margin = 2.625 - 0.5 = 2.125rem
   - Leaf sections: margin = 2.625 - 0.25 - 0.5 = 1.875rem
   ============================================================================ */

/* Single pages (direct children of group-items) - align with directory text */
.docs-nav-group-items > .docs-nav-link {
  margin-left: 2.125rem;
}

/* Leaf section links align with directory text at same level */
.docs-nav-group--leaf > .docs-nav-link {
  margin-left: 1.875rem;
}

/* ============================================================================
   Leaf Sections (sections with no navigable children)
   Renders as a simple link instead of an expandable group.
   Styled like regular child page links since they behave as leaf pages.
   ============================================================================ */

.docs-nav-group--leaf {
  /* Inherit base group styles but render flat */
  display: flex;
  flex-direction: column;
}

/* Section link styled like regular nav links (not bold like parent sections) */
.docs-nav-link--section {
  /* Inherit from .docs-nav-link - same visual treatment as child pages */
  font-weight: inherit;
  color: var(--color-text-secondary);
}

.docs-nav-link--section:hover {
  color: var(--color-text-primary);
}

.docs-nav-link--section.active,
.docs-nav-link--section[aria-current="page"] {
  color: var(--color-primary);
  font-weight: var(--weight-medium);
}

/* ============================================================================
   Dark Mode - Docs Nav
   ============================================================================ */


[data-theme="dark"] .docs-nav-link:hover {
  /* Subtle neumorphic hover for dark mode */
  box-shadow:
    inset 0.3px 0.3px 0.8px rgba(255, 255, 255, 0.12),
    inset -0.3px -0.3px 0.8px rgba(0, 0, 0, 0.3),
    1px 1px 2px rgba(0, 0, 0, 0.2),
    -0.3px -0.3px 1px rgba(255, 255, 255, 0.05);
}

[data-theme="dark"] .docs-nav-link:active {
  /* Subtle neumorphic pressed state for dark mode */
  box-shadow:
    inset 0.5px 0.5px 1px rgba(0, 0, 0, 0.3),
    inset -0.3px -0.3px 0.5px rgba(255, 255, 255, 0.08),
    0.3px 0.3px 0.5px rgba(0, 0, 0, 0.15);
}

/* ============================================================================
   Dark Mode: Use gradient borders instead of neumorphic shadows
   ============================================================================ */

[data-theme="dark"] .docs-nav-group-toggle-wrapper {
  /* Remove neumorphic shadow in dark mode */
  box-shadow: none;
}

[data-theme="dark"] .docs-nav-group-toggle-wrapper::before {
  opacity: 0;
  /* Start hidden */
}

[data-theme="dark"] .docs-nav-group-toggle-wrapper:hover {
  /* Remove neumorphic hover in dark mode */
  box-shadow: none;
}

[data-theme="dark"] .docs-nav-group-toggle-wrapper:hover::before {
  opacity: 0.4;
  /* Show gradient border in dark mode */
}

[data-theme="dark"] .docs-nav-group-toggle-wrapper:active {
  /* Remove neumorphic pressed in dark mode */
  box-shadow: none;
}

[data-theme="dark"] .docs-nav-group-toggle-wrapper::after {
  opacity: 0;
  /* Start hidden */
}

/* Dark mode: Subtle indicator for parent groups containing active child */
[data-theme="dark"] .docs-nav-group:has(.docs-nav-link.active) .docs-nav-group-toggle-wrapper::after,
[data-theme="dark"] .docs-nav-group:has(.docs-nav-link[aria-current="page"]) .docs-nav-group-toggle-wrapper::after {
  opacity: 0.7;
  /* Subtle accent bar in dark mode */
  background: var(--gradient-border);
}

/* Keep parent groups expanded when they contain active children (dark mode) */
[data-theme="dark"] .docs-nav-group:has(.docs-nav-link.active) .docs-nav-group-items,
[data-theme="dark"] .docs-nav-group:has(.docs-nav-link[aria-current="page"]) .docs-nav-group-items {
  display: flex;
  opacity: 1;
  transform: translate3d(0, 0, 0);
}

/* Also handle when the group link itself is active */
[data-theme="dark"] .docs-nav-group-toggle-wrapper:has(.docs-nav-group-link.active),
[data-theme="dark"] .docs-nav-group-toggle-wrapper:has(.docs-nav-group-link[aria-current="page"]) {
  /* No background highlight - accent bar provides indication */
}

[data-theme="dark"] .docs-nav-group-toggle-wrapper:has(.docs-nav-group-link.active)::after,
[data-theme="dark"] .docs-nav-group-toggle-wrapper:has(.docs-nav-group-link[aria-current="page"])::after {
  opacity: 0.9;
  background: var(--gradient-border);
}

[data-theme="dark"] .docs-nav-link {
  /* Remove neumorphic shadow in dark mode */
  box-shadow: none;
}

[data-theme="dark"] .docs-nav-link::before {
  opacity: 0;
  /* Start hidden */
}

[data-theme="dark"] .docs-nav-link:hover {
  /* Remove neumorphic hover in dark mode */
  box-shadow: none;
}

[data-theme="dark"] .docs-nav-link:hover::before {
  opacity: 0.5;
  /* Show gradient border in dark mode */
}

[data-theme="dark"] .docs-nav-link:active {
  /* Remove neumorphic pressed in dark mode */
  box-shadow: none;
}

[data-theme="dark"] .docs-nav-link:active::before {
  opacity: 0.7;
  background: var(--gradient-border);
}

[data-theme="dark"] .docs-nav-link.active::before,
[data-theme="dark"] .docs-nav-link[aria-current="page"]::before {
  opacity: 1;
  /* Strong gradient border in dark mode for visibility */
  background: var(--gradient-border);
}

/* ============================================
   PALETTE-SPECIFIC ACTIVE NAVIGATION STYLING
   ============================================

   All palettes use --color-primary-light for active backgrounds.
   This is consolidated into a single rule using the attribute selector
   to match any data-palette value ending in "-bengal".
*/

/* Active navigation links - all palettes (pages only, not directories) */
[data-palette$="-bengal"] .docs-nav-link.active,
[data-palette$="-bengal"] .docs-nav-link[aria-current="page"],
[data-palette$="-bengal"] .docs-nav-link--section.active,
[data-palette$="-bengal"] .docs-nav-link--section[aria-current="page"] {
  background: var(--color-primary-light);
}

/* Active navigation links - all palettes (dark mode, pages only) */
[data-theme="dark"][data-palette$="-bengal"] .docs-nav-link.active,
[data-theme="dark"][data-palette$="-bengal"] .docs-nav-link[aria-current="page"],
[data-theme="dark"][data-palette$="-bengal"] .docs-nav-link--section.active,
[data-theme="dark"][data-palette$="-bengal"] .docs-nav-link--section[aria-current="page"] {
  background: var(--color-primary-light);
}

/* ============================================
   ACTIVE ACCENT BAR GLOW ANIMATION
   ============================================

   Peaceful slow glow animation for active navigation items.
   Matches the footer's breathing glow effect.
*/

/* Keyframes for the accent bar glow - light mode */
@keyframes nav-accent-glow {
  0%,
  100% {
    box-shadow: 0 0 0 0 color-mix(in srgb, var(--color-primary) 0%, transparent),
      2px 0 6px 0 color-mix(in srgb, var(--color-primary) 8%, transparent);
  }

  50% {
    box-shadow: 0 0 0 0 color-mix(in srgb, var(--color-primary) 15%, transparent),
      3px 0 10px 0 color-mix(in srgb, var(--color-primary) 15%, transparent);
  }
}

/* Keyframes for the accent bar glow - dark mode (slightly brighter) */
@keyframes nav-accent-glow-dark {
  0%,
  100% {
    box-shadow: 0 0 0 0 color-mix(in srgb, var(--color-primary) 5%, transparent),
      2px 0 8px 0 color-mix(in srgb, var(--color-primary) 12%, transparent);
  }

  50% {
    box-shadow: 0 0 0 0 color-mix(in srgb, var(--color-primary) 25%, transparent),
      4px 0 12px 0 color-mix(in srgb, var(--color-primary) 20%, transparent);
  }
}

/* Apply glow to active page link accent bars */
.docs-nav-link.active::before,
.docs-nav-link[aria-current="page"]::before {
  animation: nav-accent-glow 8s ease-in-out infinite;
}

/* Apply glow to active directory accent bars */
.docs-nav-group-toggle-wrapper:has(.docs-nav-group-link.active)::after,
.docs-nav-group-toggle-wrapper:has(.docs-nav-group-link[aria-current="page"])::after {
  animation: nav-accent-glow 8s ease-in-out infinite;
}

/* Apply glow to parent directory accent bars (containing active child) */
.docs-nav-group:has(.docs-nav-link.active) .docs-nav-group-toggle-wrapper::after,
.docs-nav-group:has(.docs-nav-link[aria-current="page"]) .docs-nav-group-toggle-wrapper::after {
  animation: nav-accent-glow 8s ease-in-out infinite;
}

/* Dark mode: use brighter glow animation */
[data-theme="dark"] .docs-nav-link.active::before,
[data-theme="dark"] .docs-nav-link[aria-current="page"]::before {
  animation: nav-accent-glow-dark 8s ease-in-out infinite;
}

[data-theme="dark"] .docs-nav-group-toggle-wrapper:has(.docs-nav-group-link.active)::after,
[data-theme="dark"] .docs-nav-group-toggle-wrapper:has(.docs-nav-group-link[aria-current="page"])::after {
  animation: nav-accent-glow-dark 8s ease-in-out infinite;
}

[data-theme="dark"] .docs-nav-group:has(.docs-nav-link.active) .docs-nav-group-toggle-wrapper::after,
[data-theme="dark"] .docs-nav-group:has(.docs-nav-link[aria-current="page"]) .docs-nav-group-toggle-wrapper::after {
  animation: nav-accent-glow-dark 8s ease-in-out infinite;
}

/* Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {

  .docs-nav-link.active::before,
  .docs-nav-link[aria-current="page"]::before,
  .docs-nav-group-toggle-wrapper:has(.docs-nav-group-link.active)::after,
  .docs-nav-group-toggle-wrapper:has(.docs-nav-group-link[aria-current="page"])::after,
  .docs-nav-group:has(.docs-nav-link.active) .docs-nav-group-toggle-wrapper::after,
  .docs-nav-group:has(.docs-nav-link[aria-current="page"]) .docs-nav-group-toggle-wrapper::after {
    animation: none;
    box-shadow: 2px 0 6px 0 color-mix(in srgb, var(--color-primary) 10%, transparent);
  }
}

/* ============================================================================
   NAVIGATION ICONS (Premium Sidebar Icons)
   ============================================================================

   Icons appear alongside directory/section items (not individual pages).
   - Section icons: via section.icon property (from _index.md frontmatter)

   Layout: [Caret] [Icon] [Text]

   Premium touches:
   - Subtle glow on active items
   - Smooth color transitions
   - Muted default icons (for sections without explicit icon)
*/

/* Base icon container */
.docs-nav-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  min-width: 20px;
  height: 20px;
  flex-shrink: 0;
  color: var(--color-text-tertiary);
  transition: color var(--transition-fast), filter var(--transition-fast), transform var(--transition-fast);
}

/* Smaller icons for leaf sections */
.docs-nav-icon--section {
  width: 16px;
  min-width: 16px;
  height: 16px;
}

/* Muted styling for default/fallback icons */
.docs-nav-icon[data-default="true"] {
  opacity: 0.5;
}

/* Icon color on hover - all contexts */
.docs-nav-group-toggle-wrapper:hover .docs-nav-icon,
.docs-nav-link:hover .docs-nav-icon {
  color: var(--color-primary);
  opacity: 1;
}

/* ============================================================================
   ACTIVE ICON STYLING - Premium Glow Effect
   ============================================================================ */

/* Active section icons (in group headers) */
.docs-nav-group-toggle-wrapper:has(.docs-nav-group-link.active) .docs-nav-icon,
.docs-nav-group-toggle-wrapper:has(.docs-nav-group-link[aria-current="page"]) .docs-nav-icon {
  color: var(--color-primary);
  opacity: 1;
  filter: drop-shadow(0 0 6px color-mix(in srgb, var(--color-primary) 40%, transparent));
}

/* Active leaf section icons (in nav links) */
.docs-nav-link--section.active .docs-nav-icon,
.docs-nav-link--section[aria-current="page"] .docs-nav-icon {
  color: var(--color-primary);
  opacity: 1;
  filter: drop-shadow(0 0 6px color-mix(in srgb, var(--color-primary) 40%, transparent));
}

/* Parent section icons when containing active child - subtle glow */
.docs-nav-group:has(.docs-nav-link.active) > .docs-nav-group-toggle-wrapper .docs-nav-icon,
.docs-nav-group:has(.docs-nav-link[aria-current="page"]) > .docs-nav-group-toggle-wrapper .docs-nav-icon {
  color: var(--color-primary);
  opacity: 0.8;
  filter: drop-shadow(0 0 4px color-mix(in srgb, var(--color-primary) 25%, transparent));
}

/* ============================================================================
   SECTION LINK STYLING (with icon)
   ============================================================================ */

/* Leaf section links use flex for icon + text layout */
.docs-nav-link--section {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

/* Text element within section link */
.docs-nav-link-text {
  flex: 1;
  min-width: 0; /* Allow text to shrink for ellipsis */
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* ============================================================================
   ROOT SECTION ICON STYLING
   ============================================================================ */

.docs-nav-link--root {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.25rem;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid var(--color-border);
}

.docs-nav-icon--root {
  width: 18px;
  min-width: 18px;
  height: 18px;
}

/* ============================================================================
   DARK MODE ICON ADJUSTMENTS
   ============================================================================ */

[data-theme="dark"] .docs-nav-icon {
  color: var(--color-text-tertiary);
}

[data-theme="dark"] .docs-nav-icon[data-default="true"] {
  opacity: 0.4;
}

[data-theme="dark"] .docs-nav-group-toggle-wrapper:hover .docs-nav-icon,
[data-theme="dark"] .docs-nav-link:hover .docs-nav-icon {
  color: var(--color-primary);
  opacity: 1;
}

/* Brighter glow in dark mode */
[data-theme="dark"] .docs-nav-group-toggle-wrapper:has(.docs-nav-group-link.active) .docs-nav-icon,
[data-theme="dark"] .docs-nav-group-toggle-wrapper:has(.docs-nav-group-link[aria-current="page"]) .docs-nav-icon,
[data-theme="dark"] .docs-nav-link--section.active .docs-nav-icon,
[data-theme="dark"] .docs-nav-link--section[aria-current="page"] .docs-nav-icon {
  filter: drop-shadow(0 0 8px color-mix(in srgb, var(--color-primary) 50%, transparent));
}

[data-theme="dark"] .docs-nav-group:has(.docs-nav-link.active) > .docs-nav-group-toggle-wrapper .docs-nav-icon,
[data-theme="dark"] .docs-nav-group:has(.docs-nav-link[aria-current="page"]) > .docs-nav-group-toggle-wrapper .docs-nav-icon {
  filter: drop-shadow(0 0 6px color-mix(in srgb, var(--color-primary) 35%, transparent));
}

/* ============================================================================
   REDUCED MOTION PREFERENCES
   ============================================================================ */

@media (prefers-reduced-motion: reduce) {
  .docs-nav-icon {
    transition: none;
  }
}

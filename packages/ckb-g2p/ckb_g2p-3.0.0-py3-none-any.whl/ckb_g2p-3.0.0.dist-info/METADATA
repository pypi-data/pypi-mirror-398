Metadata-Version: 2.4
Name: ckb-g2p
Version: 3.0.0
Summary: A linguistically accurate Grapheme-to-Phoneme (G2P) converter and Syllabifier for Central Kurdish (Sorani). Optimized for TTS.
Project-URL: Homepage, https://github.com/RazwanSiktany/ckb_g2p
Project-URL: Repository, https://github.com/RazwanSiktany/ckb_g2p
Project-URL: BugTracker, https://github.com/RazwanSiktany/ckb_g2p/issues
Author: Razwan M. Haji
License-Expression: MIT
License-File: LICENSE
Keywords: g2p,kurdish,linguistics,nlp,phonemizer,sorani,tts
Classifier: Development Status :: 5 - Production/Stable
Classifier: Intended Audience :: Developers
Classifier: Intended Audience :: Science/Research
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Topic :: Multimedia :: Sound/Audio :: Speech
Classifier: Topic :: Text Processing :: Linguistic
Requires-Python: >=3.8
Requires-Dist: ckb-textify>=3.0.0
Requires-Dist: pyyaml>=6.0
Provides-Extra: dev
Requires-Dist: pytest>=7.0; extra == 'dev'
Requires-Dist: ruff>=0.3.0; extra == 'dev'
Requires-Dist: streamlit>=1.30.0; extra == 'dev'
Description-Content-Type: text/markdown

# Central Kurdish G2P (Graph2Phon)


[![PyPI version](https://img.shields.io/pypi/v/ckb_g2p)](https://pypi.org/project/ckb-g2p/)
[![Streamlit App](https://static.streamlit.io/badges/streamlit_badge_black_white.svg)](https://ckb-g2p.streamlit.app/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Python 3.8+](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org/downloads/)

A modern, high-performance, and linguistically accurate **Grapheme-to-Phoneme (G2P)** converter and **Syllabifier** for Central Kurdish (Sorani).

Designed specifically for training modern **Text-to-Speech (TTS)** models (VITS, FastSpeech2, Glow-TTS) by providing robust phonetization, stress marking, and syllable boundaries.

## (Ú©ÙˆØ±Ø¯ÛŒ) Ø¯Û•Ø±Ø¨Ø§Ø±Û•ÛŒ Ù¾Ú•Û†Ú˜Û•

Ø¦Û•Ù… Ù¾Ú•Û†Ú˜Û•ÛŒÛ• Ø¦Ø§Ù…Ø±Ø§Ø²ÛÚ©ÛŒ Ù¾ÛØ´Ú©Û•ÙˆØªÙˆÙˆÛ• Ø¨Û† Ú¯Û†Ú•ÛŒÙ†ÛŒ Ø¯Û•Ù‚ÛŒ Ú©ÙˆØ±Ø¯ÛŒ (Ø³Û†Ø±Ø§Ù†ÛŒ) Ø¨Û† ÙÛ†Ù†ÛÙ… Ùˆ Ø¨Ú•Ú¯Û•. Ø¨Û•ØªØ§ÛŒØ¨Û•Øª Ø¯ÛŒØ²Ø§ÛŒÙ† Ú©Ø±Ø§ÙˆÛ• Ø¨Û† Ø³ÛŒØ³ØªÛ•Ù…Û•Ú©Ø§Ù†ÛŒ Ø¯Ø±ÙˆØ³ØªÚ©Ø±Ø¯Ù†ÛŒ Ø¯Û•Ù†Ú¯  Ùˆ Ú•Ø§Ù‡ÛÙ†Ø§Ù†ÛŒ Ù…Û†Ø¯ÛÙ„Û•Ú©Ø§Ù†ÛŒ Ø²ÛŒØ±Û•Ú©ÛŒ Ø¯Û•Ø³ØªÚ©Ø±Ø¯.

Ø®ÛØ±Ø§ÛŒÛŒÛ•Ú©ÛŒ Ø²Û†Ø± Ø¨Û•Ø±Ø²ÛŒ Ù‡Û•ÛŒÛ• Ùˆ Ù‡Û•Ù…ÙˆÙˆ ÛŒØ§Ø³Ø§ Ø¯Û•Ù†Ú¯ÛŒÛŒÛ•Ú©Ø§Ù†ÛŒ Ø²Ù…Ø§Ù†ÛŒ Ú©ÙˆØ±Ø¯ÛŒ (ÙˆÛ•Ú© Ù¾Ø§ÚµØ§ØªÛ•ÚµØ§ÛŒØ²Û•ÛŒØ´Ù†ØŒ Ø¨Ø²Ø±Û†Ú©Û•ØŒ Ùˆ ÙÛ†Ú©Û•Ø³) Ù„Û•Ø®Û†Ø¯Û•Ú¯Ø±ÛØª.

## ğŸ”— Live Demos

* **G2P Playground:** [ckb-g2p.streamlit.app](https://ckb-g2p.streamlit.app/)
* **Text Normalizer:** [ckb-textify.streamlit.app](https://ckb-textify.streamlit.app/)

## ğŸŒŸ Why Graph2Phon?

Generic G2P tools often fail on Kurdish phonology. `ckb-g2p` (v3) combines architectural speed with linguistic depth to solve these challenges:

| Feature | Problem in Generic Tools | Solution in `ckb-g2p` |
| :--- | :--- | :--- |
| **Palatalization** | Treats all 'k' and 'g' the same. | Distinguishes **Heavy** (Postalveolar `tÍ¡Êƒ`, `dÍ¡Ê’`) vs **Light** (Dental `tÌªÍ¡ÊƒÌŸ`, `dÌªÍ¡Ê’ÌŸ`) based on vowel context (e.g. `kwÃª` â†’ `chwÃª`). |
| **Schwa Insertion** | Fails on clusters like "grft". | Automatically inserts **Bizroka** (`/Éª/`) to fix illegal consonant clusters (`gÉª.É¾Éªft`) using Sonority Sequencing Principles. |
| **Stress (Prosody)** | Ignores stress. | Smartly assigns stress (`Ëˆ`). Handles **Negative Verb** shifts (`nachu` â†’ `Ëˆna.tÌªÍ¡ÊƒÌŸuË`) vs Nouns (`kurd` â†’ `kuÉ¾d`). |
| **Ambiguity** | Confuses `w` (u/w) and `y` (i/y). | Uses a generator-evaluator pipeline to pick the most phonotactically valid pronunciation. |
| **Dialect Support** | Normalizes all sounds. | Preserves emphatic consonants (`sË¤`, `tË¤`, `zË¤`) critical for authentic pronunciation. |

## ğŸš€ Installation

### From PyPI
```bash
pip install ckb-g2p
```

### From Source
```bash
git clone [https://github.com/RazwanSiktany/ckb_g2p.git](https://github.com/RazwanSiktany/ckb_g2p.git)
cd ckb_g2p
pip install -e .
```

## ğŸ’» Usage

### Command Line Interface (CLI)
You can use the tool directly from your terminal:

```bash
# Basic usage (Syllabified)
ckb-g2p "Ø³ÚµØ§Ùˆ Ú©ÙˆØ±Ø¯Ø³ØªØ§Ù†"
# Output: sÉª.ËˆÉ«Ã¤w kuÉ¾.dÉªs.ËˆtÃ¤n

# Raw IPA (No stress, no syllable markers)
ckb-g2p "Ø³ÚµØ§Ùˆ" --format ipa --no-stress
# Output: sÉªÉ«Ã¤w

# Batch Processing (Great for datasets)
ckb-g2p -i input.txt -o output.txt
```

### Python API
```python
from ckb_g2p.converter import Converter

# Initialize (loads cache by default)
converter = Converter()

# 1. Basic Syllabification
text = "Ù…Ù† Ú©ÙˆØ±Ø¯Ù…"
ipa = converter.convert(text, output_format="syllables")
print(ipa) 
# Output: ['mÉªn', 'kuÉ¾.ËˆdÉªm']

# 2. TTS-Ready Output (with Pauses)
# Note: Punctuation is automatically converted to pauses (| and ||)
text = "Ø³ÚµØ§ÙˆØŒ Ù†Ø§ÙˆØª Ú†ÛŒÛŒÛ•ØŸ"
ipa_list = converter.convert(text, output_format="syllables")
print(" ".join(ipa_list))
# Output: sÉª.ËˆÉ«Ã¤w | nÃ¤wt ËˆtÍ¡ÊƒiË.ja ||
```

## ğŸ—£ï¸ Phoneme Inventory

We use a precise IPA set to capture allophonic variations critical for natural speech synthesis.

### Consonants (Key Distinctions)
| Grapheme | IPA | Type | Description |
| :--- | :--- | :--- | :--- |
| **Ú†** | `tÌªÍ¡ÊƒÌŸ` | **Light (Dental)** | Standard "ch". Tongue tip touches teeth. |
| **Ú©** | `tÍ¡Êƒ` | **Heavy (Postalveolar)** | Palatalized /k/ before front vowels (i, e, y). Like English "Chair". |
| **Ø¬** | `dÌªÍ¡Ê’ÌŸ` | **Light (Dental)** | Standard "j". Tongue tip touches teeth. |
| **Ú¯** | `dÍ¡Ê’` | **Heavy (Postalveolar)** | Palatalized /g/ before front vowels. Like English "Jack". |
| **Úµ** | `É«` | **Velarized** | "Dark L", distinct from clear `l`. |
| **Ú•** | `r` | **Trill** | Rolled R, distinct from tap `É¾`. |
| **Øµ** | `sË¤` | **Emphatic** | Emphatic 'S' (Sad), preserved for dialectal accuracy. |

## âš¡ Performance & Caching

Graph2Phon uses a local SQLite database (`lexicon.db`) to store processed words. 
* **First Run:** Calculates phonemes (~1-5ms per word).
* **Second Run:** Fetches from cache (<0.1ms per word).

To disable caching:
```python
converter = Converter(use_cache=False)
```

## ğŸ› ï¸ Configuration & Exceptions

The engine is driven by a YAML configuration file located at `src/ckb_g2p/data/phonology.yaml`.

**Manual Overrides:**
If the rule-based engine fails on a specific word (e.g., a foreign name), add it to `src/ckb_g2p/resources/exceptions.csv`


## ğŸ¤ Contributing
Contributions are welcome! Please run the test suite before submitting a PR:

```bash
pip install pytest
pytest
```

## ğŸ“œ License
MIT License. See [LICENSE](LICENSE) for details.

## ğŸ‘¨â€ğŸ’» Author
Developed by **Razwan M. Haji**.
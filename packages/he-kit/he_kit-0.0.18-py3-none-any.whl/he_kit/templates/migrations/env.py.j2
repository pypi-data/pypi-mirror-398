import asyncio

from alembic import context
from he_kit.utils.alembic import async_run_migrations_online, run_migrations_offline
from sqlmodel import SQLModel

from {{ module_name }}.models import *  # noqa

target_metadata = SQLModel.metadata


if context.is_offline_mode():
    run_migrations_offline(context, target_metadata)
else:
    asyncio.run(async_run_migrations_online(context, target_metadata))

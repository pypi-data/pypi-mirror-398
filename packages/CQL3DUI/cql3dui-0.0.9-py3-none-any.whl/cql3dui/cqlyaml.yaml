# CQL3D Complete Namelist Configuration
# Generated from cqlinput_help.txt documentation
# Total variables: ~400+
    
    

# GUI organization
gui_configuration:
  tab_structure:
    - name: "Run Basics"
      groups: ["setup0"]
      filters: ['mnemonic', 'ioutput', 'iuser', 'ibox', 'lrz', "nlwritf", "nlrestrt"]
      description: "Run identification and basic controls"
      
    - name: "Numerical Controls"
      groups: ["setup"]
      filters: ["dtr", "dtr1", "nondtr1", "nstop", "nrstrt", "nplot", "nsave", "iactst", "jx", "iy", "lz", "vnorm", "enorm", "kenorm", "tandem", "enorme", "enormi", "relativ", "xfac", "xpctlwr", "xpctmdl", "xlwr", "xmdl", "tfac", "yreset", "numby", "ylower", "yupper", "tbnd", "rfacz", "roveram", "rzset", "rya", "radcoord", "chang", "ineg", "implct", "manymat", "soln_method", "droptol", "lfil", "lbdry","lbdry0", "taunew", "nstps", "tfacz"]
      description: "Mesh parameters and machine geometry"
    
    - name: "Species & Profiles"
      groups: ["setup"]
      filters: ["ngen", "nmax", "kspeci", "fmass", "bnumb", "iprote", "iproti", "iprone", "npwr", "mpwr", "reden", "temp", "acoefne", "acoefte", "profpsi","njene", "njte", "njti", "ryain", "enein", "tein", "tiin", "enescal", "tescal", "tiscal", "iprozeff", "zeffscal", "zeffin", "npwrzeff", "mpwrzeff", "izeff","fpld", "nfpld"]
      description: "Plasma species and radial profiles"

    - name: "Equilibrium"
      groups: ["setup","eqsetup"]
      filters: ["machine", "psimodel", "gsla", "gslb", "ephicc", "zmax", "rmirror", "radmin", "rovera", "radmaj", "btor", "bth", 'eqmod', 'eqsym', 'eqsource', 'eqdskin', 'bsign', 'eqdskalt', 'povdelp', 'ellptcty', 'rmag', 'eqmodel', 'eqpower', 'fpsimodl', 'rbox', 'zbox', 'rboxdst', 'eq_miller_rmag', 'eq_miller_zmag', 'eq_miller_btor', 'eq_miller_radmin', 'eq_miller_cursign', 'eq_miller_psimag', 'eq_miller_psilim', 'eq_miller_psi_n', 'eq_miller_psi_m', 'eq_miller_deltaedge', 'eq_miller_kappa', 'eq_miller_drr0']
      description: "Equilibrium setup"
      
    - name: "RF Heating"
      groups: ["rfsetup"]
      description: "RF heating and current drive"
      filters: ['rffile', 'ech', 'fw', 'lh', 'rftype', 'rfread', 'nharms', 'nharm1', 'nrfspecies', 'call_lh', 'call_ech', 'call_fw', 'pwrscale1', 'urftime', 'nurftime', 'urfmult', 'wdscale', 'nbssltbl', 'nondamp', 'nrfstep1', 'nrfstep2', 'nrfpwr', 'nrfitr1', 'nrfitr2', 'nrfitr3', 'urfncoef', 'scaleurf', 'iurfcoll', 'iurfl', 'ieqbrurf', 'urfdmp', 'urfrstrt', 'urfwrray', 'vlhmod', 'nonrf', 'noffrf', 'nrf', 'vlhmodes', 'vparmin', 'vparmax', 'vprpmin', 'vprpmax', 'vlhpolmn', 'vlhpolmx', 'vdalp', 'vprprop', 'dlndau', 'vlhprprp', 'vlh_karney', 'vlhplse', 'vlhpon', 'vlhpoff', 'vlfmod', 'vlfmodes', 'vlfbes', 'vlfnpvar', 'vlfharms', 'vlfdnorm', 'vlffreq', 'vlfharm1', 'vlfnp', 'vlfdnp', 'vlfddnp', 'vlfnperp', 'vlfeplus', 'vlfemin', 'vlfpol', 'vlfdpol', 'vlfddpol', 'vlfparmn', 'vlfparmx', 'vlfpermn', 'vlfpermx','rdcmod', 'nrdc', 'rdcfile', 'nrdcspecies', 'rdcscale', 'pwrscale', 'rdc_upar_sign', 'rdc_clipping', 'rdc_netcdf','urfmod', "nontran", "nofftran", "adimeth", "nonadi", "difus_type", "difus_io", "difus_io_file", "difus_io_drrscale", "difus_io_drscale", "difus_io_t", "ndifus_io_t", "difusr", "difus_rshape", "difus_vshape", "difin", "pinch", "relaxden", "advectr", "relaxtsp", "nonelpr", "noffelpr", "scheck", "pltdrr"]
      
    - name: "Electric Field"
      groups: ["setup"]
      filters: ["efswtch", "efswtchn", "curr_edge", "efiter", "efrelax1", "currerr", "efrelax", "efrelax_exp", "noncntrl", "elecfld", "efflag", "iproelec", "elecin", "elecscal", "eoved", "nonel", "noffel", "ampfmod", "nampfmax", "ampferr", "nonampf", "nonvphi", "noffvphi", "iprovphi", "vphiplin", "vphiscal", "bootcalc", "bootupdt", "bootsign", "nonboot"]
      description: "DC and induced electric fields"
      
    - name: "Transport"
      groups: ["trsetup", "setup0", "setup"]
      description: "Radial and parallel transport"
      filters: ["transp", "nontran", "nofftran", "adimeth", "nonadi", "difus_type", "difus_io", "difus_io_file", "difus_io_drrscale", "difus_io_drscale", "difus_io_t", "ndifus_io_t", "difusr", "difus_rshape", "difus_vshape", "difin", "pinch", "relaxden", "advectr", "relaxtsp", "nonelpr", "noffelpr", "scheck", "pltdrr", "cqlpmod" , "ls", "lsmax", "lsdiff", "lsindx", "denpar", "temppar", "epsthet", "ngauss", "nlagran", "oldiag", "lbdry0", "nummods", "lmidvel", "laddbnd", "sbdry", "eseswtch", "elpar0", "nkconro", "scheck", "meshy", "simpbfac", "denpar", "temppar", "tfac", "epsthet", "ngauss", "nlagran", "oldiag", "lbdry0", "nummods", "lmidvel", "laddbnd", "sbdry", "eseswtch", "elpar0", "nkconro", "scheck", "meshy", "simpbfac"]

    - name: "Collisions & Losses"
      groups: ["setup"]
      filters: ["ncoef", "mx", "colmodl", "kfield", "cfp_integrals", "gamaset", "gamafac", "qsineut", "locquas", "trapmod", "trapredc", "scatmod", "scatfrac", "lossmode", "esink", "xsink", "xsinkm", "lossfile", "eparc", "eperc", "torloss", "nonloss", "noffloss", "tauloss", "enloss", "deltabdb", "tauegy", "negy", "megy", "gamegy", "paregy", "peregy", "pegy", "syncrad", "bremsrad", "brfac", "brfac1", "brfacgm3"]
      description: "Collision models and particle/energy losses"
      
    - name: "Sources"
      groups: ["sousetup", "frsetup"]
      description: "Particle sources (analytic, knock-on, NBI)"
      
    - name: "Time-dep. prof."
      groups: ["setup"]
      filters: ["nbctime", "tmdmeth", "bctime", "bctshift", "bctimescal", "redenc", "redenb", "tempc", "tempb", "temp_den", "zeffc", "zeffb", "elecc", "elecb", "npwrelec", "mpwrelec", "vphic", "vphib", "npwrvphi", "mpwrvphi", "xjc", "xjb", "npwrxj", "mpwrxj", "totcrt", "enein_t", "tein_t", "tiin_t", "zeffin_t", "vphiplin_t", "elecin_t", "ennin_t", "xjin_t"]
      description: "Setup for time-dependent profiles"
      
    - name: "Advanced"
      groups: ["setup"]
      description: "Fusion reacitons, first-order orbit shift, diagnostics"
      filters: ["sigmamod", "isigmas", "mmsv", "isigsgv1", "isigtst", "sigvi", "sigvcx", "ndeltarho", "nr_delta", "nz_delta", "nt_delta", "softxry", "nv", "rd", "thetd", "x_sxr", "z_sxr", "thet1", "thet2", "nen", "enmin", "enmax", "msxr", "fds", "npa_diag", "nv_npa", "rd_npa", "thetd_npa", "x_npa", "z_npa", "thet1_npa", "thet2_npa", "nen_npa", "enmin_npa", "enmax_npa", "atten_npa", "fds_npa", "nnspec", "ipronn", "npaproc", "npa_process", "ennl", "ennb", "ennin", "ennscal", "ennprofile_files", "bootst", "jhirsh", "kpress", "partner"]
      
    - name: "Plot Controls"
      groups: ["setup0", "setup"]
      filters: ["nmlstout", "noplots", "lnwidt", "nchec", "pltd", "pltlim", "pltlimm", "pltmag", "contrmin", "constr", "ncont", "pltvecc", "pltvece", "pltvecrf", "pltvecal", "veclnth", "ipxy", "jpxy", "pltend", "pltrst", "pltvflu", "pltra", "pltpowe", "pltfvs", "pltfofv", "pltprpp", "xprpmax", "pltdn", "eegy", "negyrg", "pltsig", "pltstrm", "pltflux", "pltflux1", "pltinput", "nrskip", "irzplt", "plt3d", "pltvs", "pltrdc", "plturfb", "nplt3d", "idskf", "idskrf", "netcdfnm", "netcdfshort", "netcdfvecc", "netcdfvece", "netcdfvecrf", "netcdfvecal", "netcdfvecs", "f4d_out", "nr_f4d", "nz_f4d", "nv_f4d", "nt_f4d", "tavg", "tavg1", "tavg2", "f3d_out", "npol_f3d", "nvpar_f3d", "nmu_f3d", "f3d_rho"]
      description: "Plot and NetCDF Output Controls"
      
  dependency_triggers:
    show_hide_rules:
        # -------------------------------------------------------------------------
        # SOURCE SETUP
        # -------------------------------------------------------------------------
        - if: "nso > 0"
          show: ['nsou', 'nonso', 'noffso', 'szm1', 'szm2', 'szm1z', 'szm2z', 'soucoord', 'asor', 'asorz', 'pltso']

        - if: "nso > 0 and soucoord == 'cart'"
          show: ["sellm1", "seppm1", "sellm2", "seppm2", "sellm1z", "seppm1z", "sellm2z", "seppm2z"]

        - if: "nso > 0 and soucoord == 'polar'"
          show: ["sem1", "sem2", "sthm1", "scm2", "sem1z", "sem2z", "sthm1z", "scm2z"]

        # -------------------------------------------------------------------------
        # IMPURITY DEPOSITION & PELLETS
        # -------------------------------------------------------------------------
        - if: "imp_depos_method == 'instant'"
          show: ["dens0_imp", "tstart_imp", "imp_ne_method"]

        - if: "imp_depos_method == 'pellet'"
          show: ["pellet_Rstart", "pellet_tstart", "pellet_V", "pellet_M0", "pellet_rp0", "pellet_rcloud1", "pellet_rcloud2", "pellet_pn", "pellet_pt", "pellet_pm", "ipellet_method"]

        - if: "imp_depos_method == 'pellet' and ipellet_method == 1"
          show: ["ipellet_iter_max", "pellet_iter_accur", "pellet_fract_rem"]

        - if: "imp_depos_method == 'pellet' and ipellet_method == 3"
          show: ["pellet_Cablation"]

        # -------------------------------------------------------------------------
        # TRANSPORT IO
        # -------------------------------------------------------------------------
        - if: "transp == 'enabled'"
          show: ["nontran", "nofftran", "adimeth", "nonadi", "difus_type", "difus_io", "difusr", "difus_rshape", "difus_vshape", "difin", "pinch", "relaxden", "advectr", "relaxtsp", "nonelpr", "noffelpr", "scheck", "pltdrr"]
          set: ["lrzdiff = 'disabled'", "nconteq = 'disabled'"]

        - if: "transp == 'enabled' and difus_io != 'disabled'"
          show: ["difus_io_file", "difus_io_drrscale", "difus_io_drscale", "difus_io_t", "ndifus_io_t"]

        # -------------------------------------------------------------------------
        # EQUILIBRIUM
        # -------------------------------------------------------------------------
        - if: "eqmod == 'enabled'"
          show: ["eqsource", "eqsym", "eqdskin", "bsign", "eqdskalt", "povdelp"]
          # REMOVED SET COMMAND HERE

        - if: "eqmod == 'enabled' and eqsource == 'ellipse'"
          show: ["ellptcty", "rmag", "eqmodel", "eqpower", "fpsimodl", "rbox", "zbox", "rboxdst"]

        - if: "eqmod == 'enabled' and eqsource == 'miller'"
          show: ["eq_miller_rmag", "eq_miller_zmag", "eq_miller_btor", "eq_miller_radmin", "eq_miller_cursign", "eq_miller_psimag", "eq_miller_psilim", "eq_miller_psi_n", "eq_miller_psi_m", "eq_miller_deltaedge", "eq_miller_kappa", "eq_miller_drr0"]
          set: ["eqsym = 'none'"]

        # -------------------------------------------------------------------------
        # STANDARD TOGGLES
        # -------------------------------------------------------------------------
        - if: "psimodel == 'smith'"
          show: ["gsla", "gslb"]

        - if: "machine == 'mirror'"
          show: ["ephicc", "rmirror", "zmax"]

        - if: "rdcmod != 'disabled'"
          show: ["nrdc", "rdcfile", "nrdcspecies", "rdcscale", "pwrscale", "rdc_upar_sign", "rdc_clipping", "rdc_netcdf"]
          
        - if: "urfmod == 'enabled'"
          show: ["rffile", "ech", "fw", "lh", "rftype", "rfread", "nharms", "nharm1", "nrfspecies", "call_lh", "call_ech", "call_fw", "pwrscale1", "urftime", "nurftime", "urfmult", "wdscale", "nbssltbl", "nondamp", "nrfstep1", "nrfstep2", "nrfpwr", "nrfitr1", "nrfitr2", "nrfitr3", "urfncoef", "scaleurf", "iurfcoll", "iurfl", "ieqbrurf", "urfdmp", "urfrstrt", "urfwrray"]

        - if: "vlhmod == 'enabled'"
          show: ["nonrf", "noffrf", "nrf", "vlhmodes", "vparmin", "vparmax", "vprpmin", "vprpmax", "vlhpolmn", "vlhpolmx", "vdalp", "vprprop", "dlndau", "vlhprprp", "vlh_karney", "vlhplse", "vlhpon", "vlhpoff"]
          
        - if: "vlfmod == 'enabled'"
          show: ["vlfmodes", "vlfbes", "vlfnpvar", "vlfharms", "vlfdnorm", "vlffreq", "vlfharm1", "vlfnp", "vlfdnp", "vlfddnp", "vlfnperp", "vlfeplus", "vlfemin", "vlfpol", "vlfdpol", "vlfdpol", "vlfddpol", "vlfparmn", "vlfparmx", "vlfpermn", "vlfpermx"]
          
        - if: "frmod == 'enabled'"
          show: ["nbeams", "kfrsou", "frplt", "nfrplt", "smooth", "multiply", "multiplyn", "bmsprd", "nimp", "nprim", "anglev", "angleh", "nsourc", "bvofset", "bhofset", "bleni", "sfrac1", "bcur", "bptor", "bshape", "bheigh", "bwidth", "bhfoc", "bvfoc", "bhdiv", "bvdiv", "ebkev", "fbcur", "npart", "npskip", "naptr", "ashape", "aheigh", "awidth", "alen", "blenp", "rpivot", "zpivot", "ibcur", "iborb", "iexcit", "fe_tk", "ne_tk", "ds_tk", "inubpat", "ranseed", "beamplse", "beampon", "beampoff", "read_birth_pts", "nbirth_pts_files", "birth_pts_files", "nbirth_pts", "fr_gyro"]

        - if: "ampfmod == 'enabled'"
          show: ["nampfmax", "ampferr", "nonampf"]
          
        - if: "softxry == 'enabled' or softxry == 'ncdf_all' or softxry == 'e-ion'"
          show: ["nv", "rd", "thetd", "x_sxr", "z_sxr", "thet1", "thet2", "nen", "enmin", "enmax", "msxr", "fds"]
          
        - if: "npa_diag != 'disabled'"
          show: ["nv_npa", "rd_npa", "thetd_npa", "x_npa", "z_npa", "thet1_npa", "thet2_npa", "nen_npa", "enmin_npa", "enmax_npa", "atten_npa", "fds_npa", "nnspec", "ipronn", "npaproc", "npa_process", "ennl", "ennb", "ennin", "ennscal", "ennprofile_files"]

        - if: "sigmamod == 'enabled'"
          show: ["isigmas", "mmsv", "isigsgv1", "isigtst", "sigvi", "sigvcx"]
          
        - if: "bootcalc != 'disabled'"
          show: ["bootupdt", "bootsign", "nonboot"]
          
        - if: "bootst == 'enabled'"
          show: ["jhirsh", "kpress"]

        - if: "cqlpmod == 'enabled'"
          show: ["lsmax", "ls", "lsdiff", "lsindx", "denpar", "temppar", "epsthet", "ngauss", "nlagran", "oldiag", "nummods", "lmidvel", "laddbnd", "sbdry", "eseswtch", "elpar0", "nkconro", "scheck", "meshy", "simpbfac"]
          set: ["symtrap = 'disabled'"]
          
        - if: "ndeltarho != 'disabled'"
          show: ["nr_delta", "nz_delta", "nt_delta"]
          
        - if: "f3d_out == 'enabled'"
          show: ["npol_f3d", "nvpar_f3d", "nmu_f3d", "f3d_rho"]
          
        - if: "f4d_out == 'enabled' or f4d_out == 'tavg'"
          show: ["nr_f4d", "nz_f4d", "nv_f4d", "nt_f4d"]
          
        - if: "tavg == 'enabled'"
          show: ["tavg1", "tavg2"]
          
        - if: "knockon != 'disabled'"
          show: ['komodel', 'nonko', 'noffko', 'isoucof', 'soffvte', 'faccof', 'soffpr', 'flemodel', 'jfl', 'xlfac', 'xlpctlwr', 'xlpctmdl', 'xllwr', 'xlmdl']

        # -------------------------------------------------------------------------
        # PROFILES & SHAPE PARAMETERS (Steady & Time-Dep shared)
        # -------------------------------------------------------------------------
        # Basic shape params (npwr/mpwr) show for both 'parabola' and 'prbola-t'
        - if: "iprote == 'parabola' or (nbctime > 0 and iprote == 'prbola-t') or iproti == 'parabola' or (nbctime > 0 and iproti == 'prbola-t') or iprone == 'parabola' or (nbctime > 0 and iprone == 'prbola-t')"
          show: ['npwr', 'mpwr']

        - if: "iprozeff == 'parabola' or (nbctime > 0 and iprozeff == 'prbola-t')"
          show: ['npwrzeff', 'mpwrzeff']

        - if: "iproelec == 'parabola' or (nbctime > 0 and iproelec == 'prbola-t')"
          show: ["npwrelec", "mpwrelec"]

        - if: "iprovphi == 'parabola' or (nbctime > 0 and iprovphi == 'prbola-t')"
          show: ["npwrvphi", "mpwrvphi"]

        # Basic Spline inputs
        - if: "iprote == 'spline' or iproti == 'spline' or iprone == 'spline'"
          show: ['ryain']

        # ASDEX inputs
        - if: "iprote == 'asdex'"
          show: ['acoefte']
          
        - if: "iprone == 'asdex'"
          show: ['acoefne']
          
        - if: "iproti == 'asdex'"
          show: ['acoefti']

        # -------------------------------------------------------------------------
        # TIME-SERIES ARRAYS (Strictly Time-Dependent)
        # -------------------------------------------------------------------------
        # Base Time Variables
        - if: "nbctime > 0"
          show: ["bctime", "tmdmeth", "bctshift", "bctimescal"]

        # Parabolic Time Series Arrays (*c, *b, temp_den)
        - if: "nbctime > 0 and tmdmeth == 'method1' and iprone == 'prbola-t'"
          show: ["redenc", "redenb", "temp_den"]

        - if: "nbctime > 0 and tmdmeth == 'method1' and iprote == 'prbola-t'"
          show: ["tempc", "tempb"]

        - if: "nbctime > 0 and iproelec == 'prbola-t'"
          show: ["elecc", "elecb"]

        - if: "nbctime > 0 and iprozeff == 'prbola-t'"
          show: ["zeffc", "zeffb"]

        - if: "nbctime > 0 and iprovphi == 'prbola-t'"
          show: ["vphic", "vphib"]

        - if: "nbctime > 0 and iprocur == 'prbola-t'"
          show: ["xjc", "xjb"]

        # Spline Time Series Arrays (*in_t)
        - if: "nbctime > 0 and iprone == 'spline-t'"
          show: ["enein_t", "enescal"]
          
        - if: "nbctime > 0 and iprote == 'spline-t'"
          show: ["tein_t", "tescal"]

        - if: "nbctime > 0 and iproti == 'spline-t'"
          show: ["tiin_t", "tiscal"]

        - if: "nbctime > 0 and iprovphi == 'spline-t'"
          show: ["vphiplin_t"]

        - if: "nbctime > 0 and ipronn == 'spline-t'"
          show: ["ennin_t"]

        - if: "nbctime > 0 and iprocur == 'spline-t'"
          show: ["xjin_t"]

        # -------------------------------------------------------------------------
        # ELECTRIC FIELD & CURRENT DRIVE
        # -------------------------------------------------------------------------
        - if: "efswtch == 'method2' or efswtch == 'method4'"
          show: ["noncntrl", "efrelax", "efiter", "currerr", "totcrt"]

        - if: "efswtch == 'method4'"
          show: ["efrelax_exp"]

        # -------------------------------------------------------------------------
        # ROTATION & NEUTRALS (Missing Logic)
        # -------------------------------------------------------------------------
        - if: "iprovphi != 'disabled'"
          show: ["vphiplin", "vphiscal"]
          
        - if: "ipronn != 'disabled'"
          show: ["ennl", "ennb", "ennin", "ennscal"]

        # -------------------------------------------------------------------------
        # LOSS MODES
        # -------------------------------------------------------------------------
        - if: "lossmode == 'mirrorcc' or lossmode == 'mirrsnk' or lossmode == 'mirrsnk1'"
          show: ["ephicc"]

        - if: "lossmode == 'snk0' or lossmode == 'mirrsnk1'"
          show: ["xsink", "esink"]

        - if: "lossmode == 'snk0accl'"
          show: ["xsink", "esink", "xsinkm"]

        - if: "lossmode == 'electron'"
          show: ["eparc", "eperc"]

        - if: "lossmode == 'frm_file'"
          show: ["lossfile"]

        - if: "lossmode == 'simplban'"
          show: ["simpbfac"]

        - if: "torloss == 'velocity'"
          show: ["tauloss"]

        - if: "torloss == 'flutter2'"
          show: ["deltabdb"]

        - if: "torloss == 'energy'"
          show: ["enloss"]

        - if: "bremsrad == 'enabled'"
          show: ["brfac", "brfac1", "brfacgm3"]

        # -------------------------------------------------------------------------
        # SOLVERS & MESH & NBI DETAILS
        # -------------------------------------------------------------------------
        - if: "soln_method == 'itsol' or soln_method == 'itsol1' or soln_method == 'it3dv' or soln_method == 'it3drv'"
          show: ["droptol", "lfil"]

        - if: "xfac < 0"
          show: ["xpctlwr", "xpctmdl", "xlwr", "xmdl"]
          
        - if: "yreset == 'enabled'"
          show: ["numby", "ylower", "yupper"]

        - if: "iprote == 'prb-expt' or iproti == 'prb-expt' or iprote == 'spl-expt' or iproti == 'spl-expt'"
          show: ["temp_expt_Tend", "temp_expt_tstart", "temp_expt_tau1", "temp_expt_tau0"]

        - if: "iprozeff == 'curr_fit'"
          show: ["totcrt", "zrelax", "zrelax_exp"]

        - if: "frmod == 'enabled' and nsourc == 2"
          show: ["bhofset", "bvofset", "bleni", "sfrac1"]

        - if: "frmod == 'enabled' and beamplse != 'disabled'"
          show: ["beampon", "beampoff"]

        - if: "frmod == 'enabled' and iexcit == 5"
          show: ["fe_tk", "ne_tk", "ds_tk"]

        - if: "frmod == 'enabled' and read_birth_pts == 'enabled'"
          show: ["nbirth_pts_files", "birth_pts_files"]
          
        # -------------------------------------------------------------------------
        # REFINED PLOT & OUTPUT CONTROLS
        # -------------------------------------------------------------------------
        
        # Plot Limits
        - if: "pltlim != 'disabled'"
          show: ["pltlimm"]

        # 3D Radial Plots
        - if: "plt3d == 'enabled'"
          show: ["pltvs", "nplt3d"]

        # Streamlines
        - if: "pltstrm == 'enabled'"
          show: ["constr"]

        # Vector Plots (PGPLOT)
        - if: "pltvecc != 'disabled' or pltvece != 'disabled' or pltvecrf != 'disabled' or pltvecal != 'disabled'"
          show: ["veclnth", "ipxy", "jpxy"]

        # Vector Plots (NetCDF)
        - if: "netcdfvecc != 'disabled' or netcdfvece != 'disabled' or netcdfvecrf != 'disabled' or netcdfvecal != 'disabled'"
          show: ["ipxy", "jpxy", "netcdfvecs"]

        # Specific Distribution Plots
        - if: "pltdn == 'enabled'"
          show: ["eegy", "negyrg"]

        - if: "pltprpp == 'enabled'"
          show: ["xprpmax"]

        - if: "pltflux != 'disabled'"
          show: ["pltflux1"]

        # NetCDF Special Modes
        - if: "netcdfshort == 'lngshrtf'"
          show: ["nsave", "nplot"]

        # 4D Output Grids
        - if: "f4d_out != 'disabled'"
          show: ["nr_f4d", "nz_f4d", "nv_f4d", "nt_f4d"]

        # 3D Output Grids
        - if: "f3d_out == 'enabled'"
          show: ["npol_f3d", "nvpar_f3d", "nmu_f3d", "f3d_rho"]

        # Delta Rho Grids
        - if: "ndeltarho != 'disabled'"
          show: ["nr_delta", "nz_delta", "nt_delta"]

        # Time Averaging Windows
        - if: "tavg == 'enabled' or f4d_out == 'tavg'"
          show: ["tavg1", "tavg2"]
        
subgroups:
    Basic Setup: ['mnemonic', 'ioutput', 'iuser', 'ibox', 'noplots', 'lnwidth', 'nmlstout', 'special_calls', 'nlwritf', 'nlrestrt', 'cqlpmod', 'lrz', 'lrzdiff', 'lrzmax', 'lrindx', 'ls', 'lsmax', 'lsdiff', 'lsindx']
    
    Time Step Controls: ["dtr", "dtr1", "nondtr1", "nstop", "nrstrt", "nplot", "nsave", "iactst"]
    Mesh Controls: ["jx", "iy", "lz", "vnorm", "enorm", "kenorm", "tandem", "enorme", "enormi", "relativ", "xfac", "xpctlwr", "xpctmdl", "xlwr", "xmdl", "tfac", "yreset", "numby", "ylower", "yupper", "tfacz", "tbnd", "rfacz", "roveram", "rzset", "rya", "radcoord", "symtrap"]
    Differencing and Solution Method: ["chang", "ineg", "implct", "manymat", "soln_method", "droptol", "lfil", "lbdry", "lbdry0", "taunew", "nstps"]
    Machine Geometry: ["machine", "psimodel", "gsla", "gslb", "ephicc", "zmax", "rmirror", "radmin", "rovera", "radmaj", "btor", "bth"]
    
    Species Descriptors: ["ngen", "nmax", "kspeci", "fmass", "bnumb", "iprote", "iproti", "iprone", "npwr", "mpwr", "reden", "temp", "acoefne", "acoefte", "profpsi"]
    Spline Profile Inputs: ["njene", "njte", "njti", "ryain", "enein", "tein", "tiin", "enescal", "tescal", "tiscal"]
    Zeff Control: ["iprozeff", "zeffscal", "zeffin", "npwrzeff", "mpwrzeff", "izeff"]
    Distribution Loading: ["fpld", "nfpld"]
    
    Time-dependent Profiles: ["nbctime", "tmdmeth", "bctime", "bctshift", "bctimescal", "redenc", "redenb", "tempc", "tempb", "temp_den", "zeffc", "zeffb", "elecc", "elecb", "npwrelec", "mpwrelec", "vphic", "vphib", "npwrvphi", "mpwrvphi", "xjc", "xjb", "npwrxj", "mpwrxj", "totcrt", "enein_t", "tein_t", "tiin_t", "zeffin_t", "vphiplin_t", "elecin_t", "ennin_t", "xjin_t"]
    
    Collisional Input: ["ncoef", "mx", "colmodl", "kfield", "cfp_integrals", "gamaset", "gamafac", "qsineut", "locquas", "trapmod", "trapredc", "scatmod", "scatfrac"]
    Energy and Particle Losses: ["lossmode", "esink", "xsink", "xsinkm", "lossfile", "eparc", "eperc", "torloss", "nonloss", "noffloss", "tauloss", "enloss", "deltabdb", "tauegy", "negy", "megy", "gamegy", "paregy", "peregy", "pegy", "syncrad", "bremsrad", "brfac", "brfac1", "brfacgm3"]
    DC Electric Field: ["efswtch", "efswtchn", "curr_edge", "efiter", "efrelax1", "currerr", "efrelax", "efrelax_exp", "noncntrl", "elecfld", "efflag", "iproelec", "elecin", "elecscal", "eoved", "nonel", "noffel"]
    Ampere-Faraday Module: ["ampfmod", "nampfmax", "ampferr", "nonampf"]
    
    Toroidal Rotation: ["nonvphi", "noffvphi", "iprovphi", "vphiplin", "vphiscal"]
    
    Plot and Output Controls: ["nchec", "pltd", "pltlim", "pltlimm", "pltmag", "contrmin", "constr", "ncont", "pltvecc", "pltvece", "pltvecrf", "pltvecal", "veclnth", "ipxy", "jpxy", "pltend", "pltrst", "pltvflu", "pltra", "pltpowe", "pltfvs", "pltfofv", "pltprpp", "xprpmax", "pltdn", "eegy", "negyrg", "pltsig", "pltstrm", "pltflux", "pltflux1", "pltinput", "nrskip", "irzplt", "plt3d", "pltvs", "pltrdc", "plturfb", "nplt3d", "idskf", "idskrf", "netcdfnm", "netcdfshort", "netcdfvecc", "netcdfvece", "netcdfvecrf", "netcdfvecal", "netcdfvecs", "f4d_out", "nr_f4d", "nz_f4d", "nv_f4d", "nt_f4d", "tavg", "tavg1", "tavg2", "f3d_out", "npol_f3d", "nvpar_f3d", "nmu_f3d", "f3d_rho"]
    First-order orbit shift: ["ndeltarho", "nr_delta", "nz_delta", "nt_delta"]
    Soft X-ray Diagnostic: ["softxry", "nv", "rd", "thetd", "x_sxr", "z_sxr", "thet1", "thet2", "nen", "enmin", "enmax", "msxr", "fds"]
    NPA Diagnostic: ["npa_diag", "nv_npa", "rd_npa", "thetd_npa", "x_npa", "z_npa", "thet1_npa", "thet2_npa", "nen_npa", "enmin_npa", "enmax_npa", "atten_npa", "fds_npa", "nnspec", "ipronn", "npaproc", "npa_process", "ennl", "ennb", "ennin", "ennscal", "ennprofile_files"]
    Fusion Reactions: ["sigmamod", "isigmas", "mmsv", "isigsgv1", "isigtst", "sigvi", "sigvcx"]
    Bootstrap Current: ["bootcalc", "bootupdt", "bootsign", "nonboot"]
    Current Drive Diagnostics: ["bootst", "jhirsh", "kpress"]
    Partner Codes: ["partner"]
    Analytic Source Control: ['nso', 'nsou', 'nonso', 'noffso', 'szm1', 'szm2', 'szm1z', 'szm2z', 'soucoord', 'sem1', 'sem2', 'sem1z', 'sem2z', 'sthm1', 'sthm1z', 'scm2', 'scm2z', 'sellm1', 'seppm1', 'sellm2', 'seppm2', 'sellm1z', 'seppm1z', 'sellm2z', 'seppm2z', 'asor', 'asorz', 'pltso']
    Knockon Source Control: ['knockon', 'komodel', 'nonko', 'noffko', 'isoucof', 'soffvte', 'faccof', 'soffpr', 'flemodel', 'jfl', 'xlfac', 'xlpctlwr', 'xlpctmdl', 'xllwr', 'xlmdl']
    Equilibrium Controls: ['eqmod', 'eqsym', 'eqsource', 'eqdskin', 'bsign', 'eqdskalt', 'povdelp', 'ellptcty', 'rmag', 'eqmodel', 'eqpower', 'fpsimodl', 'rbox', 'zbox', 'rboxdst', 'atol', 'rtol', 'methflag', 'nconteqn', 'nconteq', 'lfield', 'eq_miller_rmag', 'eq_miller_zmag', 'eq_miller_btor', 'eq_miller_radmin', 'eq_miller_cursign', 'eq_miller_psimag', 'eq_miller_psilim', 'eq_miller_psi_n', 'eq_miller_psi_m', 'eq_miller_deltaedge', 'eq_miller_kappa', 'eq_miller_drr0']
    URF Module: ['urfmod', 'rffile', 'ech', 'fw', 'lh', 'rftype', 'rfread', 'nharms', 'nharm1', 'nrfspecies', 'call_lh', 'call_ech', 'call_fw', 'pwrscale1', 'urftime', 'nurftime', 'urfmult', 'wdscale', 'nbssltbl', 'nondamp', 'nrfstep1', 'nrfstep2', 'nrfpwr', 'nrfitr1', 'nrfitr2', 'nrfitr3', 'urfncoef', 'scaleurf', 'iurfcoll', 'iurfl', 'ieqbrurf', 'urfdmp', 'urfrstrt', 'urfwrray']
    VLH Module: ['vlhmod', 'nonrf', 'noffrf', 'nrf', 'vlhmodes', 'vparmin', 'vparmax', 'vprpmin', 'vprpmax', 'vlhpolmn', 'vlhpolmx', 'vdalp', 'vprprop', 'dlndau', 'vlhprprp', 'vlh_karney', 'vlhplse', 'vlhpon', 'vlhpoff']
    VLF Module: ['vlfmod', 'vlfmodes', 'vlfbes', 'vlfnpvar', 'vlfharms', 'vlfdnorm', 'vlffreq', 'vlfharm1', 'vlfnp', 'vlfdnp', 'vlfddnp', 'vlfnperp', 'vlfeplus', 'vlfemin', 'vlfpol', 'vlfdpol', 'vlfddpol', 'vlfparmn', 'vlfparmx', 'vlfpermn', 'vlfpermx']
    RDC Module: ['rdcmod', 'nrdc', 'rdcfile', 'nrdcspecies', 'rdcscale', 'pwrscale', 'rdc_upar_sign', 'rdc_clipping', 'rdc_netcdf']
    Transport Module: ["transp", "nontran", "nofftran", "adimeth", "nonadi", "difus_type", "difus_io", "difus_io_file", "difus_io_drrscale", "difus_io_drscale", "difus_io_t", "ndifus_io_t", "difusr", "difus_rshape", "difus_vshape", "difin", "pinch", "relaxden", "advectr", "relaxtsp", "nonelpr", "noffelpr", "scheck", "pltdrr"]
    FREYA Module: ["nbeams", "kfrsou", "frplt", "nfrplt", "smooth", "multiply", "multiplyn", "bmsprd", "nimp", "nprim", "anglev", "angleh", "nsourc", "bvofset", "bhofset", "bleni", "sfrac1", "bcur", "bptor", "bshape", "bheigh", "bwidth", "bhfoc", "bvfoc", "bhdiv", "bvdiv", "ebkev", "fbcur", "npart", "npskip", "naptr", "ashape", "aheigh", "awidth", "alen", "blenp", "rpivot", "zpivot", "ibcur", "iborb", "iexcit", "fe_tk", "ne_tk", "ds_tk", "inubpat", "ranseed", "beamplse", "beampon", "beampoff", "read_birth_pts", "nbirth_pts_files", "birth_pts_files", "nbirth_pts", "fr_gyro"]
    CQLP Module: ["denpar", "temppar", "epsthet", "ngauss", "nlagran", "oldiag", "nummods", "lmidvel", "laddbnd", "sbdry", "eseswtch", "elpar0", "nkconro", "scheck", "meshy", "simpbfac"]
    
        
        
subgroupinfo:
    Basic Setup: 'basicsetup'
    Time Step Controls: 'timestepcontrols'
    Mesh Controls: 'meshcontrols'
    Differencing and Solution Method: 'differencingandsolutionmethod'
    Machine Geometry: 'machinegeometry'
    Species Descriptors: 'speciesdescriptors'
    Spline Profile Inputs: 'speciesdescriptors'
    Zeff Control: 'speciesdescriptors'
    Distribution Loading: 'speciesdescriptors'
    Time-dependent Profiles: 'timedependentprofiles'
    Collisional Input: 'collisionalinput'
    Energy and Particle Losses: 'energyandparticlelosses'
    DC Electric Field: 'dcelectricfield'
    Ampere-Faraday Module: 'amperefaradaymodule'
    Toroidal Rotation: 'toroidalrotation'
    Plot and Output Controls: 'plotandoutputcontrols'
    First-order orbit shift: 'firstorbitshift'
    Soft X-ray Diagnostic: 'softxraydiagnostics'
    NPA Diagnostic: 'npadiagnostic'
    Fusion Reactions: 'fusionreactions'
    Bootstrap Current: 'bootstrapcurrent'
    Current Drive Diagnostics: 'currentdrivediagnostics'
    Partner Codes: 'partnercodes'
    Analytic Source Control: 'analyticsourcecontrol'
    Knockon Source Control: 'knockonsourcecontrol'
    Equilibrium Controls: 'equilibriumcontrols'
    URF Module: 'urfmodule'
    VLH Module: 'vlhmodule'
    VLF Module: 'vlfmodule'
    RDC Module: 'rdcmodule'
    Transport Module: 'transportmodule'
    FREYA Module: 'freyamodule'
    CQLP Module: 'cqlpmodule'
        
namelist_groups:
  setup0:
    description: "Initial setup parameters"
    required: true
    variables:
      mnemonic:
        type: string
        default: "mnemonic"
        max_length: 48
        description: "Run designator, prefix for output files"
      
      ioutput:
        type: integer_array
        dimensions: 2
        default: 0
        description: "Output verbosity control"
      
      iuser:
        type: string
        default: ""
        description: "User name identifier"
      
      ibox:
        type: string
        default: ""
        description: "Box number identifier"
      
      noplots:
        type: string
        default: "disabled"
        description: "Plot generation control"
        options: ["disabled", "enabled", "enabled1"]
      
      lnwidth:
        type: integer
        default: 3
        description: "Line width for plotting (units of 0.005 in)"
        constraints:
          min: 1
      
      nmlstout:
        type: string
        default: "trnscrib"
        description: "Namelist output control"
        options: ["disabled", "enabled", "trnscrib"]
      
      special_calls:
        type: string
        default: "enabled"
        description: "System calls for system info"
        options: ["enabled", "external", "disabled"]
      
      nlwritf:
        type: string
        default: "disabled"
        description: "Save distribution function at end of run"
        options: ["disabled", "enabled", "ncdfdist"]
      
      nlrestrt:
        type: string
        default: "disabled"
        description: "Restart from saved distribution"
        options: ["disabled", "enabled", "ncdfdist", "ncregrid"]
      
      cqlpmod:
        type: string
        default: "disabled"
        description: "Enable CQLP (parallel transport) mode"
        options: ["disabled", "enabled"]
      
      lrz:
        type: integer
        default: 1
        description: "Number of radial flux surfaces for FP solution"
        constraints:
          min: 1
      
      lrzdiff:
        type: string
        default: "disabled"
        description: "Compute distribution on subset of flux surfaces"
        options: ["disabled", "enabled"]
      
      lrzmax:
        type: integer
        description: "Total number of flux surfaces"
        constraints:
          min: 1
          note: "=1 for single flux surface, ≥4 for profile runs"
      
      lrindx:
        type: integer_array
        description: "Indices of flux surfaces where FP is performed"
        dimensions: "lrz"
      
      ls:
        type: integer
        default: 40
        description: "Number of poloidal mesh points (CQLP mode)"
      
      lsmax:
        type: integer
        description: "Total number of poloidal points (CQLP mode)"
      
      lsdiff:
        type: string
        default: "disabled"
        description: "Use subset of poloidal points (CQLP)"
        options: ["disabled", "enabled"]
      
      lsindx:
        type: integer_array
        description: "Indices of poloidal points for FP (CQLP)"
    
    dependencies:
      - when: "lrzdiff == 'disabled'"
        then: "lrzmax = lrz"
      - when: "cqlpmod == 'enabled'"
        then: "lz = lsmax"

  setup:
    description: "Main physics and numerical control parameters"
    variables:
      # Time step controls
      dtr:
        type: float
        default: 5.0
        description: "Time step in seconds"
        units: "seconds"
      
      dtr1:
        type: float_array
        dimensions: 10
        default: 0.0
        description: "Additional time step settings"
      
      nondtr1:
        type: integer_array
        dimensions: 10
        default: -1
        description: "Steps at which new time steps dtr1() start"
      
      nstop:
        type: integer
        default: 5
        description: "Number of time steps to run"
      
      nrstrt:
        type: integer
        default: 1
        description: "Number of cycles before moving to next flux surface"
        note: "Defunct functionality, only nrstrt=1 works"
      
      nplot:
        type: integer_array
        dimensions: "nplota"
        default: -10000
        description: "Time steps for plotting individual flux surfaces"
      
      nsave:
        type: integer_array
        dimensions: "nsavea"
        default: -10000
        description: "Time steps for saving distributions to .nc file"
      
      iactst:
        type: string
        default: "disabled"
        description: "Debugging diagnostics"
        options: ["disabled", "enabled", "abort"]
      
      # Mesh controls
      jx:
        type: integer
        default: 300
        description: "Number of speed mesh points"
        constraints:
          min: 1
      
      iy:
        type: integer
        default: 200
        description: "Number of theta mesh points (must be even)"
        constraints:
          even: true
          max: 255
        dependencies:
          urfmod: ">255 not allowed with urfmod != 'disabled' (old restriction)"
      
      lz:
        type: integer
        default: 40
        description: "Number of poloidal (field line) mesh points"
      
      vnorm:
        type: float
        description: "Velocity normalization constant (cm/sec)"
        units: "cm/sec"
      
      enorm:
        type: float
        default: 200.0
        description: "Energy corresponding to vnorm (keV)"
        units: "keV"
      
      kenorm:
        type: integer
        default: 1
        description: "Species index determining vnorm through enorm"
      
      tandem:
        type: string
        default: "disabled"
        description: "Facilitate both ions and electrons as general species"
        options: ["disabled", "enabled"]
      
      enorme:
        type: float
        description: "Electron mesh top energy for tandem mode (keV)"
        units: "keV"
      
      enormi:
        type: float
        description: "Ion mesh top energy for tandem mode (keV)"
        units: "keV"
      
      relativ:
        type: string
        default: "enabled"
        description: "Relativity treatment"
        options: ["disabled", "enabled", "fully"]
        #constraints:
          #fully: "mx ≤ 3 for fully relativistic"
      
      xfac:
        type: float
        default: 1.0
        description: "Velocity mesh spacing parameter"
        note: "1=uniform, <1=more resolution at low v, >1=more at high v"
      
      xpctlwr:
        type: float
        default: 0.1
        description: "Fraction of mesh points in low velocity region"
      
      xpctmdl:
        type: float
        default: 0.4
        description: "Fraction of mesh points in middle velocity region"
      
      xlwr:
        type: float
        default: 0.085
        description: "Upper bound of low velocity region"
      
      xmdl:
        type: float
        default: 0.25
        description: "Upper bound of middle velocity region"
      
      tfac:
        type: float
        default: 1.0
        description: "Theta mesh spacing parameter"
        note: "1=uniform, <1=packed at trapped-passing boundary"
      
      yreset:
        type: string
        default: "disabled"
        description: "Pack extra theta mesh points in specified region"
        options: ["disabled", "enabled"]
      
      numby:
        type: integer
        default: 20
        description: "Number of packed theta mesh points"
        constraints:
          max: "iy/2"
      
      ylower:
        type: float
        default: 0.0
        description: "Lower bound of packed region (radians)"
        units: "radians"
      
      yupper:
        type: float
        default: 0.0
        description: "Upper bound of packed region (radians)"
        units: "radians"
      
      tfacz:
        type: float
        default: 1.0
        description: "Field line coordinate mesh spacing"
      
      tbnd:
        type: float_array
        dimensions: "lrorsa"
        #default: [0.002] + [0.0] * (lrorsa-1)
        default: 0.002
        description: "Width of passing/trapped boundary layer (radians)"
        units: "radians"
      
      rfacz:
        type: float
        default: 0.7
        description: "Radial mesh spacing parameter"
      
      roveram:
        type: float
        default: 1.0e-8
        description: "Minimum flux surface value rya(1)"
      
      rzset:
        type: string
        default: "disabled"
        description: "User-specified radial mesh"
        options: ["disabled", "enabled"]
      
      rya:
        type: float_array
        dimensions: "lrzmax"
        description: "Normalized radial mesh r(l)/radmin"
      
      radcoord:
        type: string
        default: "sqtorflx"
        description: "Radial coordinate type"
        options: ["sqtorflx", "sqarea", "sqvol", "rminmax", "polflx", "sqpolflx"]
      
      # Differencing and solution method
      chang:
        type: string
        default: "enabled"
        description: "Chang-Cooper differencing scheme"
        options: ["disabled", "enabled", "noneg"]
      
      ineg:
        type: string
        default: "disabled"
        description: "Treatment of negative distribution values"
        options: ["disabled", "enabled", "renorm", "trunc_d", "enabled1"]
      
      implct:
        type: string
        default: "enabled"
        description: "Implicit differencing"
        options: ["disabled", "enabled"]
      
      manymat:
        type: string
        default: "disabled"
        description: "Save factored matrices on disk"
        options: ["disabled", "enabled"]
      
      soln_method:
        type: string
        default: "direct"
        description: "Solution method for velocity-space equations"
        options: ["direct", "itsol", "itsol1", "it3dv", "it3drv"]
      
      droptol:
        type: float
        default: 1.0e-3
        description: "Drop tolerance for itsol preconditioner"
      
      lfil:
        type: integer
        default: 30
        description: "Maximum fill-in for L and U in itsol"
      
      lbdry:
        type: string_array
        dimensions: "ngena"
        default: "conserv"
        description: "Boundary conditions at v=0 for each species (options: \"conserv\", \"fixed\", \"scale\", \"consscal\", \"conscalm\")"
        #options: ["conserv", "fixed", "scale", "consscal", "conscalm"]
      
      lbdry0:
        type: string
        default: "enabled"
        description: "New system for computing f at v=0"
        options: ["disabled", "enabled"]
      
      taunew:
        type: string
        default: "disabled"
        description: "Numerical calculation of dtau and tau times"
        options: ["disabled", "enabled"]
      
      nstps:
        type: integer
        default: 100
        description: "Number of subintervals for tau integration"
      
      # Machine geometry
      machine:
        type: string
        default: "toroidal"
        description: "Machine geometry type"
        options: ["toroidal", "mirror"]
      
      psimodel:
        type: string
        default: "axitorus"
        description: "Magnetic field variation model"
        options: ["axitorus", "smith", "spline"]
      
      gsla:
        type: float
        default: 270.0
        description: "Field scale length for Smith model (cm)"
        units: "cm"
      
      gslb:
        type: float
        default: 35.0
        description: "Field scale length for Smith model (cm)"
        units: "cm"
      
      ephicc:
        type: float
        default: 0.0
        description: "Throat potential jump for mirror (kV)"
        units: "kV"
      
      zmax:
        type: float
        default: 408.0
        description: "Arclength along B from midplane to throat (cm)"
        units: "cm"
      
      rmirror:
        type: float
        default: 2.0
        description: "Mirror ratio for mirror machine"
      
      radmin:
        type: float
        default: 50.0
        description: "Torus minor radius (cm)"
        units: "cm"
      
      rovera:
        type: float
        default: 0.1
        description: "Normalized minor radius for single flux surface"
      
      radmaj:
        type: float
        default: 100.0
        description: "Torus major radius (cm)"
        units: "cm"
      
      btor:
        type: float
        default: 1.0e4
        description: "Toroidal B-field at magnetic axis (G)"
        units: "Gauss"
      
      bth:
        type: float
        default: 1.0e3
        description: "Poloidal B-field at plasma edge (G)"
        units: "Gauss"
      
      # Species descriptors
      ngen:
        type: integer
        default: 1
        description: "Number of general (time-advanced) species"
      
      nmax:
        type: integer
        default: 2
        description: "Number of Maxwellian species"
      
      kspeci:
        type: string_array
        default: "['e', 'general'], ['d', 'maxwell'], ['e', 'maxwell']"
        dimensions: [2, "ntotal"]
        description: "Species names and types"
        format: "kspeci(1,k)=name, kspeci(2,k)=type"
      
      fmass:
        type: float_array
        dimensions: "ntotal"
        default: 9.1095e-28, 3.3433e-24, 9.1095e-28
        description: "Species mass (grams)"
        units: "grams"
      
      bnumb:
        type: float_array
        dimensions: "ntotal"
        default: -1.0, 1.0, -1.0
        description: "Atomic number (-1 for electrons)"
      
      iprote:
        type: string
        default: "parabola"
        description: "Electron temperature profile specification"
        options: ["parabola", "spline", "asdex", "prbola-t", "spline-t"]
      
      iproti:
        type: string
        default: "parabola"
        description: "Ion temperature profile specification"
        options: ["parabola", "spline", "asdex", "prbola-t", "spline-t"]
      
      iprone:
        type: string
        default: "parabola"
        description: "Density profile specification"
        options: ["parabola", "spline", "asdex", "prbola-t", "spline-t"]
      
      npwr:
        type: float_array
        dimensions: "ntotal+1"
        default: 2.0
        description: "Power for parabolic profiles"
        note: "npwr(0) for density, npwr(k) for temperature"
      
      mpwr:
        type: float_array
        dimensions: "ntotal+1"
        default: 1.0
        description: "Power for parabolic profiles"
        note: "mpwr(0) for density, mpwr(k) for temperature"
      
      reden:
        type: float_array
        dimensions: ["ntotal", "lrzmax"]
        #default: 1.0
        description: "Initial density (particles/cm³)"
        units: "cm⁻³"
      
      temp:
        type: float_array
        dimensions: ["ntotal", "lrzmax"]
        #default: 1.0
        description: "Initial temperature (keV)"
        units: "keV"

      acoefne:
        type: float_array
        dimensions: 4
        default: -1.80,-7.83,+051.57,-353.68
        description: "ASDEX-type exponential profile coefficeints"
        units: "keV"
        
      acoefte:
        type: float_array
        dimensions: 4
        default: 8.01,-13.60,+08.69,-114.59
        description: "ASDEX-type exponential profile coefficeints"
        units: "keV"
      
      profpsi:
        type: string
        default: "disabled"
        description: "Use psi-dependent profiles"
        options: ["disabled", "enabled"]
        
      
      # Spline profile inputs
      njene:
        type: integer
        default: 0
        description: "Number of radial points for spline profiles"

      njte:
        type: integer
        default: 0
        description: "Number of radial points for spline profiles"
        
      njti:
        type: integer
        default: 0
        description: "Number of radial points for spline profiles"        
      
      ryain:
        type: float_array
        dimensions: "njene"
        description: "Radial coordinate for spline input (r/a)"
      
      enein:
        type: float_array
        dimensions: ["njene", "ntotal"]
        description: "Density spline input (cm⁻³)"
        units: "cm⁻³"
      
      tein:
        type: float_array
        dimensions: "njene"
        description: "Electron temperature spline input (keV)"
        units: "keV"
      
      tiin:
        type: float_array
        dimensions: "njene"
        description: "Ion temperature spline input (keV)"
        units: "keV"
      
      enescal:
        type: float
        default: 1.0
        description: "Scale factor for density spline input"
      
      tescal:
        type: float
        default: 1.0
        description: "Scale factor for temperature spline input"
      
      tiscal:
        type: float
        default: 1.0
        description: "Scale factor for ion temperature spline input"
      
      # Zeff control
      iprozeff:
        type: string
        default: "disabled"
        description: "Zeff profile control"
        options: ["disabled", "parabola", "prbola-t", "spline", "spline-t"]
      
      zeffscal:
        type: float
        default: 1.0
        description: "Scale factor for zeffin spline input"
      
      zeffin:
        type: float_array
        dimensions: "njene"
        description: "Zeff spline input"
      
      npwrzeff:
        type: float
        default: 2.0
        description: "Power for Zeff parabolic profile"
      
      mpwrzeff:
        type: float
        default: 1.0
        description: "Power for Zeff parabolic profile"
      
      izeff:
        type: string
        default: "backgrnd"
        description: "Zeff calculation method"
        options: ["backgrnd", "ion"]
      
      # Distribution loading
      fpld:
        type: float_array
        dimensions: [10, "ngena"]
        default: 0.0
        description: "Additional loading of distribution functions"
        note: "See documentation for detailed usage"
      
      nfpld:
        type: integer
        default: 0
        description: "Time step for additional loading"
      
      # Time-dependent profiles (method 1/2)
      nbctime:
        type: integer
        default: 0
        description: "Number of times for time-dependent profiles"
      
      tmdmeth:
        type: string
        default: "method1"
        description: "Time-dependent profile method"
        options: ["method1", "method2"]
      
      bctime:
        type: float_array
        dimensions: "nbctime"
        description: "Times for profile data (seconds)"
        units: "seconds"
      
      bctshift:
        type: float
        default: 0.0
        description: "Time shift for bctime array"
        units: "seconds"
      
      bctimescal:
        type: float
        default: 1.0
        description: "Scale factor for bctime"
      
      redenc:
        type: float_array
        dimensions: ["nbctime", "ntotal"]
        description: "Central density values (cm⁻³)"
        units: "cm⁻³"
      
      redenb:
        type: float_array
        dimensions: ["nbctime", "ntotal"]
        description: "Edge density values (cm⁻³)"
        units: "cm⁻³"
      
      tempc:
        type: float_array
        dimensions: ["nbctime", "ntotal"]
        description: "Central temperature values (keV)"
        units: "keV"
      
      tempb:
        type: float_array
        dimensions: ["nbctime", "ntotal"]
        description: "Edge temperature values (keV)"
        units: "keV"
      
      temp_den:
        type: float
        default: 0.0
        description: "Temperature for added density (keV)"
        units: "keV"
      
      zeffc:
        type: float_array
        dimensions: "nbctime"
        description: "Central Zeff values"
      
      zeffb:
        type: float_array
        dimensions: "nbctime"
        description: "Edge Zeff values"
      
      elecc:
        type: float_array
        dimensions: "nbctime"
        description: "Central electric field values (V/cm)"
        units: "V/cm"
      
      elecb:
        type: float_array
        dimensions: "nbctime"
        description: "Edge electric field values (V/cm)"
        units: "V/cm"
      
      npwrelec:
        type: float
        default: 2.0
        description: "Power for electric field parabolic profile"
      
      mpwrelec:
        type: float
        default: 1.0
        description: "Power for electric field parabolic profile"
      
      vphic:
        type: float_array
        dimensions: "nbctime"
        description: "Central toroidal rotation (cm/sec)"
        units: "cm/sec"
      
      vphib:
        type: float_array
        dimensions: "nbctime"
        description: "Edge toroidal rotation (cm/sec)"
        units: "cm/sec"
      
      npwrvphi:
        type: float
        default: 2.0
        description: "Power for rotation parabolic profile"
      
      mpwrvphi:
        type: float
        default: 1.0
        description: "Power for rotation parabolic profile"
      
      xjc:
        type: float_array
        dimensions: "nbctime"
        description: "Central current density (A/cm²)"
        units: "A/cm²"
      
      xjb:
        type: float_array
        dimensions: "nbctime"
        description: "Edge current density (A/cm²)"
        units: "A/cm²"
      
      npwrxj:
        type: float
        default: 2.0
        description: "Power for current density parabolic profile"
      
      mpwrxj:
        type: float
        default: 1.0
        description: "Power for current density parabolic profile"
      
      totcrt:
        type: float_array
        dimensions: "nbctime"
        description: "Total plasma current (A)"
        units: "A"
      
      # Time-dependent spline profiles
      enein_t:
        type: float_array
        dimensions: ["njene", "ntotal", "nbctime"]
        description: "Time-dependent density spline profiles"
      
      tein_t:
        type: float_array
        dimensions: ["njene", "nbctime"]
        description: "Time-dependent Te spline profiles"
      
      tiin_t:
        type: float_array
        dimensions: ["njene", "nbctime"]
        description: "Time-dependent Ti spline profiles"
      
      zeffin_t:
        type: float_array
        dimensions: ["njene", "nbctime"]
        description: "Time-dependent Zeff spline profiles"
      
      vphiplin_t:
        type: float_array
        dimensions: ["njene", "nbctime"]
        description: "Time-dependent rotation spline profiles"
      
      elecin_t:
        type: float_array
        dimensions: ["njene", "nbctime"]
        description: "Time-dependent electric field spline profiles"
      
      ennin_t:
        type: float_array
        dimensions: ["njene", "nbctime", "npaproca"]
        description: "Time-dependent neutral density profiles"
      
      xjin_t:
        type: float_array
        dimensions: ["njene", "nbctime"]
        description: "Time-dependent current density spline profiles"
      
      # Collisional input
      ncoef:
        type: integer
        default: 1
        description: "Frequency of collisional coefficients computation"
      
      mx:
        type: integer
        default: 3
        description: "Highest order Legendre polynomial for collisions"
      
      colmodl:
        type: integer
        default: 1
        description: "Collision model selection"
        options:
          0: "Fully nonlinear self-collisions"
          1: "Only background contributions"
          2: "Only general species contributions"
          3: "Like 0 but ignore p0 component from general species"
          4: "Undocumented/unsupported"
      
      kfield:
        type: string_array
        dimensions: "ntotal"
        default: "enabled"
        description: "Include species as field particles in collisions"
        #options: ["disabled", "enabled"]
      
      cfp_integrals:
        type: string
        default: "disabled"
        description: "Method for computing collision integrals"
        options: ["disabled", "enabled"]
      
      gamaset:
        type: float
        default: 0.0
        description: "Coulomb logarithm setting"
        note: ">0 sets all logs to gamaset, 0 computes internally, -1 uses NRL"
      
      gamafac:
        type: string
        default: "disabled"
        description: "Energy-dependent Coulomb log for electrons"
        options: ["disabled", "enabled"]
      
      qsineut:
        type: string
        default: "disabled"
        description: "Quasi-neutrality enforcement"
        options: ["disabled", "enabled", "maxwel"]
      
      locquas:
        type: string
        default: "disabled"
        description: "Local quasineutrality for background electrons"
        options: ["disabled", "enabled"]
      
      trapmod:
        type: string
        default: "disabled"
        description: "Modify magnetic well depth"
        options: ["disabled", "enabled"]
      
      trapredc:
        type: float
        default: 0.0
        description: "Fractional reduction in magnetic well"
        constraints:
          min: 0.0
          max: 1.0
      
      scatmod:
        type: string
        default: "disabled"
        description: "Modify pitch angle scattering coefficient"
        options: ["disabled", "enabled"]
      
      scatfrac:
        type: float
        default: 1.0
        description: "Multiplier for collisional scattering coefficients"
      
      # Energy and particle losses
      lossmode:
        type: string_array
        dimensions: "ngena"
        default: "disabled"
        description: "Particle loss model"
#        options: ["disabled", "snk0", "snk0accl", "electron", "mirrorcc",
#                 "mirrsnk", "mirrsnk1", "simplban", "simplbn1", "simplbn2",
#                 "frm_file"]
      
      esink:
        type: float
        default: 0.0
        description: "Loss boundary energy (keV)"
        units: "keV"
      
      xsink:
        type: float
        default: 0.0
        description: "Loss boundary normalized velocity"
      
      xsinkm:
        type: float
        default: 1.0
        description: "Acceleration factor for snk0accl"
      
      lossfile:
        type: string_array
        dimensions: "ngena"
        #default: "./prompt_loss.txt"
        description: "File for loss region specification"
      
      eparc:
        type: float_array
        dimensions: ["ngena", "lrzmax"]
        description: "Parallel energy loss boundary (keV)"
        units: "keV"
      
      eperc:
        type: float_array
        dimensions: ["ngena", "lrzmax"]
        description: "Perpendicular energy loss boundary (keV)"
        units: "keV"
      
      torloss:
        type: string_array
        dimensions: "ngena"
        default: "disabled"
        description: "Toroidal loss term"
        #options: ["disabled", "velocity", "flutter", "flutter1", "flutter2",
        #         "flutter3", "energy", "relativ", "shell"]
      
      nonloss:
        type: integer
        default: 0
        description: "Start step for torloss terms"
      
      noffloss:
        type: integer
        default: 10000
        description: "Stop step for torloss terms"
      
      tauloss:
        type: float_array
        dimensions: [3, "ngena"]
        #default: 0.0
        description: "Loss rate coefficients"
      
      enloss:
        type: float_array
        dimensions: "ngena"
        description: "Energy loss boundary for torloss='energy'"
        units: "keV"
      
      deltabdb:
        type: float
        default: 0.0
        description: "Fluctuating B-field amplitude ratio"
      
      tauegy:
        type: float_array
        dimensions: ["ngen", 2]
        default: 0.0
        description: "Energy loss time profiles"
        units: "seconds"
      
      negy:
        type: float_array
        dimensions: "ngen"
        default: 2.0
        description: "Power for energy loss radial profile"
      
      megy:
        type: float_array
        dimensions: "ngen"
        default: 1.0
        description: "Power for energy loss radial profile"
      
      gamegy:
        type: float_array
        dimensions: "ngen"
        default: 0.0
        description: "Energy dependence exponent for energy loss"
      
      paregy:
        type: float_array
        dimensions: "ngen"
        default: 0.0
        description: "Parallel velocity exponent for energy loss"
      
      peregy:
        type: float_array
        dimensions: "ngen"
        default: 0.0
        description: "Perpendicular velocity exponent for energy loss"
      
      pegy:
        type: float_array
        dimensions: "ngen"
        default: 0.0
        description: "Velocity exponent for energy loss"
      
      syncrad:
        type: string
        default: "disabled"
        description: "Synchrotron radiation energy loss"
        options: ["disabled", "gyro", "geom", "gyrogeom"]
      
      bremsrad:
        type: string
        default: "disabled"
        description: "Bremsstrahlung radiation energy loss"
        options: ["disabled", "enabled"]
      
      brfac:
        type: float
        default: 0.0
        description: "Bremsstrahlung enhancement factor"
      
      brfac1:
        type: float
        default: 0.0
        description: "Bremsstrahlung enhancement exponent"
      
      brfacgm3:
        type: float
        default: 1.0
        description: "Bremsstrahlung gamma factor"
      
      # DC Electric field
      efswtch:
        type: string
        default: "method1"
        description: "Electric field specification method"
        options: ["method1", "method2", "method3", "method4", "method5"]
      
      efswtchn:
        type: string
        default: "disabled"
        description: "Alternative current calculation"
        options: ["disabled", "neo_hh"]
      
      curr_edge:
        type: float
        default: 0.0
        description: "Edge current density added to EQDSK"
        units: "A/cm²"
      
      efiter:
        type: string
        default: "enabled"
        description: "Iterations for electric field convergence"
        options: ["disabled", "enabled"]
      
      efrelax1:
        type: float
        default: 0.5
        description: "Relaxation for efiter procedure"
      
      currerr:
        type: float
        default: 0.1
        description: "Fractional accuracy for efiter"
      
      efrelax:
        type: float
        default: 0.5
        description: "Relaxation parameter for electric field"
      
      efrelax_exp:
        type: float
        default: 1.0
        description: "Power in generalized E-field relaxation"
      
      noncntrl:
        type: integer
        default: 0
        description: "Time step for current control turn-on"
      
      elecfld:
        type: float_array
        dimensions: "lrzmax"
        default: 0.0
        description: "Ohmic electric field (V/cm)"
        units: "V/cm"
      
      efflag:
        type: string
        default: "toroidal"
        description: "Electric field direction"
        options: ["toroidal", "parallel"]
      
      iproelec:
        type: string
        default: "parabola"
        description: "Electric field profile specification"
        options: ["parabola", "spline", "prbola-t", "spline-t"]
      
      elecin:
        type: float_array
        dimensions: "njena"
        description: "Electric field spline input (V/cm)"
        units: "V/cm"
      
      elecscal:
        type: float
        default: 1.0
        description: "Scale factor for elecin spline input"
      
      eoved:
        type: float
        default: -0.01
        description: "E/E-Dreicer ratio"
      
      nonel:
        type: integer
        default: 0
        description: "On cycle for electric field term"
      
      noffel:
        type: integer
        default: 100000
        description: "Off cycle for electric field term"
      
      # Ampere-Faraday equations
      ampfmod:
        type: string
        default: "disabled"
        description: "Simultaneous solution with Amp-Far eqns"
        options: ["disabled", "enabled"]
      
      nampfmax:
        type: integer
        default: 3
        description: "Max iterations for Amp-Far solution"
      
      ampferr:
        type: float
        default: 1.0e-3
        description: "Error tolerance for Amp-Far iteration"
      
      nonampf:
        type: integer
        default: 0
        description: "Turn-on step for Amp-Far solution"
      
      # Toroidal rotation
      nonvphi:
        type: integer
        default: 10000
        description: "Step for toroidal rotation turn-on"
      
      noffvphi:
        type: integer
        default: 10000
        description: "Step for toroidal rotation turn-off"
      
      iprovphi:
        type: string
        default: "disabled"
        description: "Toroidal rotation profile specification"
        options: ["disabled", "parabola", "spline", "prbola-t", "spline-t"]
      
      vphiplin:
        type: float_array
        dimensions: "njenea"
        description: "Toroidal velocity profile (cm/sec)"
        units: "cm/sec"
      
      vphiscal:
        type: float
        default: 1.0
        description: "Scale factor for vphiplin"
      
      # Plot and output controls
      nchec:
        type: integer
        default: 1
        description: "Steps between sampling for time plots"
      
      pltd:
        type: string
        default: "enabled"
        description: "Distribution plotting"
        options: ["disabled", "enabled", "df", "df_color", "color"]
      
      pltlim:
        type: string
        default: "disabled"
        description: "Velocity plotting limits"
        options: ["disabled", "x", "u/c", "energy"]
      
      pltlimm:
        type: float
        default: 1.0
        description: "Maximum value for pltlim"
      
      pltmag:
        type: float
        default: 1.0
        description: "Magnitude for pltlim"
      
      contrmin:
        type: float
        default: 1.0e-12
        description: "Smallest contour for contour plots"
      
      constr:
        type: float
        default: 1.0e-3
        description: "Smallest streamline for phase flow plots"
      
      ncont:
        type: integer
        #default: 25
        description: "Number of contours for contour plots"
      
      pltvecc:
        type: string
        default: "disabled"
        description: "Vector flux plot for collisions"
        options: ["disabled", "enabled"]
      
      pltvece:
        type: string
        default: "disabled"
        description: "Vector flux plot for electric field"
        options: ["disabled", "enabled"]
      
      pltvecrf:
        type: string
        default: "disabled"
        description: "Vector flux plot for RF field"
        options: ["disabled", "enabled"]
      
      pltvecal:
        type: string
        default: "disabled"
        description: "Vector flux plot for all fields"
        options: ["disabled", "enabled"]
      
      veclnth:
        type: float
        default: 1.0
        description: "Maximum vector length for vector plots"
      
      ipxy:
        type: integer
        #default: "min(51, iy)"
        description: "Number of perpendicular velocities for vector plots"
      
      jpxy:
        type: integer
        #default: "min(101, jx+1)"
        description: "Number of parallel velocities for vector plots"
      
      pltend:
        type: string
        default: "enabled"
        description: "Time plots control"
        options: ["disabled", "enabled", "notplts", "last", "tplts"]
      
      pltrst:
        type: string
        default: "enabled"
        description: "Plasma resistivity plots"
        options: ["disabled", "enabled"]
      
      pltvflu:
        type: string
        default: "disabled"
        description: "Normalized velocity flux plots"
        options: ["disabled", "enabled"]
      
      pltra:
        type: string
        default: "disabled"
        description: "Runaway relevant output"
        options: ["disabled", "enabled"]
      
      pltpowe:
        type: string
        default: "disabled"
        description: "Power vs time plots"
        options: ["disabled", "enabled", "last"]
      
      pltfvs:
        type: string
        default: "disabled"
        description: "f vs v for select theta values"
        options: ["disabled", "enabled"]
      
      pltfofv:
        type: string
        default: "disabled"
        description: "Pitch-angle integrated f vs u"
        options: ["disabled", "enabled"]
      
      pltprpp:
        type: string
        default: "disabled"
        description: "Reduced distribution f-parallel"
        options: ["disabled", "enabled"]
      
      xprpmax:
        type: float
        default: 1.0
        description: "Max perp velocity for f-parallel calculation"
      
      pltdn:
        type: string
        default: "disabled"
        description: "Density vs poloidal angle plots"
        options: ["disabled", "enabled"]
      
      eegy:
        type: float_array
        dimensions: ["negyrg", 2, "ngen", "lrzmax"]
        description: "Energy bins for density integration"
        units: "keV"
      
      negyrg:
        type: integer
        default: 0
        description: "Number of energy bins for pltdn"
      
      pltsig:
        type: string
        default: "enabled"
        description: "Fusion power plots"
        options: ["disabled", "enabled"]
      
      pltstrm:
        type: string
        default: "disabled"
        description: "Steady state flow streamlines"
        options: ["disabled", "enabled"]
      
      pltflux:
        type: string
        default: "disabled"
        description: "Momentum-space flux plots"
        options: ["disabled", "enabled"]
      
      pltflux1:
        type: float_array
        dimensions: 7
        default: [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.0]
        description: "Controls which fluxes are plotted"
      
      pltinput:
        type: string
        default: "enabled"
        description: "Input values printout"
        options: ["disabled", "enabled", "describe"]
      
      nrskip:
        type: integer
        default: 5
        description: "Skip factor for flux surface plots"
      
      irzplt:
        type: integer_array
        dimensions: "lrorsa"
        description: "Specific flux surfaces for plots"
      
      plt3d:
        type: string
        default: "enabled"
        description: "Quantities vs radius/psi plots"
        options: ["disabled", "enabled"]
      
      pltvs:
        type: string
        default: "rho"
        description: "Variable for 3D plots"
        options: ["rho", "psi"]
      
      pltrdc:
        type: string
        default: "all"
        description: "RDC diffusion coefficients plots"
        options: ["disabled", "enabled", "one", "all", "onecolor", "allcolor"]
      
      plturfb:
        type: string
        default: "enabled"
        description: "QL B coefficient plots"
        options: ["disabled", "enabled", "color"]
      
      #pltrays:
      #  type: string
      #  default: "enabled"
      #  description: "Ray plots over cross-section"
      #  options: ["disabled", "enabled"]
      
      nplt3d:
        type: integer_array
        dimensions: "nplota"
        default: -10000
        description: "Time steps for 3D plots"
      
      idskf:
        type: string
        default: "disabled"
        description: "Output distribution to file"
      
      idskrf:
        type: string
        default: "disabled"
        description: "Output RF coefficients to file"
      
      netcdfnm:
        type: string
        default: "disabled"
        description: "NetCDF output file creation"
        options: ["disabled", "enabled"]
      
      netcdfshort:
        type: string
        default: "disabled"
        description: "NetCDF file size control"
        options: ["disabled", "enabled", "longer_f", "lngshrtf", "longer_b", "long_jp", "long_urf"]
      
      netcdfvecc:
        type: string
        default: "disabled"
        description: "NetCDF vector flux output (collisions)"
        options: ["disabled", "enabled", "x-theta"]
      
      netcdfvece:
        type: string
        default: "disabled"
        description: "NetCDF vector flux output (electric field)"
        options: ["disabled", "enabled", "x-theta"]
      
      netcdfvecrf:
        type: string
        default: "disabled"
        description: "NetCDF vector flux output (RF field)"
        options: ["disabled", "enabled", "x-theta"]
      
      netcdfvecal:
        type: string
        default: "disabled"
        description: "NetCDF vector flux output (all fields)"
        options: ["disabled", "enabled", "x-theta"]
      
      netcdfvecs:
        type: string
        default: "all"
        description: "NetCDF vector output radius selection"
        options: ["all", "irzplt"]
      
      f4d_out:
        type: string
        default: "disabled"
        description: "4D distribution output"
        options: ["disabled", "enabled", "tavg"]
      
      nr_f4d:
        type: integer
        default: 65
        description: "R grid points for 4D output"
      
      nz_f4d:
        type: integer
        default: 65
        description: "Z grid points for 4D output"
      
      nv_f4d:
        type: integer
        default: 100
        description: "Velocity grid points for 4D output"
      
      nt_f4d:
        type: integer
        default: 100
        description: "Pitch angle grid points for 4D output"
      
      tavg:
        type: string
        default: "disabled"
        description: "Time-averaged distribution"
        options: ["disabled", "enabled"]
      
      tavg1:
        type: float_array
        dimensions: "ntavga"
        default: 0.0
        description: "Start times for averaging intervals"
        units: "seconds"
      
      tavg2:
        type: float_array
        dimensions: "ntavga"
        default: 0.0
        description: "End times for averaging intervals"
        units: "seconds"
      
      f3d_out:
        type: string
        default: "disabled"
        description: "3D distribution output for COGENT"
        options: ["disabled", "enabled"]
      
      npol_f3d:
        type: integer
        default: 20
        description: "Poloidal angle grid for 3D output"
      
      nvpar_f3d:
        type: integer
        default: 200
        description: "v_parallel grid for 3D output"
      
      nmu_f3d:
        type: integer
        default: 100
        description: "Magnetic moment grid for 3D output"
      
      f3d_rho:
        type: float
        default: 0.5
        description: "Coupling rho for 3D output"
      
      # First-order orbit shift
      ndeltarho:
        type: string
        default: "disabled"
        description: "First-order radial orbit shift calculation"
        options: ["disabled", "enabled", "urfb0", "urfdamp", "freya"]
      
      nr_delta:
        type: integer
        default: 65
        description: "R-points for delta calculation"
      
      nz_delta:
        type: integer
        default: 65
        description: "Z-points for delta calculation"
      
      nt_delta:
        type: integer
        default: 80
        description: "Theta-points for delta calculation (must be even)"
      
      # Soft X-ray diagnostic
      softxry:
        type: string
        default: "disabled"
        description: "Soft X-ray diagnostic"
        options: ["disabled", "enabled", "ncdf_all", "e-ion"]
      
      nv:
        type: integer
        default: 0
        description: "Number of viewing chords for SXR"
        constraints:
          max: "nva"
      
      rd:
        type: float_array
        dimensions: "nv"
        default: 100.0
        description: "Detector minor radius (cm)"
        units: "cm"
      
      thetd:
        type: float_array
        dimensions: "nv"
        default: 0.0
        description: "Detector poloidal angle (degrees)"
        units: "degrees"
      
      x_sxr:
        type: float_array
        dimensions: "nv"
        default: 0.0
        description: "Detector x-location (cm)"
        units: "cm"
      
      z_sxr:
        type: float_array
        dimensions: "nv"
        default: 0.0
        description: "Detector z-location (cm)"
        units: "cm"
      
      thet1:
        type: float_array
        dimensions: "nv"
        default: 90.0
        description: "Polar viewing angle (degrees)"
        units: "degrees"
      
      thet2:
        type: float_array
        dimensions: "nv"
        default: 180.0
        description: "Toroidal viewing angle (degrees)"
        units: "degrees"
      
      nen:
        type: integer
        default: 30
        description: "Number of energies for SXR spectra"
        constraints:
          max: "nena"
      
      enmin:
        type: float
        default: 5.0
        description: "Minimum energy for SXR spectra (keV)"
        units: "keV"
      
      enmax:
        type: float
        default: 50.0
        description: "Maximum energy for SXR spectra (keV)"
        units: "keV"
      
      msxr:
        type: integer
        #default: "mx"
        description: "Highest Legendre polynomial for SXR (default: \"mx\")"
      
      fds:
        type: float
        default: 0.2
        description: "Step size along viewing chord"
      
      # NPA diagnostic
      npa_diag:
        type: string
        default: "disabled"
        description: "Neutral particle analyzer diagnostic"
        options: ["disabled", "enabled", "ncdf_all"]
      
      nv_npa:
        type: integer
        default: 0
        description: "Number of viewing chords for NPA"
      
      rd_npa:
        type: float_array
        dimensions: "nv_npa"
        default: 100.0
        description: "Detector minor radius for NPA (cm)"
        units: "cm"
      
      thetd_npa:
        type: float_array
        dimensions: "nv_npa"
        default: 0.0
        description: "Detector poloidal angle for NPA (degrees)"
        units: "degrees"
      
      x_npa:
        type: float_array
        dimensions: "nv_npa"
        default: 0.0
        description: "Detector x-location for NPA (cm)"
        units: "cm"
      
      z_npa:
        type: float_array
        dimensions: "nv_npa"
        default: 0.0
        description: "Detector z-location for NPA (cm)"
        units: "cm"
      
      thet1_npa:
        type: float_array
        dimensions: "nv_npa"
        default: 90.0
        description: "Polar viewing angle for NPA (degrees)"
        units: "degrees"
      
      thet2_npa:
        type: float_array
        dimensions: "nv_npa"
        default: 180.0
        description: "Toroidal viewing angle for NPA (degrees)"
        units: "degrees"
      
      nen_npa:
        type: integer
        default: 1
        description: "Number of energies for NPA spectra"
      
      enmin_npa:
        type: float
        default: 5.0
        description: "Minimum energy for NPA spectra (keV)"
        units: "keV"
      
      enmax_npa:
        type: float
        default: 50.0
        description: "Maximum energy for NPA spectra (keV)"
        units: "keV"
        
      atten_npa:
        type: string
        default: "enabled"
        description: "Neutral attenuation calculation"
        options: ["disabled", "enabled"]
      
      fds_npa:
        type: float
        default: 0.2
        description: "Step size along viewing chord for NPA"
      
      nnspec:
        type: integer
        default: 1
        description: "Fast ion species number for NPA"
      
      ipronn:
        type: string
        default: "disabled"
        description: "Neutral density profile specification"
        options: ["disabled", "exp", "spline", "spline-t"]
      
      npaproc:
        type: integer
        default: 1
        description: "Number of NPA processes"
        constraints:
          max: "npaproca"
      
      npa_process:
        type: string_array
        dimensions: "npaproc"
        default: "cxh"
        description: "NPA processes considered"
        #options: ["notset", "cxh", "cxb4", "cxhe", "cxc", "radrecom"]
      
      ennl:
        type: float_array
        dimensions: "npaproc"
        default: 5.0
        description: "Scale length for exp profile (cm)"
        units: "cm"
      
      ennb:
        type: float_array
        dimensions: "npaproc"
        default: 1.0e10
        description: "Boundary neutral density (cm⁻³)"
        units: "cm⁻³"
      
      ennin:
        type: float_array
        dimensions: ["njene", "npaproc"]
        description: "Neutral density profiles (cm⁻³)"
        units: "cm⁻³"
      
      ennscal:
        type: float_array
        dimensions: "npaproc"
        default: 1.0
        description: "Scale factors for neutral density profiles"
      
      ennprofile_files:
        type: string_array
        description: "Neutral profile file names"
      
      # Fusion reactions
      sigmamod:
        type: string
        default: "disabled"
        description: "Fusion reaction rates calculation"
        options: ["disabled", "enabled"]
      
      isigmas:
        type: integer_array
        dimensions: 6
        default: [0, 0, 0, 0, 0, 0]
        description: "Reaction type flags"
#        options:
#          1: "d+t => alpha+n"
#          2: "d+he3 => alpha+p"
#          3: "d+d => t+p"
#          4: "d+d => he3+n"
#          5: "Hydrogenic impact ionization"
#          6: "Charge exchange"
      
      mmsv:
        type: integer
        #default: "mx"
        description: "Legendre expansion order for reaction cross-section (default: \"mx\")"
      
      isigsgv1:
        type: integer
        default: 0
        description: "Test distribution vs Maxwellian comparison"
      
      isigtst:
        type: integer
        default: 0
        description: "Test mode for constant sigma*v"
      
      sigvi:
        type: float
        default: 0.0
        description: "Constant sigma*v for ionization (cgs)"
      
      sigvcx:
        type: float
        default: 0.0
        description: "Constant sigma*v for charge exchange (cgs)"
      
      # Bootstrap current
      bootcalc:
        type: string
        default: "disabled"
        description: "Bootstrap current calculation method"
        options: ["disabled", "method1", "method2"]
      
      bootupdt:
        type: string
        default: "disabled"
        description: "Update f_o in bootstrap calculations"
        options: ["disabled", "enabled"]
      
      bootsign:
        type: float
        default: 1.0
        description: "Multiplier for bootstrap current"
      
      nonboot:
        type: integer
        default: 1
        description: "Time step for bootstrap calculation start"
        
      bootst:
        type: string
        default: "disabled"
        description: "Compute bootstrap contribution to current"
        options: ["disabled", "enabled"]
      
      jhirsh:
        type: integer
        default: 0
        description: "Bootstrap current model"
        options:
          0: "Hinton and Haseltine"
          88: "Hirshman banana model"
          99: "Sauter, Angioni, and Lin-Liu"
      
      kpress:
        type: string_array
        dimensions: "ntotal"
        default: "enabled"
        description: "Include species in total plasma pressure"
        #options: ["disabled", "enabled"]
      
      # Partner codes
      partner:
        type: string
        default: "disabled"
        description: "Interaction with other codes"
        options: ["disabled", "selene", "bramb", "lsc"]
      
      # CQLP-specific (parallel transport)
      symtrap:
        type: string
        default: "enabled"
        description: "Trap region symmetry"
        options: ["disabled", "enabled"]
        dependencies:
          cqlpmod: "must be 'disabled' for cqlpmod='enabled'"
      
      denpar:
        type: float_array
        dimensions: ["ntotal", "lsmax"]
        description: "Density along s for CQLP"
        units: "cm⁻³"
      
      temppar:
        type: float_array
        dimensions: ["ntotal", "lsmax"]
        description: "Temperature along s for CQLP"
        units: "keV"
      
      epsthet:
        type: float
        default: 0.1
        description: "Theta mesh construction parameter"
        units: "radians"
      
      ngauss:
        type: integer
        default: 0
        description: "Gauss integration points for theta integrals"
      
      nlagran:
        type: integer
        default: 0
        description: "Lagrange interpolation points"
      
      oldiag:
        type: string
        default: "enabled"
        description: "Old way of computing moments"
        options: ["disabled", "enabled"]
      
      nummods:
        type: integer
        default: 1
        description: "Numerical scheme for spatial time-step"
      
      lmidvel:
        type: integer
        default: 0
        description: "Velocity source term location"
      
      laddbnd:
        type: integer
        default: 1
        description: "Extra boundary conditions for periodic s"
      
      sbdry:
        type: string
        default: "bounded"
        description: "s-boundary conditions"
        options: ["bounded", "zeroslop", "periodic"]
      
      eseswtch:
        type: string
        default: "disabled"
        description: "Nonlocal electrostatic field calculation"
        options: ["disabled", "enabled"]
      
      elpar0:
        type: float
        default: 0.0
        description: "Coefficient of E_parallel (electrostatic)"
      
      nkconro:
        type: integer_array
        description: "Species contributing to charge density in Poisson eqn"
      
      scheck:
        type: string
        default: "enabled"
        description: "Check wp module"
        options: ["disabled", "enabled"]
      
      # Mesh type
      meshy:
        type: string
        default: "free"
        description: "Theta mesh type for radial transport"
        options: ["free", "fixed_y", "fixed_mu"]
      
      simpbfac:
        type: float
        default: 1.0
        description: "Factor for simplban loss radius"
      
      # Impurity deposition method
      #imp_depos_method:
      #  type: string
      #  default: "disabled"
      #  description: "Impurity deposition method"
      #  options: ["disabled", "enabled"]
      
      #eleccomp:
      #  type: string
      #  default: "enabled"
      #  description: "Electron current degradation factor for NBI"
      #  options: ["disabled", "enabled"]
        
      kfrsou:
        type: integer_array
        dimensions: 16
        default: 0
        description: "General species index for each beam"

  sousetup:
    description: "Analytic and knock-on source parameters"
    variables:
      nso:
        type: integer
        default: 0
        description: "Maximum number of sources per species"
        constraints:
          max: "nsoa"
      
      nsou:
        type: integer
        default: 1
        description: "Cycles between source recomputation"
      
      nonso:
        type: integer_array
        dimensions: ["ngena", "nsoa"]
        #default: 100000
        description: "On cycle for each source"
      
      noffso:
        type: integer_array
        dimensions: ["ngena", "nsoa"]
        #default: 100000
        description: "Off cycle for each source"
      
      # For cql3d runs (lrzmax ≥ 4)
      
      szm1:
        type: float_array
        dimensions: ["ngena", "nsoa", "lrzmax"]
        #default: 0.0
        description: "(z/zmax)-peak of local source"
      
      szm2:
        type: float_array
        dimensions: ["ngena", "nsoa", "lrzmax"]
        #default: 0.78
        description: "(z/zmax) width of local source"
      
      szm1z:
        type: float_array
        dimensions: ["ngena", "nsoa", "lrzmax"]
        #default: 0.0
        description: "(z/zmax)-peak of local source"
      
      szm2z:
        type: float_array
        dimensions: ["ngena", "nsoa", "lrzmax"]
        #default: 0.78
        description: "(z/zmax) width of local source"
      
      soucoord:
        type: string
        default: "disabled"
        description: "Coordinate system for source input"
        options: ["disabled","cart", "polar"]
      
      sem1:
        type: float_array
        dimensions: ["ngena", "nsoa", "lrzmax"]
        description: "Energy peak of source (keV)"
        units: "keV"
      
      sem2:
        type: float_array
        dimensions: ["ngena", "nsoa", "lrzmax"]
        description: "Energy dispersion of source (keV)"
        units: "keV"      
      
      # For soucoord="polar"
      sem1z:
        type: float_array
        dimensions: ["ngena", "nsoa", "lrzmax"]
        description: "Energy peak of source (keV)"
        units: "keV"
      
      sem2z:
        type: float_array
        dimensions: ["ngena", "nsoa", "lrzmax"]
        description: "Energy dispersion of source (keV)"
        units: "keV"

      sthm1:
        type: float_array
        dimensions: ["ngena", "nsoa", "lrzmax"]
        description: "Pitch angle peak (degrees)"
        units: "degrees"
      
      sthm1z:
        type: float_array
        dimensions: ["ngena", "nsoa", "lrzmax"]
        description: "Pitch angle peak (degrees)"
        units: "degrees"
      
      scm2:
        type: float_array
        dimensions: ["ngena", "nsoa", "lrzmax"]
        description: "cos(pitch angle) dispersion"

      scm2z:
        type: float_array
        dimensions: ["ngena", "nsoa", "lrzmax"]
        description: "cos(pitch angle) dispersion"
 
      sellm1:
        type: float_array
        dimensions: ["ngena", "nsoa", "lrzmax"]
        #default: 0.0
        description: "Parallel energy peak (keV)"
        units: "keV"
      
      seppm1:
        type: float_array
        dimensions: ["ngena", "nsoa", "lrzmax"]
        #default: 0.0
        description: "Perpendicular energy peak (keV)"
        units: "keV"
      
      sellm2:
        type: float_array
        dimensions: ["ngena", "nsoa", "lrzmax"]
        #default: 1.0
        description: "Parallel energy dispersion (keV)"
        units: "keV"
      
      seppm2:
        type: float_array
        dimensions: ["ngena", "nsoa", "lrzmax"]
        #default: 1.0
        description: "Perpendicular energy dispersion (keV)"
        units: "keV" 
      
      # For soucoord="cart"
      sellm1z:
        type: float_array
        dimensions: ["ngena", "nsoa", "lrzmax"]
        #default: 0.0
        description: "Parallel energy peak (keV)"
        units: "keV"
      
      seppm1z:
        type: float_array
        dimensions: ["ngena", "nsoa", "lrzmax"]
        #default: 0.0
        description: "Perpendicular energy peak (keV)"
        units: "keV"
      
      sellm2z:
        type: float_array
        dimensions: ["ngena", "nsoa", "lrzmax"]
        #default: 1.0
        description: "Parallel energy dispersion (keV)"
        units: "keV"
      
      seppm2z:
        type: float_array
        dimensions: ["ngena", "nsoa", "lrzmax"]
        #default: 1.0
        description: "Perpendicular energy dispersion (keV)"
        units: "keV"
        
      asor:
        type: float_array
        dimensions: ["ngena", "nsoa", "lrzmax"]
        #default: 0.0
        description: "Source current (particles/cm³/sec)"
        units: "cm⁻³ s⁻¹"
      
      asorz:
        type: float_array
        dimensions: ["ngena", "nsoa", "lrzmax"]
        #default: 0.0
        description: "Source current (particles/cm³/sec)"
        units: "cm⁻³ s⁻¹"
      
      pltso:
        type: string
        default: "first"
        description: "Source plotting control"
        options: ["disabled", "enabled", "first", "color", "first_cl"]
      
      # Knock-on source specific
      knockon:
        type: string
        default: "disabled"
        description: "Knock-on electron source"
        options: ["disabled", "enabled", "fpld_dsk", "fpld_ds1"]
      
      komodel:
        type: string
        default: "mr"
        description: "Knock-on model"
        options: ["mr"]
      
      nonko:
        type: integer
        default: 0
        description: "On cycle for knock-on source"
      
      noffko:
        type: integer
        default: 0
        description: "Off cycle for knock-on source"
      
      isoucof:
        type: integer
        default: 0
        description: "Lower cutoff mode for knock-on source"
      
      soffvte:
        type: float
        default: 3.0
        description: "Velocity cutoff factor for knock-on source"
      
      faccof:
        type: float
        default: 1.0
        description: "Factor times ucrit for cutoff"
      
      soffpr:
        type: float
        default: 0.0
        description: "Factor for parallel momentum cutoff"
      
      flemodel:
        type: string
        default: "disabled"
        description: "Parallel distribution model for knock-on"
        options: ["disabled", "pol", "fsa"]
      
      jfl:
        type: integer
        #default: "jx"
        description: "Grid points in parallel distribution (default: \"jx\")"
      
      xlfac:
        type: float
        default: 1.0
        description: "Parallel velocity mesh spacing factor"
      
      xlpctlwr:
        type: float
        description: "Fraction of mesh points in low parallel velocity"
      
      xlpctmdl:
        type: float
        description: "Fraction in middle parallel velocity"
      
      xllwr:
        type: float
        description: "Upper bound of low parallel velocity region"
      
      xlmdl:
        type: float
        description: "Upper bound of middle parallel velocity region"

  rfsetup:
    description: "RF heating and current drive parameters"
    variables:
      # VLH module
      vlhmod:
        type: string
        default: "disabled"
        description: "Simple phenomenological RF model"
        options: ["disabled", "enabled"]
      
      nonrf:
        type: integer_array
        dimensions: "ngen"
        default: 0
        description: "Cycle for RF excitation start"
      
      noffrf:
        type: integer_array
        dimensions: "ngen"
        default: 0
        description: "Cycle for RF excitation end"
      
      nrf:
        type: integer
        default: 0
        description: "Number of RF wave types"
      
      vlhmodes:
        type: integer
        default: 1
        description: "Number of resonance regions for VLH"
        constraints:
          max: "nmodsa"
      
      vparmin:
        type: float_array
        dimensions: "nmodsa"
        default: 0.0
        description: "Minimum parallel velocity for resonance (c)"
        units: "c"
      
      vparmax:
        type: float_array
        dimensions: "nmodsa"
        default: 0.0
        description: "Maximum parallel velocity for resonance (c)"
        units: "c"
      
      vprpmin:
        type: float_array
        dimensions: "nmodsa"
        default: 0.0
        description: "Minimum perpendicular velocity (c)"
        units: "c"
      
      vprpmax:
        type: float_array
        dimensions: "nmodsa"
        default: 1.0e100
        description: "Maximum perpendicular velocity (c)"
        units: "c"
      
      vlhpolmn:
        type: float_array
        dimensions: "nmodsa"
        default: 0.0
        description: "Minimum poloidal angle (degrees)"
        units: "degrees"
      
      vlhpolmx:
        type: float_array
        dimensions: "nmodsa"
        default: 180.0
        description: "Maximum poloidal angle (degrees)"
        units: "degrees"
      
      vdalp:
        type: float
        default: 0.03
        description: "Width of transition region"
      
      vprprop:
        type: string
        default: "disabled"
        description: "k-parallel scaling with R"
        options: ["disabled", "enabled"]
      
      dlndau:
        type: float_array
        dimensions: "nmodsa"
        default: 1.0
        description: "Magnitude of RF diffusion coefficient"
      
      vlhprprp:
        type: string_array
        dimensions: "nmodsa"
        default: "parallel"
        description: "Diffusion direction"
        #options: ["parallel", "perp"]
      
      vlh_karney:
        type: float
        default: 0.0
        description: "Karney-Fisch type cutoff factor"
      
      vlhplse:
        type: string
        default: "disabled"
        description: "VLH pulse control"
        options: ["disabled", "enabled", "tauee"]
      
      vlhpon:
        type: float
        default: 0.0
        description: "VLH on time during pulse"
        units: "seconds or tauee"
      
      vlhpoff:
        type: float
        default: 0.0
        description: "VLH off time during pulse"
        units: "seconds or tauee"
      
      # VLF module
      vlfmod:
        type: string
        default: "disabled"
        description: "Multi-harmonic cyclotron RF model"
        options: ["disabled", "enabled"]
      
      vlfmodes:
        type: integer
        default: 1
        description: "Number of wave types for VLF"
      
      vlfbes:
        type: string
        default: "enabled"
        description: "Use full Bessel functions"
        options: ["disabled", "enabled"]
      
      vlfnpvar:
        type: string
        default: "1/R"
        description: "Parallel refractive index variation"
        options: ["1/R", "constant"]
      
      vlfharms:
        type: integer_array
        dimensions: "vlfmodes"
        #default: 1
        description: "Number of harmonics for each wave type (default: 1)"
      
      vlfdnorm:
        type: float_array
        dimensions: "vlfmodes"
        description: "Strength of QL diffusion coefficient"
      
      vlffreq:
        type: float_array
        dimensions: "vlfmodes"
        description: "Excitation frequency (Hz)"
        units: "Hz"
      
      vlfharm1:
        type: integer_array
        dimensions: "vlfmodes"
        #default: 0
        description: "First harmonic number (default: 0)"
      
      vlfnp:
        type: float_array
        dimensions: "vlfmodes"
        #default: 0.5
        description: "Central parallel refractive index (default: 0.5)"
      
      vlfdnp:
        type: float_array
        dimensions: "vlfmodes"
        #default: 0.2
        description: "Full width of parallel refractive index (default: 0.2)"
      
      vlfddnp:
        type: float_array
        dimensions: "vlfmodes"
        #default: 0.1
        description: "Taper region for parallel refractive index (default: 0.1)"
      
      vlfnperp:
        type: float_array
        dimensions: "vlfmodes"
        description: "Perpendicular refractive index"
      
      vlfeplus:
        type: complex_array
        dimensions: "vlfmodes"
        #default: [0.0, 0.0]
        description: "E_plus polarization (default: [0.0, 0.0])"
      
      vlfemin:
        type: complex_array
        dimensions: "vlfmodes"
        #default: [0.0, 0.0]
        description: "E_minus polarization (default: [0.0, 0.0])"
      
      vlfpol:
        type: float_array
        dimensions: "vlfmodes"
        #default: 0.0
        description: "Center of poloidal region (degrees) (default: 0.0)"
        units: "degrees"
      
      vlfdpol:
        type: float_array
        dimensions: "vlfmodes"
        #default: 360.0
        description: "Width of poloidal region (degrees) (default: 360.0)"
        units: "degrees"
      
      vlfddpol:
        type: float_array
        dimensions: "vlfmodes"
        #default: 20.0
        description: "Taper of poloidal region (degrees) (default: 20.0)"
        units: "degrees"
      
      vlfparmn:
        type: float_array
        dimensions: "vlfmodes"
        #default: -1.0e100
        description: "Minimum parallel momentum (vnorm) (default: -1.0e100)"
      
      vlfparmx:
        type: float_array
        dimensions: "vlfmodes"
        #default: 1.0e100
        description: "Maximum parallel momentum (vnorm) (default: 1.0e100)"
      
      vlfpermn:
        type: float_array
        dimensions: "vlfmodes"
        #default: 0.0
        description: "Minimum perpendicular momentum (vnorm) (default: 0.0)"
      
      vlfpermx:
        type: float_array
        dimensions: "vlfmodes"
        #default: 1.0e100
        description: "Maximum perpendicular momentum (vnorm) (default: 1.0e100)"
      
      # RDC module (external diffusion coefficients)
      rdcmod:
        type: string
        default: "disabled"
        description: "Read external diffusion coefficients"
        options: ["disabled", "format1", "format2", "aorsa"]
      
      nrdc:
        type: integer
        default: 1
        description: "Number of diffusion coefficient files"
        constraints:
          max: "nrdca"
      
      rdcfile:
        type: string_array
        dimensions: "nrdc"
        default: "du0u0_input"
        description: "Diffusion coefficient file paths"
      
      nrdcspecies:
        type: integer_array
        dimensions: "nrdc"
        #default: 1.0
        description: "General species index for each file"
      
      rdcscale:
        type: float_array
        dimensions: "nrdc"
        default: 1.0
        description: "Scaling factors for diffusion coefficients"
      
      rdc_upar_sign:
        type: float
        default: 1.0
        description: "Sign convention for u_parallel"
      
      rdc_clipping:
        type: string
        default: "disabled"
        description: "Clipping of diffusion coefficient spikes"
        options: ["disabled", "enabled"]
      
      rdc_netcdf:
        type: string
        default: "all"
        description: "NetCDF output for RDC coefficients"
        options: ["disabled", "enabled", "one", "all"]
      
      pwrscale:
        type: float_array
        dimensions: "mrf"
        default: 1.0
        description: "Scale factor for RF power"
      
      # URF module
      urfmod:
        type: string
        default: "disabled"
        description: "LH/EC/FW excitation with ray tracing"
        options: ["disabled", "enabled"]
        
      rffile:
        type: string_array
        dimensions: "mrf"
        default: ["rayech.nc", "rayfw.nc", "raylh.nc"]
        description: "Ray data file names"
      
      ech:
        type: string
        default: "disabled"
        description: "Electron cyclotron heating"
        options: ["disabled", "enabled"]
      
      fw:
        type: string
        default: "disabled"
        description: "Fast wave heating"
        options: ["disabled", "enabled"]
      
      lh:
        type: string
        default: "disabled"
        description: "Lower hybrid heating"
        options: ["disabled", "enabled"]
      
      rftype:
        type: string_array
        dimensions: "mrf"
        default: "notset"
        description: "Wave type specification"
        #options: ["notset", "ec", "fw", "lh"]
      
      rfread:
        type: string
        default: "text"
        description: "Ray data input format"
        options: ["text", "netcdf"]
      
      nharms:
        type: integer_array
        dimensions: "mrf"
        default: 0
        description: "Number of harmonics for each wave type"
      
      nharm1:
        type: integer_array
        dimensions: "mrf"
        default: 0
        description: "First harmonic for each wave type"
      
      nrfspecies:
        type: integer_array
        dimensions: "mrf"
        default: 1
        description: "General species for each wave type"
      
      call_lh:
        type: string
        default: "disabled"
        description: "Call Brambilla ray tracing"
        options: ["disabled", "enabled"]
      
      call_ech:
        type: string
        default: "disabled"
        description: "Call Toray ray tracing"
        options: ["disabled", "enabled"]
      
      call_fw:
        type: string
        default: "disabled"
        description: "Call Brambilla for fast waves"
        options: ["disabled", "enabled"]
      
      pwrscale1:
        type: float_array
        dimensions: "nbctimea"
        default: 1.0
        description: "Time-dependent power scaling"
      
      urftime:
        type: float_array
        dimensions: "nbctimea"
        default: 0.0
        description: "Times for power scaling"
        units: "seconds"
      
      nurftime:
        type: integer
        default: 0
        description: "Number of times for power scaling"
      
      urfmult:
        type: float
        default: 1.0
        description: "Multiplier for QL diffusion coefficients"
      
      wdscale:
        type: float_array
        dimensions: "nmodsa"
        default: 1.0
        description: "Scale factor for n_parallel width"
      
      nbssltbl:
        type: integer
        default: 0
        description: "Initial size of Bessel table"
      
      nondamp:
        type: integer
        default: 0
        description: "Damping turn-on step"
      
      # URF control sequence
      nrfstep1:
        type: integer
        default: 100
        description: "Initial spatial steps along ray"
      
      nrfstep2:
        type: integer
        default: 50
        description: "Additional steps for ray extension"
      
      nrfpwr:
        type: integer
        default: 3
        description: "Number of fractional power steps"
      
      nrfitr1:
        type: integer
        default: 1
        description: "Iterations with full power"
      
      nrfitr2:
        type: integer
        default: 1
        description: "Iterations after ray extension"
      
      nrfitr3:
        type: integer
        default: 2
        description: "Number of ray extension cycles"
      
      urfncoef:
        type: float
        default: 1.0
        description: "Frequency factor for URF coefficient updates"
      
      scaleurf:
        type: string
        default: "enabled"
        description: "Rescale URFB to prevent overdamping"
        options: ["disabled", "enabled"]
      
      iurfcoll:
        type: string_array
        dimensions: "mrf"
        default: "disabled"
        description: "Include collisional absorption"
        #options: ["disabled", "enabled", "damp_out"]
      
      iurfl:
        type: string_array
        dimensions: "mrf"
        default: "disabled"
        description: "Include linear absorption from ray data"
        #options: ["disabled", "enabled"]
      
      ieqbrurf:
        type: integer
        default: 0
        description: "Equilibrium source for xbr"
        options:
          0: "Brambilla analytic"
          3: "Standard EQDSK"
          4: "Extended EQDSK"
      
      urfdmp:
        type: string
        default: "secondd"
        description: "Damping calculation method"
        options: ["secondd", "firstd"]
      
      urfrstrt:
        type: string
        default: "disabled"
        description: "Do not update delpwr along ray"
        options: ["disabled", "enabled"]
      
      urfwrray:
        type: string
        default: "disabled"
        description: "Rewrite ray data at end of run"
        options: ["disabled", "enabled", "krf_op", "enbl+krf"]

  trsetup:
    description: "Radial transport parameters"
    variables:
      transp:
        type: string
        default: "disabled"
        description: "Radial transport module"
        options: ["disabled", "enabled"]
      
      nontran:
        type: integer
        default: 0
        description: "Time step for transport turn-on"
      
      nofftran:
        type: integer
        default: 10000
        description: "Time step for transport turn-off"
      
      adimeth:
        type: string
        default: "disabled"
        description: "Alternating direction implicit method"
        options: ["disabled", "enabled"]
      
      nonadi:
        type: integer
        default: 5
        description: "Time step for radial transport start"
      
      difus_type:
        type: string_array
        dimensions: "ngen"
        default: "specify"
        description: "Radial diffusion coefficient type"
        options: ["specify", "neo_smpl", "neo_plus", "neo_trap", "neo_trpp"]
      
      difus_io:
        type: string_array
        dimensions: "ngen"
        default: "disabled"
        description: "Read/write diffusion coefficients from/to file"
        #options: ["disabled", "drrout", "drrdrout", "drrin", "drrdrin"]
      
      difus_io_file:
        type: string
        #default: "drrin.nc"
        description: "Diffusion coefficient file name"
      
      difus_io_drrscale:
        type: float_array
        dimensions: ["ndifus_io_t", "ngen"]
        default: 1.0
        description: "Time-dependent scale factors for drr"
      
      difus_io_drscale:
        type: float_array
        dimensions: ["ndifus_io_t", "ngen"]
        default: 1.0
        description: "Time-dependent scale factors for dr"
      
      difus_io_t:
        type: float_array
        dimensions: "ndifus_io_t"
        default: 0.0
        description: "Times for diffusion scaling"
        units: "seconds"
      
      ndifus_io_t:
        type: integer
        default: 0
        description: "Number of times for diffusion scaling"
      
      difusr:
        type: float
        default: 1.0e4
        description: "Central radial diffusion coefficient"
        units: "cm²/sec"
      
      difus_rshape:
        type: float_array
        dimensions: 8
        default: [1.0, 3.0, 3.0, 1.0, -1.0, 0.0, 0.0, 0.0]
        description: "Radial shape parameters for diffusion"
      
      difus_vshape:
        type: float_array
        dimensions: 4
        default: [0.0, 0.0, 0.0, 0.0]
        description: "Velocity shape parameters for diffusion"
      
      difin:
        type: float_array
        dimensions: "njene"
        default: 0.0
        description: "Radial diffusion profile via splines"
      
      pinch:
        type: string
        default: "disabled"
        description: "Radial pinch velocity model"
        options: ["disabled", "simple", "case1", "case2", "case3",
                 "simplen", "case1n", "case2n", "case3n"]
      
      relaxden:
        type: float
        default: 1.0
        description: "Relaxation coefficient for pinch term"
      
      advectr:
        type: float
        default: 1.0
        description: "Multiplier of radial pinch velocity"
      
      relaxtsp:
        type: string
        default: "disabled"
        description: "Time-step averaging for transport"
        options: ["disabled", "enabled"]
      
      nonelpr:
        type: integer
        default: 0
        description: "Start step for parallel electric field"
      
      noffelpr:
        type: integer
        default: 0
        description: "Stop step for parallel electric field"
      
      pltdrr:
        type: string
        default: "first"
        description: "Plot Drr diffusion coefficients"
        options: ["disabled", "enabled", "first", "color", "first_cl"]

  frsetup:
    description: "Neutral beam injection (FREYA) parameters"
    variables:
      frmod:
        type: string
        default: "disabled"
        description: "Enable FREYA NB deposition"
        options: ["disabled", "enabled"]
      
      nbeams:
        type: integer
        default: 0
        description: "Number of beam lines"
        constraints:
          max: 16
      
      frplt:
        type: string
        default: "enabled"
        description: "Plot birth points"
        options: ["disabled", "enabled", "plotwrit", "write_op"]
      
      nfrplt:
        type: integer
        default: 1000
        description: "Number of birth points for plotting"
      
      smooth:
        type: float
        default: 0.05
        description: "Source smoothing parameter"
      
      multiply:
        type: string
        default: "disabled"
        description: "Multiply birth points"
        options: ["disabled", "enabled"]
      
      multiplyn:
        type: integer
        default: 0
        description: "Number of particles per birth point"
      
      bmsprd:
        type: float
        default: 0.1
        description: "Beamlet standard deviation"
      
      nimp:
        type: integer
        default: 0
        description: "Number of impurity species"
        constraints:
          max: 1
      
      nprim:
        type: integer
        default: 0
        description: "Number of primary species"
      
      anglev:
        type: float_array
        dimensions: 16
        description: "Vertical angle (degrees)"
        units: "degrees"
      
      angleh:
        type: float_array
        dimensions: 16
        description: "Horizontal angle (degrees)"
        units: "degrees"
      
      nsourc:
        type: integer
        default: 1
        description: "Number of sources per beamline"
      
      bvofset:
        type: float_array
        dimensions: 16
        description: "Vertical offset (cm)"
        units: "cm"
      
      bhofset:
        type: float_array
        dimensions: 16
        description: "Horizontal offset (cm)"
        units: "cm"
      
      bleni:
        type: float_array
        dimensions: 16
        description: "Source centerline length (cm)"
        units: "cm"
      
      sfrac1:
        type: float_array
        dimensions: 16
        description: "Fraction from upper source"
      
      bcur:
        type: float_array
        dimensions: 16
        description: "Total ion beam current (A)"
        units: "A"
      
      bptor:
        type: float_array
        dimensions: 16
        description: "Total power into torus (W)"
        units: "W"
      
      bshape:
        type: string_array
        dimensions: 16
        default: "circ"
        description: "Beam shape"
        #options: ["circ", "rect"]
      
      bheigh:
        type: float_array
        dimensions: 16
        description: "Source height (cm)"
        units: "cm"
      
      bwidth:
        type: float_array
        dimensions: 16
        description: "Source width/diameter (cm)"
        units: "cm"
      
      bhfoc:
        type: float_array
        dimensions: 16
        description: "Horizontal focal length (cm)"
        units: "cm"
      
      bvfoc:
        type: float_array
        dimensions: 16
        description: "Vertical focal length (cm)"
        units: "cm"
      
      bhdiv:
        type: float_array
        dimensions: 16
        description: "Horizontal divergence (degrees)"
        units: "degrees"
      
      bvdiv:
        type: float_array
        dimensions: 16
        description: "Vertical divergence (degrees)"
        units: "degrees"
      
      ebkev:
        type: float_array
        dimensions: 16
        description: "Maximum particle energy (keV)"
        units: "keV"
      
      fbcur:
        type: float_array
        dimensions: [3, 16]
        description: "Fraction of current at each energy"
      
      npart:
        type: integer
        default: 100000
        description: "Number of particles followed"
      
      npskip:
        type: integer
        default: 1
        description: "Ratio of followed to source particles"
      
      naptr:
        type: integer
        default: 0
        description: "Number of apertures"
        constraints:
          max: 10
      
      ashape:
        type: string_array
        dimensions: [10, 16]
        description: "Aperture shape"
        #options: ["s-circ", "b-circ", "s-rect", "b-rect", "s-vert",
        #         "b-vert", "s-horiz", "b-horiz", "b-d3d"]
      
      aheigh:
        type: float_array
        dimensions: [10, 16]
        description: "Aperture height (cm)"
        units: "cm"
      
      awidth:
        type: float_array
        dimensions: [10, 16]
        description: "Aperture width (cm)"
        units: "cm"
      
      alen:
        type: float_array
        dimensions: [10, 16]
        description: "Aperture length (cm)"
        units: "cm"
      
      blenp:
        type: float_array
        dimensions: 16
        description: "Distance to pivot point (cm)"
        units: "cm"
      
      rpivot:
        type: float_array
        dimensions: 16
        description: "Radial pivot position (cm)"
        units: "cm"
      
      zpivot:
        type: float_array
        dimensions: 16
        description: "Axial pivot position (cm)"
        units: "cm"
        
      ibcur:
        type: integer
        default: 1
        description: "Cross section model"
        
      iborb:
        type: integer
        default: 0
        description: "Cross section model"        
      
      iexcit:
        type: integer
        default: 0
        description: "Cross section model"
        options:
          -1: "Stearn's average"
          0: "Freeman-Jones"
          1: "hexnb without excited states"
          2: "hexnb with excited states"
          5: "JET ADAS package"
      
      fe_tk:
        type: float
        default: 0.0
        description: "Energy limit factor for ADAS"
      
      ne_tk:
        type: integer
        default: 0
        description: "Number of energy bins for ADAS"
      
      ds_tk:
        type: float
        default: 0.0
        description: "Trajectory increment for ADAS (cm)"
        units: "cm"
      
      inubpat:
        type: integer
        default: 0
        description: "2D beam deposition switch"
      
      ranseed:
        type: integer
        default: 823543
        description: "Seed for random number generator"
      
      
      #kfrsou:
      #  type: integer_array
      #  dimensions: 16
      #  default: 0
      #  description: "General species index for each beam"
      
      beamplse:
        type: string
        default: "disabled"
        description: "NBI power pulse control"
        options: ["disabled", "enabled", "tauee"]
      
      beampon:
        type: float
        default: 0.0
        description: "NBI on time"
        units: "seconds or tauee"
      
      beampoff:
        type: float
        default: 0.0
        description: "NBI off time"
        units: "seconds or tauee"
      
      read_birth_pts:
        type: string
        default: "disabled"
        description: "Read birth points from files"
        options: ["disabled", "enabled"]
      
      nbirth_pts_files:
        type: integer
        default: 1
        description: "Number of birth point files"
      
      birth_pts_files:
        type: string_array
        description: "Birth point file names"
      
      nbirth_pts:
        type: integer
        default: 250000
        description: "Number of birth points in files"
      
      fr_gyro:
        type: string
        default: "disabled"
        description: "Gyro-radius offset for NBI"
        options: ["disabled", "enabled"]

  eqsetup:
    description: "Magnetic geometry equilibrium parameters"
    variables:
      eqmod:
        type: string
        default: "disabled"
        description: "Enable general flux surface geometry"
        options: ["disabled", "enabled"]
      
      eqsym:
        type: string
        default: "average"
        description: "Equilibrium symmetrization method"
        options: ["none", "average", "avg_zmag", "top", "bottom"]
      
      eqsource:
        type: string
        default: "eqdsk"
        description: "Equilibrium data source"
        options: ["eqdsk", "topeol", "ellipse", "tsc", "miller"]
      
      eqdskin:
        type: string
        default: "eqdsk"
        description: "Input EQDSK file name"
      
      bsign:
        type: float
        default: 1.0
        description: "Multiplier for toroidal B-field sign"
      
      eqdskalt:
        type: string
        default: "disabled"
        description: "Update EQDSK with computed current"
        options: ["disabled", "enabled"]
      
      povdelp:
        type: float
        default: 0.2
        description: "Flux surface selection parameter"
        constraints:
          min: 0.0
          max: 1.0
      
      ellptcty:
        type: float
        default: 0.0
        description: "Ellipticity for ellipse model"
      
      rmag:
        type: float
        default: 100.0
        description: "R position of magnetic axis (cm)"
        units: "cm"
      
      eqmodel:
        type: string
        default: "power"
        description: "Poloidal flux function model"
        options: ["disabled", "power"]
      
      eqpower:
        type: float
        default: 1.0
        description: "Power for flux function"
      
      fpsimodl:
        type: string
        default: "constant"
        description: "f=R*Btor model"
        options: ["constant"]
      
      rbox:
        type: float
        default: 100.0
        description: "R length of computational domain (cm)"
        units: "cm"
      
      zbox:
        type: float
        default: 100.0
        description: "Z height of computational domain (cm)"
        units: "cm"
      
      rboxdst:
        type: float
        default: 50.0
        description: "Inside edge R of box (cm)"
        units: "cm"
      
      atol:
        type: float
        default: 1.0e-8
        description: "Absolute accuracy for LSODE"
      
      rtol:
        type: float
        default: 1.0e-8
        description: "Relative accuracy for LSODE"
      
      methflag:
        type: integer
        default: 10
        description: "LSODE method flag"
        options:
          10: "Nonstiff Adams"
          21: "Stiff BDF with user Jacobian"
          22: "Stiff BDF with internal Jacobian"
      
      nconteqn:
        type: integer
        #default: 0
        description: "Number of flux surfaces for interpolation"
      
      nconteq:
        type: string
        default: "disabled"
        description: "Flux surface array generation method"
        options: ["disabled", "psigrid"]
      
      lfield:
        type: integer
        #default: 250
        description: "Poloidal points from ODE integrator"
      
      # Miller equilibrium parameters
      eq_miller_rmag:
        type: float
        description: "Magnetic axis R coordinate (cm)"
        units: "cm"
      
      eq_miller_zmag:
        type: float
        description: "Magnetic axis Z coordinate (cm)"
        units: "cm"
      
      eq_miller_btor:
        type: float
        description: "Toroidal field at geometric center (G)"
        units: "Gauss"
      
      eq_miller_radmin:
        type: float
        description: "Plasma minor radius (cm)"
        units: "cm"
      
      eq_miller_cursign:
        type: float
        description: "Sign of plasma current (default = 1)"
      
      eq_miller_psimag:
        type: float
        description: "Poloidal flux at magnetic axis (cgs)"
      
      eq_miller_psilim:
        type: float
        description: "Poloidal flux at LCFS (cgs)"
      
      eq_miller_psi_n:
        type: float
        description: "n power for PSI(r) profile"
      
      eq_miller_psi_m:
        type: float
        description: "m power for PSI(r) profile"
      
      eq_miller_deltaedge:
        type: float
        description: "Triangularity at LCFS"
      
      eq_miller_kappa:
        type: float
        description: "Vertical elongation"
      
      eq_miller_drr0:
        type: float
        description: "dR0/dr for Shafranov shift"

# Parameter relationships
relationships:
  - "ntotal = ngen + nmax"
  - "lrors = lrz (when lrzdiff = 'disabled')"
  - "mrf = number of enabled wave types (from rftype or ech/fw/lh)"
  - "mrfn = sum(nharms) for all wave types"
  - "negyrga = 3 (hard-coded parameter for energy bins)"

# Default dimension sizes (from param.h)
parameter_defaults:
  ngena: 5
  nmaxa: 20
  ntotala: 25
  lrorsa: 101
  lrzmaxa: 101
  njena: 256
  nplota: 50
  nsavea: 50
  nsoa: 10
  nmodsa: 155
  nrdca: 10
  nbctimea: 101
  npaproca: 5
  nva: 30
  nena: 30
  ntavga: 16
        
# Initial index dictionary
start_ind:
  setup0:
    _start_index:
      ibox: [1]
      ioutput: [1]
  setup:
    _start_index:
      bnumb: [1]
      eegy: [1, 1, 1, 1]
      elecfld: [0]
      enloss: [1]
      fmass: [1]
      irzplt: [1]
      kpress: [2]
      kspeci: [1, 1]
      lbdry: [1]
      lossmode: [1]
      pltflux1: [1]
      reden: [1, 0]
      tauloss: [1, 1]
      temp: [1, 0]
      torloss: [1]
  trsetup: {}
  sousetup:
    _start_index:
      asor: [1, 1, 1]
      noffso: [1, 1]
      nonso: [1, 1]
      scm2: [1, 1]
      sellm1: [1, 1]
      sellm2: [1, 1]
      sem1: [1, 1]
      sem2: [1, 1]
      seppm1: [1, 1]
      seppm2: [1, 1]
      sthm1: [1, 1]
      szm1: [1, 1]
      szm2: [1, 1]
  eqsetup: {}
  rfsetup:
    _start_index:
      nrfstep1: [1]
      noffrf: [1]
      nonrf: [1]
      pwrscale: [1]
  frsetup:
    _start_index:
      aheigh: [1, 1]
      alen: [1, 1]
      angleh: [1]
      anglev: [1]
      ashape: [1, 1]
      awidth: [1, 1]
      bcur: [1]
      bhdiv: [1]
      bheigh: [1]
      bhfoc: [1]
      bhofset: [1]
      bleni: [1]
      blenp: [1]
      bptor: [1]
      bshape: [1]
      bvdiv: [1]
      bvfoc: [1]
      bvofset: [1]
      bwidth: [1]
      ebkev: [1]
      fbcur: [1, 1]
      rpivot: [1]
      sfrac1: [1]
      zpivot: [1]
     
gorder:
    - setup0
    - setup
    - trsetup
    - sousetup
    - eqsetup
    - rfsetup
    - frsetup

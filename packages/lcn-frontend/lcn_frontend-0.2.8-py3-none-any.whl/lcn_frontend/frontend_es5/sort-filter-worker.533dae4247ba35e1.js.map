{"version":3,"file":"sort-filter-worker.533dae4247ba35e1.js","sources":["webpack://lcn-frontend/webpack/runtime/on_chunk_loaded","webpack://lcn-frontend/webpack/runtime/startup_chunk_dependencies","webpack://lcn-frontend/./homeassistant-frontend/src/common/string/is_ip_address.ts","webpack://lcn-frontend/./homeassistant-frontend/src/common/string/compare.ts","webpack://lcn-frontend/./homeassistant-frontend/src/common/string/strip-diacritics.ts","webpack://lcn-frontend/./homeassistant-frontend/src/components/data-table/sort-filter-worker.ts","webpack://lcn-frontend/webpack/runtime/define_property_getters","webpack://lcn-frontend/webpack/runtime/ensure_chunk","webpack://lcn-frontend/webpack/runtime/get javascript chunk filename","webpack://lcn-frontend/webpack/runtime/has_own_property","webpack://lcn-frontend/webpack/runtime/public_path","webpack://lcn-frontend/webpack/runtime/rspack_version","webpack://lcn-frontend/webpack/runtime/import_scripts_chunk_loading","webpack://lcn-frontend/webpack/runtime/rspack_unique_id"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif (chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor (var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--)\n\t\t\tdeferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\nvar fn = deferred[i][1];\nvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif (\n\t\t\t\t(priority & (1 === 0) || notFulfilled >= priority) &&\n\t\t\t\tObject.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })\n\t\t\t) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif (priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif (fulfilled) {\n\t\t\tdeferred.splice(i--, 1);\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};\n","var next = __webpack_require__.x\n__webpack_require__.x = function() {\n  return __webpack_require__.e(\"117\").then(next);\n}","const regexp =\n  /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;\n\nexport const isIPAddress = (input: string): boolean => regexp.test(input);\n","import memoizeOne from \"memoize-one\";\nimport { isIPAddress } from \"./is_ip_address\";\n\nconst collator = memoizeOne(\n  (language: string | undefined) =>\n    new Intl.Collator(language, { numeric: true })\n);\n\nconst caseInsensitiveCollator = memoizeOne(\n  (language: string | undefined) =>\n    new Intl.Collator(language, { sensitivity: \"accent\", numeric: true })\n);\n\nconst fallbackStringCompare = (a: string, b: string) => {\n  if (a < b) {\n    return -1;\n  }\n  if (a > b) {\n    return 1;\n  }\n\n  return 0;\n};\n\nexport const stringCompare = (\n  a: string,\n  b: string,\n  language: string | undefined = undefined\n) => {\n  // @ts-ignore\n  if (Intl?.Collator) {\n    return collator(language).compare(a, b);\n  }\n\n  return fallbackStringCompare(a, b);\n};\n\nexport const ipCompare = (a: string, b: string) => {\n  const aIsIpV4 = isIPAddress(a);\n  const bIsIpV4 = isIPAddress(b);\n\n  if (aIsIpV4 && bIsIpV4) {\n    return ipv4Compare(a, b);\n  }\n  if (!aIsIpV4 && !bIsIpV4) {\n    return ipV6Compare(a, b);\n  }\n  return aIsIpV4 ? -1 : 1;\n};\n\nexport const caseInsensitiveStringCompare = (\n  a: string,\n  b: string,\n  language: string | undefined = undefined\n) => {\n  // @ts-ignore\n  if (Intl?.Collator) {\n    return caseInsensitiveCollator(language).compare(a, b);\n  }\n\n  return fallbackStringCompare(a.toLowerCase(), b.toLowerCase());\n};\n\nexport const orderCompare = (order: string[]) => (a: string, b: string) => {\n  const idxA = order.indexOf(a);\n  const idxB = order.indexOf(b);\n\n  if (idxA === idxB) {\n    return 0;\n  }\n\n  if (idxA === -1) {\n    return 1;\n  }\n\n  if (idxB === -1) {\n    return -1;\n  }\n\n  return idxA - idxB;\n};\n\nfunction ipv4Compare(a: string, b: string) {\n  const num1 = Number(\n    a\n      .split(\".\")\n      .map((num) => num.padStart(3, \"0\"))\n      .join(\"\")\n  );\n  const num2 = Number(\n    b\n      .split(\".\")\n      .map((num) => num.padStart(3, \"0\"))\n      .join(\"\")\n  );\n  return num1 - num2;\n}\n\nfunction ipV6Compare(a: string, b: string) {\n  const ipv6a = normalizeIPv6(a)\n    .split(\":\")\n    .map((part) => part.padStart(4, \"0\"))\n    .join(\"\");\n  const ipv6b = normalizeIPv6(b)\n    .split(\":\")\n    .map((part) => part.padStart(4, \"0\"))\n    .join(\"\");\n\n  return ipv6a.localeCompare(ipv6b);\n}\n\nfunction normalizeIPv6(ip) {\n  const parts = ip.split(\"::\");\n  const head = parts[0].split(\":\");\n  const tail = parts[1] ? parts[1].split(\":\") : [];\n  const totalParts = 8;\n  const missing = totalParts - (head.length + tail.length);\n  const zeros = new Array(missing).fill(\"0\");\n  return [...head, ...zeros, ...tail].join(\":\");\n}\n","export const stripDiacritics = (str: string) =>\n  str.normalize(\"NFD\").replace(/[\\u0300-\\u036F]/g, \"\");\n","import { expose } from \"comlink\";\nimport { stringCompare, ipCompare } from \"../../common/string/compare\";\nimport { stripDiacritics } from \"../../common/string/strip-diacritics\";\nimport type {\n  ClonedDataTableColumnData,\n  DataTableRowData,\n  SortableColumnContainer,\n  SortingDirection,\n} from \"./ha-data-table\";\n\nconst filterData = (\n  data: DataTableRowData[],\n  columns: SortableColumnContainer,\n  filter: string\n) => {\n  filter = stripDiacritics(filter.toLowerCase());\n  return data.filter((row) =>\n    Object.entries(columns).some((columnEntry) => {\n      const [key, column] = columnEntry;\n      if (column.filterable) {\n        const value = String(\n          column.filterKey\n            ? row[column.valueColumn || key][column.filterKey]\n            : row[column.valueColumn || key]\n        );\n\n        if (stripDiacritics(value).toLowerCase().includes(filter)) {\n          return true;\n        }\n      }\n      return false;\n    })\n  );\n};\n\nconst sortData = (\n  data: DataTableRowData[],\n  column: ClonedDataTableColumnData,\n  direction: SortingDirection,\n  sortColumn: string,\n  language?: string\n) =>\n  data.sort((a, b) => {\n    let sort = 1;\n    if (direction === \"desc\") {\n      sort = -1;\n    }\n\n    let valA = column.filterKey\n      ? a[column.valueColumn || sortColumn][column.filterKey]\n      : a[column.valueColumn || sortColumn];\n\n    let valB = column.filterKey\n      ? b[column.valueColumn || sortColumn][column.filterKey]\n      : b[column.valueColumn || sortColumn];\n\n    if (column.type === \"numeric\") {\n      valA = isNaN(valA) ? undefined : Number(valA);\n      valB = isNaN(valB) ? undefined : Number(valB);\n    } else if (column.type === \"ip\") {\n      return sort * ipCompare(valA, valB);\n    } else if (typeof valA === \"string\" && typeof valB === \"string\") {\n      return sort * stringCompare(valA, valB, language);\n    }\n\n    // Ensure \"undefined\" and \"null\" are always sorted to the bottom\n    if (valA == null && valB != null) {\n      return 1;\n    }\n    if (valB == null && valA != null) {\n      return -1;\n    }\n\n    if (valA < valB) {\n      return sort * -1;\n    }\n    if (valA > valB) {\n      return sort * 1;\n    }\n    return 0;\n  });\n\nconst api = {\n  filterData,\n  sortData,\n};\n\nexport type Api = typeof api;\n\nexpose(api);\n","__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n        if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n            Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n        }\n    }\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(\n\t\tObject.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t\t__webpack_require__.f[key](chunkId, promises);\n\t\t\treturn promises;\n\t\t}, [])\n\t);\n};","// This function allow to reference chunks\n__webpack_require__.u = function(chunkId) {\n  // return url for filenames not based on template\n  \n  // return url for filenames based on template\n  return \"\" + chunkId + \".\" + \"9787836bb7f2387b\" + \".js\"\n}","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.p = \"/lcn_static/frontend_es5/\";","__webpack_require__.rv = function() { return \"1.5.5\"; }","var installedChunks = {\"346\": 1,};\n// importScripts chunk loading\nvar installChunk = function(data) {\n    var chunkIds = data[0];\nvar moreModules = data[1];\nvar runtime = data[2];\n    for (var moduleId in moreModules) {\n        if (__webpack_require__.o(moreModules, moduleId)) {\n            __webpack_require__.m[moduleId] = moreModules[moduleId];\n        }\n    }\n    if (runtime) runtime(__webpack_require__);\n    while (chunkIds.length) installedChunks[chunkIds.pop()] = 1;\n    parentChunkLoadingFunction(data);\n};\n\n__webpack_require__.f.i = function(chunkId, promises) {\n    \n          // \"1\" is the signal for \"already loaded\n          if (!installedChunks[chunkId]) {\n            if (true) {\n              importScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n            }\n          }\n          \n};\n\nvar chunkLoadingGlobal = self[\"webpackChunklcn_frontend\"] = self[\"webpackChunklcn_frontend\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;","__webpack_require__.ruid = \"bundler=rspack@1.5.5\";\n"],"names":["deferred","next","regexp","isIPAddress","input","test","collator","memoizeOne","language","Intl","Collator","numeric","fallbackStringCompare","sensitivity","a","b","ipCompare","aIsIpV4","bIsIpV4","num1","Number","split","map","num","padStart","join","num2","ipv4Compare","ipv6a","normalizeIPv6","part","ipv6b","localeCompare","ipV6Compare","ip","parts","head","tail","missing","length","zeros","Array","fill","stripDiacritics","str","normalize","replace","api","filterData","data","columns","filter","toLowerCase","row","Object","entries","some","columnEntry","key","column","filterable","value","String","filterKey","valueColumn","includes","sortData","direction","sortColumn","sort","valA","valB","type","isNaN","undefined","stringCompare","compare","expose","__webpack_require__","d","exports","definition","o","defineProperty","enumerable","get","f","e","chunkId","Promise","all","keys","reduce","promises","u","obj","prop","prototype","hasOwnProperty","call","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","every","splice","r","p","rv","x","then","installedChunks","importScripts","chunkLoadingGlobal","self","parentChunkLoadingFunction","push","bind","moreModules","runtime","moduleId","m","pop","ruid"],"mappings":"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"}
# 元数据 (Metadata) 模块

元数据模块提供元数据字段和文档元数据的管理功能。

## 方法列表

| 方法                         | 描述                |
| ---------------------------- | ------------------- |
| `create()`                   | 创建元数据字段      |
| `list()`                     | 获取元数据字段列表  |
| `update()`                   | 更新元数据字段      |
| `delete()`                   | 删除元数据字段      |
| `toggle_built_in()`          | 启用/禁用内置元数据 |
| `update_document_metadata()` | 更新文档元数据值    |

---

## create() - 创建元数据字段

为数据集创建自定义元数据字段。

### 参数

| 参数         | 类型 | 必填 | 描述                                 |
| ------------ | ---- | ---- | ------------------------------------ |
| `dataset_id` | str  | 是   | 数据集 ID                            |
| `field_type` | str  | 是   | 字段类型：`string`、`number`、`time` |
| `name`       | str  | 是   | 字段名称                             |

### 返回值

`Metadata` - 创建的元数据字段信息

### 示例

```python
# 创建字符串类型字段
metadata = client.metadata.create(
    dataset_id="dataset-id",
    field_type="string",
    name="作者"
)

# 创建数字类型字段
metadata = client.metadata.create(
    dataset_id="dataset-id",
    field_type="number",
    name="版本号"
)

# 创建时间类型字段
metadata = client.metadata.create(
    dataset_id="dataset-id",
    field_type="time",
    name="发布日期"
)

print(f"元数据字段 ID: {metadata.id}")
```

---

## list() - 获取元数据字段列表

获取数据集的所有元数据字段。

### 参数

| 参数         | 类型 | 必填 | 描述      |
| ------------ | ---- | ---- | --------- |
| `dataset_id` | str  | 是   | 数据集 ID |

### 返回值

`MetadataListResponse` - 元数据字段列表

### 示例

```python
result = client.metadata.list(dataset_id="dataset-id")

for field in result.doc_metadata:
    print(f"字段: {field.name} ({field.type})")
```

---

## update() - 更新元数据字段

更新元数据字段名称。

### 参数

| 参数          | 类型 | 必填 | 描述          |
| ------------- | ---- | ---- | ------------- |
| `dataset_id`  | str  | 是   | 数据集 ID     |
| `metadata_id` | str  | 是   | 元数据字段 ID |
| `name`        | str  | 是   | 新字段名称    |

### 返回值

`Metadata` - 更新后的元数据字段信息

### 示例

```python
metadata = client.metadata.update(
    dataset_id="dataset-id",
    metadata_id="metadata-id",
    name="新字段名称"
)
print(f"更新成功: {metadata.name}")
```

---

## delete() - 删除元数据字段

删除自定义元数据字段。

### 参数

| 参数          | 类型 | 必填 | 描述          |
| ------------- | ---- | ---- | ------------- |
| `dataset_id`  | str  | 是   | 数据集 ID     |
| `metadata_id` | str  | 是   | 元数据字段 ID |

### 返回值

`Dict[str, Any]` - 成功响应

### 示例

```python
result = client.metadata.delete(
    dataset_id="dataset-id",
    metadata_id="metadata-id"
)
print("元数据字段删除成功")
```

---

## toggle_built_in() - 启用/禁用内置元数据

启用或禁用内置的元数据字段。

### 参数

| 参数         | 类型 | 必填 | 描述                        |
| ------------ | ---- | ---- | --------------------------- |
| `dataset_id` | str  | 是   | 数据集 ID                   |
| `action`     | str  | 是   | 操作：`enable` 或 `disable` |

### 返回值

`Dict[str, Any]` - 成功响应

### 示例

```python
# 禁用内置元数据
result = client.metadata.toggle_built_in(
    dataset_id="dataset-id",
    action="disable"
)

# 启用内置元数据
result = client.metadata.toggle_built_in(
    dataset_id="dataset-id",
    action="enable"
)
```

---

## update_document_metadata() - 更新文档元数据值

更新文档的元数据值。

### 参数

| 参数             | 类型 | 必填 | 描述               |
| ---------------- | ---- | ---- | ------------------ |
| `dataset_id`     | str  | 是   | 数据集 ID          |
| `operation_data` | List | 是   | 文档元数据操作列表 |

### operation_data 结构

每个操作包含：

| 字段            | 类型 | 描述       |
| --------------- | ---- | ---------- |
| `document_id`   | str  | 文档 ID    |
| `metadata_list` | List | 元数据列表 |

metadata_list 中每个元素：

| 字段    | 类型 | 描述          |
| ------- | ---- | ------------- |
| `id`    | str  | 元数据字段 ID |
| `value` | Any  | 元数据值      |
| `name`  | str  | 字段名称      |

### 返回值

`Dict[str, Any]` - 成功响应

### 示例

```python
result = client.metadata.update_document_metadata(
    dataset_id="dataset-id",
    operation_data=[
        {
            "document_id": "doc-id-1",
            "metadata_list": [
                {"id": "metadata-id-1", "value": "张三", "name": "作者"},
                {"id": "metadata-id-2", "value": "1.0", "name": "版本号"}
            ]
        },
        {
            "document_id": "doc-id-2",
            "metadata_list": [
                {"id": "metadata-id-1", "value": "李四", "name": "作者"}
            ]
        }
    ]
)
print("元数据更新成功")
```

---

## 数据模型

### Metadata

```python
class Metadata:
    id: str                      # 元数据字段 ID
    type: str                    # 字段类型：string, number, time
    name: str                    # 字段名称
```

### DocumentMetadata

```python
class DocumentMetadata:
    document_id: str             # 文档 ID
    metadata_list: List[MetadataItem]  # 元数据列表
```

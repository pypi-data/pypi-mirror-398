"""Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT."""

from __future__ import annotations
from cribl_control_plane import models, utils
from cribl_control_plane.types import BaseModel
from cribl_control_plane.utils import validate_open_enum
from enum import Enum
import pydantic
from pydantic import field_serializer
from pydantic.functional_validators import PlainValidator
from typing import Optional
from typing_extensions import Annotated, NotRequired, TypedDict


class FunctionConfSchemaEventBreakerExistingOrNew(
    str, Enum, metaclass=utils.OpenEnumMeta
):
    # Use Existing
    EXISTING = "existing"
    # Create New
    NEW = "new"


class FunctionConfSchemaEventBreakerTypedDict(TypedDict):
    existing_or_new: NotRequired[FunctionConfSchemaEventBreakerExistingOrNew]
    should_mark_cribl_breaker: NotRequired[bool]
    r"""Add this Function name to the cribl_breaker field"""


class FunctionConfSchemaEventBreaker(BaseModel):
    existing_or_new: Annotated[
        Annotated[
            Optional[FunctionConfSchemaEventBreakerExistingOrNew],
            PlainValidator(validate_open_enum(False)),
        ],
        pydantic.Field(alias="existingOrNew"),
    ] = FunctionConfSchemaEventBreakerExistingOrNew.EXISTING

    should_mark_cribl_breaker: Annotated[
        Optional[bool], pydantic.Field(alias="shouldMarkCriblBreaker")
    ] = True
    r"""Add this Function name to the cribl_breaker field"""

    @field_serializer("existing_or_new")
    def serialize_existing_or_new(self, value):
        if isinstance(value, str):
            try:
                return models.FunctionConfSchemaEventBreakerExistingOrNew(value)
            except ValueError:
                return value
        return value

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[project]
name = "keystone-assimilation"
version = "0.1.14"
description = "Keystone assimilation tooling for forward-only governance"
readme = "README.md"
authors = [{ name = "Keystone" }]
license = { text = "Proprietary" }
requires-python = ">=3.10"
dependencies = [
  "pyyaml>=6.0.3",
  "requests>=2.32.5",
]

[project.optional-dependencies]
dev = [
  "pytest>=9.0.2",
  "pytest-cov>=7.0.0",
  "ruff>=0.14.10",
  "build>=1.3.0",
  "commitizen>=4.10.1",
  "twine>=5.1.1",
]

[project.scripts]
keystone-assimilation-run = "keystone_assimilation.cli:run_main"
keystone-assimilation-collect = "keystone_assimilation.collect:collect_main"
keystone-assimilation-ingest = "keystone_assimilation.ingest:ingest_main"

[tool.hatch.build]
packages = ["src/keystone_assimilation"]

[tool.pytest.ini_options]
addopts = "-q"

[tool.coverage.run]
branch = true
source = ["keystone_assimilation"]
omit = ["*tests*"]

[tool.coverage.report]
fail_under = 80
show_missing = true

[tool.ruff]
line-length = 100
target-version = "py310"

[tool.ruff.lint]
select = ["E", "F", "I", "B"]

[tool.commitizen]
name = "cz_conventional_commits"
version = "0.1.14"
version_files = [
  "pyproject.toml:version",
  "src/keystone_assimilation/__init__.py:__version__",
]
tag_format = "keystone-assimilation-v$version"

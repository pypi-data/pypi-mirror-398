"""Abstract base class defining the generic plugin interface"""

# AUTOGENERATED! DO NOT EDIT! File to edit: ../../nbs/core/interface.ipynb.

# %% auto 0
__all__ = ['FileBackedDTO', 'PluginInterface']

# %% ../../nbs/core/interface.ipynb 3
from abc import ABC, abstractmethod
from typing import Any, Dict, Optional, Generator, Protocol, runtime_checkable

# %% ../../nbs/core/interface.ipynb 5
@runtime_checkable
class FileBackedDTO(Protocol):
    """Protocol for Data Transfer Objects that serialize to disk for zero-copy transfer."""
    
    def to_temp_file(self) -> str: # Absolute path to the temporary file
        """Save the data to a temporary file and return the absolute path."""
        ...

# %% ../../nbs/core/interface.ipynb 7
class PluginInterface(ABC):
    """Abstract base class for all plugins (both local workers and remote proxies)."""

    @property
    @abstractmethod
    def name(self) -> str: # Unique identifier for this plugin
        """Unique plugin identifier."""
        ...

    @property
    @abstractmethod
    def version(self) -> str: # Semantic version string (e.g., "1.0.0")
        """Plugin version."""
        ...

    @abstractmethod
    def initialize(
        self,
        config: Optional[Dict[str, Any]] = None # Configuration dictionary
    ) -> None:
        """Initialize or re-configure the plugin."""
        ...

    @abstractmethod
    def execute(
        self,
        *args,
        **kwargs
    ) -> Any: # Plugin-specific output
        """Execute the plugin's main functionality."""
        ...

    def execute_stream(
        self,
        *args,
        **kwargs
    ) -> Generator[Any, None, None]: # Yields partial results
        """Stream execution results chunk by chunk."""
        # Default: yield single result from execute()
        yield self.execute(*args, **kwargs)

    @abstractmethod
    def get_config_schema(self) -> Dict[str, Any]: # JSON Schema for configuration
        """Return JSON Schema describing the plugin's configuration options."""
        ...

    @abstractmethod
    def get_current_config(self) -> Dict[str, Any]: # Current configuration values
        """Return the current configuration state as a dictionary."""
        ...

    @abstractmethod
    def cleanup(self) -> None:
        """Clean up resources when plugin is unloaded."""
        ...

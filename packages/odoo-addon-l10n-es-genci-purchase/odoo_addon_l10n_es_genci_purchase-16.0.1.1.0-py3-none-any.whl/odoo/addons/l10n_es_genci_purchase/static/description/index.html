<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils: https://docutils.sourceforge.io/" />
<title>Tasa Genci - Compras</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 9511 2024-01-13 09:50:07Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.
Despite the name, some widely supported CSS2 features are used.

See https://docutils.sourceforge.io/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

.subscript {
  vertical-align: sub;
  font-size: smaller }

.superscript {
  vertical-align: super;
  font-size: smaller }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title, .code .error {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left, table.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right, table.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

table.align-center {
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

.align-top    {
  vertical-align: top }

.align-middle {
  vertical-align: middle }

.align-bottom {
  vertical-align: bottom }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em ;
  margin-right: 2em }

pre.code .ln { color: gray; } /* line numbers */
pre.code, code { background-color: #eeeeee }
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic, pre.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

/* "booktabs" style (no vertical lines) */
table.docutils.booktabs {
  border: 0px;
  border-top: 2px solid;
  border-bottom: 2px solid;
  border-collapse: collapse;
}
table.docutils.booktabs * {
  border: 0px;
}
table.docutils.booktabs th {
  border-bottom: thin solid;
  text-align: left;
}

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="tasa-genci-compras">
<h1 class="title">Tasa Genci - Compras</h1>

<!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!! This file is generated by oca-gen-addon-readme !!
!! changes will be overwritten.                   !!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!! source digest: sha256:f0ce34914e2db7af7e6f71b724d66e38db67d085cd356f3c2c5a95d28cc91832
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
<p><a class="reference external image-reference" href="https://odoo-community.org/page/development-status"><img alt="Beta" src="https://img.shields.io/badge/maturity-Beta-yellow.png" /></a> <a class="reference external image-reference" href="http://www.gnu.org/licenses/agpl-3.0-standalone.html"><img alt="License: AGPL-3" src="https://img.shields.io/badge/licence-AGPL--3-blue.png" /></a> <a class="reference external image-reference" href="https://github.com/sygel-technology/sy-l10n-spain/tree/16.0/l10n_es_genci_purchase"><img alt="sygel-technology/sy-l10n-spain" src="https://img.shields.io/badge/github-sygel--technology%2Fsy--l10n--spain-lightgray.png?logo=github" /></a></p>
<p>This module extends <tt class="docutils literal">l10n_es_genci_account</tt> to integrate GENCI
functionality into the Purchase workflow.</p>
<p>It automatically creates GENCI rate lines in purchase orders when
products subject to GENCI are added, and ensures correct linkage of
GENCI amounts with vendor bills.</p>
<div class="section" id="key-features">
<h1>Key Features</h1>
<ul class="simple">
<li><strong>“Apply GENCI” checkbox</strong> on purchase orders to control GENCI
application</li>
<li><strong>Automatic creation of GENCI lines</strong> based on product rules and
purchased quantities</li>
<li><strong>Consolidation of multiple products sharing the same GENCI rule</strong>
into a single GENCI line</li>
<li><strong>Display of GENCI amounts on purchase order reports</strong> (when enabled
in company settings)</li>
</ul>
<p><strong>Table of contents</strong></p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#installation" id="toc-entry-1">Installation</a></li>
<li><a class="reference internal" href="#usage" id="toc-entry-2">Usage</a></li>
<li><a class="reference internal" href="#prerequisites" id="toc-entry-3">Prerequisites</a></li>
<li><a class="reference internal" href="#create-a-purchase-order" id="toc-entry-4">1. Create a Purchase Order</a></li>
<li><a class="reference internal" href="#apply-genci-checkbox" id="toc-entry-5">2. Apply GENCI Checkbox</a></li>
<li><a class="reference internal" href="#add-products" id="toc-entry-6">3. Add Products</a></li>
<li><a class="reference internal" href="#automatic-genci-line-creation" id="toc-entry-7">4. Automatic GENCI Line Creation</a></li>
<li><a class="reference internal" href="#application-logic" id="toc-entry-8">Application Logic</a></li>
<li><a class="reference internal" href="#known-issues-roadmap" id="toc-entry-9">Known issues / Roadmap</a></li>
<li><a class="reference internal" href="#bug-tracker" id="toc-entry-10">Bug Tracker</a></li>
<li><a class="reference internal" href="#credits" id="toc-entry-11">Credits</a></li>
</ul>
</div>
<div class="section" id="installation">
<h2><a class="toc-backref" href="#toc-entry-1">Installation</a></h2>
<p>To install this module, you need to:</p>
<ul class="simple">
<li>Only install</li>
</ul>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#toc-entry-2">Usage</a></h2>
</div>
<div class="section" id="prerequisites">
<h2><a class="toc-backref" href="#toc-entry-3">Prerequisites</a></h2>
<p>Before using this module, ensure that the base module
<strong>``l10n_es_genci_account``</strong> is properly configured:</p>
<ul class="simple">
<li>Company GENCI is enabled <em>(Settings → Companies → GENCI tab)</em></li>
<li>GENCI rules are created with validity dates if necessary</li>
<li>Products purchased from suppliers are configured as <strong>“Subject to
GENCI”</strong> with linked rules</li>
<li>Vendors have <strong>“Subject to GENCI”</strong> enabled when appropriate</li>
</ul>
<p>For detailed configuration instructions, refer to the
<strong>``l10n_es_genci_account``</strong> module documentation.</p>
</div>
<div class="section" id="create-a-purchase-order">
<h2><a class="toc-backref" href="#toc-entry-4">1. Create a Purchase Order</a></h2>
<ol class="arabic simple">
<li>Go to <strong>Purchase → Orders → Requests for Quotation → Create</strong></li>
<li>Select a vendor that has <strong>“Subject to GENCI”</strong> enabled</li>
</ol>
</div>
<div class="section" id="apply-genci-checkbox">
<h2><a class="toc-backref" href="#toc-entry-5">2. Apply GENCI Checkbox</a></h2>
<ul class="simple">
<li>The <strong>“Apply GENCI”</strong> checkbox appears in the order header <em>(only when
company GENCI is enabled)</em></li>
<li>If the vendor is GENCI-subject, this box should be checked to apply
GENCI rules</li>
<li>If left unchecked, <strong>GENCI lines will not be created</strong>, even if
products require it</li>
</ul>
</div>
<div class="section" id="add-products">
<h2><a class="toc-backref" href="#toc-entry-6">3. Add Products</a></h2>
<ul class="simple">
<li>Add products that are configured as <strong>“Subject to GENCI”</strong></li>
<li>Products must have a valid GENCI rule assigned</li>
<li>The rule’s validity dates must include the purchase order date</li>
</ul>
</div>
<div class="section" id="automatic-genci-line-creation">
<h2><a class="toc-backref" href="#toc-entry-7">4. Automatic GENCI Line Creation</a></h2>
<p>GENCI lines are automatically generated when:</p>
<ul class="simple">
<li>You save the purchase order</li>
<li>Or you modify order lines</li>
</ul>
<p>Behavior:</p>
<ul class="simple">
<li><strong>One GENCI line is created per distinct GENCI rule</strong></li>
<li><strong>Quantity = sum of all purchased quantities using that rule</strong></li>
<li>GENCI lines appear at the bottom of the order lines</li>
</ul>
</div>
<div class="section" id="application-logic">
<h2><a class="toc-backref" href="#toc-entry-8">Application Logic</a></h2>
<p><strong>Conditions for GENCI Application</strong></p>
<p>GENCI logic is applied only when:</p>
<ul class="simple">
<li>The company has GENCI enabled</li>
<li>The <strong>“Apply GENCI”</strong> checkbox is enabled on the purchase order</li>
<li>The vendor is subject to GENCI</li>
<li>The fiscal position (if defined) allows GENCI</li>
<li>Products have valid GENCI rules for the purchase order date</li>
</ul>
<p>If any requirement is not met, GENCI lines will not be generated.</p>
</div>
<div class="section" id="known-issues-roadmap">
<h2><a class="toc-backref" href="#toc-entry-9">Known issues / Roadmap</a></h2>
<p>Pending Features:</p>
<ul class="simple">
<li><strong>Product GENCI flag type</strong> The <tt class="docutils literal">genci_subject</tt> field on products is
currently a selection (<tt class="docutils literal">yes</tt> / <tt class="docutils literal">no</tt>), inherited from
<tt class="docutils literal">l10n_es_genci_account</tt>. Once this field is migrated to a Boolean in
the parent module, this module should be updated accordingly to use a
Boolean flag.</li>
<li><strong>GENCI logic reuse</strong> Purchase and Sale modules currently share very
similar GENCI logic. As a future improvement or during a migration,
this logic should be extracted into a shared mixin to reduce
duplication and improve maintainability.</li>
<li><strong>Units of Measure handling for GENCI calculations</strong> GENCI amounts are
currently computed per purchased unit (product_qty), without applying
any Unit of Measure (UoM) conversion. This is an intentional design
decision, as GENCI rules are defined per product unit. If future
requirements introduce UoM-dependent GENCI rules (e.g. weight or
volume based), this logic should be reviewed and adapted accordingly.</li>
</ul>
</div>
<div class="section" id="bug-tracker">
<h2><a class="toc-backref" href="#toc-entry-10">Bug Tracker</a></h2>
<p>Bugs are tracked on <a class="reference external" href="https://github.com/sygel-technology/sy-l10n-spain/issues">GitHub Issues</a>.
In case of trouble, please check there if your issue has already been reported.
If you spotted it first, help us to smash it by providing a detailed and welcomed
<a class="reference external" href="https://github.com/sygel-technology/sy-l10n-spain/issues/new?body=module:%20l10n_es_genci_purchase%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**">feedback</a>.</p>
<p>Do not contact contributors directly about support or help with technical issues.</p>
</div>
<div class="section" id="credits">
<h2><a class="toc-backref" href="#toc-entry-11">Credits</a></h2>
</div>
</div>
<div class="section" id="authors">
<h1>Authors</h1>
<ul class="simple">
<li>Sygel</li>
</ul>
</div>
<div class="section" id="contributors">
<h1>Contributors</h1>
<ul class="simple">
<li><a class="reference external" href="https://www.sygel.es">Sygel</a>:<ul>
<li>Ángel Rivas</li>
<li>Valentín Vinagre</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="maintainers">
<h1>Maintainers</h1>
<p>This module is part of the <a class="reference external" href="https://github.com/sygel-technology/sy-l10n-spain/tree/16.0/l10n_es_genci_purchase">sygel-technology/sy-l10n-spain</a> project on GitHub.</p>
<p>You are welcome to contribute.</p>
</div>
</div>
</body>
</html>

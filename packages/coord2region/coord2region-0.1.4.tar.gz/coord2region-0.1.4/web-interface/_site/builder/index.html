<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Config Builder</title>
  <meta name="description" content="Interactive configuration builder for Coord2Region.">
  <link rel="icon" href="/Coord2Region/assets/img/logo.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="/Coord2Region/assets/css/styles.css?v=1763603681">
  
  
  <link rel="stylesheet" href="/Coord2Region/assets/css/main.css?v=1763597992">
  
  
  
  <script defer src="/Coord2Region/assets/js/theme-logo.js?v=1763604282"></script>
  
</head>

  <body class="theme builder-page">
    <header class="hero">
      <div class="hero__content container">
        <h1>Coord2Region: Coordinates <em class="into">into</em> Insights</h1>
        <p class="hero__tagline">Build a YAML config to run coord2region with minimal effort — map coordinates to region names, studies, summaries, and images.</p>
      <div class="hero__cta">
       <a class="btn btn-secondary"
         
         href="/Coord2Region/">Home</a>
       <a class="btn btn-secondary"
         
         href="/Coord2Region/about/">About</a>
       <a class="btn btn-primary"
         aria-current="page"
         href="/Coord2Region/builder/">Config Builder</a>
       <a class="btn btn-secondary"
         
         href="/Coord2Region/cloud/">Cloud Runner</a>
       <a class="btn btn-secondary" href="https://coord2region.readthedocs.io/en/latest/" target="_blank" rel="noopener">Documentation</a>
       <a class="btn btn-secondary" href="https://github.com/BabaSanfour/Coord2Region" target="_blank" rel="noopener">View on GitHub</a>
      </div>
      </div>
    </header>
    <main class="content container">
      <!-- markdownlint-disable MD033 -->
<section id="config-builder" class="section-card">
  <div class="card-title">
    <h2>Interactive Config Builder</h2>
    <span>Powered by JSON Schema-driven forms</span>
  </div>
  <div class="responsive-frame">
    <details class="howto howto--inframe">
      <summary>How it works</summary>
      <div class="howto__content">
        <ol>
          <li><strong>Choose input mode</strong>:
            Coordinates (paste directly or upload a CSV/TSV with <code>x,y,z</code> columns in MNI space) or Region names. If you upload a file, provide a valid path; for Region names, enter names directly.
          </li>
          <li><strong>Select atlas(es)</strong>:
            For Coordinates, you can pick multiple atlases (grouped by type and searchable). For Region names, select <em>exactly one</em> atlas.
          </li>
          <li><strong>Add sources</strong>:
            Choose study/provider sources under the <code>sources</code> field. If you plan to keep <em>Studies</em> enabled, select at least one source.
          </li>
          <li><strong>Toggle outputs</strong>:
            Studies are <em>enabled by default</em> and can be turned off. Turn on Summaries and/or Images as needed (Summaries depend on Studies).
          </li>
          <li><strong>Configure Summaries</strong> (when enabled):
            Pick a prompt type (or write a custom prompt), select one or more summary models, and optionally set a token limit. Add provider API keys if required by your chosen models.
          </li>
          <li><strong>Configure Images</strong> (when enabled):
            Choose <code>image_backend</code> (<code>ai</code>, <code>nilearn</code>, or <code>both</code>), select an <code>image_model</code>, and set a prompt type or a custom template (supports placeholders like <code>{coordinate}</code>, <code>{first_paragraph}</code>, and <code>{atlas_context}</code>).
          </li>
          <li><strong>Save &amp; export options</strong>:
            In the Outputs mini‑section, set the working directory (used for caches and downloads), choose an optional <code>output_format</code>, and provide an <code>output_name</code> when exporting.
          </li>
          <li><strong>Review &amp; copy</strong>:
            The YAML preview, a CLI command (that uses a saved YAML), and Direct CLI commands (no YAML needed) update live. Use the copy buttons or download the YAML.
          </li>
          <li><strong>Run</strong>:
            Either save the YAML and run the provided CLI command (e.g., <code>coord2region --config …</code>) or copy a Direct CLI command matching your current selections.
          </li>
          <li><strong>Tips</strong>:
            Reuse the same working directory to cache datasets and atlases across runs. Add provider API keys for AI features when needed.
          </li>
        </ol>
      </div>
    </details>
    <div id="coord2region-root"></div>
  </div>
</section>
<!-- markdownlint-enable MD033 -->

    </main>
    <footer class="site-footer">
      <div class="container">
        <p class="footnote">&copy; 2025 Coord2Region contributors.</p>
      </div>
    </footer>
    
    <style>
      .theme-toggle {
        position: fixed;
        top: 14px;
        right: 14px;
        z-index: 1000;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 38px;
        height: 38px;
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.35);
        background: var(--bg-alt);
        color: var(--fg);
        box-shadow: 0 10px 25px rgba(0,0,0,0.25);
        cursor: pointer;
      }
      .theme-toggle:hover { border-color: var(--accent); color: var(--accent); }
      .theme-toggle:active { transform: scale(0.96); box-shadow: 0 6px 16px rgba(0,0,0,0.3); }
      .icon { display: none; }
      :root[data-theme='dark'] .icon-moon { display: inline; }
      :root:not([data-theme]), :root[data-theme='dark'] .icon-sun { display: none; }
      :root[data-theme='light'] .icon-sun { display: inline; }
      :root[data-theme='light'] .icon-moon { display: none; }
    </style>
    <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme" title="Toggle theme">
      <svg class="icon icon-sun" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
        <path d="M12 18a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm0 4a1 1 0 0 1-1-1v-1a1 1 0 1 1 2 0v1a1 1 0 0 1-1 1Zm0-20a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0V3a1 1 0 0 1 1-1Zm10 9h-1a1 1 0 1 1 0-2h1a1 1 0 1 1 0 2ZM3 12H2a1 1 0 1 1 0-2h1a1 1 0 1 1 0 2Zm15.657 7.071-.707-.707a1 1 0 1 1 1.414-1.414l.707.707a1 1 0 1 1-1.414 1.414ZM4.636 6.343l-.707-.707A1 1 0 0 1 5.343 4.222l.707.707A1 1 0 0 1 4.636 6.343Zm12.728-2.121-.707.707A1 1 0 0 1 15.243 3.515l.707-.707A1 1 0 0 1 17.364 4.222ZM6.05 19.364l-.707.707A1 1 0 1 1 3.929 18.95l.707-.707A1 1 0 1 1 6.05 19.364Z"/>
      </svg>
      <svg class="icon icon-moon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79Z"/>
      </svg>
    </button>
    <script>
      (function() {
        try {
          var saved = localStorage.getItem('c2r-theme');
          var apply = function(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            var btn = document.getElementById('theme-toggle');
            if (btn) {
              btn.setAttribute('aria-label', theme === 'light' ? 'Switch to dark theme' : 'Switch to light theme');
              btn.setAttribute('title', theme === 'light' ? 'Switch to dark theme' : 'Switch to light theme');
            }
          };
          if (saved === 'light' || saved === 'dark') {
            apply(saved);
          } else {
            var prefersLight = false;
            try { prefersLight = window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches; } catch (e) {}
            apply(prefersLight ? 'light' : 'dark');
          }
          document.addEventListener('DOMContentLoaded', function () {
            var btn = document.getElementById('theme-toggle');
            if (!btn) return;
            btn.addEventListener('click', function () {
              var current = document.documentElement.getAttribute('data-theme') || 'dark';
              var next = current === 'light' ? 'dark' : 'light';
              apply(next);
              try { localStorage.setItem('c2r-theme', next); } catch (e) {}
            });
          });
        } catch (e) {}
      })();
    </script>
    <script type="module" src="/Coord2Region/assets/js/bundle.js?v=1763597992"></script>
  </body>
</html>

[project]
name = "pydepin"
version = "0.1.7"
description = "Dependency injection package"
readme = "README.md"
requires-python = ">=3.13"

dependencies = [
    "fastapi[standard]>=0.95,<1.0"
]

[build-system]
requires = ["setuptools"]
build-backend = "setuptools.build_meta"

[dependency-groups]
dev = [
    "mypy>=1.19.0",
    "pytest>=8.4.2",
    "pytest-asyncio>=1.3.0",
    "pytest-cov>=7.0.0",
    "httpx>=0.28.1",
    "httpie>=3.2.4",
    "rich>=14.2.0",
    "uv-publish>=1.3",
    "ruff>=0.14.8",
]

[tool.ruff]
line-length = 120
exclude = ["**/migrations/versions"]

[tool.ruff.format]
preview = true
quote-style = 'single'

[tool.ruff.lint]
preview = true
select = ['I', 'F', 'E', 'W', 'PT']

[tool.ruff.lint.isort]
case-sensitive = true

[tool.mypy]
exclude = ["^.venv/", "^venv/"]
explicit_package_bases = true
mypy_path = ["."]

strict = true

disallow_untyped_calls = false
disallow_untyped_defs = false
warn_return_any = false
disallow_incomplete_defs = false
allow_redefinition = false

disable_error_code = ["misc"]
enable_error_code = ["ignore-without-code", "redundant-self"]

[[tool.mypy.overrides]]
module = ["pytest.*"]
ignore_missing_imports = true


[tool.basedpyright]
exclude = [
    '**/node_modules',
    '**/__pycache__',
    '**/migrations/versions',
    '**/.*',
]

typeCheckingMode = 'recommended'

reportMissingTypeStubs = false
reportUnknownVariableType = false
reportUnannotatedClassAttribute = false
reportUnknownMemberType = false
reportUnusedCallResult = false
reportMissingParameterType = false
reportUnknownParameterType = false
reportAny = false
reportExplicitAny = false
reportUnknownArgumentType = false
reportUnusedParameter = "hint"
reportImportCycles = "hint"

reportImplicitOverride = true

[tool.setuptools.packages.find]
include = ["depin", "depin.*"]

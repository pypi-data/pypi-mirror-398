# 意思決定ログ: `.pyi` を使わず `.py` に型注釈を置く（PEP 561）

- Date: 2025-12-18
- Status: accepted

## 背景

- `qmrpy` は研究用途を主目的としており、API が今後も頻繁に変わり得る。
- `.pyi`（型スタブ）は IDE/型チェッカに有用だが、`.py` と二重管理になり、ズレが起きやすい。
- 一方で、パッケージとしての型情報は維持したい（将来の配布も見据える）。

## 決定

- `src/qmrpy/**/*.pyi` は廃止し、型注釈は `.py` に直接記述する。
- PEP 561 に従い、型注釈を含むパッケージとして `src/qmrpy/py.typed` は維持する。

## 理由

- 二重管理（`.py` + `.pyi`）のメンテコストと不整合リスクを下げる。
- 研究段階では、型注釈は「公開APIの最小限」から始め、必要に応じて増やす方が現実的。

## 影響範囲

- 既存の `.pyi` を削除するため、型チェッカは `.py` の型注釈を参照する。
- 実行時の挙動は変えない（型注釈のみ）。


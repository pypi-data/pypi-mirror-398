var z=Object.defineProperty;var i=(g,r)=>z(g,"name",{value:r,configurable:!0});import{ag as F,a as I,s as V,w as q,af as K,ae as x,x as $,p as L,M as P}from"./vendor-primevue-B1C3YRTk.js";import{u as G}from"./vendor-vue-CuB5mYeL.js";import{a1 as H,f as J,S as Q,di as W}from"./index-azSeANjR.js";import{bs as X,E as c,r as p,o as Y,c as m,p as v,q as d,A as o,bq as l,e as y,d as k,F as Z,z as ee,t as h,h as S,s as ae}from"./vendor-other-Dl5_1vG6.js";import"./vendor-xterm-DV1MVhAx.js";import"./vendor-three-zdhtZbSm.js";import"./vendor-tiptap-BgsBtbxI.js";const ne={class:"flex justify-end"},se={class:"mb-3 flex gap-2"},ce=X({__name:"ExtensionPanel",setup(g){const{t:r}=G(),N=["all","core","custom"],T=c(()=>N.map(e=>({label:r(`g.${e}`),value:e}))),E=p("all"),f=p([]),b=p({global:{value:"",matchMode:F.CONTAINS}}),a=H(),_=J(),t=p({}),A=c(()=>{const e=a.extensions;switch(E.value){case"core":return e.filter(s=>a.isCoreExtension(s.name));case"custom":return e.filter(s=>!a.isCoreExtension(s.name));default:return e}});Y(()=>{a.extensions.forEach(e=>{t.value[e.name]=a.isExtensionEnabled(e.name)})});const C=c(()=>a.extensions.filter(e=>t.value[e.name]!==a.isExtensionEnabled(e.name))),O=c(()=>C.value.length>0),u=i(async()=>{const e=Object.entries(t.value).filter(([s,n])=>!n).map(([s])=>s);await _.set("Comfy.Extension.Disabled",[...a.inactiveDisabledExtensionNames,...e])},"updateExtensionStatus"),M=i(async()=>{a.extensions.forEach(e=>{a.isExtensionReadOnly(e.name)||(t.value[e.name]=!0)}),await u()},"enableAllExtensions"),B=i(async()=>{a.extensions.forEach(e=>{a.isExtensionReadOnly(e.name)||(t.value[e.name]=!1)}),await u()},"disableAllExtensions"),R=i(async()=>{a.extensions.forEach(e=>{a.isCoreExtension(e.name)||(t.value[e.name]=!1)}),await u()},"disableThirdPartyExtensions"),U=i(()=>{window.location.reload()},"applyChanges"),w=p(),j=c(()=>[{label:r("g.enableSelected"),icon:"pi pi-check",command:i(async()=>{f.value.forEach(e=>{a.isExtensionReadOnly(e.name)||(t.value[e.name]=!0)}),await u()},"command")},{label:r("g.disableSelected"),icon:"pi pi-times",command:i(async()=>{f.value.forEach(e=>{a.isExtensionReadOnly(e.name)||(t.value[e.name]=!1)}),await u()},"command")},{separator:!0},{label:r("g.enableAll"),icon:"pi pi-check",command:M},{label:r("g.disableAll"),icon:"pi pi-times",command:B},{label:r("g.disableThirdParty"),icon:"pi pi-times",command:R,disabled:!a.hasThirdPartyExtensions}]);return(e,s)=>(m(),v(W,{value:"Extension",class:"extension-panel"},{header:d(()=>[o(Q,{modelValue:b.value.global.value,"onUpdate:modelValue":s[0]||(s[0]=n=>b.value.global.value=n),placeholder:e.$t("g.searchExtensions")+"..."},null,8,["modelValue","placeholder"]),O.value?(m(),v(l(I),{key:0,severity:"info","pt:text":"w-full",class:"max-h-96 overflow-y-auto"},{default:d(()=>[y("ul",null,[(m(!0),k(Z,null,ee(C.value,n=>(m(),k("li",{key:n.name},[y("span",null,h(l(a).isExtensionEnabled(n.name)?"[-]":"[+]"),1),S(" "+h(n.name),1)]))),128))]),y("div",ne,[o(l(V),{label:e.$t("g.reloadToApplyChanges"),outlined:"",severity:"danger",onClick:U},null,8,["label"])])]),_:1})):ae("",!0)]),default:d(()=>[y("div",se,[o(l(q),{modelValue:E.value,"onUpdate:modelValue":s[1]||(s[1]=n=>E.value=n),options:T.value,"option-label":"label","option-value":"value"},null,8,["modelValue","options"])]),o(l(K),{selection:f.value,"onUpdate:selection":s[3]||(s[3]=n=>f.value=n),value:A.value,"striped-rows":"",size:"small",filters:b.value,"selection-mode":"multiple","data-key":"name"},{default:d(()=>[o(l(x),{"selection-mode":"multiple",frozen:!0,style:{width:"3rem"}}),o(l(x),{header:e.$t("g.extensionName"),sortable:"",field:"name"},{body:d(n=>[S(h(n.data.name)+" ",1),l(a).isCoreExtension(n.data.name)?(m(),v(l($),{key:0,value:e.$t("g.core")},null,8,["value"])):(m(),v(l($),{key:1,value:e.$t("g.custom"),severity:"info"},null,8,["value"]))]),_:1},8,["header"]),o(l(x),{pt:{headerCell:"flex items-center justify-end",bodyCell:"flex items-center justify-end"}},{header:d(()=>[o(l(V),{icon:"pi pi-ellipsis-h",text:"",severity:"secondary",onClick:s[2]||(s[2]=n=>w.value?.show(n))}),o(l(L),{ref_key:"menu",ref:w,model:j.value},null,8,["model"])]),body:d(n=>[o(l(P),{modelValue:t.value[n.data.name],"onUpdate:modelValue":i(D=>t.value[n.data.name]=D,"onUpdate:modelValue"),disabled:l(a).isExtensionReadOnly(n.data.name),onChange:u},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:1})]),_:1},8,["selection","value","filters"])]),_:1}))}});export{ce as default};
//# sourceMappingURL=ExtensionPanel-D2Qed-3h.js.map

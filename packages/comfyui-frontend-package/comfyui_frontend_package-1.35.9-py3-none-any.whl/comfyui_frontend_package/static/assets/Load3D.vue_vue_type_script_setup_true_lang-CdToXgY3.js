var pe=Object.defineProperty;var s=(d,a)=>pe(d,"name",{value:a,configurable:!0});import{bs as E,cB as ee,cC as w,r as A,o as H,bP as K,k as N,c as r,d as b,A as k,q as y,l as C,e as l,u as z,bq as e,x as W,E as P,p as S,s as M,F as Y,z as Z,h as ne,t as J,I,T as ge,bb as G}from"./vendor-other-Dl5_1vG6.js";import{s as $,k as ie,j as ae}from"./vendor-primevue-B1C3YRTk.js";import{f as X,t as Q,d as se,cD as ve,u as me,cE as fe,cF as he,w as be,cG as xe}from"./index-azSeANjR.js";const ke={class:"relative show-slider"},we={class:"absolute top-0 left-12 rounded-lg bg-black/50 p-4 shadow-lg w-[150px]"},de=E({__name:"PopupSlider",props:ee({icon:{default:"pi-expand"},tooltipText:{},min:{default:10},max:{default:150},step:{default:1}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(d){const a=w(d,"modelValue"),o=A(!1),t=s(()=>{o.value=!o.value},"toggleSlider"),n=s(c=>{c.target.closest(".show-slider")||(o.value=!1)},"closeSlider");return H(()=>{document.addEventListener("click",n)}),K(()=>{document.removeEventListener("click",n)}),(c,g)=>{const v=N("tooltip");return r(),b("div",ke,[k(e($),{class:"p-button-rounded p-button-text",onClick:t},{default:y(()=>[C(l("i",{class:z(["pi",c.icon,"text-lg text-white"])},null,2),[[v,{value:c.tooltipText,showDelay:300},void 0,{right:!0}]])]),_:1}),C(l("div",we,[k(e(ie),{modelValue:a.value,"onUpdate:modelValue":g[0]||(g[0]=u=>a.value=u),class:"w-full",min:c.min,max:c.max,step:c.step},null,8,["modelValue","min","max","step"])],512),[[W,o.value]])])}}}),ye={class:"flex flex-col"},Ce={class:z(["pi","pi-camera","text-lg text-white"])},Me=E({__name:"CameraControls",props:{cameraType:{},cameraTypeModifiers:{},fov:{},fovModifiers:{}},emits:["update:cameraType","update:fov"],setup(d){const a=w(d,"cameraType"),o=w(d,"fov"),t=P(()=>a.value==="perspective"),n=s(()=>{a.value=a.value==="perspective"?"orthographic":"perspective"},"switchCamera");return(c,g)=>{const v=N("tooltip");return r(),b("div",ye,[k(e($),{class:"p-button-rounded p-button-text",onClick:n},{default:y(()=>[C(l("i",Ce,null,512),[[v,{value:c.$t("load3d.switchCamera"),showDelay:300},void 0,{right:!0}]])]),_:1}),t.value?(r(),S(de,{key:0,modelValue:o.value,"onUpdate:modelValue":g[0]||(g[0]=u=>o.value=u),"tooltip-text":c.$t("load3d.fov")},null,8,["modelValue","tooltip-text"])):M("",!0)])}}}),_e={class:"flex flex-col"},$e={class:"show-export-formats relative"},De={class:"pi pi-download text-lg text-white"},Re={class:"absolute top-0 left-12 rounded-lg bg-black/50 shadow-lg"},Ie={class:"flex flex-col"},Le=E({__name:"ExportControls",emits:["exportModel"],setup(d,{emit:a}){const o=a,t=A(!1),n=[{label:"GLB",value:"glb"},{label:"OBJ",value:"obj"},{label:"STL",value:"stl"}],c=s(()=>{t.value=!t.value},"toggleExportFormats"),g=s(u=>{o("exportModel",u),t.value=!1},"exportModel"),v=s(u=>{u.target.closest(".show-export-formats")||(t.value=!1)},"closeExportFormatsList");return H(()=>{document.addEventListener("click",v)}),K(()=>{document.removeEventListener("click",v)}),(u,i)=>{const f=N("tooltip");return r(),b("div",_e,[l("div",$e,[k(e($),{class:"p-button-rounded p-button-text",onClick:c},{default:y(()=>[C(l("i",De,null,512),[[f,{value:u.$t("load3d.exportModel"),showDelay:300},void 0,{right:!0}]])]),_:1}),C(l("div",Re,[l("div",Ie,[(r(),b(Y,null,Z(n,D=>k(e($),{key:D.value,class:"p-button-text text-white",onClick:s(_=>g(D.value),"onClick")},{default:y(()=>[ne(J(D.label),1)]),_:2},1032,["onClick"])),64))])],512),[[W,t.value]])])])}}}),Ue={class:"flex flex-col"},Se={key:0,class:"show-light-intensity relative"},Be={class:"pi pi-sun text-lg text-white"},Ve={class:"absolute top-0 left-12 rounded-lg bg-black/50 p-4 shadow-lg",style:{width:"150px"}},Ee=E({__name:"LightControls",props:{lightIntensity:{},lightIntensityModifiers:{},materialMode:{},materialModeModifiers:{}},emits:["update:lightIntensity","update:materialMode"],setup(d){const a=w(d,"lightIntensity"),o=w(d,"materialMode"),t=P(()=>o.value==="original"),n=A(!1),c=X().get("Comfy.Load3D.LightIntensityMaximum"),g=X().get("Comfy.Load3D.LightIntensityMinimum"),v=X().get("Comfy.Load3D.LightAdjustmentIncrement"),u=s(()=>{n.value=!n.value},"toggleLightIntensity"),i=s(f=>{f.target.closest(".show-light-intensity")||(n.value=!1)},"closeLightSlider");return H(()=>{document.addEventListener("click",i)}),K(()=>{document.removeEventListener("click",i)}),(f,D)=>{const _=N("tooltip");return r(),b("div",Ue,[t.value?(r(),b("div",Se,[k(e($),{class:"p-button-rounded p-button-text",onClick:u},{default:y(()=>[C(l("i",Be,null,512),[[_,{value:f.$t("load3d.lightIntensity"),showDelay:300},void 0,{right:!0}]])]),_:1}),C(l("div",Ve,[k(e(ie),{modelValue:a.value,"onUpdate:modelValue":D[0]||(D[0]=R=>a.value=R),class:"w-full",min:e(g),max:e(c),step:e(v)},null,8,["modelValue","min","max","step"])],512),[[W,n.value]])])):M("",!0)])}}}),Pe={class:"flex flex-col"},ze={class:"show-up-direction relative"},Te={class:"pi pi-arrow-up text-lg text-white"},Ge={class:"absolute top-0 left-12 rounded-lg bg-black/50 shadow-lg"},Ae={class:"flex flex-col"},Fe={class:"show-material-mode relative"},je={class:"pi pi-box text-lg text-white"},Oe={class:"absolute top-0 left-12 rounded-lg bg-black/50 shadow-lg"},Ne={class:"flex flex-col"},qe=E({__name:"ModelControls",props:{materialMode:{},materialModeModifiers:{},upDirection:{},upDirectionModifiers:{}},emits:["update:materialMode","update:upDirection"],setup(d){const a=w(d,"materialMode"),o=w(d,"upDirection"),t=A(!1),n=A(!1),c=["original","-x","+x","-y","+y","-z","+z"],g=P(()=>["original","normal","wireframe"]),v=s(()=>{t.value=!t.value,n.value=!1},"toggleUpDirection"),u=s(R=>{o.value=R,t.value=!1},"selectUpDirection"),i=s(()=>{n.value=!n.value,t.value=!1},"toggleMaterialMode"),f=s(R=>{a.value=R,n.value=!1},"selectMaterialMode"),D=s(R=>Q(`load3d.materialModes.${R}`),"formatMaterialMode"),_=s(R=>{const T=R.target;T.closest(".show-up-direction")||(t.value=!1),T.closest(".show-material-mode")||(n.value=!1)},"closeSceneSlider");return H(()=>{document.addEventListener("click",_)}),K(()=>{document.removeEventListener("click",_)}),(R,T)=>{const F=N("tooltip");return r(),b("div",Pe,[l("div",ze,[k(e($),{class:"p-button-rounded p-button-text",onClick:v},{default:y(()=>[C(l("i",Te,null,512),[[F,{value:e(Q)("load3d.upDirection"),showDelay:300},void 0,{right:!0}]])]),_:1}),C(l("div",Ge,[l("div",Ae,[(r(),b(Y,null,Z(c,L=>k(e($),{key:L,class:z(["p-button-text text-white",{"bg-blue-500":o.value===L}]),onClick:s(q=>u(L),"onClick")},{default:y(()=>[ne(J(L.toUpperCase()),1)]),_:2},1032,["class","onClick"])),64))])],512),[[W,t.value]])]),l("div",Fe,[k(e($),{class:"p-button-rounded p-button-text",onClick:i},{default:y(()=>[C(l("i",je,null,512),[[F,{value:e(Q)("load3d.materialMode"),showDelay:300},void 0,{right:!0}]])]),_:1}),C(l("div",Oe,[l("div",Ne,[(r(!0),b(Y,null,Z(g.value,L=>(r(),S(e($),{key:L,class:z(["p-button-text whitespace-nowrap text-white",{"bg-blue-500":a.value===L}]),onClick:s(q=>f(L),"onClick")},{default:y(()=>[ne(J(D(L)),1)]),_:2},1032,["class","onClick"]))),128))])],512),[[W,n.value]])])])}}}),We={class:"flex flex-col"},Je={class:"pi pi-table text-lg text-white"},He={key:0},Ke={class:"pi pi-palette text-lg text-white"},Qe=["value"],Xe={key:1},Ye={class:"pi pi-image text-lg text-white"},Ze={key:2},et={class:"pi pi-globe text-lg text-white"},tt={key:4},ot={class:"pi pi-times text-lg text-white"},nt=E({__name:"SceneControls",props:{showGrid:{type:Boolean},showGridModifiers:{},backgroundColor:{},backgroundColorModifiers:{},backgroundImage:{},backgroundImageModifiers:{},backgroundRenderMode:{default:"tiled"},backgroundRenderModeModifiers:{},fov:{},fovModifiers:{}},emits:ee(["updateBackgroundImage"],["update:showGrid","update:backgroundColor","update:backgroundImage","update:backgroundRenderMode","update:fov"]),setup(d,{emit:a}){const o=a,t=w(d,"showGrid"),n=w(d,"backgroundColor"),c=w(d,"backgroundImage"),g=w(d,"backgroundRenderMode"),v=w(d,"fov"),u=P(()=>c.value&&c.value!==""),i=A(null),f=A(null),D=s(()=>{t.value=!t.value},"toggleGrid"),_=s(U=>{n.value=U},"updateBackgroundColor"),R=s(()=>{i.value?.click()},"openColorPicker"),T=s(()=>{f.value?.click()},"openImagePicker"),F=s(U=>{const B=U.target;B.files&&B.files[0]&&o("updateBackgroundImage",B.files[0])},"uploadBackgroundImage"),L=s(()=>{o("updateBackgroundImage",null)},"removeBackgroundImage"),q=s(()=>{g.value=g.value==="panorama"?"tiled":"panorama"},"toggleBackgroundRenderMode");return(U,B)=>{const j=N("tooltip");return r(),b("div",We,[k(e($),{class:z(["p-button-rounded p-button-text",{"p-button-outlined":t.value}]),onClick:D},{default:y(()=>[C(l("i",Je,null,512),[[j,{value:U.$t("load3d.showGrid"),showDelay:300},void 0,{right:!0}]])]),_:1},8,["class"]),u.value?M("",!0):(r(),b("div",He,[k(e($),{class:"p-button-rounded p-button-text",onClick:R},{default:y(()=>[C(l("i",Ke,null,512),[[j,{value:U.$t("load3d.backgroundColor"),showDelay:300},void 0,{right:!0}]]),l("input",{ref_key:"colorPickerRef",ref:i,type:"color",value:n.value,class:"pointer-events-none absolute m-0 h-0 w-0 p-0 opacity-0",onInput:B[0]||(B[0]=O=>_(O.target.value))},null,40,Qe)]),_:1})])),u.value?M("",!0):(r(),b("div",Xe,[k(e($),{class:"p-button-rounded p-button-text",onClick:T},{default:y(()=>[C(l("i",Ye,null,512),[[j,{value:U.$t("load3d.uploadBackgroundImage"),showDelay:300},void 0,{right:!0}]]),l("input",{ref_key:"imagePickerRef",ref:f,type:"file",accept:"image/*",class:"pointer-events-none absolute m-0 h-0 w-0 p-0 opacity-0",onChange:F},null,544)]),_:1})])),u.value?(r(),b("div",Ze,[k(e($),{class:z(["p-button-rounded p-button-text",{"p-button-outlined":g.value==="panorama"}]),onClick:q},{default:y(()=>[C(l("i",et,null,512),[[j,{value:U.$t("load3d.panoramaMode"),showDelay:300},void 0,{right:!0}]])]),_:1},8,["class"])])):M("",!0),u.value&&g.value==="panorama"?(r(),S(de,{key:3,modelValue:v.value,"onUpdate:modelValue":B[1]||(B[1]=O=>v.value=O),"tooltip-text":U.$t("load3d.fov")},null,8,["modelValue","tooltip-text"])):M("",!0),u.value?(r(),b("div",tt,[k(e($),{class:"p-button-rounded p-button-text",onClick:L},{default:y(()=>[C(l("i",ot,null,512),[[j,{value:U.$t("load3d.removeBackgroundImage"),showDelay:300},void 0,{right:!0}]])]),_:1})])):M("",!0)])}}}),lt={class:"show-menu relative"},at={class:"absolute top-0 left-12 rounded-lg bg-black/50 shadow-lg"},it={class:"flex flex-col"},st={class:"whitespace-nowrap text-white"},dt={class:"rounded-lg bg-smoke-700/30"},rt=E({__name:"Load3DControls",props:{sceneConfig:{},sceneConfigModifiers:{},modelConfig:{},modelConfigModifiers:{},cameraConfig:{},cameraConfigModifiers:{},lightConfig:{},lightConfigModifiers:{}},emits:ee(["updateBackgroundImage","exportModel"],["update:sceneConfig","update:modelConfig","update:cameraConfig","update:lightConfig"]),setup(d,{emit:a}){const o=w(d,"sceneConfig"),t=w(d,"modelConfig"),n=w(d,"cameraConfig"),c=w(d,"lightConfig"),g=A(!1),v=A("scene"),u={scene:"load3d.scene",model:"load3d.model",camera:"load3d.camera",light:"load3d.light",export:"load3d.export"},i=P(()=>["scene","model","camera","light","export"]),f=P(()=>v.value==="scene"&&!!o.value),D=P(()=>v.value==="model"&&!!t.value),_=P(()=>v.value==="camera"&&!!n.value),R=P(()=>v.value==="light"&&!!c.value&&!!t.value),T=P(()=>v.value==="export"),F=s(()=>{g.value=!g.value},"toggleMenu"),L=s(V=>{v.value=V,g.value=!1},"selectCategory"),q=s(V=>`${{scene:"pi pi-image",model:"pi pi-box",camera:"pi pi-camera",light:"pi pi-sun",export:"pi pi-download"}[V]} text-white text-lg`,"getCategoryIcon"),U=a,B=s(V=>{U("updateBackgroundImage",V)},"handleBackgroundImageUpdate"),j=s(V=>{U("exportModel",V)},"handleExportModel"),O=s(V=>{V.target.closest(".show-menu")||(g.value=!1)},"closeSlider");return H(()=>{document.addEventListener("click",O)}),K(()=>{document.removeEventListener("click",O)}),(V,p)=>(r(),b("div",{class:"pointer-events-auto absolute top-12 left-2 z-20 flex flex-col rounded-lg bg-smoke-700/30",onPointerdown:p[11]||(p[11]=I(()=>{},["stop"])),onPointermove:p[12]||(p[12]=I(()=>{},["stop"])),onPointerup:p[13]||(p[13]=I(()=>{},["stop"])),onWheel:p[14]||(p[14]=I(()=>{},["stop"]))},[l("div",lt,[k(e($),{class:"p-button-rounded p-button-text",onClick:F},{default:y(()=>p[15]||(p[15]=[l("i",{class:"pi pi-bars text-lg text-white"},null,-1)])),_:1}),C(l("div",at,[l("div",it,[(r(!0),b(Y,null,Z(i.value,h=>(r(),S(e($),{key:h,class:z(["p-button-text flex w-full items-center justify-start",{"bg-smoke-600":v.value===h}]),onClick:s(le=>L(h),"onClick")},{default:y(()=>[l("i",{class:z(q(h))},null,2),l("span",st,J(V.$t(u[h])),1)]),_:2},1032,["class","onClick"]))),128))])],512),[[W,g.value]])]),C(l("div",dt,[f.value?(r(),S(nt,{key:0,"show-grid":o.value.showGrid,"onUpdate:showGrid":p[0]||(p[0]=h=>o.value.showGrid=h),"background-color":o.value.backgroundColor,"onUpdate:backgroundColor":p[1]||(p[1]=h=>o.value.backgroundColor=h),"background-image":o.value.backgroundImage,"onUpdate:backgroundImage":p[2]||(p[2]=h=>o.value.backgroundImage=h),"background-render-mode":o.value.backgroundRenderMode,"onUpdate:backgroundRenderMode":p[3]||(p[3]=h=>o.value.backgroundRenderMode=h),fov:n.value.fov,"onUpdate:fov":p[4]||(p[4]=h=>n.value.fov=h),onUpdateBackgroundImage:B},null,8,["show-grid","background-color","background-image","background-render-mode","fov"])):M("",!0),D.value?(r(),S(qe,{key:1,"material-mode":t.value.materialMode,"onUpdate:materialMode":p[5]||(p[5]=h=>t.value.materialMode=h),"up-direction":t.value.upDirection,"onUpdate:upDirection":p[6]||(p[6]=h=>t.value.upDirection=h)},null,8,["material-mode","up-direction"])):M("",!0),_.value?(r(),S(Me,{key:2,"camera-type":n.value.cameraType,"onUpdate:cameraType":p[7]||(p[7]=h=>n.value.cameraType=h),fov:n.value.fov,"onUpdate:fov":p[8]||(p[8]=h=>n.value.fov=h)},null,8,["camera-type","fov"])):M("",!0),R.value?(r(),S(Ee,{key:3,"light-intensity":c.value.intensity,"onUpdate:lightIntensity":p[9]||(p[9]=h=>c.value.intensity=h),"material-mode":t.value.materialMode,"onUpdate:materialMode":p[10]||(p[10]=h=>t.value.materialMode=h)},null,8,["light-intensity","material-mode"])):M("",!0),T.value?(r(),S(Le,{key:4,onExportModel:j})):M("",!0)],512),[[W,v.value]])],32))}}),ut={key:0,class:"bg-opacity-50 absolute inset-0 z-50 flex items-center justify-center bg-black"},ct={class:"flex flex-col items-center"},pt={class:"mt-4 text-lg text-white"},gt=E({__name:"LoadingOverlay",props:{loading:{type:Boolean},loadingMessage:{}},setup(d){return(a,o)=>(r(),S(ge,{name:"fade"},{default:y(()=>[a.loading?(r(),b("div",ut,[l("div",ct,[o[0]||(o[0]=l("div",{class:"spinner"},null,-1)),l("div",pt,J(a.loadingMessage),1)])])):M("",!0)]),_:1}))}}),vt=se(gt,[["__scopeId","data-v-b13965f5"]]),mt={key:0,class:"pointer-events-none absolute inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm"},ft={class:"rounded-lg border-2 border-dashed border-blue-400 bg-blue-500/20 px-6 py-4 text-lg font-medium text-blue-100"},ht=E({__name:"Load3DScene",props:{initializeLoad3d:{type:Function},cleanup:{type:Function},loading:{type:Boolean},loadingMessage:{},onModelDrop:{type:Function},isPreview:{type:Boolean}},setup(d){const a=d,o=A(null),{isDragging:t,dragMessage:n,handleDragOver:c,handleDragLeave:g,handleDrop:v}=ve({onModelDrop:s(async u=>{a.onModelDrop&&await a.onModelDrop(u)},"onModelDrop"),disabled:P(()=>a.isPreview)});return H(()=>{o.value&&a.initializeLoad3d(o.value)}),K(()=>{a.cleanup()}),(u,i)=>(r(),b("div",{ref_key:"container",ref:o,class:"relative h-full w-full","data-capture-wheel":"true",onPointerdown:i[0]||(i[0]=I(()=>{},["stop"])),onPointermove:i[1]||(i[1]=I(()=>{},["stop"])),onPointerup:i[2]||(i[2]=I(()=>{},["stop"])),onMousedown:i[3]||(i[3]=I(()=>{},["stop"])),onMousemove:i[4]||(i[4]=I(()=>{},["stop"])),onMouseup:i[5]||(i[5]=I(()=>{},["stop"])),onContextmenu:i[6]||(i[6]=I(()=>{},["stop","prevent"])),onDragover:i[7]||(i[7]=I((...f)=>e(c)&&e(c)(...f),["prevent","stop"])),onDragleave:i[8]||(i[8]=I((...f)=>e(g)&&e(g)(...f),["stop"])),onDrop:i[9]||(i[9]=I((...f)=>e(v)&&e(v)(...f),["prevent","stop"]))},[k(vt,{loading:u.loading,"loading-message":u.loadingMessage},null,8,["loading","loading-message"]),!u.isPreview&&e(t)?(r(),b("div",mt,[l("div",ft,J(e(n)),1)])):M("",!0)],544))}}),bt={key:0,class:"pointer-events-auto absolute top-0 left-0 z-10 flex w-full items-center justify-center gap-2 pt-2"},xt=E({__name:"AnimationControls",props:{animations:{},animationsModifiers:{},playing:{type:Boolean},playingModifiers:{},selectedSpeed:{},selectedSpeedModifiers:{},selectedAnimation:{},selectedAnimationModifiers:{}},emits:["update:animations","update:playing","update:selectedSpeed","update:selectedAnimation"],setup(d){const a=w(d,"animations"),o=w(d,"playing"),t=w(d,"selectedSpeed"),n=w(d,"selectedAnimation"),c=[{name:"0.1x",value:.1},{name:"0.5x",value:.5},{name:"1x",value:1},{name:"1.5x",value:1.5},{name:"2x",value:2}],g=s(()=>{o.value=!o.value},"togglePlay");return(v,u)=>a.value&&a.value.length>0?(r(),b("div",bt,[k(e($),{class:"p-button-rounded p-button-text",onClick:g},{default:y(()=>[l("i",{class:z(["pi",o.value?"pi-pause":"pi-play","text-lg text-white"])},null,2)]),_:1}),k(e(ae),{modelValue:t.value,"onUpdate:modelValue":u[0]||(u[0]=i=>t.value=i),options:c,"option-label":"name","option-value":"value",class:"w-24"},null,8,["modelValue"]),k(e(ae),{modelValue:n.value,"onUpdate:modelValue":u[1]||(u[1]=i=>n.value=i),options:a.value,"option-label":"name","option-value":"index",class:"w-32"},null,8,["modelValue","options"])])):M("",!0)}}),kt={class:"relative rounded-lg bg-smoke-700/30"},wt={class:"flex flex-col gap-2"},yt={class:"pi pi-download text-lg text-white"},Ct={class:"pi pi-trash text-lg text-white"},Mt={key:2,class:"mt-1 text-center text-xs text-white"},_t=E({__name:"RecordingControls",props:{hasRecording:{type:Boolean},hasRecordingModifiers:{},isRecording:{type:Boolean},isRecordingModifiers:{},recordingDuration:{},recordingDurationModifiers:{}},emits:ee(["startRecording","stopRecording","exportRecording","clearRecording"],["update:hasRecording","update:isRecording","update:recordingDuration"]),setup(d,{emit:a}){const o=w(d,"hasRecording"),t=w(d,"isRecording"),n=w(d,"recordingDuration"),c=a,g=s(()=>{t.value?c("stopRecording"):c("startRecording")},"toggleRecording"),v=s(()=>{c("exportRecording")},"handleExportRecording"),u=s(()=>{c("clearRecording")},"handleClearRecording"),i=s(f=>{const D=Math.floor(f/60),_=Math.floor(f%60);return`${D.toString().padStart(2,"0")}:${_.toString().padStart(2,"0")}`},"formatDuration");return(f,D)=>{const _=N("tooltip");return r(),b("div",kt,[l("div",wt,[k(e($),{class:z(["p-button-rounded p-button-text",{"p-button-danger":t.value,"recording-button-blink":t.value}]),onClick:g},{default:y(()=>[C(l("i",{class:z(["pi",t.value?"pi-circle-fill":"pi-video","text-lg text-white"])},null,2),[[_,{value:t.value?f.$t("load3d.stopRecording"):f.$t("load3d.startRecording"),showDelay:300},void 0,{right:!0}]])]),_:1},8,["class"]),o.value&&!t.value?(r(),S(e($),{key:0,class:"p-button-rounded p-button-text",onClick:v},{default:y(()=>[C(l("i",yt,null,512),[[_,{value:f.$t("load3d.exportRecording"),showDelay:300},void 0,{right:!0}]])]),_:1})):M("",!0),o.value&&!t.value?(r(),S(e($),{key:1,class:"p-button-rounded p-button-text",onClick:u},{default:y(()=>[C(l("i",Ct,null,512),[[_,{value:f.$t("load3d.clearRecording"),showDelay:300},void 0,{right:!0}]])]),_:1})):M("",!0),n.value&&n.value>0&&!t.value?(r(),b("div",Mt,J(i(n.value)),1)):M("",!0)])])}}}),$t=se(_t,[["__scopeId","data-v-145dbaf6"]]),Dt={class:"relative rounded-lg bg-smoke-700/30"},Rt={class:"flex flex-col gap-2"},It={class:"pi pi-expand text-lg text-white"},Lt=E({__name:"ViewerControls",props:{node:{}},setup(d){const a=s(()=>{const o={node:d.node};me().showDialog({key:"global-load3d-viewer",title:Q("load3d.viewer.title"),component:fe,props:o,dialogComponentProps:{style:"width: 80vw; height: 80vh;",maximizable:!0,onClose:s(async()=>{await he().handleViewerClose(o.node)},"onClose")}})},"openIn3DViewer");return(o,t)=>{const n=N("tooltip");return r(),b("div",Dt,[l("div",Rt,[k(e($),{class:"p-button-rounded p-button-text",onClick:a},{default:y(()=>[C(l("i",It,null,512),[[n,{value:e(Q)("load3d.openIn3DViewer"),showDelay:300},void 0,{right:!0}]])]),_:1})])])}}}),Ut={class:"pointer-events-none absolute top-0 left-0 size-full"},St={key:1,class:"pointer-events-auto absolute top-12 right-2 z-20"},zt=E({__name:"Load3D",props:{widget:{},nodeId:{}},setup(d){const a=d;function o(oe){return"node"in oe&&oe.node!==void 0}s(o,"isComponentWidget");const t=A(null);o(a.widget)?t.value=a.widget.node:a.nodeId&&H(()=>{t.value=be.rootGraph?.getNodeById(a.nodeId)||null});const{sceneConfig:n,modelConfig:c,cameraConfig:g,lightConfig:v,isRecording:u,isPreview:i,hasRecording:f,recordingDuration:D,animations:_,playing:R,selectedSpeed:T,selectedAnimation:F,loading:L,loadingMessage:q,initializeLoad3d:U,handleMouseEnter:B,handleMouseLeave:j,handleStartRecording:O,handleStopRecording:V,handleExportRecording:p,handleClearRecording:h,handleBackgroundImageUpdate:le,handleExportModel:re,handleModelDrop:ue,cleanup:ce}=xe(t),te=P(()=>X().get("Comfy.Load3D.3DViewerEnable"));return(oe,m)=>(r(),b("div",{class:"relative size-full",onMouseenter:m[11]||(m[11]=(...x)=>e(B)&&e(B)(...x)),onMouseleave:m[12]||(m[12]=(...x)=>e(j)&&e(j)(...x)),onPointerdown:m[13]||(m[13]=I(()=>{},["stop"])),onPointermove:m[14]||(m[14]=I(()=>{},["stop"])),onPointerup:m[15]||(m[15]=I(()=>{},["stop"]))},[t.value?(r(),S(ht,{key:0,"initialize-load3d":e(U),cleanup:e(ce),loading:e(L),"loading-message":e(q),"on-model-drop":e(i)?void 0:e(ue),"is-preview":e(i)},null,8,["initialize-load3d","cleanup","loading","loading-message","on-model-drop","is-preview"])):M("",!0),l("div",Ut,[k(rt,{"scene-config":e(n),"onUpdate:sceneConfig":m[0]||(m[0]=x=>G(n)?n.value=x:null),"model-config":e(c),"onUpdate:modelConfig":m[1]||(m[1]=x=>G(c)?c.value=x:null),"camera-config":e(g),"onUpdate:cameraConfig":m[2]||(m[2]=x=>G(g)?g.value=x:null),"light-config":e(v),"onUpdate:lightConfig":m[3]||(m[3]=x=>G(v)?v.value=x:null),onUpdateBackgroundImage:e(le),onExportModel:e(re)},null,8,["scene-config","model-config","camera-config","light-config","onUpdateBackgroundImage","onExportModel"]),e(_)&&e(_).length>0?(r(),S(xt,{key:0,animations:e(_),"onUpdate:animations":m[4]||(m[4]=x=>G(_)?_.value=x:null),playing:e(R),"onUpdate:playing":m[5]||(m[5]=x=>G(R)?R.value=x:null),"selected-speed":e(T),"onUpdate:selectedSpeed":m[6]||(m[6]=x=>G(T)?T.value=x:null),"selected-animation":e(F),"onUpdate:selectedAnimation":m[7]||(m[7]=x=>G(F)?F.value=x:null)},null,8,["animations","playing","selected-speed","selected-animation"])):M("",!0)]),te.value&&t.value?(r(),b("div",St,[k(Lt,{node:t.value},null,8,["node"])])):M("",!0),e(i)?M("",!0):(r(),b("div",{key:2,class:z(["pointer-events-auto absolute right-2 z-20",{"top-12":!te.value,"top-24":te.value}])},[k($t,{"is-recording":e(u),"onUpdate:isRecording":m[8]||(m[8]=x=>G(u)?u.value=x:null),"has-recording":e(f),"onUpdate:hasRecording":m[9]||(m[9]=x=>G(f)?f.value=x:null),"recording-duration":e(D),"onUpdate:recordingDuration":m[10]||(m[10]=x=>G(D)?D.value=x:null),onStartRecording:e(O),onStopRecording:e(V),onExportRecording:e(p),onClearRecording:e(h)},null,8,["is-recording","has-recording","recording-duration","onStartRecording","onStopRecording","onExportRecording","onClearRecording"])],2))],32))}});export{zt as _};
//# sourceMappingURL=Load3D.vue_vue_type_script_setup_true_lang-CdToXgY3.js.map

var ve=Object.defineProperty;var d=(n,a)=>ve(n,"name",{value:a,configurable:!0});import{bq as E,cB as K,cC as y,r as A,o as J,c6 as Q,k as q,c as b,d as r,A as k,l as C,br as e,q as $,e as s,u as T,x as W,E as z,p as U,s as w,F as Z,z as ee,h as le,t as H,I as L,T as me,b9 as G}from"./vendor-other-CSCK_VYO.js";import{s as _,k as ie,j as ae}from"./vendor-primevue-De0k_7Rd.js";import{e as Y,t as X,d as se,cE as fe,u as he,cF as be,cG as xe,q as ke,cH as ye}from"./index-DxFSMtyW.js";const we={class:"relative show-slider"},Me={class:"absolute top-0 left-12 rounded-lg bg-black/50 p-4 shadow-lg w-[150px]"},de=E({__name:"PopupSlider",props:K({icon:{default:"pi-expand"},tooltipText:{},min:{default:10},max:{default:150},step:{default:1}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const a=y(n,"modelValue"),o=A(!1),t=d(()=>{o.value=!o.value},"toggleSlider"),l=d(c=>{c.target.closest(".show-slider")||(o.value=!1)},"closeSlider");return J(()=>{document.addEventListener("click",l)}),Q(()=>{document.removeEventListener("click",l)}),(c,g)=>{const v=q("tooltip");return r(),b("div",we,[k(e(_),{class:"p-button-rounded p-button-text",onClick:t},{default:$(()=>[C(s("i",{class:T(["pi",c.icon,"text-lg text-white"])},null,2),[[v,{value:c.tooltipText,showDelay:300},void 0,{right:!0}]])]),_:1}),C(s("div",Me,[k(e(ie),{modelValue:a.value,"onUpdate:modelValue":g[0]||(g[0]=u=>a.value=u),class:"w-full",min:c.min,max:c.max,step:c.step},null,8,["modelValue","min","max","step"])],512),[[W,o.value]])])}}}),Ce={class:"flex flex-col"},$e={class:T(["pi","pi-camera","text-lg text-white"])},_e=E({__name:"CameraControls",props:{cameraType:{},cameraTypeModifiers:{},fov:{},fovModifiers:{}},emits:["update:cameraType","update:fov"],setup(n){const a=y(n,"cameraType"),o=y(n,"fov"),t=z(()=>a.value==="perspective"),l=d(()=>{a.value=a.value==="perspective"?"orthographic":"perspective"},"switchCamera");return(c,g)=>{const v=q("tooltip");return r(),b("div",Ce,[k(e(_),{class:"p-button-rounded p-button-text",onClick:l},{default:$(()=>[C(s("i",$e,null,512),[[v,{value:c.$t("load3d.switchCamera"),showDelay:300},void 0,{right:!0}]])]),_:1}),t.value?(r(),U(de,{key:0,modelValue:o.value,"onUpdate:modelValue":g[0]||(g[0]=u=>o.value=u),"tooltip-text":c.$t("load3d.fov")},null,8,["modelValue","tooltip-text"])):w("",!0)])}}}),De={class:"flex flex-col"},Re={class:"show-export-formats relative"},Ie={class:"pi pi-download text-lg text-white"},Le={class:"absolute top-0 left-12 rounded-lg bg-black/50 shadow-lg"},Se={class:"flex flex-col"},Be=E({__name:"ExportControls",emits:["exportModel"],setup(n,{emit:a}){const o=a,t=A(!1),l=[{label:"GLB",value:"glb"},{label:"OBJ",value:"obj"},{label:"STL",value:"stl"}],c=d(()=>{t.value=!t.value},"toggleExportFormats"),g=d(u=>{o("exportModel",u),t.value=!1},"exportModel"),v=d(u=>{u.target.closest(".show-export-formats")||(t.value=!1)},"closeExportFormatsList");return J(()=>{document.addEventListener("click",v)}),Q(()=>{document.removeEventListener("click",v)}),(u,i)=>{const h=q("tooltip");return r(),b("div",De,[s("div",Re,[k(e(_),{class:"p-button-rounded p-button-text",onClick:c},{default:$(()=>[C(s("i",Ie,null,512),[[h,{value:u.$t("load3d.exportModel"),showDelay:300},void 0,{right:!0}]])]),_:1}),C(s("div",Le,[s("div",Se,[(r(),b(Z,null,ee(l,R=>k(e(_),{key:R.value,class:"p-button-text text-white",onClick:d(D=>g(R.value),"onClick")},{default:$(()=>[le(H(R.label),1)]),_:2},1032,["onClick"])),64))])],512),[[W,t.value]])])])}}}),Ue={class:"flex flex-col"},Ve={key:0,class:"show-light-intensity relative"},Ee={class:"pi pi-sun text-lg text-white"},Pe={class:"absolute top-0 left-12 rounded-lg bg-black/50 p-4 shadow-lg",style:{width:"150px"}},ze=E({__name:"LightControls",props:{lightIntensity:{},lightIntensityModifiers:{},materialMode:{},materialModeModifiers:{}},emits:["update:lightIntensity","update:materialMode"],setup(n){const a=y(n,"lightIntensity"),o=y(n,"materialMode"),t=z(()=>o.value==="original"),l=A(!1),c=Y().get("Comfy.Load3D.LightIntensityMaximum"),g=Y().get("Comfy.Load3D.LightIntensityMinimum"),v=Y().get("Comfy.Load3D.LightAdjustmentIncrement"),u=d(()=>{l.value=!l.value},"toggleLightIntensity"),i=d(h=>{h.target.closest(".show-light-intensity")||(l.value=!1)},"closeLightSlider");return J(()=>{document.addEventListener("click",i)}),Q(()=>{document.removeEventListener("click",i)}),(h,R)=>{const D=q("tooltip");return r(),b("div",Ue,[t.value?(r(),b("div",Ve,[k(e(_),{class:"p-button-rounded p-button-text",onClick:u},{default:$(()=>[C(s("i",Ee,null,512),[[D,{value:h.$t("load3d.lightIntensity"),showDelay:300},void 0,{right:!0}]])]),_:1}),C(s("div",Pe,[k(e(ie),{modelValue:a.value,"onUpdate:modelValue":R[0]||(R[0]=M=>a.value=M),class:"w-full",min:e(g),max:e(c),step:e(v)},null,8,["modelValue","min","max","step"])],512),[[W,l.value]])])):w("",!0)])}}}),Te={class:"flex flex-col"},Ge={class:"show-up-direction relative"},Ae={class:"pi pi-arrow-up text-lg text-white"},Fe={class:"absolute top-0 left-12 rounded-lg bg-black/50 shadow-lg"},je={class:"flex flex-col"},Oe={key:0,class:"show-material-mode relative"},Ne={class:"pi pi-box text-lg text-white"},qe={class:"absolute top-0 left-12 rounded-lg bg-black/50 shadow-lg"},We={class:"flex flex-col"},He=E({__name:"ModelControls",props:K({hideMaterialMode:{type:Boolean,default:!1},isPlyModel:{type:Boolean,default:!1}},{materialMode:{},materialModeModifiers:{},upDirection:{},upDirectionModifiers:{}}),emits:["update:materialMode","update:upDirection"],setup(n){const a=y(n,"materialMode"),o=y(n,"upDirection"),t=A(!1),l=A(!1),c=["original","-x","+x","-y","+y","-z","+z"],g=z(()=>{const M=["original","normal","wireframe"];return n.isPlyModel&&M.splice(1,0,"pointCloud"),M}),v=d(()=>{t.value=!t.value,l.value=!1},"toggleUpDirection"),u=d(M=>{o.value=M,t.value=!1},"selectUpDirection"),i=d(()=>{l.value=!l.value,t.value=!1},"toggleMaterialMode"),h=d(M=>{a.value=M,l.value=!1},"selectMaterialMode"),R=d(M=>X(`load3d.materialModes.${M}`),"formatMaterialMode"),D=d(M=>{const V=M.target;V.closest(".show-up-direction")||(t.value=!1),V.closest(".show-material-mode")||(l.value=!1)},"closeSceneSlider");return J(()=>{document.addEventListener("click",D)}),Q(()=>{document.removeEventListener("click",D)}),(M,V)=>{const F=q("tooltip");return r(),b("div",Te,[s("div",Ge,[k(e(_),{class:"p-button-rounded p-button-text",onClick:v},{default:$(()=>[C(s("i",Ae,null,512),[[F,{value:e(X)("load3d.upDirection"),showDelay:300},void 0,{right:!0}]])]),_:1}),C(s("div",Fe,[s("div",je,[(r(),b(Z,null,ee(c,I=>k(e(_),{key:I,class:T(["p-button-text text-white",{"bg-blue-500":o.value===I}]),onClick:d(j=>u(I),"onClick")},{default:$(()=>[le(H(I.toUpperCase()),1)]),_:2},1032,["class","onClick"])),64))])],512),[[W,t.value]])]),M.hideMaterialMode?w("",!0):(r(),b("div",Oe,[k(e(_),{class:"p-button-rounded p-button-text",onClick:i},{default:$(()=>[C(s("i",Ne,null,512),[[F,{value:e(X)("load3d.materialMode"),showDelay:300},void 0,{right:!0}]])]),_:1}),C(s("div",qe,[s("div",We,[(r(!0),b(Z,null,ee(g.value,I=>(r(),U(e(_),{key:I,class:T(["p-button-text whitespace-nowrap text-white",{"bg-blue-500":a.value===I}]),onClick:d(j=>h(I),"onClick")},{default:$(()=>[le(H(R(I)),1)]),_:2},1032,["class","onClick"]))),128))])],512),[[W,l.value]])]))])}}}),Je={class:"flex flex-col"},Ke={class:"pi pi-table text-lg text-white"},Qe={key:0},Xe={class:"pi pi-palette text-lg text-white"},Ye=["value"],Ze={key:1},et={class:"pi pi-image text-lg text-white"},tt={key:2},ot={class:"pi pi-globe text-lg text-white"},lt={key:4},nt={class:"pi pi-times text-lg text-white"},at=E({__name:"SceneControls",props:{showGrid:{type:Boolean},showGridModifiers:{},backgroundColor:{},backgroundColorModifiers:{},backgroundImage:{},backgroundImageModifiers:{},backgroundRenderMode:{default:"tiled"},backgroundRenderModeModifiers:{},fov:{},fovModifiers:{}},emits:K(["updateBackgroundImage"],["update:showGrid","update:backgroundColor","update:backgroundImage","update:backgroundRenderMode","update:fov"]),setup(n,{emit:a}){const o=a,t=y(n,"showGrid"),l=y(n,"backgroundColor"),c=y(n,"backgroundImage"),g=y(n,"backgroundRenderMode"),v=y(n,"fov"),u=z(()=>c.value&&c.value!==""),i=A(null),h=A(null),R=d(()=>{t.value=!t.value},"toggleGrid"),D=d(B=>{l.value=B},"updateBackgroundColor"),M=d(()=>{i.value?.click()},"openColorPicker"),V=d(()=>{h.value?.click()},"openImagePicker"),F=d(B=>{const P=B.target;P.files&&P.files[0]&&o("updateBackgroundImage",P.files[0])},"uploadBackgroundImage"),I=d(()=>{o("updateBackgroundImage",null)},"removeBackgroundImage"),j=d(()=>{g.value=g.value==="panorama"?"tiled":"panorama"},"toggleBackgroundRenderMode");return(B,P)=>{const O=q("tooltip");return r(),b("div",Je,[k(e(_),{class:T(["p-button-rounded p-button-text",{"p-button-outlined":t.value}]),onClick:R},{default:$(()=>[C(s("i",Ke,null,512),[[O,{value:B.$t("load3d.showGrid"),showDelay:300},void 0,{right:!0}]])]),_:1},8,["class"]),u.value?w("",!0):(r(),b("div",Qe,[k(e(_),{class:"p-button-rounded p-button-text",onClick:M},{default:$(()=>[C(s("i",Xe,null,512),[[O,{value:B.$t("load3d.backgroundColor"),showDelay:300},void 0,{right:!0}]]),s("input",{ref_key:"colorPickerRef",ref:i,type:"color",value:l.value,class:"pointer-events-none absolute m-0 h-0 w-0 p-0 opacity-0",onInput:P[0]||(P[0]=N=>D(N.target.value))},null,40,Ye)]),_:1})])),u.value?w("",!0):(r(),b("div",Ze,[k(e(_),{class:"p-button-rounded p-button-text",onClick:V},{default:$(()=>[C(s("i",et,null,512),[[O,{value:B.$t("load3d.uploadBackgroundImage"),showDelay:300},void 0,{right:!0}]]),s("input",{ref_key:"imagePickerRef",ref:h,type:"file",accept:"image/*",class:"pointer-events-none absolute m-0 h-0 w-0 p-0 opacity-0",onChange:F},null,544)]),_:1})])),u.value?(r(),b("div",tt,[k(e(_),{class:T(["p-button-rounded p-button-text",{"p-button-outlined":g.value==="panorama"}]),onClick:j},{default:$(()=>[C(s("i",ot,null,512),[[O,{value:B.$t("load3d.panoramaMode"),showDelay:300},void 0,{right:!0}]])]),_:1},8,["class"])])):w("",!0),u.value&&g.value==="panorama"?(r(),U(de,{key:3,modelValue:v.value,"onUpdate:modelValue":P[1]||(P[1]=N=>v.value=N),"tooltip-text":B.$t("load3d.fov")},null,8,["modelValue","tooltip-text"])):w("",!0),u.value?(r(),b("div",lt,[k(e(_),{class:"p-button-rounded p-button-text",onClick:I},{default:$(()=>[C(s("i",nt,null,512),[[O,{value:B.$t("load3d.removeBackgroundImage"),showDelay:300},void 0,{right:!0}]])]),_:1})])):w("",!0)])}}}),it={class:"show-menu relative"},st={class:"absolute top-0 left-12 rounded-lg bg-black/50 shadow-lg"},dt={class:"flex flex-col"},rt={class:"whitespace-nowrap text-white"},ut={class:"rounded-lg bg-smoke-700/30"},ct=E({__name:"Load3DControls",props:K({isSplatModel:{type:Boolean,default:!1},isPlyModel:{type:Boolean,default:!1}},{sceneConfig:{},sceneConfigModifiers:{},modelConfig:{},modelConfigModifiers:{},cameraConfig:{},cameraConfigModifiers:{},lightConfig:{},lightConfigModifiers:{}}),emits:K(["updateBackgroundImage","exportModel"],["update:sceneConfig","update:modelConfig","update:cameraConfig","update:lightConfig"]),setup(n,{emit:a}){const o=y(n,"sceneConfig"),t=y(n,"modelConfig"),l=y(n,"cameraConfig"),c=y(n,"lightConfig"),g=A(!1),v=A("scene"),u={scene:"load3d.scene",model:"load3d.model",camera:"load3d.camera",light:"load3d.light",export:"load3d.export"},i=z(()=>n.isSplatModel?["scene","model","camera"]:["scene","model","camera","light","export"]),h=z(()=>v.value==="scene"&&!!o.value),R=z(()=>v.value==="model"&&!!t.value),D=z(()=>v.value==="camera"&&!!l.value),M=z(()=>v.value==="light"&&!!c.value&&!!t.value),V=z(()=>v.value==="export"),F=d(()=>{g.value=!g.value},"toggleMenu"),I=d(S=>{v.value=S,g.value=!1},"selectCategory"),j=d(S=>`${{scene:"pi pi-image",model:"pi pi-box",camera:"pi pi-camera",light:"pi pi-sun",export:"pi pi-download"}[S]} text-white text-lg`,"getCategoryIcon"),B=a,P=d(S=>{B("updateBackgroundImage",S)},"handleBackgroundImageUpdate"),O=d(S=>{B("exportModel",S)},"handleExportModel"),N=d(S=>{S.target.closest(".show-menu")||(g.value=!1)},"closeSlider");return J(()=>{document.addEventListener("click",N)}),Q(()=>{document.removeEventListener("click",N)}),(S,p)=>(r(),b("div",{class:"pointer-events-auto absolute top-12 left-2 z-20 flex flex-col rounded-lg bg-smoke-700/30",onPointerdown:p[11]||(p[11]=L(()=>{},["stop"])),onPointermove:p[12]||(p[12]=L(()=>{},["stop"])),onPointerup:p[13]||(p[13]=L(()=>{},["stop"])),onWheel:p[14]||(p[14]=L(()=>{},["stop"]))},[s("div",it,[k(e(_),{class:"p-button-rounded p-button-text",onClick:F},{default:$(()=>p[15]||(p[15]=[s("i",{class:"pi pi-bars text-lg text-white"},null,-1)])),_:1}),C(s("div",st,[s("div",dt,[(r(!0),b(Z,null,ee(i.value,f=>(r(),U(e(_),{key:f,class:T(["p-button-text flex w-full items-center justify-start",{"bg-smoke-600":v.value===f}]),onClick:d(ne=>I(f),"onClick")},{default:$(()=>[s("i",{class:T(j(f))},null,2),s("span",rt,H(S.$t(u[f])),1)]),_:2},1032,["class","onClick"]))),128))])],512),[[W,g.value]])]),C(s("div",ut,[h.value?(r(),U(at,{key:0,"show-grid":o.value.showGrid,"onUpdate:showGrid":p[0]||(p[0]=f=>o.value.showGrid=f),"background-color":o.value.backgroundColor,"onUpdate:backgroundColor":p[1]||(p[1]=f=>o.value.backgroundColor=f),"background-image":o.value.backgroundImage,"onUpdate:backgroundImage":p[2]||(p[2]=f=>o.value.backgroundImage=f),"background-render-mode":o.value.backgroundRenderMode,"onUpdate:backgroundRenderMode":p[3]||(p[3]=f=>o.value.backgroundRenderMode=f),fov:l.value.fov,"onUpdate:fov":p[4]||(p[4]=f=>l.value.fov=f),onUpdateBackgroundImage:P},null,8,["show-grid","background-color","background-image","background-render-mode","fov"])):w("",!0),R.value?(r(),U(He,{key:1,"material-mode":t.value.materialMode,"onUpdate:materialMode":p[5]||(p[5]=f=>t.value.materialMode=f),"up-direction":t.value.upDirection,"onUpdate:upDirection":p[6]||(p[6]=f=>t.value.upDirection=f),"hide-material-mode":S.isSplatModel,"is-ply-model":S.isPlyModel},null,8,["material-mode","up-direction","hide-material-mode","is-ply-model"])):w("",!0),D.value?(r(),U(_e,{key:2,"camera-type":l.value.cameraType,"onUpdate:cameraType":p[7]||(p[7]=f=>l.value.cameraType=f),fov:l.value.fov,"onUpdate:fov":p[8]||(p[8]=f=>l.value.fov=f)},null,8,["camera-type","fov"])):w("",!0),M.value?(r(),U(ze,{key:3,"light-intensity":c.value.intensity,"onUpdate:lightIntensity":p[9]||(p[9]=f=>c.value.intensity=f),"material-mode":t.value.materialMode,"onUpdate:materialMode":p[10]||(p[10]=f=>t.value.materialMode=f)},null,8,["light-intensity","material-mode"])):w("",!0),V.value?(r(),U(Be,{key:4,onExportModel:O})):w("",!0)],512),[[W,v.value]])],32))}}),pt={key:0,class:"bg-opacity-50 absolute inset-0 z-50 flex items-center justify-center bg-black"},gt={class:"flex flex-col items-center"},vt={class:"mt-4 text-lg text-white"},mt=E({__name:"LoadingOverlay",props:{loading:{type:Boolean},loadingMessage:{}},setup(n){return(a,o)=>(r(),U(me,{name:"fade"},{default:$(()=>[a.loading?(r(),b("div",pt,[s("div",gt,[o[0]||(o[0]=s("div",{class:"spinner"},null,-1)),s("div",vt,H(a.loadingMessage),1)])])):w("",!0)]),_:1}))}}),ft=se(mt,[["__scopeId","data-v-b13965f5"]]),ht={key:0,class:"pointer-events-none absolute inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm"},bt={class:"rounded-lg border-2 border-dashed border-blue-400 bg-blue-500/20 px-6 py-4 text-lg font-medium text-blue-100"},xt=E({__name:"Load3DScene",props:{initializeLoad3d:{type:Function},cleanup:{type:Function},loading:{type:Boolean},loadingMessage:{},onModelDrop:{type:Function},isPreview:{type:Boolean}},setup(n){const a=n,o=A(null),{isDragging:t,dragMessage:l,handleDragOver:c,handleDragLeave:g,handleDrop:v}=fe({onModelDrop:d(async u=>{a.onModelDrop&&await a.onModelDrop(u)},"onModelDrop"),disabled:z(()=>a.isPreview)});return J(()=>{o.value&&a.initializeLoad3d(o.value)}),Q(()=>{a.cleanup()}),(u,i)=>(r(),b("div",{ref_key:"container",ref:o,class:"relative h-full w-full","data-capture-wheel":"true",onPointerdown:i[0]||(i[0]=L(()=>{},["stop"])),onPointermove:i[1]||(i[1]=L(()=>{},["stop"])),onPointerup:i[2]||(i[2]=L(()=>{},["stop"])),onMousedown:i[3]||(i[3]=L(()=>{},["stop"])),onMousemove:i[4]||(i[4]=L(()=>{},["stop"])),onMouseup:i[5]||(i[5]=L(()=>{},["stop"])),onContextmenu:i[6]||(i[6]=L(()=>{},["stop","prevent"])),onDragover:i[7]||(i[7]=L((...h)=>e(c)&&e(c)(...h),["prevent","stop"])),onDragleave:i[8]||(i[8]=L((...h)=>e(g)&&e(g)(...h),["stop"])),onDrop:i[9]||(i[9]=L((...h)=>e(v)&&e(v)(...h),["prevent","stop"]))},[k(ft,{loading:u.loading,"loading-message":u.loadingMessage},null,8,["loading","loading-message"]),!u.isPreview&&e(t)?(r(),b("div",ht,[s("div",bt,H(e(l)),1)])):w("",!0)],544))}}),kt={key:0,class:"pointer-events-auto absolute top-0 left-0 z-10 flex w-full items-center justify-center gap-2 pt-2"},yt=E({__name:"AnimationControls",props:{animations:{},animationsModifiers:{},playing:{type:Boolean},playingModifiers:{},selectedSpeed:{},selectedSpeedModifiers:{},selectedAnimation:{},selectedAnimationModifiers:{}},emits:["update:animations","update:playing","update:selectedSpeed","update:selectedAnimation"],setup(n){const a=y(n,"animations"),o=y(n,"playing"),t=y(n,"selectedSpeed"),l=y(n,"selectedAnimation"),c=[{name:"0.1x",value:.1},{name:"0.5x",value:.5},{name:"1x",value:1},{name:"1.5x",value:1.5},{name:"2x",value:2}],g=d(()=>{o.value=!o.value},"togglePlay");return(v,u)=>a.value&&a.value.length>0?(r(),b("div",kt,[k(e(_),{class:"p-button-rounded p-button-text",onClick:g},{default:$(()=>[s("i",{class:T(["pi",o.value?"pi-pause":"pi-play","text-lg text-white"])},null,2)]),_:1}),k(e(ae),{modelValue:t.value,"onUpdate:modelValue":u[0]||(u[0]=i=>t.value=i),options:c,"option-label":"name","option-value":"value",class:"w-24"},null,8,["modelValue"]),k(e(ae),{modelValue:l.value,"onUpdate:modelValue":u[1]||(u[1]=i=>l.value=i),options:a.value,"option-label":"name","option-value":"index",class:"w-32"},null,8,["modelValue","options"])])):w("",!0)}}),wt={class:"relative rounded-lg bg-smoke-700/30"},Mt={class:"flex flex-col gap-2"},Ct={class:"pi pi-download text-lg text-white"},$t={class:"pi pi-trash text-lg text-white"},_t={key:2,class:"mt-1 text-center text-xs text-white"},Dt=E({__name:"RecordingControls",props:{hasRecording:{type:Boolean},hasRecordingModifiers:{},isRecording:{type:Boolean},isRecordingModifiers:{},recordingDuration:{},recordingDurationModifiers:{}},emits:K(["startRecording","stopRecording","exportRecording","clearRecording"],["update:hasRecording","update:isRecording","update:recordingDuration"]),setup(n,{emit:a}){const o=y(n,"hasRecording"),t=y(n,"isRecording"),l=y(n,"recordingDuration"),c=a,g=d(()=>{t.value?c("stopRecording"):c("startRecording")},"toggleRecording"),v=d(()=>{c("exportRecording")},"handleExportRecording"),u=d(()=>{c("clearRecording")},"handleClearRecording"),i=d(h=>{const R=Math.floor(h/60),D=Math.floor(h%60);return`${R.toString().padStart(2,"0")}:${D.toString().padStart(2,"0")}`},"formatDuration");return(h,R)=>{const D=q("tooltip");return r(),b("div",wt,[s("div",Mt,[k(e(_),{class:T(["p-button-rounded p-button-text",{"p-button-danger":t.value,"recording-button-blink":t.value}]),onClick:g},{default:$(()=>[C(s("i",{class:T(["pi",t.value?"pi-circle-fill":"pi-video","text-lg text-white"])},null,2),[[D,{value:t.value?h.$t("load3d.stopRecording"):h.$t("load3d.startRecording"),showDelay:300},void 0,{right:!0}]])]),_:1},8,["class"]),o.value&&!t.value?(r(),U(e(_),{key:0,class:"p-button-rounded p-button-text",onClick:v},{default:$(()=>[C(s("i",Ct,null,512),[[D,{value:h.$t("load3d.exportRecording"),showDelay:300},void 0,{right:!0}]])]),_:1})):w("",!0),o.value&&!t.value?(r(),U(e(_),{key:1,class:"p-button-rounded p-button-text",onClick:u},{default:$(()=>[C(s("i",$t,null,512),[[D,{value:h.$t("load3d.clearRecording"),showDelay:300},void 0,{right:!0}]])]),_:1})):w("",!0),l.value&&l.value>0&&!t.value?(r(),b("div",_t,H(i(l.value)),1)):w("",!0)])])}}}),Rt=se(Dt,[["__scopeId","data-v-145dbaf6"]]),It={class:"relative rounded-lg bg-smoke-700/30"},Lt={class:"flex flex-col gap-2"},St={class:"pi pi-expand text-lg text-white"},Bt=E({__name:"ViewerControls",props:{node:{}},setup(n){const a=d(()=>{const o={node:n.node};he().showDialog({key:"global-load3d-viewer",title:X("load3d.viewer.title"),component:be,props:o,dialogComponentProps:{style:"width: 80vw; height: 80vh;",maximizable:!0,onClose:d(async()=>{await xe().handleViewerClose(o.node)},"onClose")}})},"openIn3DViewer");return(o,t)=>{const l=q("tooltip");return r(),b("div",It,[s("div",Lt,[k(e(_),{class:"p-button-rounded p-button-text",onClick:a},{default:$(()=>[C(s("i",St,null,512),[[l,{value:e(X)("load3d.openIn3DViewer"),showDelay:300},void 0,{right:!0}]])]),_:1})])])}}}),Ut={class:"pointer-events-none absolute top-0 left-0 size-full"},Vt={key:1,class:"pointer-events-auto absolute top-12 right-2 z-20"},Gt=E({__name:"Load3D",props:{widget:{},nodeId:{}},setup(n){const a=n;function o(oe){return"node"in oe&&oe.node!==void 0}d(o,"isComponentWidget");const t=A(null);o(a.widget)?t.value=a.widget.node:a.nodeId&&J(()=>{t.value=ke.rootGraph?.getNodeById(a.nodeId)||null});const{sceneConfig:l,modelConfig:c,cameraConfig:g,lightConfig:v,isRecording:u,isPreview:i,isSplatModel:h,isPlyModel:R,hasRecording:D,recordingDuration:M,animations:V,playing:F,selectedSpeed:I,selectedAnimation:j,loading:B,loadingMessage:P,initializeLoad3d:O,handleMouseEnter:N,handleMouseLeave:S,handleStartRecording:p,handleStopRecording:f,handleExportRecording:ne,handleClearRecording:re,handleBackgroundImageUpdate:ue,handleExportModel:ce,handleModelDrop:pe,cleanup:ge}=ye(t),te=z(()=>Y().get("Comfy.Load3D.3DViewerEnable"));return(oe,m)=>(r(),b("div",{class:"relative size-full",onMouseenter:m[11]||(m[11]=(...x)=>e(N)&&e(N)(...x)),onMouseleave:m[12]||(m[12]=(...x)=>e(S)&&e(S)(...x)),onPointerdown:m[13]||(m[13]=L(()=>{},["stop"])),onPointermove:m[14]||(m[14]=L(()=>{},["stop"])),onPointerup:m[15]||(m[15]=L(()=>{},["stop"]))},[t.value?(r(),U(xt,{key:0,"initialize-load3d":e(O),cleanup:e(ge),loading:e(B),"loading-message":e(P),"on-model-drop":e(i)?void 0:e(pe),"is-preview":e(i)},null,8,["initialize-load3d","cleanup","loading","loading-message","on-model-drop","is-preview"])):w("",!0),s("div",Ut,[k(ct,{"scene-config":e(l),"onUpdate:sceneConfig":m[0]||(m[0]=x=>G(l)?l.value=x:null),"model-config":e(c),"onUpdate:modelConfig":m[1]||(m[1]=x=>G(c)?c.value=x:null),"camera-config":e(g),"onUpdate:cameraConfig":m[2]||(m[2]=x=>G(g)?g.value=x:null),"light-config":e(v),"onUpdate:lightConfig":m[3]||(m[3]=x=>G(v)?v.value=x:null),"is-splat-model":e(h),"is-ply-model":e(R),onUpdateBackgroundImage:e(ue),onExportModel:e(ce)},null,8,["scene-config","model-config","camera-config","light-config","is-splat-model","is-ply-model","onUpdateBackgroundImage","onExportModel"]),e(V)&&e(V).length>0?(r(),U(yt,{key:0,animations:e(V),"onUpdate:animations":m[4]||(m[4]=x=>G(V)?V.value=x:null),playing:e(F),"onUpdate:playing":m[5]||(m[5]=x=>G(F)?F.value=x:null),"selected-speed":e(I),"onUpdate:selectedSpeed":m[6]||(m[6]=x=>G(I)?I.value=x:null),"selected-animation":e(j),"onUpdate:selectedAnimation":m[7]||(m[7]=x=>G(j)?j.value=x:null)},null,8,["animations","playing","selected-speed","selected-animation"])):w("",!0)]),te.value&&t.value?(r(),b("div",Vt,[k(Bt,{node:t.value},null,8,["node"])])):w("",!0),e(i)?w("",!0):(r(),b("div",{key:2,class:T(["pointer-events-auto absolute right-2 z-20",{"top-12":!te.value,"top-24":te.value}])},[k(Rt,{"is-recording":e(u),"onUpdate:isRecording":m[8]||(m[8]=x=>G(u)?u.value=x:null),"has-recording":e(D),"onUpdate:hasRecording":m[9]||(m[9]=x=>G(D)?D.value=x:null),"recording-duration":e(M),"onUpdate:recordingDuration":m[10]||(m[10]=x=>G(M)?M.value=x:null),onStartRecording:e(p),onStopRecording:e(f),onExportRecording:e(ne),onClearRecording:e(re)},null,8,["is-recording","has-recording","recording-duration","onStartRecording","onStopRecording","onExportRecording","onClearRecording"])],2))],32))}});export{Gt as _};
//# sourceMappingURL=Load3D.vue_vue_type_script_setup_true_lang-B4L9yzzJ.js.map

var Pt=Object.defineProperty;var nt=i=>{throw TypeError(i)};var Ct=(i,e,r)=>e in i?Pt(i,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[e]=r;var k=(i,e,r)=>Ct(i,typeof e!="symbol"?e+"":e,r),st=(i,e,r)=>e.has(i)||nt("Cannot "+r);var o=(i,e,r)=>(st(i,e,"read from private field"),r?r.call(i):e.get(i)),c=(i,e,r)=>e.has(i)?nt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,r),Ke=(i,e,r,n)=>(st(i,e,"write to private field"),n?n.call(i,r):e.set(i,r),r);import{c as W,a as s,o as Dt,f as H,d as ht,t as Xe,s as Ye}from"../chunks/DPVjZE23.js";import{p as de,f as A,n as me,a as ue,ab as L,g as t,Q as f,a9 as Q,k as y,l as m,a8 as ft,t as pe,s as te,ao as Qe,X as Tt}from"../chunks/DY2_4wOY.js";import{i as ie,c as Y,b as xt}from"../chunks/7pWQ6Tvy.js";import{b as O,o as Ot,C as vt,w as at,u as pt,g as gt,n as tt,a as _t,m as Ae,c as kt,P as ge}from"../chunks/DlQZkCTR.js";import{i as Nt,a as It,u as Et,o as Ft,b as St,F as Kt,P as At,c as Lt,g as lt,d as Ht,E as Rt,e as Mt}from"../chunks/BDdeBrKd.js";import{I as jt,s as ne,a as we,e as dt,c as be,i as ut}from"../chunks/DDeXuCXh.js";import{s as Le,r as Je,p as g}from"../chunks/DxLn0n8K.js";import{g as yt}from"../chunks/_SOF9ids.js";import{L as ct}from"../chunks/BSJfdZKC.js";function zt(i,e){de(e,!0);/**
 * @license @lucide/svelte v0.507.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */let r=Je(e,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}]];jt(i,Le({name:"house"},()=>r,{get iconNode(){return n},children:(d,v)=>{var u=W(),D=A(u);ne(D,()=>e.children??me),s(d,u)},$$slots:{default:!0}})),ue()}function ot(i,e,r={}){const{immediate:n=!0}=r,d=O(!1);let v;function u(){v&&(clearTimeout(v),v=null)}function D(){d.current=!1,u()}function T(...R){u(),d.current=!0,v=setTimeout(()=>{d.current=!1,v=null,i(...R)},e)}return n&&(d.current=!0,Nt&&T()),Ot(()=>{D()}),{isPending:O.readonly(d),start:T,stop:D}}const Bt="data-tooltip-content",Wt="data-tooltip-trigger";var Pe,_e,$,He,Re;class Gt{constructor(e){k(this,"opts");c(this,Pe,Q(!0));k(this,"isPointerInTransit",O(!1));c(this,_e);c(this,$,Q(null));c(this,He,()=>{this.opts.skipDelayDuration.current!==0&&o(this,_e).start()});c(this,Re,()=>{o(this,_e).stop()});k(this,"onOpen",e=>{t(o(this,$))&&t(o(this,$))!==e&&t(o(this,$)).handleClose(),o(this,Re).call(this),this.isOpenDelayed=!1,f(o(this,$),e,!0)});k(this,"onClose",e=>{t(o(this,$))===e&&f(o(this,$),null),o(this,He).call(this)});k(this,"isTooltipOpen",e=>t(o(this,$))===e);this.opts=e,Ke(this,_e,ot(()=>{this.isOpenDelayed=!0},this.opts.skipDelayDuration.current,{immediate:!1}))}get isOpenDelayed(){return t(o(this,Pe))}set isOpenDelayed(e){f(o(this,Pe),e,!0)}}Pe=new WeakMap,_e=new WeakMap,$=new WeakMap,He=new WeakMap,Re=new WeakMap;var Ce,De,Te,xe,Oe,ke,Ne,le,ee,Ie,Me;class Ut{constructor(e,r){k(this,"opts");k(this,"provider");c(this,Ce,L(()=>this.opts.delayDuration.current??this.provider.opts.delayDuration.current));c(this,De,L(()=>this.opts.disableHoverableContent.current??this.provider.opts.disableHoverableContent.current));c(this,Te,L(()=>this.opts.disableCloseOnTriggerClick.current??this.provider.opts.disableCloseOnTriggerClick.current));c(this,xe,L(()=>this.opts.disabled.current??this.provider.opts.disabled.current));c(this,Oe,L(()=>this.opts.ignoreNonKeyboardFocus.current??this.provider.opts.ignoreNonKeyboardFocus.current));c(this,ke,Q(null));c(this,Ne,Q(null));c(this,le,Q(!1));c(this,ee);c(this,Ie,L(()=>this.opts.open.current?t(o(this,le))?"delayed-open":"instant-open":"closed"));k(this,"handleOpen",()=>{o(this,ee).stop(),f(o(this,le),!1),this.opts.open.current=!0});k(this,"handleClose",()=>{o(this,ee).stop(),this.opts.open.current=!1});c(this,Me,()=>{o(this,ee).stop();const e=!this.provider.isOpenDelayed,r=this.delayDuration??0;e||r===0?(f(o(this,le),r>0&&e,!0),this.opts.open.current=!0):o(this,ee).start()});k(this,"onTriggerEnter",()=>{o(this,Me).call(this)});k(this,"onTriggerLeave",()=>{this.disableHoverableContent?this.handleClose():o(this,ee).stop()});this.opts=e,this.provider=r,Ke(this,ee,ot(()=>{f(o(this,le),!0),this.opts.open.current=!0},this.delayDuration??0,{immediate:!1})),at(()=>this.delayDuration,()=>{this.delayDuration!==void 0&&Ke(this,ee,ot(()=>{f(o(this,le),!0),this.opts.open.current=!0},this.delayDuration,{immediate:!1}))}),at(()=>this.opts.open.current,n=>{n?this.provider.onOpen(this):this.provider.onClose(this)})}get delayDuration(){return t(o(this,Ce))}set delayDuration(e){f(o(this,Ce),e)}get disableHoverableContent(){return t(o(this,De))}set disableHoverableContent(e){f(o(this,De),e)}get disableCloseOnTriggerClick(){return t(o(this,Te))}set disableCloseOnTriggerClick(e){f(o(this,Te),e)}get disabled(){return t(o(this,xe))}set disabled(e){f(o(this,xe),e)}get ignoreNonKeyboardFocus(){return t(o(this,Oe))}set ignoreNonKeyboardFocus(e){f(o(this,Oe),e)}get contentNode(){return t(o(this,ke))}set contentNode(e){f(o(this,ke),e,!0)}get triggerNode(){return t(o(this,Ne))}set triggerNode(e){f(o(this,Ne),e,!0)}get stateAttr(){return t(o(this,Ie))}set stateAttr(e){f(o(this,Ie),e)}}Ce=new WeakMap,De=new WeakMap,Te=new WeakMap,xe=new WeakMap,Oe=new WeakMap,ke=new WeakMap,Ne=new WeakMap,le=new WeakMap,ee=new WeakMap,Ie=new WeakMap,Me=new WeakMap;var he,ye,X,je,ze,Be,We,Ge,Ue,Ze,Ee;class Zt{constructor(e,r){k(this,"opts");k(this,"root");c(this,he,O(!1));c(this,ye,Q(!1));c(this,X,L(()=>this.opts.disabled.current||this.root.disabled));k(this,"handlePointerUp",()=>{o(this,he).current=!1});c(this,je,()=>{t(o(this,X))||(o(this,he).current=!1)});c(this,ze,()=>{t(o(this,X))||(o(this,he).current=!0,document.addEventListener("pointerup",()=>{this.handlePointerUp()},{once:!0}))});c(this,Be,e=>{t(o(this,X))||e.pointerType!=="touch"&&(t(o(this,ye))||this.root.provider.isPointerInTransit.current||(this.root.onTriggerEnter(),f(o(this,ye),!0)))});c(this,We,()=>{t(o(this,X))||(this.root.onTriggerLeave(),f(o(this,ye),!1))});c(this,Ge,e=>{o(this,he).current||t(o(this,X))||this.root.ignoreNonKeyboardFocus&&!It(e.currentTarget)||this.root.handleOpen()});c(this,Ue,()=>{t(o(this,X))||this.root.handleClose()});c(this,Ze,()=>{this.root.disableCloseOnTriggerClick||t(o(this,X))||this.root.handleClose()});c(this,Ee,L(()=>{var e;return{id:this.opts.id.current,"aria-describedby":this.root.opts.open.current?(e=this.root.contentNode)==null?void 0:e.id:void 0,"data-state":this.root.stateAttr,"data-disabled":gt(t(o(this,X))),"data-delay-duration":`${this.root.delayDuration}`,[Wt]:"",tabindex:t(o(this,X))?void 0:0,disabled:this.opts.disabled.current,onpointerup:o(this,je),onpointerdown:o(this,ze),onpointermove:o(this,Be),onpointerleave:o(this,We),onfocus:o(this,Ge),onblur:o(this,Ue),onclick:o(this,Ze)}}));this.opts=e,this.root=r,pt({...e,onRefChange:n=>{this.root.triggerNode=n}})}get props(){return t(o(this,Ee))}set props(e){f(o(this,Ee),e)}}he=new WeakMap,ye=new WeakMap,X=new WeakMap,je=new WeakMap,ze=new WeakMap,Be=new WeakMap,We=new WeakMap,Ge=new WeakMap,Ue=new WeakMap,Ze=new WeakMap,Ee=new WeakMap;var Fe,Se;class Jt{constructor(e,r){k(this,"opts");k(this,"root");k(this,"onInteractOutside",e=>{var r;if(St(e.target)&&((r=this.root.triggerNode)!=null&&r.contains(e.target))&&this.root.disableCloseOnTriggerClick){e.preventDefault();return}this.opts.onInteractOutside.current(e),!e.defaultPrevented&&this.root.handleClose()});k(this,"onEscapeKeydown",e=>{var r,n;(n=(r=this.opts.onEscapeKeydown).current)==null||n.call(r,e),!e.defaultPrevented&&this.root.handleClose()});k(this,"onOpenAutoFocus",e=>{e.preventDefault()});k(this,"onCloseAutoFocus",e=>{e.preventDefault()});c(this,Fe,L(()=>({open:this.root.opts.open.current})));c(this,Se,L(()=>({id:this.opts.id.current,"data-state":this.root.stateAttr,"data-disabled":gt(this.root.disabled),style:{pointerEvents:"auto",outline:"none"},[Bt]:""})));k(this,"popperProps",{onInteractOutside:this.onInteractOutside,onEscapeKeydown:this.onEscapeKeydown,onOpenAutoFocus:this.onOpenAutoFocus,onCloseAutoFocus:this.onCloseAutoFocus});this.opts=e,this.root=r,pt({...e,onRefChange:n=>{this.root.contentNode=n},deps:()=>this.root.opts.open.current}),Et({triggerNode:()=>this.root.triggerNode,contentNode:()=>this.root.contentNode,enabled:()=>this.root.opts.open.current&&!this.root.disableHoverableContent,onPointerExit:()=>{this.root.provider.isTooltipOpen(this.root)&&this.root.handleClose()},setIsPointerInTransit:n=>{this.root.provider.isPointerInTransit.current=n},transitTimeout:this.root.provider.opts.skipDelayDuration.current}),Ft(()=>Dt(window,"scroll",n=>{const d=n.target;d&&d.contains(this.root.triggerNode)&&this.root.handleClose()}))}get snippetProps(){return t(o(this,Fe))}set snippetProps(e){f(o(this,Fe),e)}get props(){return t(o(this,Se))}set props(e){f(o(this,Se),e)}}Fe=new WeakMap,Se=new WeakMap;const mt=new vt("Tooltip.Provider"),rt=new vt("Tooltip.Root");function Vt(i){return mt.set(new Gt(i))}function Xt(i){return rt.set(new Ut(i,mt.get()))}function Yt(i){return new Zt(i,rt.get())}function Qt(i){return new Jt(i,rt.get())}function qt(i,e){de(e,!0);let r=g(e,"open",15,!1),n=g(e,"onOpenChange",3,tt);Xt({open:O.with(()=>r(),d=>{r(d),n()(d)}),delayDuration:O.with(()=>e.delayDuration),disableCloseOnTriggerClick:O.with(()=>e.disableCloseOnTriggerClick),disableHoverableContent:O.with(()=>e.disableHoverableContent),ignoreNonKeyboardFocus:O.with(()=>e.ignoreNonKeyboardFocus),disabled:O.with(()=>e.disabled)}),Kt(i,{children:(d,v)=>{var u=W(),D=A(u);ne(D,()=>e.children??me),s(d,u)},$$slots:{default:!0}}),ue()}var $t=H("<div><div><!></div></div>"),eo=H("<div><div><!></div></div>");function to(i,e){de(e,!0);let r=g(e,"id",19,_t),n=g(e,"ref",15,null),d=g(e,"side",3,"top"),v=g(e,"sideOffset",3,0),u=g(e,"align",3,"center"),D=g(e,"avoidCollisions",3,!0),T=g(e,"arrowPadding",3,0),R=g(e,"sticky",3,"partial"),oe=g(e,"hideWhenDetached",3,!1),re=g(e,"collisionPadding",3,0),b=g(e,"onInteractOutside",3,tt),G=g(e,"onEscapeKeydown",3,tt),U=g(e,"forceMount",3,!1),Z=Je(e,["$$slots","$$events","$$legacy","children","child","id","ref","side","sideOffset","align","avoidCollisions","arrowPadding","sticky","hideWhenDetached","collisionPadding","onInteractOutside","onEscapeKeydown","forceMount"]);const N=Qt({id:O.with(()=>r()),ref:O.with(()=>n(),x=>n(x)),onInteractOutside:O.with(()=>b()),onEscapeKeydown:O.with(()=>G())}),q=L(()=>({side:d(),sideOffset:v(),align:u(),avoidCollisions:D(),arrowPadding:T(),sticky:R(),hideWhenDetached:oe(),collisionPadding:re()})),se=L(()=>Ae(Z,t(q),N.props));var fe=W(),P=A(fe);{var C=x=>{At(x,Le(()=>t(se),()=>N.popperProps,{get enabled(){return N.root.opts.open.current},get id(){return r()},trapFocus:!1,loop:!1,preventScroll:!1,forceMount:!0,popper:(M,I)=>{let B=()=>I==null?void 0:I().props,J=()=>I==null?void 0:I().wrapperProps;const j=L(()=>Ae(B(),{style:lt("tooltip")}));var E=W(),V=A(E);{var F=p=>{var S=W(),_=A(S);{let h=L(()=>({props:t(j),wrapperProps:J(),...N.snippetProps}));ne(_,()=>e.child,()=>t(h))}s(p,S)},w=p=>{var S=$t();we(S,()=>({...J()}));var _=y(S);we(_,()=>({...t(j)}));var h=y(_);ne(h,()=>e.children??me),m(_),m(S),s(p,S)};ie(V,p=>{e.child?p(F):p(w,!1)})}s(M,E)},$$slots:{popper:!0}}))},a=x=>{var z=W(),M=A(z);{var I=B=>{Lt(B,Le(()=>t(se),()=>N.popperProps,{get present(){return N.root.opts.open.current},get id(){return r()},trapFocus:!1,loop:!1,preventScroll:!1,forceMount:!1,popper:(j,E)=>{let V=()=>E==null?void 0:E().props,F=()=>E==null?void 0:E().wrapperProps;const w=L(()=>Ae(V(),{style:lt("tooltip")}));var p=W(),S=A(p);{var _=l=>{var K=W(),ae=A(K);{let ve=L(()=>({props:t(w),wrapperProps:F(),...N.snippetProps}));ne(ae,()=>e.child,()=>t(ve))}s(l,K)},h=l=>{var K=eo();we(K,()=>({...F()}));var ae=y(K);we(ae,()=>({...t(w)}));var ve=y(ae);ne(ve,()=>e.children??me),m(ae),m(K),s(l,K)};ie(S,l=>{e.child?l(_):l(h,!1)})}s(j,p)},$$slots:{popper:!0}}))};ie(M,B=>{U()||B(I)},!0)}s(x,z)};ie(P,x=>{U()?x(C):x(a,!1)})}s(i,fe),ue()}var oo=H("<button><!></button>");function ro(i,e){de(e,!0);let r=g(e,"id",19,_t),n=g(e,"disabled",3,!1),d=g(e,"type",3,"button"),v=g(e,"ref",15,null),u=Je(e,["$$slots","$$events","$$legacy","children","child","id","disabled","type","ref"]);const D=Yt({id:O.with(()=>r()),disabled:O.with(()=>n()??!1),ref:O.with(()=>v(),R=>v(R))}),T=L(()=>Ae(u,D.props,{type:d()}));Ht(i,{get id(){return r()},children:(R,oe)=>{var re=W(),b=A(re);{var G=Z=>{var N=W(),q=A(N);ne(q,()=>e.child,()=>({props:t(T)})),s(Z,N)},U=Z=>{var N=oo();we(N,()=>({...t(T)}));var q=y(N);ne(q,()=>e.children??me),m(N),s(Z,N)};ie(b,Z=>{e.child?Z(G):Z(U,!1)})}s(R,re)},$$slots:{default:!0}}),ue()}function io(i,e){de(e,!0);let r=g(e,"delayDuration",3,700),n=g(e,"disableCloseOnTriggerClick",3,!1),d=g(e,"disableHoverableContent",3,!1),v=g(e,"disabled",3,!1),u=g(e,"ignoreNonKeyboardFocus",3,!1),D=g(e,"skipDelayDuration",3,300);Vt({delayDuration:O.with(()=>r()),disableCloseOnTriggerClick:O.with(()=>n()),disableHoverableContent:O.with(()=>d()),disabled:O.with(()=>v()),ignoreNonKeyboardFocus:O.with(()=>u()),skipDelayDuration:O.with(()=>D())});var T=W(),R=A(T);ne(R,()=>e.children??me),s(i,T),ue()}function qe(i,e){de(e,!0);let r=g(e,"ref",15,null),n=g(e,"sideOffset",3,4),d=Je(e,["$$slots","$$events","$$legacy","ref","class","sideOffset"]);var v=W(),u=A(v);{let D=L(()=>kt("bg-popover text-popover-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 overflow-hidden rounded-md border px-3 py-1.5 text-sm shadow-md",e.class));Y(u,()=>to,(T,R)=>{R(T,Le({get sideOffset(){return n()},get class(){return t(D)}},()=>d,{get ref(){return r()},set ref(oe){r(oe)}}))})}s(i,v),ue()}const $e=qt,et=ro,no=io;var so=H('<a class="block w-full h-full rounded-lg overflow-hidden cursor-pointer opacity-70 hover:opacity-100 transition-opacity"><img alt="" class="w-full h-full object-cover"/></a>'),ao=H("<!> <!>",1),lo=H('<div class="flex-none w-24 h-24"><!></div>'),uo=H('<img alt="" class="w-full h-full object-cover"/>'),co=H("<!> <!>",1),ho=H('<a class="flex-none w-full h-full rounded-lg overflow-hidden cursor-pointer opacity-70 hover:opacity-100 transition-opacity"><img alt="" class="w-full h-full object-cover"/></a>'),fo=H("<!> <!>",1),vo=H('<div class="flex-none w-24 h-24"><!></div>'),po=H('<!> <div class="flex-none w-28 h-28 rounded-lg overflow-hidden border-2 border-indigo-500 shadow-md"><!></div> <!>',1),go=H('<div class="h-full w-full flex items-center"><div class="w-full px-2 overflow-x-auto"><div class="flex items-center justify-start gap-3 min-w-max pb-2"><!></div></div></div>');function _o(i,e){de(e,!0);let r=g(e,"contextData",19,()=>({prev:[],next:[]}));function n(b,G){G.preventDefault(),yt(`/entities/${b}`,{replaceState:!1,noScroll:!0}),e.onSelectEntity(b)}function d(b){if(!b)return"";try{const G=b.endsWith("Z")?b:b+"Z",U=new Date(G);return console.log(U),U.toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1})}catch{try{return new Date(b).toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1})}catch{return b}}}let v;function u(b){Math.abs(b.deltaY)>=10&&b.deltaMode===0&&(b.preventDefault(),v.scrollLeft+=b.deltaY)}ft(()=>{if(v)return v.addEventListener("wheel",u,{passive:!1}),()=>{v.removeEventListener("wheel",u)}});const D=ge+"/api";var T=go(),R=y(T),oe=y(R),re=y(oe);Y(re,()=>no,(b,G)=>{G(b,{delayDuration:0,children:(U,Z)=>{var N=po(),q=A(N);dt(q,17,()=>r().prev,ut,(C,a)=>{var x=lo(),z=y(x);Y(z,()=>$e,(M,I)=>{I(M,{children:(B,J)=>{var j=ao(),E=A(j);Y(E,()=>et,(F,w)=>{w(F,{class:"w-full h-full",children:(p,S)=>{var _=so();_.__click=l=>n(t(a).id,l);var h=y(_);m(_),pe(l=>{be(_,"href",`/entities/${t(a).id}`),be(h,"src",l)},[()=>`${D}/thumbnails/${t(a).filepath.replace(/^\/+/,"")}`]),s(p,_)},$$slots:{default:!0}})});var V=te(E,2);Y(V,()=>qe,(F,w)=>{w(F,{children:(p,S)=>{Qe();var _=Xe();pe((h,l,K)=>Ye(_,`${h??""} ${l??""} ${K??""}`),[()=>{var h,l;return((l=(h=t(a).metadata_entries)==null?void 0:h.find(K=>K.key==="screen_name"))==null?void 0:l.value)||""},()=>{var h,l;return((l=(h=t(a).metadata_entries)==null?void 0:h.find(K=>K.key==="active_app"))==null?void 0:l.value)||""},()=>d(t(a).file_created_at)]),s(p,_)},$$slots:{default:!0}})}),s(B,j)},$$slots:{default:!0}})}),m(x),s(C,x)});var se=te(q,2),fe=y(se);Y(fe,()=>$e,(C,a)=>{a(C,{children:(x,z)=>{var M=co(),I=A(M);Y(I,()=>et,(J,j)=>{j(J,{class:"w-full h-full",children:(E,V)=>{var F=uo();pe(w=>be(F,"src",w),[()=>e.entity.image||`${D}/thumbnails/${e.entity.filepath.replace(/^\/+/,"")}`]),s(E,F)},$$slots:{default:!0}})});var B=te(I,2);Y(B,()=>qe,(J,j)=>{j(J,{children:(E,V)=>{Qe();var F=Xe();pe((w,p,S)=>Ye(F,`${w??""} ${p??""} ${S??""}`),[()=>{var w,p;return((p=(w=e.entity.metadata_entries)==null?void 0:w.find(S=>S.key==="screen_name"))==null?void 0:p.value)||""},()=>{var w,p;return((p=(w=e.entity.metadata_entries)==null?void 0:w.find(S=>S.key==="active_app"))==null?void 0:p.value)||""},()=>d(e.entity.file_created_at)]),s(E,F)},$$slots:{default:!0}})}),s(x,M)},$$slots:{default:!0}})}),m(se);var P=te(se,2);dt(P,17,()=>r().next,ut,(C,a)=>{var x=vo(),z=y(x);Y(z,()=>$e,(M,I)=>{I(M,{children:(B,J)=>{var j=fo(),E=A(j);Y(E,()=>et,(F,w)=>{w(F,{class:"w-full h-full",children:(p,S)=>{var _=ho();_.__click=l=>n(t(a).id,l);var h=y(_);m(_),pe(l=>{be(_,"href",`/entities/${t(a).id}`),be(h,"src",l)},[()=>`${D}/thumbnails/${t(a).filepath.replace(/^\/+/,"")}`]),s(p,_)},$$slots:{default:!0}})});var V=te(E,2);Y(V,()=>qe,(F,w)=>{w(F,{children:(p,S)=>{Qe();var _=Xe();pe((h,l,K)=>Ye(_,`${h??""} ${l??""} ${K??""}`),[()=>{var h,l;return((l=(h=t(a).metadata_entries)==null?void 0:h.find(K=>K.key==="screen_name"))==null?void 0:l.value)||""},()=>{var h,l;return((l=(h=t(a).metadata_entries)==null?void 0:h.find(K=>K.key==="active_app"))==null?void 0:l.value)||""},()=>d(t(a).file_created_at)]),s(p,_)},$$slots:{default:!0}})}),s(B,j)},$$slots:{default:!0}})}),m(x),s(C,x)}),s(U,N)},$$slots:{default:!0}})}),m(oe),m(R),xt(R,b=>v=b,()=>v),m(T),s(i,T),ue()}ht(["click"]);var yo=H('<button class="p-2 rounded-full hover:bg-gray-100 flex items-center gap-2 text-indigo-600 -ml-2"><!></button>'),mo=H('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 h-full w-full z-40 flex items-center justify-center"><!></div>'),bo=H('<div class="absolute inset-0 flex items-center justify-center z-50"><div class="bg-white p-4 rounded-lg shadow-lg flex items-center justify-center"><!></div></div>'),wo=H('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 h-full w-full z-40 flex flex-col"><div class="flex-grow flex flex-col"><div class="flex flex-col h-[calc(100vh-180px)] w-11/12 max-w-[95vw] mx-auto mt-6 rounded-t-md bg-white overflow-hidden relative"><!> <div class="flex-grow overflow-hidden"><div class="h-full px-10 py-4"><div class="flex flex-col md:flex-row h-full"><!> <!></div></div></div></div></div> <div class="h-[180px] w-full bg-gray-50 shadow-inner border-t"><div class="mx-auto h-full py-3"><!></div></div> <div class="sr-only"><button>Previous</button> <button>Next</button></div></div>'),Po=H("<p>Entity not found.</p>");function So(i,e){de(e,!0);const r=P=>{var C=yo();C.__click=oe;var a=y(C);zt(a,{size:24,class:"text-indigo-600"}),m(C),s(P,C)};let n=Q(null),d=Q(!0),v=Q(!1),u=Q(Tt({prev:[],next:[]}));const D=12;let T=Q(!0);function R(){f(T,!t(T)),localStorage.setItem("entityShowDetails",JSON.stringify(t(T)))}function oe(){yt("/")}function re(){t(u).prev&&t(u).prev.length>0&&Z(t(u).prev[t(u).prev.length-1].id)}function b(){t(u).next&&t(u).next.length>0&&Z(t(u).next[0].id)}function G(P){P.key==="ArrowLeft"?re():P.key==="ArrowRight"&&b()}ft(()=>{const P=localStorage.getItem("entityShowDetails");return P!==null&&f(T,JSON.parse(P),!0),(async()=>{const a=window.location.pathname.split("/").pop(),z=await fetch(`${ge}/api/entities/${a}`);f(n,await z.json(),!0),f(d,!1),t(n)&&t(n).library_id&&t(n).id&&U(t(n).library_id,t(n).id)})(),window.addEventListener("keydown",G),()=>{window.removeEventListener("keydown",G)}});async function U(P,C){try{const a=await fetch(`${ge}/api/libraries/${P}/entities/${C}/context?prev=${D}&next=${D}`);a.ok&&f(u,await a.json(),!0)}catch(a){console.error("Error fetching entity context:",a)}}async function Z(P){const C=`/entities/${P}`;window.history.pushState({id:P},"",C),f(v,!0);try{const a=typeof ge<"u"?ge:window.location.origin,x=await fetch(`${a}/api/entities/${P}`);if(f(n,await x.json(),!0),t(n)&&t(n).library_id&&t(n).id){const z=await fetch(`${ge}/api/libraries/${t(n).library_id}/entities/${t(n).id}/context?prev=${D}&next=${D}`);z.ok&&f(u,await z.json(),!0)}}catch(a){console.error("Error navigating to entity:",a)}finally{f(v,!1)}}var N=W(),q=A(N);{var se=P=>{var C=mo(),a=y(C);ct(a,{size:36,class:"text-primary animate-spin"}),m(C),s(P,C)},fe=P=>{var C=W(),a=A(C);{var x=M=>{var I=wo(),B=y(I),J=y(B),j=y(J);{var E=ce=>{var Ve=bo(),it=y(Ve),wt=y(it);ct(wt,{size:28,class:"text-primary animate-spin"}),m(it),m(Ve),s(ce,Ve)};ie(j,ce=>{t(v)&&ce(E)})}var V=te(j,2),F=y(V),w=y(F),p=y(w);Rt(p,{get entity(){return t(n)},get showDetails(){return t(T)},toggleDetails:R,get LeftIcon(){return r}});var S=te(p,2);{var _=ce=>{Mt(ce,{get entity(){return t(n)}})};ie(S,ce=>{t(T)&&ce(_)})}m(w),m(F),m(V),m(J),m(B);var h=te(B,2),l=y(h),K=y(l);_o(K,{get entity(){return t(n)},get contextData(){return t(u)},onSelectEntity:Z}),m(l),m(h);var ae=te(h,2),ve=y(ae);ve.__click=re;var bt=te(ve,2);bt.__click=b,m(ae),m(I),s(M,I)},z=M=>{var I=Po();s(M,I)};ie(a,M=>{t(n)?M(x):M(z,!1)},!0)}s(P,C)};ie(q,P=>{t(d)?P(se):P(fe,!1)})}s(i,N),ue()}ht(["click"]);export{So as component};

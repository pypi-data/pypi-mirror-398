[build-system]
requires = ["setuptools", "wheel"]
build-backend = "setuptools.build_meta"

[tool.setuptools.packages.find]
where = ["src"]

[project]
name = "typed-linq-collections"
version = "0.9.10"
description = "Complete LINQ, language integrated query, implementation for Python with full type annotations, comprehensive documentation, 100% test coverage, and queryable drop in replacements for the builtin collection types."
readme = "README.md"
authors = [
    { name = "Magnus Lidbom" }
]
license = "MIT"
license-files = [
    "LICENSE",
]
dependencies = []
classifiers = [
    "Operating System :: OS Independent",
    "Topic :: Software Development :: Libraries :: Python Modules",
    "Typing :: Typed"
]
requires-python = ">=3.13"

[project.urls]
Homepage = "https://github.com/mlidbom/typed_linq_collections"
Repository = "https://github.com/mlidbom/typed_linq_collections"
Issues = "https://github.com/mlidbom/typed_linq_collections/issues"

[tool.ruff]
extend-exclude = ["_lib", "_lib_patched", "manually_copied_in_libraries"]
line-length = 320


[tool.autopep8] # Formatter configuration
max_line_length = 320
ignore = ["E701", "E702", "E703", "E302", "E303"]  # Allow multiple statements + spacing
aggressive = 1  # Reduced aggressiveness to preserve more of our style

[tool.ruff.lint]

select = [
    "E", # pycodestyle
    "W", # pycodestyle warnings
    "F", # Pyflakes
    "UP", # pyupgrade
    "B", # flake8-bugbear
    "SIM", # flake8-simplify
    "I", # isort sorts imports etc
    "TC", # get's the correct imports into and out of TYPE_CHECKING blocks
    "ANN", # type annotations warnings
    "FA", # More type annotations fixes,
    "Q", #quoting style,
    "C4", # Comprehensions fixes
    "PT", # pytest style
    "RET", #return values
    "TID", # tidy imports
    "PERF", # performance
    "FURB", # refurbishing and modernizing Python codebases.
    "TRY", # proper exception use
    #"PGH", # yeah I should not be using noqa but instead specific ignores. Do look at this eventually..
    #"RUF", #ruff specific rules might be something interesting in here, but a ton of stull that I don't care about, or disagree with...
    # "PL", # pylint. Has some good advice, but way too many false positives for me to enable this now.
    #"PTH", apparently I'm doing paths all wrong. Might want to have a look sometime, for now it's all working and not under change.
]

isort.required-imports = ["from __future__ import annotations"] # since vital other warnings only appear if this line is there we want it in every file.

#select = ["ALL"]

flake8-pytest-style.parametrize-names-type = "csv"


ignore = [
    "E701", #E701 multiple statements on one line,
    "TC006", # [*] Add quotes to type expression in `typing.cast()`

    #below here is only needed when ALL is the select value
    #"Q", # rules on how quotes are use...
    "D", #Docstring rules
    "W292", # [*] No newline at end of file
    "PT003", #`scope='function'` is implied in `@pytest.fixture()` ... But I like being explicit. No need to remember the default
    "TRY003", #Avoid specifying long messages outside the exception class"
    "TRY002", #Create your own exception ... Not unless I need to catch it
]

[tool.pyright]
include = ["src", "tests"]
extraPaths = ["src", "tests"]
exclude = ["**/node_modules", "**/__pycache__", "**/.*", ".venv", "venv", "build", "dist", "*.egg-info"]
typeCheckingMode = "strict" # "off", "basic", "standard", "strict" # basedpyrightonly:  "recommended", "all"

#forced because of incompatibility between basedpyright and pyright, remove once we can use only basedpyright
reportIgnoreCommentWithoutRule = "none"
reportUnnecessaryTypeIgnoreComment = "none"

# not too sure about this one. Gives some hella confusing results making me wonder if it is really accurate....
reportImportCycles = "none"

#  "questionable if these are useful =  "",
reportUnusedCallResult = "none"

# we probably really don't need these
reportImplicitRelativeImport = "none"

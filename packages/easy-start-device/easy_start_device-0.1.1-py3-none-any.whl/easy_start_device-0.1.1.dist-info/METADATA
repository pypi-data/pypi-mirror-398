Metadata-Version: 2.4
Name: easy-start-device
Version: 0.1.1
Summary: 一个用于设备集成的Python包，简单易用
Home-page: https://gitee.com/guolei19850528/easy_start_device
Author: guolei
Author-email: 174000902@qq.com
Classifier: Programming Language :: Python :: 3
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Requires-Python: >=3.6
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: httpx
Requires-Dist: jsonschema
Dynamic: author
Dynamic: author-email
Dynamic: classifier
Dynamic: description
Dynamic: description-content-type
Dynamic: home-page
Dynamic: license-file
Dynamic: requires-dist
Dynamic: requires-python
Dynamic: summary

# easy-start-device

## 项目介绍

easy-start-device 是一个用于与天津博瑞皓科设备交互的 Python 包，提供了简洁易用的接口来发送通知消息。该包支持同步和异步两种通信方式，自动处理请求参数构建和响应验证，大大简化了与设备的交互流程。

## 功能特性

- **同步和异步支持**：提供同步和异步两种发送通知的方法
- **自动参数构建**：自动处理 API 请求所需的参数
- **响应验证**：内置 JSON Schema 验证，确保 API 响应符合预期
- **灵活配置**：支持自定义 API 地址、认证令牌等参数
- **错误处理**：自动处理请求和响应中的错误

## 技术栈

- Python 3.6+
- httpx (HTTP 客户端，支持同步和异步)
- jsonschema (用于验证 API 响应)

## 安装说明

### 使用 pip 安装

```bash
pip install easy-start-device
```

### 从源码安装

```bash
git clone <项目仓库地址>
cd easy_start_device
pip install -r requirements.txt
pip install -e .
```

## 使用示例

### 同步发送通知

```python
from easy_start_device.tjbrhk import Speaker

# 创建 Speaker 实例
speaker = Speaker(
    base_url="https://speaker.17laimai.cn/",
    token="your_token",
    id="your_device_id"
)

# 发送通知
success = speaker.notify(
    message="这是一条测试通知"
)

print(f"通知发送{'成功' if success else '失败'}")
```

### 异步发送通知

```python
import asyncio
from easy_start_device.tjbrhk import Speaker

async def send_notification():
    # 创建 Speaker 实例
    speaker = Speaker(
        base_url="https://speaker.17laimai.cn/",
        token="your_token",
        id="your_device_id"
    )

    # 异步发送通知
    success = await speaker.async_notify(
        message="这是一条异步测试通知"
    )

    print(f"异步通知发送{'成功' if success else '失败'}")

# 运行异步函数
asyncio.run(send_notification())
```

### 使用自定义 HTTP 客户端

```python
from easy_start_device.tjbrhk import Speaker
import httpx

# 创建自定义 HTTP 客户端
client = httpx.Client(timeout=60)

try:
    speaker = Speaker(
        base_url="https://speaker.17laimai.cn/",
        token="your_token",
        id="your_device_id"
    )

    # 使用自定义客户端发送通知
    success = speaker.notify(
        client=client,
        message="使用自定义客户端发送的通知"
    )

    print(f"通知发送{'成功' if success else '失败'}")
finally:
    client.close()
```

### 获取详细响应信息

```python
from easy_start_device.tjbrhk import Speaker

speaker = Speaker(
    base_url="https://speaker.17laimai.cn/",
    token="your_token",
    id="your_device_id"
)

# 获取详细响应信息
success, response_json, response = speaker.notify(
    message="测试通知",
    multiple_return_values=True
)

print(f"发送结果: {success}")
print(f"响应 JSON: {response_json}")
print(f"状态码: {response.status_code}")
```


## 依赖说明

| 依赖包 | 用途 |
| ------ | ---- |
| httpx | HTTP 客户端，支持同步和异步请求 |
| jsonschema | 用于验证 API 响应的 JSON Schema 验证器 |

## 版本历史

### 0.1.1 (当前版本)
- 初始发布版本
- 实现同步和异步通知发送功能
- 支持自动参数构建和响应验证

## 许可证

MIT License

## 作者信息

- 作者：郭磊
- 邮箱：174000902@qq.com


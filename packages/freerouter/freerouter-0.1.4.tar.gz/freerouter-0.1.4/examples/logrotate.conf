# FreeRouter 日志轮转配置示例
#
# 使用方法：
# 1. 复制此文件到 /etc/logrotate.d/freerouter
# 2. 修改路径为你的实际路径
# 3. logrotate 会每天自动运行（通过 cron）

# 配置文件路径（根据实际情况修改）
~/.config/freerouter/freerouter.log {
    # 每天轮转一次
    daily

    # 保留最近 7 天的日志
    rotate 7

    # 如果日志文件不存在，不报错
    missingok

    # 如果日志为空，不轮转
    notifempty

    # 压缩旧日志（节省空间）
    compress

    # 延迟压缩（最新的备份不压缩，方便查看）
    delaycompress

    # 轮转后创建新文件的权限
    create 0644 $USER $USER

    # 日期作为后缀（可选）
    # dateext
    # dateformat -%Y%m%d

    # 如果日志超过 100MB，立即轮转（不等到第二天）
    size 100M

    # 轮转后执行的命令（可选）
    postrotate
        # 如果服务支持重新加载日志，可以在这里发送信号
        # kill -USR1 $(cat /path/to/freerouter.pid) 2>/dev/null || true
    endscript
}

# 示例：按周轮转（备选方案）
# ~/.config/freerouter/freerouter.log {
#     weekly
#     rotate 4
#     compress
#     missingok
#     notifempty
# }

# 示例：仅按大小轮转（高频场景）
# ~/.config/freerouter/freerouter.log {
#     size 50M
#     rotate 10
#     compress
#     missingok
#     notifempty
# }

# TestIO Customer API Configuration
TESTIO_CUSTOMER_API_BASE_URL=https://api.stage-a.space/customer/v2
TESTIO_CUSTOMER_API_TOKEN=
TESTIO_CUSTOMER_ID=12345
TESTIO_CUSTOMER_NAME=YourCompanyName
TESTIO_PRODUCT_IDS=598,1024  # Optional: comma-separated product IDs to sync (leave empty for all products)

# Local Data Store Configuration
TESTIO_DB_PATH=~/.testio-mcp/cache.db
TESTIO_REFRESH_INTERVAL_SECONDS=3600  # Background refresh interval (default: 3600s/1hr, 0=disabled periodic refresh)
TESTIO_FORCE_INITIAL_SYNC=false  # Force initial sync on startup (bypasses staleness checks). Use --force-sync flag or set to true for development
TESTIO_SYNC_SINCE=  # Optional: date filter for sync (e.g., "2023-01-01", "90 days ago") - reduces API load for large test histories

# Unified Cache TTL Configuration (STORY-046, Epic-007)
CACHE_TTL_SECONDS=3600  # Unified staleness threshold for bugs, features, and test metadata (1 hour default)
# BREAKING CHANGE: Replaces BUG_CACHE_TTL_SECONDS, FEATURE_CACHE_TTL_SECONDS, and TEST_CACHE_TTL_SECONDS

# Bug Caching Configuration
BUG_CACHE_ENABLED=true  # Enable/disable bug caching entirely
BUG_CACHE_BYPASS=false  # DEBUG ONLY: Bypass bug caching (always fetch from API)

# HTTP Client Configuration
MAX_CONCURRENT_API_REQUESTS=10  # Concurrent API requests (overlaps network I/O)
CONNECTION_POOL_SIZE=20
CONNECTION_POOL_MAX_KEEPALIVE=20
HTTP_TIMEOUT_SECONDS=90.0
MAX_ACQUIRE_TIMEOUT_SECONDS=10.0

# Database Concurrency Configuration (STORY-062 follow-up)
# These two semaphores are DECOUPLED for different purposes:
# - MAX_CONCURRENT_API_REQUESTS: Controls API calls (network I/O bound)
# - MAX_CONCURRENT_DB_WRITES: Controls DB writes (SQLite write serialization)
#
# SQLite Note: Even with WAL mode, SQLite serializes ALL writes.
# The DB semaphore limits how many sessions queue up waiting to write.
# Default=1 is most conservative (no concurrent write queueing).
# Values 2-5 allow API I/O overlap while limiting queued sessions.
MAX_CONCURRENT_DB_WRITES=1

# Logging Configuration
LOG_LEVEL=INFO
LOG_FORMAT=text # Default is "json" for structured logs
LOG_FILE=~/.testio-mcp/logs/server.log

# Auto-Acceptance Alert Configuration
AUTO_ACCEPTANCE_ALERT_THRESHOLD=0.20  # Alert when auto-acceptance rate exceeds 20%

# Playbook Thresholds - Health Indicator Configuration
# These thresholds determine health status (healthy/warning/critical) for key metrics.
# Values are 0.0-1.0 (e.g., 0.20 = 20%)
# "above" direction: high values are bad (rejection, auto-acceptance)
# "below" direction: low values are bad (review rate)
PLAYBOOK_REJECTION_WARNING=0.20      # Rejection rate warning threshold (default: 20%)
PLAYBOOK_REJECTION_CRITICAL=0.35     # Rejection rate critical threshold (default: 35%)
PLAYBOOK_AUTO_ACCEPTANCE_WARNING=0.20  # Auto-acceptance warning threshold (default: 20%)
PLAYBOOK_AUTO_ACCEPTANCE_CRITICAL=0.40 # Auto-acceptance critical threshold (default: 40%)
PLAYBOOK_REVIEW_WARNING=0.80         # Review rate warning threshold - below this is warning (default: 80%)
PLAYBOOK_REVIEW_CRITICAL=0.60        # Review rate critical threshold - below this is critical (default: 60%)

# Server Lifecycle Configuration
SHUTDOWN_GRACE_PERIOD_SECONDS=10.0  # Graceful shutdown timeout (allows background tasks to complete)

# Tool Enable/Disable Configuration
# Allowlist: comma-separated tool names to enable (all others disabled)
# ENABLED_TOOLS=health_check,list_products,list_tests,get_test_status,generate_ebr_report
# Denylist: comma-separated tool names to disable (all others enabled)
# DISABLED_TOOLS=get_database_stats,get_sync_history,get_problematic_tests
# Note: Cannot use both ENABLED_TOOLS and DISABLED_TOOLS simultaneously

[build-system]
build-backend = "hatchling.build"
requires = [ "hatchling" ]

[project]
name = "repute"
version = "0.1.5"
description = "Python package dependency analytics. Know what you depend on!"
readme = "README.md"
authors = [ { name = "Zach Kurtz", email = "zkurtz@gmail.com" } ]
requires-python = ">=3.10"
dependencies = [
  "attrs>=25.3",
  "click>=8",
  "dummio>=1.10",
  "orjson>=3.10.15",
  "pandahandler>=0.7.4",
  "pandas>=1.5",
  "pypistats>=1.8",
  "requests>=2.32.3",
  "tqdm>=4.67.1",
]

urls.Source = "https://github.com/zkurtz/repute"
scripts.repute = "repute.main:main"

[dependency-groups]
dev = [
  "bump-my-version>=0.30",
  "pre-commit==4.0.1",
  "pytest==8.3.4",
  "ruff==0.8.5",
  "ty==0.0.4",
]

[tool.uv]
package = true

[tool.uv.workspace]
members = [ "demo" ]

[tool.ruff]
line-length = 120

lint.select = [
  "D", # google-style docstrings
  # ruff defaults:
  "E4",
  # other rule groups:
  "E5",  # line length
  "E7",
  "E9",
  "F",
  "I",   # flake8-import-order
  "TID", # flake8-tidy-imports
]
lint.ignore = [
  "D202", # would require one blank line after the last section of a multi-line docstring
  "D203", # would require one blank line at start of class docstring
  "D213", # would require multi-line docstring to start with a hard return
  "D401", # would require imperative mood in docstring
  "D413", # would put blank line at end of each multiline docstring
]
lint.per-file-ignores."__init__.py" = [ "D104" ] # would require module-level documentation
lint.per-file-ignores."test_*.py" = [ "D" ]
lint.flake8-tidy-imports.ban-relative-imports = "all"

[tool.pytest.ini_options]
addopts = "--import-mode=importlib"
testpaths = [ "tests" ]

[tool.bumpversion]
current_version = "0.1.3"
parse = "(?P<major>\\d+)\\.(?P<minor>\\d+)\\.(?P<patch>\\d+)"
serialize = [ "{major}.{minor}.{patch}" ]
tag = false
allow_dirty = true
commit = false

[[tool.bumpversion.files]]
filename = "pyproject.toml"
search = 'version = "{current_version}"'
replace = 'version = "{new_version}"'

[tool.ty.src]
include = [ "repute", "tests" ]

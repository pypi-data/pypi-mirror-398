{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "RecvMessage",
  "oneOf": [
    {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "Response"
        }
      },
      "$ref": "#/$defs/Response",
      "required": [
        "type"
      ]
    },
    {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "const": "Update"
        }
      },
      "$ref": "#/$defs/VeilidUpdate",
      "required": [
        "type"
      ]
    }
  ],
  "$defs": {
    "AnswerStats": {
      "description": "Measurement of round-trip RPC question/answer performance",
      "type": "object",
      "properties": {
        "answers": {
          "description": "number of answers received in this span",
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "consecutive_answers_average": {
          "description": "average number of received answers before a lost answer in this span",
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "consecutive_answers_maximum": {
          "description": "maximum number of received answers before a lost answer in this span",
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "consecutive_answers_minimum": {
          "description": "minimum number of received answers before a lost answer in this span",
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "consecutive_lost_answers_average": {
          "description": "average number of timeouts before a received answer in this span",
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "consecutive_lost_answers_maximum": {
          "description": "maximum number of timeouts before a received answer in this span",
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "consecutive_lost_answers_minimum": {
          "description": "minimum number of timeouts before a received answer in this span",
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "lost_answers": {
          "description": "number of lost answers in this span",
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "questions": {
          "description": "number of questions sent in this span",
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "span": {
          "description": "total amount of time measured",
          "$ref": "#/$defs/TimestampDuration"
        }
      },
      "required": [
        "span",
        "questions",
        "answers",
        "lost_answers",
        "consecutive_answers_maximum",
        "consecutive_answers_average",
        "consecutive_answers_minimum",
        "consecutive_lost_answers_maximum",
        "consecutive_lost_answers_average",
        "consecutive_lost_answers_minimum"
      ]
    },
    "AttachmentState": {
      "description": "Attachment abstraction for network 'signal strength'.",
      "type": "string",
      "enum": [
        "Detached",
        "Attaching",
        "AttachedWeak",
        "AttachedGood",
        "AttachedStrong",
        "FullyAttached",
        "OverAttached",
        "Detaching"
      ]
    },
    "ByteCount": {
      "type": "string"
    },
    "CryptoSystemResponse": {
      "type": "object",
      "properties": {
        "cs_id": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        }
      },
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "InvalidId"
            }
          },
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "Release"
            }
          },
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "Kind"
            },
            "value": {
              "type": "string"
            }
          },
          "required": [
            "cs_op",
            "value"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "CachedDh"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "string"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "ComputeDh"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "string"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "GenerateSharedSecret"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "string"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "RandomBytes"
            },
            "value": {
              "type": "string"
            }
          },
          "required": [
            "cs_op",
            "value"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "SharedSecretLength"
            },
            "value": {
              "type": "integer",
              "format": "uint32",
              "minimum": 0
            }
          },
          "required": [
            "cs_op",
            "value"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "NonceLength"
            },
            "value": {
              "type": "integer",
              "format": "uint32",
              "minimum": 0
            }
          },
          "required": [
            "cs_op",
            "value"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "HashDigestLength"
            },
            "value": {
              "type": "integer",
              "format": "uint32",
              "minimum": 0
            }
          },
          "required": [
            "cs_op",
            "value"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "PublicKeyLength"
            },
            "value": {
              "type": "integer",
              "format": "uint32",
              "minimum": 0
            }
          },
          "required": [
            "cs_op",
            "value"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "SecretKeyLength"
            },
            "value": {
              "type": "integer",
              "format": "uint32",
              "minimum": 0
            }
          },
          "required": [
            "cs_op",
            "value"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "SignatureLength"
            },
            "value": {
              "type": "integer",
              "format": "uint32",
              "minimum": 0
            }
          },
          "required": [
            "cs_op",
            "value"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "DefaultSaltLength"
            },
            "value": {
              "type": "integer",
              "format": "uint32",
              "minimum": 0
            }
          },
          "required": [
            "cs_op",
            "value"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "AeadOverhead"
            },
            "value": {
              "type": "integer",
              "format": "uint32",
              "minimum": 0
            }
          },
          "required": [
            "cs_op",
            "value"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "CheckSharedSecret"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "null"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "CheckNonce"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "null"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "CheckHashDigest"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "null"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "CheckPublicKey"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "null"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "CheckSecretKey"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "null"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "CheckSignature"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "null"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "HashPassword"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "string"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "VerifyPassword"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "boolean"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "DeriveSharedSecret"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "string"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "RandomNonce"
            },
            "value": {
              "type": "string"
            }
          },
          "required": [
            "cs_op",
            "value"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "RandomSharedSecret"
            },
            "value": {
              "type": "string"
            }
          },
          "required": [
            "cs_op",
            "value"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "GenerateKeyPair"
            },
            "value": {
              "type": "string"
            }
          },
          "required": [
            "cs_op",
            "value"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "GenerateHash"
            },
            "value": {
              "type": "string"
            }
          },
          "required": [
            "cs_op",
            "value"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "ValidateKeyPair"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "boolean"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "ValidateHash"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "boolean"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "Sign"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "string"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "Verify"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "boolean"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "DecryptAead"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "string"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "EncryptAead"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "string"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "CryptNoAuth"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "string"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "cs_op"
          ]
        }
      ],
      "required": [
        "cs_id"
      ]
    },
    "DHTRecordDescriptor": {
      "description": "DHT Record Descriptor",
      "type": "object",
      "properties": {
        "key": {
          "description": "DHT Key = Hash(ownerKeyKind) of: [ ownerKeyValue, schema ]",
          "type": "string"
        },
        "owner": {
          "description": "The public key of the owner",
          "type": "string"
        },
        "owner_secret": {
          "description": "If this key is being created: Some(the secret key of the owner)\nIf this key is just being opened: None",
          "type": [
            "string",
            "null"
          ]
        },
        "schema": {
          "description": "The schema in use associated with the key",
          "$ref": "#/$defs/DHTSchema"
        }
      },
      "required": [
        "key",
        "owner",
        "schema"
      ]
    },
    "DHTRecordReport": {
      "description": "DHT Record Report",
      "type": "object",
      "properties": {
        "local_seqs": {
          "description": "The sequence numbers of each subkey requested from a locally stored DHT Record",
          "type": "array",
          "items": {
            "$ref": "#/$defs/ValueSeqNum"
          }
        },
        "network_seqs": {
          "description": "The sequence numbers of each subkey requested from the DHT over the network",
          "type": "array",
          "items": {
            "$ref": "#/$defs/ValueSeqNum"
          }
        },
        "offline_subkeys": {
          "description": "The subkeys that have been writen offline that still need to be flushed",
          "$ref": "#/$defs/ValueSubkeyRangeSet"
        },
        "subkeys": {
          "description": "The actual subkey range within the schema being reported on\nThis may be a subset of the requested range if it exceeds the schema limits\nor has more than `DHTSchema::MAX_SUBKEY_COUNT` (1024) subkeys",
          "$ref": "#/$defs/ValueSubkeyRangeSet"
        }
      },
      "required": [
        "subkeys",
        "offline_subkeys",
        "local_seqs",
        "network_seqs"
      ]
    },
    "DHTSchema": {
      "description": "Enum over all the supported DHT Schemas",
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "kind": {
              "type": "string",
              "const": "DFLT"
            }
          },
          "$ref": "#/$defs/DHTSchemaDFLT",
          "required": [
            "kind"
          ]
        },
        {
          "type": "object",
          "properties": {
            "kind": {
              "type": "string",
              "const": "SMPL"
            }
          },
          "$ref": "#/$defs/DHTSchemaSMPL",
          "required": [
            "kind"
          ]
        }
      ]
    },
    "DHTSchemaDFLT": {
      "description": "Default DHT Schema (DFLT)",
      "type": "object",
      "properties": {
        "o_cnt": {
          "description": "Owner subkey count",
          "type": "integer",
          "format": "uint16",
          "maximum": 65535,
          "minimum": 0
        }
      },
      "required": [
        "o_cnt"
      ]
    },
    "DHTSchemaSMPL": {
      "description": "Simple DHT Schema (SMPL)",
      "type": "object",
      "properties": {
        "members": {
          "description": "Members",
          "type": "array",
          "items": {
            "$ref": "#/$defs/DHTSchemaSMPLMember"
          }
        },
        "o_cnt": {
          "description": "Owner subkey count",
          "type": "integer",
          "format": "uint16",
          "maximum": 65535,
          "minimum": 0
        }
      },
      "required": [
        "o_cnt",
        "members"
      ]
    },
    "DHTSchemaSMPLMember": {
      "description": "Simple DHT Schema (SMPL) Member",
      "type": "object",
      "properties": {
        "m_cnt": {
          "description": "Member subkey count",
          "type": "integer",
          "format": "uint16",
          "maximum": 65535,
          "minimum": 0
        },
        "m_key": {
          "description": "Member key",
          "type": "string"
        }
      },
      "required": [
        "m_key",
        "m_cnt"
      ]
    },
    "DhtTransactionResponse": {
      "type": "object",
      "properties": {
        "dhttx_id": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        }
      },
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "dhttx_op": {
              "type": "string",
              "const": "InvalidId"
            }
          },
          "required": [
            "dhttx_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "dhttx_op": {
              "type": "string",
              "const": "Release"
            }
          },
          "required": [
            "dhttx_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "dhttx_op": {
              "type": "string",
              "const": "Commit"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "null"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "dhttx_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "dhttx_op": {
              "type": "string",
              "const": "Rollback"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "null"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "dhttx_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "dhttx_op": {
              "type": "string",
              "const": "Get"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "anyOf": [
                    {
                      "$ref": "#/$defs/ValueData"
                    },
                    {
                      "type": "null"
                    }
                  ]
                }
              }
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "dhttx_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "dhttx_op": {
              "type": "string",
              "const": "Set"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "anyOf": [
                    {
                      "$ref": "#/$defs/ValueData"
                    },
                    {
                      "type": "null"
                    }
                  ]
                }
              }
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "dhttx_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "dhttx_op": {
              "type": "string",
              "const": "Inspect"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "$ref": "#/$defs/DHTRecordReport"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "dhttx_op"
          ]
        }
      ],
      "required": [
        "dhttx_id"
      ]
    },
    "LatencyStats": {
      "description": "Measurement of communications latency to this node over all RPC questions",
      "type": "object",
      "properties": {
        "average": {
          "description": "average latency over the ROLLING_LATENCIES_SIZE last latencies",
          "$ref": "#/$defs/TimestampDuration"
        },
        "fastest": {
          "description": "fastest latency in the ROLLING_LATENCIES_SIZE last latencies",
          "$ref": "#/$defs/TimestampDuration"
        },
        "p75": {
          "description": "p75 latency in the ROLLING_LATENCIES_SIZE",
          "$ref": "#/$defs/TimestampDuration",
          "default": "0"
        },
        "p90": {
          "description": "p90 latency in the ROLLING_LATENCIES_SIZE",
          "$ref": "#/$defs/TimestampDuration",
          "default": "0"
        },
        "slowest": {
          "description": "slowest latency in the ROLLING_LATENCIES_SIZE last latencies",
          "$ref": "#/$defs/TimestampDuration"
        },
        "tm75": {
          "description": "trimmed mean with lowest 75% latency in the ROLLING_LATENCIES_SIZE",
          "$ref": "#/$defs/TimestampDuration",
          "default": "0"
        },
        "tm90": {
          "description": "trimmed mean with lowest 90% latency in the ROLLING_LATENCIES_SIZE",
          "$ref": "#/$defs/TimestampDuration",
          "default": "0"
        }
      },
      "required": [
        "fastest",
        "average",
        "slowest"
      ]
    },
    "PeerStats": {
      "description": "Statistics for a peer in the routing table",
      "type": "object",
      "properties": {
        "latency": {
          "description": "latency stats for this peer",
          "anyOf": [
            {
              "$ref": "#/$defs/LatencyStats"
            },
            {
              "type": "null"
            }
          ],
          "default": null
        },
        "rpc_stats": {
          "description": "information about RPCs",
          "$ref": "#/$defs/RPCStats",
          "default": {
            "answer_ordered": {
              "answers": 0,
              "consecutive_answers_average": 0,
              "consecutive_answers_maximum": 0,
              "consecutive_answers_minimum": 0,
              "consecutive_lost_answers_average": 0,
              "consecutive_lost_answers_maximum": 0,
              "consecutive_lost_answers_minimum": 0,
              "lost_answers": 0,
              "questions": 0,
              "span": "0"
            },
            "answer_unordered": {
              "answers": 0,
              "consecutive_answers_average": 0,
              "consecutive_answers_maximum": 0,
              "consecutive_answers_minimum": 0,
              "consecutive_lost_answers_average": 0,
              "consecutive_lost_answers_maximum": 0,
              "consecutive_lost_answers_minimum": 0,
              "lost_answers": 0,
              "questions": 0,
              "span": "0"
            },
            "failed_to_send": 0,
            "first_consecutive_seen_ts": null,
            "last_question_ts": null,
            "last_seen_ts": null,
            "messages_rcvd": 0,
            "messages_sent": 0,
            "questions_in_flight": 0,
            "recent_lost_answers_ordered": 0,
            "recent_lost_answers_unordered": 0
          }
        },
        "state": {
          "description": "state stats for this peer",
          "$ref": "#/$defs/StateStats",
          "default": {
            "dead": "0",
            "punished": "0",
            "reason": {
              "can_not_send": "0",
              "failed_to_send": "0",
              "in_unreliable_ping_span": "0",
              "lost_answers": "0",
              "no_ping_response": "0",
              "not_seen_consecutively": "0",
              "too_many_lost_answers": "0"
            },
            "reliable": "0",
            "span": "0",
            "unreliable": "0"
          }
        },
        "time_added": {
          "description": "when the peer was added to the routing table",
          "$ref": "#/$defs/Timestamp"
        },
        "transfer": {
          "description": "transfer stats for this peer",
          "$ref": "#/$defs/TransferStatsDownUp",
          "default": {
            "down": {
              "average": "0",
              "maximum": "0",
              "minimum": "0",
              "total": "0"
            },
            "up": {
              "average": "0",
              "maximum": "0",
              "minimum": "0",
              "total": "0"
            }
          }
        }
      },
      "required": [
        "time_added"
      ]
    },
    "PeerTableData": {
      "description": "Describe a recently accessed peer",
      "type": "object",
      "properties": {
        "node_ids": {
          "description": "The node ids used by this peer",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "peer_address": {
          "description": "The peer's human readable address.",
          "type": "string"
        },
        "peer_stats": {
          "description": "Statistics we have collected on this peer.",
          "$ref": "#/$defs/PeerStats"
        }
      },
      "required": [
        "node_ids",
        "peer_address",
        "peer_stats"
      ]
    },
    "RPCStats": {
      "description": "Statistics for RPC operations performed on a node",
      "type": "object",
      "properties": {
        "answer_ordered": {
          "description": "ordered rpc answer stats for this peer",
          "$ref": "#/$defs/AnswerStats",
          "default": {
            "answers": 0,
            "consecutive_answers_average": 0,
            "consecutive_answers_maximum": 0,
            "consecutive_answers_minimum": 0,
            "consecutive_lost_answers_average": 0,
            "consecutive_lost_answers_maximum": 0,
            "consecutive_lost_answers_minimum": 0,
            "lost_answers": 0,
            "questions": 0,
            "span": "0"
          }
        },
        "answer_unordered": {
          "description": "unordered rpc answer stats for this peer",
          "$ref": "#/$defs/AnswerStats",
          "default": {
            "answers": 0,
            "consecutive_answers_average": 0,
            "consecutive_answers_maximum": 0,
            "consecutive_answers_minimum": 0,
            "consecutive_lost_answers_average": 0,
            "consecutive_lost_answers_maximum": 0,
            "consecutive_lost_answers_minimum": 0,
            "lost_answers": 0,
            "questions": 0,
            "span": "0"
          }
        },
        "failed_to_send": {
          "description": "number of messages that have failed to send or connections dropped since we last successfully sent one",
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "first_consecutive_seen_ts": {
          "description": "the timestamp of the first consecutive proof-of-life for this node (an answer or received question)",
          "anyOf": [
            {
              "$ref": "#/$defs/Timestamp"
            },
            {
              "type": "null"
            }
          ]
        },
        "last_question_ts": {
          "description": "when the peer was last questioned (either successfully or not) and we wanted an answer",
          "anyOf": [
            {
              "$ref": "#/$defs/Timestamp"
            },
            {
              "type": "null"
            }
          ]
        },
        "last_seen_ts": {
          "description": "when the peer was last seen for any reason, including when we first attempted to reach out to it",
          "anyOf": [
            {
              "$ref": "#/$defs/Timestamp"
            },
            {
              "type": "null"
            }
          ]
        },
        "messages_rcvd": {
          "description": "number of rpcs that have been received in the total entry time range",
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "messages_sent": {
          "description": "number of rpcs that have been sent in the total entry time range",
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "questions_in_flight": {
          "description": "number of questions issued that have yet to be answered",
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "recent_lost_answers_ordered": {
          "description": "number of answers that have been lost consecutively over an ordered channel",
          "type": "integer",
          "format": "uint32",
          "default": 0,
          "minimum": 0
        },
        "recent_lost_answers_unordered": {
          "description": "number of answers that have been lost consecutively over an unordered channel",
          "type": "integer",
          "format": "uint32",
          "default": 0,
          "minimum": 0
        }
      },
      "required": [
        "messages_sent",
        "messages_rcvd",
        "questions_in_flight",
        "failed_to_send"
      ]
    },
    "Response": {
      "type": "object",
      "properties": {
        "id": {
          "description": "Operation Id (pairs with Request, or empty if unidirectional).",
          "type": "integer",
          "format": "uint32",
          "default": 0,
          "minimum": 0
        }
      },
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "Control"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "string"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "GetState"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "$ref": "#/$defs/VeilidState"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "IsShutdown"
            },
            "value": {
              "type": "boolean"
            }
          },
          "required": [
            "op",
            "value"
          ]
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "Attach"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "null"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "Detach"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "null"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "GenerateMemberId"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "string"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "GetDhtRecordKey"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "string"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "NewPrivateRoute"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "$ref": "#/$defs/RouteBlob"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "NewCustomPrivateRoute"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "$ref": "#/$defs/RouteBlob"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "ImportRemotePrivateRoute"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "string"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "ReleasePrivateRoute"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "null"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "AppCallReply"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "null"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "NewRoutingContext"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "integer",
                  "format": "uint32",
                  "minimum": 0
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "RoutingContext"
            }
          },
          "$ref": "#/$defs/RoutingContextResponse",
          "required": [
            "op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "TransactDhtRecords"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "integer",
                  "format": "uint32",
                  "minimum": 0
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "DhtTransaction"
            }
          },
          "$ref": "#/$defs/DhtTransactionResponse",
          "required": [
            "op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "OpenTableDb"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "integer",
                  "format": "uint32",
                  "minimum": 0
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "DeleteTableDb"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "boolean"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "TableDb"
            }
          },
          "$ref": "#/$defs/TableDbResponse",
          "required": [
            "op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "TableDbTransaction"
            }
          },
          "$ref": "#/$defs/TableDbTransactionResponse",
          "required": [
            "op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "GetCryptoSystem"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "integer",
                  "format": "uint32",
                  "minimum": 0
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "BestCryptoSystem"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "integer",
                  "format": "uint32",
                  "minimum": 0
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "CryptoSystem"
            }
          },
          "$ref": "#/$defs/CryptoSystemResponse",
          "required": [
            "op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "VerifySignatures"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": [
                    "array",
                    "null"
                  ],
                  "items": {
                    "type": "string"
                  }
                }
              }
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "GenerateSignatures"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "GenerateKeyPair"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "string"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "Now"
            },
            "value": {
              "type": "string"
            }
          },
          "required": [
            "op",
            "value"
          ]
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "Debug"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "string"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "VeilidVersionString"
            },
            "value": {
              "type": "string"
            }
          },
          "required": [
            "op",
            "value"
          ]
        },
        {
          "type": "object",
          "properties": {
            "major": {
              "type": "integer",
              "format": "uint32",
              "minimum": 0
            },
            "minor": {
              "type": "integer",
              "format": "uint32",
              "minimum": 0
            },
            "op": {
              "type": "string",
              "const": "VeilidVersion"
            },
            "patch": {
              "type": "integer",
              "format": "uint32",
              "minimum": 0
            }
          },
          "required": [
            "op",
            "major",
            "minor",
            "patch"
          ]
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "DefaultVeilidConfig"
            },
            "value": {
              "type": "string"
            }
          },
          "required": [
            "op",
            "value"
          ]
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "VeilidFeatures"
            },
            "value": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "required": [
            "op",
            "value"
          ]
        },
        {
          "type": "object",
          "properties": {
            "op": {
              "type": "string",
              "const": "ValidCryptoKinds"
            },
            "value": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "required": [
            "op",
            "value"
          ]
        }
      ]
    },
    "RouteBlob": {
      "type": "object",
      "properties": {
        "blob": {
          "type": "string"
        },
        "route_id": {
          "type": "string"
        }
      },
      "required": [
        "route_id",
        "blob"
      ]
    },
    "RoutingContextResponse": {
      "type": "object",
      "properties": {
        "rc_id": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        }
      },
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "rc_op": {
              "type": "string",
              "const": "InvalidId"
            }
          },
          "required": [
            "rc_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "rc_op": {
              "type": "string",
              "const": "Release"
            }
          },
          "required": [
            "rc_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "rc_op": {
              "type": "string",
              "const": "WithDefaultSafety"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "integer",
                  "format": "uint32",
                  "minimum": 0
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "rc_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "rc_op": {
              "type": "string",
              "const": "WithSafety"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "integer",
                  "format": "uint32",
                  "minimum": 0
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "rc_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "rc_op": {
              "type": "string",
              "const": "WithSequencing"
            },
            "value": {
              "type": "integer",
              "format": "uint32",
              "minimum": 0
            }
          },
          "required": [
            "rc_op",
            "value"
          ]
        },
        {
          "type": "object",
          "properties": {
            "rc_op": {
              "type": "string",
              "const": "Safety"
            },
            "value": {
              "$ref": "#/$defs/SafetySelection"
            }
          },
          "required": [
            "rc_op",
            "value"
          ]
        },
        {
          "type": "object",
          "properties": {
            "rc_op": {
              "type": "string",
              "const": "AppCall"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "string"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "rc_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "rc_op": {
              "type": "string",
              "const": "AppMessage"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "null"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "rc_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "rc_op": {
              "type": "string",
              "const": "CreateDhtRecord"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "$ref": "#/$defs/DHTRecordDescriptor"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "rc_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "rc_op": {
              "type": "string",
              "const": "OpenDhtRecord"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "$ref": "#/$defs/DHTRecordDescriptor"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "rc_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "rc_op": {
              "type": "string",
              "const": "CloseDhtRecord"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "null"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "rc_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "rc_op": {
              "type": "string",
              "const": "DeleteDhtRecord"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "null"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "rc_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "rc_op": {
              "type": "string",
              "const": "GetDhtValue"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "anyOf": [
                    {
                      "$ref": "#/$defs/ValueData"
                    },
                    {
                      "type": "null"
                    }
                  ]
                }
              }
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "rc_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "rc_op": {
              "type": "string",
              "const": "SetDhtValue"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "anyOf": [
                    {
                      "$ref": "#/$defs/ValueData"
                    },
                    {
                      "type": "null"
                    }
                  ]
                }
              }
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "rc_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "rc_op": {
              "type": "string",
              "const": "WatchDhtValues"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "boolean"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "rc_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "rc_op": {
              "type": "string",
              "const": "CancelDhtWatch"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "boolean"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "rc_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "rc_op": {
              "type": "string",
              "const": "InspectDhtRecord"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "$ref": "#/$defs/DHTRecordReport"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "rc_op"
          ]
        }
      ],
      "required": [
        "rc_id"
      ]
    },
    "SafetySelection": {
      "description": "The choice of safety route to include in compiled routes.",
      "oneOf": [
        {
          "description": "Don't use a safety route, only specify the sequencing preference.",
          "type": "object",
          "properties": {
            "Unsafe": {
              "$ref": "#/$defs/Sequencing"
            }
          },
          "additionalProperties": false,
          "required": [
            "Unsafe"
          ]
        },
        {
          "description": "Use a safety route and parameters specified by a SafetySpec.",
          "type": "object",
          "properties": {
            "Safe": {
              "$ref": "#/$defs/SafetySpec"
            }
          },
          "additionalProperties": false,
          "required": [
            "Safe"
          ]
        }
      ]
    },
    "SafetySpec": {
      "description": "Options for safety routes (sender privacy).",
      "type": "object",
      "properties": {
        "hop_count": {
          "description": "Must be greater than 0.",
          "type": "integer",
          "format": "uint",
          "minimum": 0
        },
        "preferred_route": {
          "description": "Preferred safety route set id if it still exists.",
          "type": [
            "string",
            "null"
          ]
        },
        "sequencing": {
          "description": "Prefer connection-oriented sequenced protocols.",
          "$ref": "#/$defs/Sequencing"
        },
        "stability": {
          "description": "Prefer reliability over speed.",
          "$ref": "#/$defs/Stability"
        }
      },
      "required": [
        "hop_count",
        "stability",
        "sequencing"
      ]
    },
    "Sequencing": {
      "type": "string",
      "enum": [
        "NoPreference",
        "PreferOrdered",
        "EnsureOrdered"
      ]
    },
    "Stability": {
      "type": "string",
      "enum": [
        "LowLatency",
        "Reliable"
      ]
    },
    "StateReasonStats": {
      "description": "Measurement of what state reasons the node has been in over a time span",
      "type": "object",
      "properties": {
        "can_not_send": {
          "description": "time spent dead due to being unable to send",
          "$ref": "#/$defs/TimestampDuration"
        },
        "failed_to_send": {
          "description": "time spent unreliable because of failures to send",
          "$ref": "#/$defs/TimestampDuration"
        },
        "in_unreliable_ping_span": {
          "description": "time spent unreliable because we are in the unreliable ping span",
          "$ref": "#/$defs/TimestampDuration"
        },
        "lost_answers": {
          "description": "time spent unreliable because of lost answers",
          "$ref": "#/$defs/TimestampDuration"
        },
        "no_ping_response": {
          "description": "time spent dead because of no ping response",
          "$ref": "#/$defs/TimestampDuration"
        },
        "not_seen_consecutively": {
          "description": "time spent unreliable because of not being seen consecutively",
          "$ref": "#/$defs/TimestampDuration"
        },
        "too_many_lost_answers": {
          "description": "time spent dead because of too many lost answers",
          "$ref": "#/$defs/TimestampDuration"
        }
      },
      "required": [
        "can_not_send",
        "too_many_lost_answers",
        "no_ping_response",
        "failed_to_send",
        "lost_answers",
        "not_seen_consecutively",
        "in_unreliable_ping_span"
      ]
    },
    "StateStats": {
      "description": "Measurement of what states the node has been in over a time span",
      "type": "object",
      "properties": {
        "dead": {
          "description": "amount of time spent in a dead state",
          "$ref": "#/$defs/TimestampDuration"
        },
        "punished": {
          "description": "amount of time spent in a punished state",
          "$ref": "#/$defs/TimestampDuration"
        },
        "reason": {
          "description": "state reason stats for this peer",
          "$ref": "#/$defs/StateReasonStats",
          "default": {
            "can_not_send": "0",
            "failed_to_send": "0",
            "in_unreliable_ping_span": "0",
            "lost_answers": "0",
            "no_ping_response": "0",
            "not_seen_consecutively": "0",
            "too_many_lost_answers": "0"
          }
        },
        "reliable": {
          "description": "amount of time spent in a reliable state",
          "$ref": "#/$defs/TimestampDuration"
        },
        "span": {
          "description": "total amount of time measured",
          "$ref": "#/$defs/TimestampDuration"
        },
        "unreliable": {
          "description": "amount of time spent in an unreliable state",
          "$ref": "#/$defs/TimestampDuration"
        }
      },
      "required": [
        "span",
        "reliable",
        "unreliable",
        "dead",
        "punished"
      ]
    },
    "TableDbResponse": {
      "type": "object",
      "properties": {
        "db_id": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        }
      },
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "db_op": {
              "type": "string",
              "const": "InvalidId"
            }
          },
          "required": [
            "db_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "db_op": {
              "type": "string",
              "const": "Release"
            }
          },
          "required": [
            "db_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "db_op": {
              "type": "string",
              "const": "GetColumnCount"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "integer",
                  "format": "uint32",
                  "minimum": 0
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "db_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "db_op": {
              "type": "string",
              "const": "GetKeys"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "db_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "db_op": {
              "type": "string",
              "const": "Transact"
            },
            "value": {
              "type": "integer",
              "format": "uint32",
              "minimum": 0
            }
          },
          "required": [
            "db_op",
            "value"
          ]
        },
        {
          "type": "object",
          "properties": {
            "db_op": {
              "type": "string",
              "const": "Store"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "null"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "db_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "db_op": {
              "type": "string",
              "const": "Load"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": [
                    "string",
                    "null"
                  ]
                }
              }
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "db_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "db_op": {
              "type": "string",
              "const": "Delete"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": [
                    "string",
                    "null"
                  ]
                }
              }
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "db_op"
          ]
        }
      ],
      "required": [
        "db_id"
      ]
    },
    "TableDbTransactionResponse": {
      "type": "object",
      "properties": {
        "tx_id": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        }
      },
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "tx_op": {
              "type": "string",
              "const": "InvalidId"
            }
          },
          "required": [
            "tx_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "tx_op": {
              "type": "string",
              "const": "Commit"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "null"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "tx_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "tx_op": {
              "type": "string",
              "const": "Rollback"
            }
          },
          "required": [
            "tx_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "tx_op": {
              "type": "string",
              "const": "Store"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "null"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "tx_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "tx_op": {
              "type": "string",
              "const": "Delete"
            }
          },
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "value": {
                  "type": "null"
                }
              },
              "required": [
                "value"
              ]
            },
            {
              "type": "object",
              "properties": {
                "error": {
                  "$ref": "#/$defs/VeilidAPIError"
                }
              },
              "required": [
                "error"
              ]
            }
          ],
          "required": [
            "tx_op"
          ]
        }
      ],
      "required": [
        "tx_id"
      ]
    },
    "Timestamp": {
      "type": "string"
    },
    "TimestampDuration": {
      "type": "string"
    },
    "TransferStats": {
      "description": "Measurement of how much data has transferred to or from this node over a time span",
      "type": "object",
      "properties": {
        "average": {
          "description": "average rate over the ROLLING_TRANSFERS_SIZE last amounts",
          "$ref": "#/$defs/ByteCount"
        },
        "maximum": {
          "description": "maximum rate over the ROLLING_TRANSFERS_SIZE last amounts",
          "$ref": "#/$defs/ByteCount"
        },
        "minimum": {
          "description": "minimum rate over the ROLLING_TRANSFERS_SIZE last amounts",
          "$ref": "#/$defs/ByteCount"
        },
        "total": {
          "description": "total amount transferred ever",
          "$ref": "#/$defs/ByteCount"
        }
      },
      "required": [
        "total",
        "maximum",
        "average",
        "minimum"
      ]
    },
    "TransferStatsDownUp": {
      "description": "Transfer statistics from a node to our own (down) and",
      "type": "object",
      "properties": {
        "down": {
          "$ref": "#/$defs/TransferStats"
        },
        "up": {
          "$ref": "#/$defs/TransferStats"
        }
      },
      "required": [
        "down",
        "up"
      ]
    },
    "ValueData": {
      "description": "A DHT value and its metadata",
      "type": "object",
      "properties": {
        "data": {
          "description": "The contents of a DHT Record",
          "type": "string"
        },
        "seq": {
          "description": "An increasing sequence number to time-order the DHT record changes",
          "$ref": "#/$defs/ValueSeqNum"
        },
        "writer": {
          "description": "The public identity key of the writer of the data",
          "type": "string"
        }
      },
      "required": [
        "seq",
        "data",
        "writer"
      ]
    },
    "ValueSeqNum": {
      "description": "Value sequence number",
      "type": [
        "integer",
        "null"
      ],
      "format": "uint32",
      "minimum": 0
    },
    "ValueSubkeyRangeSet": {
      "type": "array",
      "items": {
        "type": "array",
        "maxItems": 2,
        "minItems": 2,
        "prefixItems": [
          {
            "type": "integer",
            "format": "uint32",
            "minimum": 0
          },
          {
            "type": "integer",
            "format": "uint32",
            "minimum": 0
          }
        ]
      }
    },
    "VeilidAPIError": {
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "kind": {
              "type": "string",
              "const": "NotInitialized"
            }
          },
          "required": [
            "kind"
          ]
        },
        {
          "type": "object",
          "properties": {
            "kind": {
              "type": "string",
              "const": "AlreadyInitialized"
            }
          },
          "required": [
            "kind"
          ]
        },
        {
          "type": "object",
          "properties": {
            "kind": {
              "type": "string",
              "const": "Timeout"
            }
          },
          "required": [
            "kind"
          ]
        },
        {
          "type": "object",
          "properties": {
            "kind": {
              "type": "string",
              "const": "TryAgain"
            },
            "message": {
              "type": "string"
            }
          },
          "required": [
            "kind",
            "message"
          ]
        },
        {
          "type": "object",
          "properties": {
            "kind": {
              "type": "string",
              "const": "Shutdown"
            }
          },
          "required": [
            "kind"
          ]
        },
        {
          "type": "object",
          "properties": {
            "kind": {
              "type": "string",
              "const": "InvalidTarget"
            },
            "message": {
              "type": "string"
            }
          },
          "required": [
            "kind",
            "message"
          ]
        },
        {
          "type": "object",
          "properties": {
            "kind": {
              "type": "string",
              "const": "NoConnection"
            },
            "message": {
              "type": "string"
            }
          },
          "required": [
            "kind",
            "message"
          ]
        },
        {
          "type": "object",
          "properties": {
            "key": {
              "type": "string"
            },
            "kind": {
              "type": "string",
              "const": "KeyNotFound"
            }
          },
          "required": [
            "kind",
            "key"
          ]
        },
        {
          "type": "object",
          "properties": {
            "kind": {
              "type": "string",
              "const": "Internal"
            },
            "message": {
              "type": "string"
            }
          },
          "required": [
            "kind",
            "message"
          ]
        },
        {
          "type": "object",
          "properties": {
            "kind": {
              "type": "string",
              "const": "Unimplemented"
            },
            "message": {
              "type": "string"
            }
          },
          "required": [
            "kind",
            "message"
          ]
        },
        {
          "type": "object",
          "properties": {
            "kind": {
              "type": "string",
              "const": "ParseError"
            },
            "message": {
              "type": "string"
            },
            "value": {
              "type": "string"
            }
          },
          "required": [
            "kind",
            "message",
            "value"
          ]
        },
        {
          "type": "object",
          "properties": {
            "argument": {
              "type": "string"
            },
            "context": {
              "type": "string"
            },
            "kind": {
              "type": "string",
              "const": "InvalidArgument"
            },
            "value": {
              "type": "string"
            }
          },
          "required": [
            "kind",
            "context",
            "argument",
            "value"
          ]
        },
        {
          "type": "object",
          "properties": {
            "argument": {
              "type": "string"
            },
            "context": {
              "type": "string"
            },
            "kind": {
              "type": "string",
              "const": "MissingArgument"
            }
          },
          "required": [
            "kind",
            "context",
            "argument"
          ]
        },
        {
          "type": "object",
          "properties": {
            "kind": {
              "type": "string",
              "const": "Generic"
            },
            "message": {
              "type": "string"
            }
          },
          "required": [
            "kind",
            "message"
          ]
        }
      ]
    },
    "VeilidAppCall": {
      "description": "Direct question blob passed to hosting application for processing to send an eventual AppReply.",
      "type": "object",
      "properties": {
        "call_id": {
          "type": "string"
        },
        "message": {
          "type": "string"
        },
        "route_id": {
          "type": [
            "string",
            "null"
          ]
        },
        "sender": {
          "type": [
            "string",
            "null"
          ]
        }
      },
      "required": [
        "message",
        "call_id"
      ]
    },
    "VeilidAppMessage": {
      "description": "Direct statement blob passed to hosting application for processing.",
      "type": "object",
      "properties": {
        "message": {
          "type": "string"
        },
        "route_id": {
          "type": [
            "string",
            "null"
          ]
        },
        "sender": {
          "type": [
            "string",
            "null"
          ]
        }
      },
      "required": [
        "message"
      ]
    },
    "VeilidCapability": {
      "description": "A four-character code",
      "type": "string"
    },
    "VeilidConfig": {
      "description": "Top level of the Veilid configuration tree",
      "type": "object",
      "properties": {
        "block_store": {
          "description": "Configuring the block store (storage of large content-addressable content)",
          "$ref": "#/$defs/VeilidConfigBlockStore"
        },
        "capabilities": {
          "description": "Capabilities to enable for your application/node",
          "$ref": "#/$defs/VeilidConfigCapabilities"
        },
        "namespace": {
          "description": "To run multiple Veilid nodes within the same application, either through a single process running\napi_startup/api_startup_json multiple times, or your application running mulitple times side-by-side\nthere needs to be a key used to partition the application's storage (in the TableStore, ProtectedStore, etc).\nAn empty value here is the default, but if you run multiple veilid nodes concurrently, you should set this\nto a string that uniquely identifies this -instance- within the same 'program_name'.\nMust be a valid filename for all Veilid-capable systems, which means no backslashes or forward slashes\nin the name. Stick to a-z,0-9,_ and space and you should be fine.",
          "type": "string"
        },
        "network": {
          "description": "Configuring how Veilid interacts with the low level network",
          "$ref": "#/$defs/VeilidConfigNetwork"
        },
        "program_name": {
          "description": "An identifier used to describe the program using veilid-core.\nUsed to partition storage locations in places like the ProtectedStore.\nMust be non-empty and a valid filename for all Veilid-capable systems, which means\nno backslashes or forward slashes in the name. Stick to a-z,0-9,_ and space and you should be fine.\n\nCaution: If you change this string, there is no migration support. Your app's protected store and\ntable store will very likely experience data loss. Pick a program name and stick with it. This is\nnot a 'visible' identifier and it should uniquely identify your application.",
          "type": "string"
        },
        "protected_store": {
          "description": "Configuring the protected store (keychain/keyring/etc)",
          "$ref": "#/$defs/VeilidConfigProtectedStore"
        },
        "table_store": {
          "description": "Configuring the table store (persistent encrypted database)",
          "$ref": "#/$defs/VeilidConfigTableStore"
        }
      },
      "required": [
        "program_name",
        "namespace",
        "capabilities",
        "protected_store",
        "table_store",
        "block_store",
        "network"
      ]
    },
    "VeilidConfigBlockStore": {
      "type": "object",
      "properties": {
        "delete": {
          "type": "boolean"
        },
        "directory": {
          "type": "string"
        }
      },
      "required": [
        "directory",
        "delete"
      ]
    },
    "VeilidConfigCapabilities": {
      "type": "object",
      "properties": {
        "disable": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/VeilidCapability"
          }
        }
      },
      "required": [
        "disable"
      ]
    },
    "VeilidConfigDHT": {
      "description": "Configure the Distributed Hash Table (DHT).\nDefaults should be used here unless you are absolutely sure you know what you're doing.\nIf you change the count/fanout/timeout parameters, you may render your node inoperable\nfor correct DHT operations.",
      "type": "object",
      "properties": {
        "consensus_width": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "get_value_count": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "get_value_fanout": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "get_value_timeout_ms": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "local_max_subkey_cache_memory_mb": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "local_subkey_cache_size": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "max_find_node_count": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "max_watch_expiration_ms": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "member_transaction_limit": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "member_watch_limit": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "min_peer_count": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "min_peer_refresh_time_ms": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "public_transaction_limit": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "public_watch_limit": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "remote_max_records": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "remote_max_storage_space_mb": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "remote_max_subkey_cache_memory_mb": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "remote_subkey_cache_size": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "resolve_node_count": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "resolve_node_fanout": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "resolve_node_timeout_ms": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "set_value_count": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "set_value_fanout": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "set_value_timeout_ms": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "validate_dial_info_receipt_time_ms": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        }
      },
      "required": [
        "max_find_node_count",
        "resolve_node_timeout_ms",
        "resolve_node_count",
        "resolve_node_fanout",
        "get_value_timeout_ms",
        "get_value_count",
        "get_value_fanout",
        "set_value_timeout_ms",
        "set_value_count",
        "set_value_fanout",
        "consensus_width",
        "min_peer_count",
        "min_peer_refresh_time_ms",
        "validate_dial_info_receipt_time_ms",
        "local_subkey_cache_size",
        "local_max_subkey_cache_memory_mb",
        "remote_subkey_cache_size",
        "remote_max_records",
        "remote_max_subkey_cache_memory_mb",
        "remote_max_storage_space_mb",
        "public_watch_limit",
        "member_watch_limit",
        "max_watch_expiration_ms",
        "public_transaction_limit",
        "member_transaction_limit"
      ]
    },
    "VeilidConfigNetwork": {
      "type": "object",
      "properties": {
        "client_allowlist_timeout_ms": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "connection_inactivity_timeout_ms": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "connection_initial_timeout_ms": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "detect_address_changes": {
          "type": [
            "boolean",
            "null"
          ]
        },
        "dht": {
          "$ref": "#/$defs/VeilidConfigDHT"
        },
        "hole_punch_receipt_time_ms": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "max_connection_frequency_per_min": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "max_connections_per_ip4": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "max_connections_per_ip6_prefix": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "max_connections_per_ip6_prefix_size": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "network_key_password": {
          "type": [
            "string",
            "null"
          ]
        },
        "privacy": {
          "$ref": "#/$defs/VeilidConfigPrivacy"
        },
        "protocol": {
          "$ref": "#/$defs/VeilidConfigProtocol"
        },
        "restricted_nat_retries": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "reverse_connection_receipt_time_ms": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "routing_table": {
          "$ref": "#/$defs/VeilidConfigRoutingTable"
        },
        "rpc": {
          "$ref": "#/$defs/VeilidConfigRPC"
        },
        "tls": {
          "$ref": "#/$defs/VeilidConfigTLS"
        },
        "upnp": {
          "type": "boolean"
        }
      },
      "required": [
        "connection_initial_timeout_ms",
        "connection_inactivity_timeout_ms",
        "max_connections_per_ip4",
        "max_connections_per_ip6_prefix",
        "max_connections_per_ip6_prefix_size",
        "max_connection_frequency_per_min",
        "client_allowlist_timeout_ms",
        "reverse_connection_receipt_time_ms",
        "hole_punch_receipt_time_ms",
        "routing_table",
        "rpc",
        "dht",
        "upnp",
        "restricted_nat_retries",
        "tls",
        "protocol",
        "privacy"
      ]
    },
    "VeilidConfigPrivacy": {
      "description": "Privacy preferences for routes.\n\n```yaml\nprivacy:\n    require_inbound_relay: false\n    country_code_denylist: [] # only with `--features=geolocation`\n```",
      "type": "object",
      "properties": {
        "require_inbound_relay": {
          "type": "boolean"
        }
      },
      "required": [
        "require_inbound_relay"
      ]
    },
    "VeilidConfigProtectedStore": {
      "type": "object",
      "properties": {
        "allow_insecure_fallback": {
          "type": "boolean"
        },
        "always_use_insecure_storage": {
          "type": "boolean"
        },
        "delete": {
          "type": "boolean"
        },
        "device_encryption_key_password": {
          "type": "string"
        },
        "directory": {
          "type": "string"
        },
        "new_device_encryption_key_password": {
          "type": [
            "string",
            "null"
          ]
        }
      },
      "required": [
        "allow_insecure_fallback",
        "always_use_insecure_storage",
        "directory",
        "delete",
        "device_encryption_key_password"
      ]
    },
    "VeilidConfigProtocol": {
      "description": "Configure Network Protocols.\n\nVeilid can communicate over UDP, TCP, and Web Sockets.\n\nAll protocols are available by default, and the Veilid node will\nsort out which protocol is used for each peer connection.",
      "type": "object",
      "properties": {
        "tcp": {
          "$ref": "#/$defs/VeilidConfigTCP"
        },
        "udp": {
          "$ref": "#/$defs/VeilidConfigUDP"
        },
        "ws": {
          "$ref": "#/$defs/VeilidConfigWS"
        }
      },
      "required": [
        "udp",
        "tcp",
        "ws"
      ]
    },
    "VeilidConfigRPC": {
      "description": "Configure RPC.",
      "type": "object",
      "properties": {
        "concurrency": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "default_route_hop_count": {
          "type": "integer",
          "format": "uint8",
          "maximum": 255,
          "minimum": 0
        },
        "max_route_hop_count": {
          "type": "integer",
          "format": "uint8",
          "maximum": 255,
          "minimum": 0
        },
        "max_timestamp_ahead_ms": {
          "type": [
            "integer",
            "null"
          ],
          "format": "uint32",
          "minimum": 0
        },
        "max_timestamp_behind_ms": {
          "type": [
            "integer",
            "null"
          ],
          "format": "uint32",
          "minimum": 0
        },
        "queue_size": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "timeout_ms": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        }
      },
      "required": [
        "concurrency",
        "queue_size",
        "timeout_ms",
        "max_route_hop_count",
        "default_route_hop_count"
      ]
    },
    "VeilidConfigRoutingTable": {
      "description": "Configure the network routing table.",
      "type": "object",
      "properties": {
        "bootstrap": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "bootstrap_keys": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "limit_attached_good": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "limit_attached_strong": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "limit_attached_weak": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "limit_fully_attached": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "limit_over_attached": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "public_keys": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "secret_keys": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "public_keys",
        "secret_keys",
        "bootstrap",
        "bootstrap_keys",
        "limit_over_attached",
        "limit_fully_attached",
        "limit_attached_strong",
        "limit_attached_good",
        "limit_attached_weak"
      ]
    },
    "VeilidConfigTCP": {
      "description": "Enable and configure TCP.\n\n```yaml\ntcp:\n    connect: true\n    listen: true\n    max_connections: 32\n    listen_address: ':5150'\n    public_address: ''",
      "type": "object",
      "properties": {
        "connect": {
          "type": "boolean"
        },
        "listen": {
          "type": "boolean"
        },
        "listen_address": {
          "type": "string"
        },
        "max_connections": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "public_address": {
          "type": [
            "string",
            "null"
          ]
        }
      },
      "required": [
        "connect",
        "listen",
        "max_connections",
        "listen_address"
      ]
    },
    "VeilidConfigTLS": {
      "description": "Configure TLS.\n\n```yaml\ntls:\n    certificate_path: /path/to/cert\n    private_key_path: /path/to/private/key\n    connection_initial_timeout_ms: 2000",
      "type": "object",
      "properties": {
        "certificate_path": {
          "type": "string"
        },
        "connection_initial_timeout_ms": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "private_key_path": {
          "type": "string"
        }
      },
      "required": [
        "certificate_path",
        "private_key_path",
        "connection_initial_timeout_ms"
      ]
    },
    "VeilidConfigTableStore": {
      "type": "object",
      "properties": {
        "delete": {
          "type": "boolean"
        },
        "directory": {
          "type": "string"
        }
      },
      "required": [
        "directory",
        "delete"
      ]
    },
    "VeilidConfigUDP": {
      "description": "Enable and configure UDP.\n\n```yaml\nudp:\n    enabled: true\n    socket_pool_size: 0\n    listen_address: ':5150'\n    public_address: ''\n```",
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "listen_address": {
          "type": "string"
        },
        "public_address": {
          "type": [
            "string",
            "null"
          ]
        },
        "socket_pool_size": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        }
      },
      "required": [
        "enabled",
        "socket_pool_size",
        "listen_address"
      ]
    },
    "VeilidConfigWS": {
      "description": "Enable and configure Web Sockets.\n\n```yaml\nws:\n    connect: true\n    listen: true\n    max_connections: 32\n    listen_address: ':5150'\n    path: 'ws'\n    url: 'ws://localhost:5150/ws'",
      "type": "object",
      "properties": {
        "connect": {
          "type": "boolean"
        },
        "listen": {
          "type": "boolean"
        },
        "listen_address": {
          "type": "string"
        },
        "max_connections": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "path": {
          "type": "string"
        },
        "url": {
          "type": [
            "string",
            "null"
          ]
        }
      },
      "required": [
        "connect",
        "listen",
        "max_connections",
        "listen_address",
        "path"
      ]
    },
    "VeilidLog": {
      "description": "A VeilidCore log message with optional backtrace.",
      "type": "object",
      "properties": {
        "backtrace": {
          "type": [
            "string",
            "null"
          ]
        },
        "log_level": {
          "$ref": "#/$defs/VeilidLogLevel"
        },
        "message": {
          "type": "string"
        }
      },
      "required": [
        "log_level",
        "message"
      ]
    },
    "VeilidLogLevel": {
      "description": "Log level for VeilidCore.",
      "type": "string",
      "enum": [
        "Error",
        "Warn",
        "Info",
        "Debug",
        "Trace"
      ]
    },
    "VeilidRouteChange": {
      "description": "Describe a private route change that has happened",
      "type": "object",
      "properties": {
        "dead_remote_routes": {
          "description": "If a private route that was imported has died, it is listed here.",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "dead_routes": {
          "description": "If a private route that was allocated has died, it is listed here.",
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "dead_routes",
        "dead_remote_routes"
      ]
    },
    "VeilidState": {
      "description": "A queriable state of the internals of veilid-core.",
      "type": "object",
      "properties": {
        "attachment": {
          "$ref": "#/$defs/VeilidStateAttachment"
        },
        "config": {
          "$ref": "#/$defs/VeilidStateConfig"
        },
        "network": {
          "$ref": "#/$defs/VeilidStateNetwork"
        }
      },
      "required": [
        "attachment",
        "network",
        "config"
      ]
    },
    "VeilidStateAttachment": {
      "description": "Describe the attachment state of the Veilid node",
      "type": "object",
      "properties": {
        "attached_uptime": {
          "description": "Uptime since last attach, empty if the node is currently detached",
          "anyOf": [
            {
              "$ref": "#/$defs/TimestampDuration"
            },
            {
              "type": "null"
            }
          ]
        },
        "local_network_ready": {
          "description": "If attached and there are enough reachable nodes in the routing table to perform all the actions of the LocalNetwork RoutingDomain.",
          "type": "boolean"
        },
        "public_internet_ready": {
          "description": "If attached and there are enough reachable nodes in the routing table to perform all the actions of the PublicInternet RoutingDomain,\nincluding things like private/safety route allocation and DHT operations.",
          "type": "boolean"
        },
        "state": {
          "description": "The overall quality of the routing table if attached, or the current state the attachment state machine.",
          "$ref": "#/$defs/AttachmentState"
        },
        "uptime": {
          "description": "Node uptime",
          "$ref": "#/$defs/TimestampDuration"
        }
      },
      "required": [
        "state",
        "public_internet_ready",
        "local_network_ready",
        "uptime"
      ]
    },
    "VeilidStateConfig": {
      "description": "Describe changes to the Veilid node configuration\nCurrently this is only ever emitted once, however we reserve the right to\nadd the ability to change the configuration or have it changed by the Veilid node\nitself during runtime.",
      "type": "object",
      "properties": {
        "config": {
          "description": "If the Veilid node configuration has changed the full new config will be here.",
          "$ref": "#/$defs/VeilidConfig"
        }
      },
      "required": [
        "config"
      ]
    },
    "VeilidStateNetwork": {
      "description": "Describe the current network state of the Veilid node",
      "type": "object",
      "properties": {
        "bps_down": {
          "description": "The total number of bytes per second used by Veilid currently in the download direction.",
          "$ref": "#/$defs/ByteCount"
        },
        "bps_up": {
          "description": "The total number of bytes per second used by Veilid currently in the upload direction.",
          "$ref": "#/$defs/ByteCount"
        },
        "node_ids": {
          "description": "The list of node ids for this node",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "peers": {
          "description": "The list of most recently accessed peers.\nThis is not an active connection table, nor is representative of the entire routing table.",
          "type": "array",
          "items": {
            "$ref": "#/$defs/PeerTableData"
          }
        },
        "started": {
          "description": "If the network has been started or not.",
          "type": "boolean"
        }
      },
      "required": [
        "started",
        "bps_down",
        "bps_up",
        "peers",
        "node_ids"
      ]
    },
    "VeilidUpdate": {
      "description": "An update from the veilid-core to the host application describing a change\nto the internal state of the Veilid node.",
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "kind": {
              "type": "string",
              "const": "Log"
            }
          },
          "$ref": "#/$defs/VeilidLog",
          "required": [
            "kind"
          ]
        },
        {
          "type": "object",
          "properties": {
            "kind": {
              "type": "string",
              "const": "AppMessage"
            }
          },
          "$ref": "#/$defs/VeilidAppMessage",
          "required": [
            "kind"
          ]
        },
        {
          "type": "object",
          "properties": {
            "kind": {
              "type": "string",
              "const": "AppCall"
            }
          },
          "$ref": "#/$defs/VeilidAppCall",
          "required": [
            "kind"
          ]
        },
        {
          "type": "object",
          "properties": {
            "kind": {
              "type": "string",
              "const": "Attachment"
            }
          },
          "$ref": "#/$defs/VeilidStateAttachment",
          "required": [
            "kind"
          ]
        },
        {
          "type": "object",
          "properties": {
            "kind": {
              "type": "string",
              "const": "Network"
            }
          },
          "$ref": "#/$defs/VeilidStateNetwork",
          "required": [
            "kind"
          ]
        },
        {
          "type": "object",
          "properties": {
            "kind": {
              "type": "string",
              "const": "Config"
            }
          },
          "$ref": "#/$defs/VeilidStateConfig",
          "required": [
            "kind"
          ]
        },
        {
          "type": "object",
          "properties": {
            "kind": {
              "type": "string",
              "const": "RouteChange"
            }
          },
          "$ref": "#/$defs/VeilidRouteChange",
          "required": [
            "kind"
          ]
        },
        {
          "type": "object",
          "properties": {
            "kind": {
              "type": "string",
              "const": "ValueChange"
            }
          },
          "$ref": "#/$defs/VeilidValueChange",
          "required": [
            "kind"
          ]
        },
        {
          "type": "object",
          "properties": {
            "kind": {
              "type": "string",
              "const": "Shutdown"
            }
          },
          "required": [
            "kind"
          ]
        }
      ]
    },
    "VeilidValueChange": {
      "description": "Describe when DHT records have subkey values changed",
      "type": "object",
      "properties": {
        "count": {
          "description": "The count remaining on the watch that triggered this value change\nIf there is no watch and this is received, it will be set to u32::MAX\nIf this value is zero, any watch present on the value has died.",
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "key": {
          "description": "The DHT Record key that changed",
          "type": "string"
        },
        "subkeys": {
          "description": "The portion of the DHT Record's subkeys that have changed\nIf the subkey range is empty, any watch present on the value has died.",
          "$ref": "#/$defs/ValueSubkeyRangeSet"
        },
        "value": {
          "description": "The (optional) value data for the first subkey in the subkeys range\nIf 'subkeys' is not a single value, other values than the first value\nmust be retrieved with RoutingContext::get_dht_value().",
          "anyOf": [
            {
              "$ref": "#/$defs/ValueData"
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "required": [
        "key",
        "subkeys",
        "count"
      ]
    }
  }
}

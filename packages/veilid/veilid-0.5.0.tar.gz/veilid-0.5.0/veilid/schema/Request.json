{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Request",
  "type": "object",
  "properties": {
    "id": {
      "description": "Operation Id (pairs with Response, or empty if unidirectional).",
      "type": "integer",
      "format": "uint32",
      "default": 0,
      "minimum": 0
    }
  },
  "oneOf": [
    {
      "type": "object",
      "properties": {
        "args": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "op": {
          "type": "string",
          "const": "Control"
        }
      },
      "required": [
        "op",
        "args"
      ]
    },
    {
      "type": "object",
      "properties": {
        "op": {
          "type": "string",
          "const": "GetState"
        }
      },
      "required": [
        "op"
      ]
    },
    {
      "type": "object",
      "properties": {
        "op": {
          "type": "string",
          "const": "IsShutdown"
        }
      },
      "required": [
        "op"
      ]
    },
    {
      "type": "object",
      "properties": {
        "op": {
          "type": "string",
          "const": "Attach"
        }
      },
      "required": [
        "op"
      ]
    },
    {
      "type": "object",
      "properties": {
        "op": {
          "type": "string",
          "const": "Detach"
        }
      },
      "required": [
        "op"
      ]
    },
    {
      "type": "object",
      "properties": {
        "op": {
          "type": "string",
          "const": "GenerateMemberId"
        },
        "writer_key": {
          "type": "string"
        }
      },
      "required": [
        "op",
        "writer_key"
      ]
    },
    {
      "type": "object",
      "properties": {
        "encryption_key": {
          "type": [
            "string",
            "null"
          ]
        },
        "op": {
          "type": "string",
          "const": "GetDhtRecordKey"
        },
        "owner": {
          "type": "string"
        },
        "schema": {
          "$ref": "#/$defs/DHTSchema"
        }
      },
      "required": [
        "op",
        "schema",
        "owner"
      ]
    },
    {
      "type": "object",
      "properties": {
        "op": {
          "type": "string",
          "const": "NewPrivateRoute"
        }
      },
      "required": [
        "op"
      ]
    },
    {
      "type": "object",
      "properties": {
        "kinds": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "op": {
          "type": "string",
          "const": "NewCustomPrivateRoute"
        },
        "sequencing": {
          "$ref": "#/$defs/Sequencing",
          "default": "NoPreference"
        },
        "stability": {
          "$ref": "#/$defs/Stability",
          "default": "LowLatency"
        }
      },
      "required": [
        "op",
        "kinds"
      ]
    },
    {
      "type": "object",
      "properties": {
        "blob": {
          "type": "string"
        },
        "op": {
          "type": "string",
          "const": "ImportRemotePrivateRoute"
        }
      },
      "required": [
        "op",
        "blob"
      ]
    },
    {
      "type": "object",
      "properties": {
        "op": {
          "type": "string",
          "const": "ReleasePrivateRoute"
        },
        "route_id": {
          "type": "string"
        }
      },
      "required": [
        "op",
        "route_id"
      ]
    },
    {
      "type": "object",
      "properties": {
        "call_id": {
          "type": "string"
        },
        "message": {
          "type": "string"
        },
        "op": {
          "type": "string",
          "const": "AppCallReply"
        }
      },
      "required": [
        "op",
        "call_id",
        "message"
      ]
    },
    {
      "type": "object",
      "properties": {
        "op": {
          "type": "string",
          "const": "NewRoutingContext"
        }
      },
      "required": [
        "op"
      ]
    },
    {
      "type": "object",
      "properties": {
        "op": {
          "type": "string",
          "const": "RoutingContext"
        }
      },
      "$ref": "#/$defs/RoutingContextRequest",
      "required": [
        "op"
      ]
    },
    {
      "type": "object",
      "properties": {
        "op": {
          "type": "string",
          "const": "TransactDhtRecords"
        },
        "options": {
          "anyOf": [
            {
              "$ref": "#/$defs/TransactDHTRecordsOptions"
            },
            {
              "type": "null"
            }
          ]
        },
        "record_keys": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "op",
        "record_keys"
      ]
    },
    {
      "type": "object",
      "properties": {
        "op": {
          "type": "string",
          "const": "DhtTransaction"
        }
      },
      "$ref": "#/$defs/DhtTransactionRequest",
      "required": [
        "op"
      ]
    },
    {
      "type": "object",
      "properties": {
        "column_count": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        },
        "name": {
          "type": "string"
        },
        "op": {
          "type": "string",
          "const": "OpenTableDb"
        }
      },
      "required": [
        "op",
        "name",
        "column_count"
      ]
    },
    {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "op": {
          "type": "string",
          "const": "DeleteTableDb"
        }
      },
      "required": [
        "op",
        "name"
      ]
    },
    {
      "type": "object",
      "properties": {
        "op": {
          "type": "string",
          "const": "TableDb"
        }
      },
      "$ref": "#/$defs/TableDbRequest",
      "required": [
        "op"
      ]
    },
    {
      "type": "object",
      "properties": {
        "op": {
          "type": "string",
          "const": "TableDbTransaction"
        }
      },
      "$ref": "#/$defs/TableDbTransactionRequest",
      "required": [
        "op"
      ]
    },
    {
      "type": "object",
      "properties": {
        "kind": {
          "type": "string"
        },
        "op": {
          "type": "string",
          "const": "GetCryptoSystem"
        }
      },
      "required": [
        "op",
        "kind"
      ]
    },
    {
      "type": "object",
      "properties": {
        "op": {
          "type": "string",
          "const": "CryptoSystem"
        }
      },
      "$ref": "#/$defs/CryptoSystemRequest",
      "required": [
        "op"
      ]
    },
    {
      "type": "object",
      "properties": {
        "data": {
          "type": "string"
        },
        "node_ids": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "op": {
          "type": "string",
          "const": "VerifySignatures"
        },
        "signatures": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "op",
        "node_ids",
        "data",
        "signatures"
      ]
    },
    {
      "type": "object",
      "properties": {
        "data": {
          "type": "string"
        },
        "key_pairs": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "op": {
          "type": "string",
          "const": "GenerateSignatures"
        }
      },
      "required": [
        "op",
        "data",
        "key_pairs"
      ]
    },
    {
      "type": "object",
      "properties": {
        "kind": {
          "type": "string"
        },
        "op": {
          "type": "string",
          "const": "GenerateKeyPair"
        }
      },
      "required": [
        "op",
        "kind"
      ]
    },
    {
      "type": "object",
      "properties": {
        "op": {
          "type": "string",
          "const": "Now"
        }
      },
      "required": [
        "op"
      ]
    },
    {
      "type": "object",
      "properties": {
        "command": {
          "type": "string"
        },
        "op": {
          "type": "string",
          "const": "Debug"
        }
      },
      "required": [
        "op",
        "command"
      ]
    },
    {
      "type": "object",
      "properties": {
        "op": {
          "type": "string",
          "const": "VeilidVersionString"
        }
      },
      "required": [
        "op"
      ]
    },
    {
      "type": "object",
      "properties": {
        "op": {
          "type": "string",
          "const": "VeilidVersion"
        }
      },
      "required": [
        "op"
      ]
    },
    {
      "type": "object",
      "properties": {
        "op": {
          "type": "string",
          "const": "VeilidFeatures"
        }
      },
      "required": [
        "op"
      ]
    },
    {
      "type": "object",
      "properties": {
        "op": {
          "type": "string",
          "const": "DefaultVeilidConfig"
        }
      },
      "required": [
        "op"
      ]
    },
    {
      "type": "object",
      "properties": {
        "op": {
          "type": "string",
          "const": "ValidCryptoKinds"
        }
      },
      "required": [
        "op"
      ]
    }
  ],
  "$defs": {
    "AllowOffline": {
      "type": "boolean"
    },
    "CryptoSystemRequest": {
      "type": "object",
      "properties": {
        "cs_id": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        }
      },
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "Release"
            }
          },
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "Kind"
            }
          },
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "CachedDh"
            },
            "key": {
              "type": "string"
            },
            "secret": {
              "type": "string"
            }
          },
          "required": [
            "cs_op",
            "key",
            "secret"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "ComputeDh"
            },
            "key": {
              "type": "string"
            },
            "secret": {
              "type": "string"
            }
          },
          "required": [
            "cs_op",
            "key",
            "secret"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "GenerateSharedSecret"
            },
            "domain": {
              "type": "string"
            },
            "key": {
              "type": "string"
            },
            "secret": {
              "type": "string"
            }
          },
          "required": [
            "cs_op",
            "key",
            "secret",
            "domain"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "RandomBytes"
            },
            "len": {
              "type": "integer",
              "format": "uint32",
              "minimum": 0
            }
          },
          "required": [
            "cs_op",
            "len"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "SharedSecretLength"
            }
          },
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "NonceLength"
            }
          },
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "HashDigestLength"
            }
          },
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "PublicKeyLength"
            }
          },
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "SecretKeyLength"
            }
          },
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "SignatureLength"
            }
          },
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "DefaultSaltLength"
            }
          },
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "AeadOverhead"
            }
          },
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "CheckSharedSecret"
            },
            "secret": {
              "type": "string"
            }
          },
          "required": [
            "cs_op",
            "secret"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "CheckNonce"
            },
            "nonce": {
              "type": "string"
            }
          },
          "required": [
            "cs_op",
            "nonce"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "CheckHashDigest"
            },
            "digest": {
              "type": "string"
            }
          },
          "required": [
            "cs_op",
            "digest"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "CheckPublicKey"
            },
            "key": {
              "type": "string"
            }
          },
          "required": [
            "cs_op",
            "key"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "CheckSecretKey"
            },
            "key": {
              "type": "string"
            }
          },
          "required": [
            "cs_op",
            "key"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "CheckSignature"
            },
            "signature": {
              "type": "string"
            }
          },
          "required": [
            "cs_op",
            "signature"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "HashPassword"
            },
            "password": {
              "type": "string"
            },
            "salt": {
              "type": "string"
            }
          },
          "required": [
            "cs_op",
            "password",
            "salt"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "VerifyPassword"
            },
            "password": {
              "type": "string"
            },
            "password_hash": {
              "type": "string"
            }
          },
          "required": [
            "cs_op",
            "password",
            "password_hash"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "DeriveSharedSecret"
            },
            "password": {
              "type": "string"
            },
            "salt": {
              "type": "string"
            }
          },
          "required": [
            "cs_op",
            "password",
            "salt"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "RandomNonce"
            }
          },
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "RandomSharedSecret"
            }
          },
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "GenerateKeyPair"
            }
          },
          "required": [
            "cs_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "GenerateHash"
            },
            "data": {
              "type": "string"
            }
          },
          "required": [
            "cs_op",
            "data"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "ValidateKeyPair"
            },
            "key": {
              "type": "string"
            },
            "secret": {
              "type": "string"
            }
          },
          "required": [
            "cs_op",
            "key",
            "secret"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "ValidateHash"
            },
            "data": {
              "type": "string"
            },
            "hash_digest": {
              "type": "string"
            }
          },
          "required": [
            "cs_op",
            "data",
            "hash_digest"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "Sign"
            },
            "data": {
              "type": "string"
            },
            "key": {
              "type": "string"
            },
            "secret": {
              "type": "string"
            }
          },
          "required": [
            "cs_op",
            "key",
            "secret",
            "data"
          ]
        },
        {
          "type": "object",
          "properties": {
            "cs_op": {
              "type": "string",
              "const": "Verify"
            },
            "data": {
              "type": "string"
            },
            "key": {
              "type": "string"
            },
            "signature": {
              "type": "string"
            }
          },
          "required": [
            "cs_op",
            "key",
            "data",
            "signature"
          ]
        },
        {
          "type": "object",
          "properties": {
            "associated_data": {
              "type": [
                "string",
                "null"
              ]
            },
            "body": {
              "type": "string"
            },
            "cs_op": {
              "type": "string",
              "const": "DecryptAead"
            },
            "nonce": {
              "type": "string"
            },
            "shared_secret": {
              "type": "string"
            }
          },
          "required": [
            "cs_op",
            "body",
            "nonce",
            "shared_secret"
          ]
        },
        {
          "type": "object",
          "properties": {
            "associated_data": {
              "type": [
                "string",
                "null"
              ]
            },
            "body": {
              "type": "string"
            },
            "cs_op": {
              "type": "string",
              "const": "EncryptAead"
            },
            "nonce": {
              "type": "string"
            },
            "shared_secret": {
              "type": "string"
            }
          },
          "required": [
            "cs_op",
            "body",
            "nonce",
            "shared_secret"
          ]
        },
        {
          "type": "object",
          "properties": {
            "body": {
              "type": "string"
            },
            "cs_op": {
              "type": "string",
              "const": "CryptNoAuth"
            },
            "nonce": {
              "type": "string"
            },
            "shared_secret": {
              "type": "string"
            }
          },
          "required": [
            "cs_op",
            "body",
            "nonce",
            "shared_secret"
          ]
        }
      ],
      "required": [
        "cs_id"
      ]
    },
    "DHTReportScope": {
      "description": "DHT Record Report Scope",
      "oneOf": [
        {
          "description": "Return only the local copy sequence numbers\nUseful for seeing what subkeys you have locally and which ones have not been retrieved",
          "type": "string",
          "const": "Local"
        },
        {
          "description": "Return the local sequence numbers and the network sequence numbers with GetValue fanout parameters\nProvides an independent view of both the local sequence numbers and the network sequence numbers for nodes that\nwould be reached as if the local copy did not exist locally.\nUseful for determining if the current local copy should be updated from the network.",
          "type": "string",
          "const": "SyncGet"
        },
        {
          "description": "Return the local sequence numbers and the network sequence numbers with SetValue fanout parameters\nProvides an independent view of both the local sequence numbers and the network sequence numbers for nodes that\nwould be reached as if the local copy did not exist locally.\nUseful for determining if the unchanged local copy should be pushed to the network.",
          "type": "string",
          "const": "SyncSet"
        },
        {
          "description": "Return the local sequence numbers and the network sequence numbers with GetValue fanout parameters\nProvides an view of both the local sequence numbers and the network sequence numbers for nodes that\nwould be reached as if a GetValue operation were being performed, including accepting newer values from the network.\nUseful for determining which subkeys would change with a GetValue operation",
          "type": "string",
          "const": "UpdateGet"
        },
        {
          "description": "Return the local sequence numbers and the network sequence numbers with SetValue fanout parameters\nProvides an view of both the local sequence numbers and the network sequence numbers for nodes that\nwould be reached as if a SetValue operation were being performed, including accepting newer values from the network.\nThis simulates a SetValue with the initial sequence number incremented by 1, like a real SetValue would when updating.\nUseful for determine which subkeys would change on an SetValue operation",
          "type": "string",
          "const": "UpdateSet"
        }
      ]
    },
    "DHTSchema": {
      "description": "Enum over all the supported DHT Schemas",
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "kind": {
              "type": "string",
              "const": "DFLT"
            }
          },
          "$ref": "#/$defs/DHTSchemaDFLT",
          "required": [
            "kind"
          ]
        },
        {
          "type": "object",
          "properties": {
            "kind": {
              "type": "string",
              "const": "SMPL"
            }
          },
          "$ref": "#/$defs/DHTSchemaSMPL",
          "required": [
            "kind"
          ]
        }
      ]
    },
    "DHTSchemaDFLT": {
      "description": "Default DHT Schema (DFLT)",
      "type": "object",
      "properties": {
        "o_cnt": {
          "description": "Owner subkey count",
          "type": "integer",
          "format": "uint16",
          "maximum": 65535,
          "minimum": 0
        }
      },
      "required": [
        "o_cnt"
      ]
    },
    "DHTSchemaSMPL": {
      "description": "Simple DHT Schema (SMPL)",
      "type": "object",
      "properties": {
        "members": {
          "description": "Members",
          "type": "array",
          "items": {
            "$ref": "#/$defs/DHTSchemaSMPLMember"
          }
        },
        "o_cnt": {
          "description": "Owner subkey count",
          "type": "integer",
          "format": "uint16",
          "maximum": 65535,
          "minimum": 0
        }
      },
      "required": [
        "o_cnt",
        "members"
      ]
    },
    "DHTSchemaSMPLMember": {
      "description": "Simple DHT Schema (SMPL) Member",
      "type": "object",
      "properties": {
        "m_cnt": {
          "description": "Member subkey count",
          "type": "integer",
          "format": "uint16",
          "maximum": 65535,
          "minimum": 0
        },
        "m_key": {
          "description": "Member key",
          "type": "string"
        }
      },
      "required": [
        "m_key",
        "m_cnt"
      ]
    },
    "DHTTransactionSetValueOptions": {
      "description": "Options that override defaults for DHTTransaction::set",
      "type": "object",
      "properties": {
        "writer": {
          "type": [
            "string",
            "null"
          ]
        }
      }
    },
    "DhtTransactionRequest": {
      "type": "object",
      "properties": {
        "dhttx_id": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        }
      },
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "dhttx_op": {
              "type": "string",
              "const": "Release"
            }
          },
          "required": [
            "dhttx_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "dhttx_op": {
              "type": "string",
              "const": "Commit"
            }
          },
          "required": [
            "dhttx_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "dhttx_op": {
              "type": "string",
              "const": "Rollback"
            }
          },
          "required": [
            "dhttx_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "dhttx_op": {
              "type": "string",
              "const": "Get"
            },
            "key": {
              "type": "string"
            },
            "subkey": {
              "type": "integer",
              "format": "uint32",
              "minimum": 0
            }
          },
          "required": [
            "dhttx_op",
            "key",
            "subkey"
          ]
        },
        {
          "type": "object",
          "properties": {
            "data": {
              "type": "string"
            },
            "dhttx_op": {
              "type": "string",
              "const": "Set"
            },
            "key": {
              "type": "string"
            },
            "options": {
              "anyOf": [
                {
                  "$ref": "#/$defs/DHTTransactionSetValueOptions"
                },
                {
                  "type": "null"
                }
              ]
            },
            "subkey": {
              "type": "integer",
              "format": "uint32",
              "minimum": 0
            }
          },
          "required": [
            "dhttx_op",
            "key",
            "subkey",
            "data"
          ]
        },
        {
          "type": "object",
          "properties": {
            "dhttx_op": {
              "type": "string",
              "const": "Inspect"
            },
            "key": {
              "type": "string"
            },
            "scope": {
              "$ref": "#/$defs/DHTReportScope",
              "default": "Local"
            },
            "subkeys": {
              "anyOf": [
                {
                  "$ref": "#/$defs/ValueSubkeyRangeSet"
                },
                {
                  "type": "null"
                }
              ]
            }
          },
          "required": [
            "dhttx_op",
            "key"
          ]
        }
      ],
      "required": [
        "dhttx_id"
      ]
    },
    "RoutingContextRequest": {
      "type": "object",
      "properties": {
        "rc_id": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        }
      },
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "rc_op": {
              "type": "string",
              "const": "Release"
            }
          },
          "required": [
            "rc_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "rc_op": {
              "type": "string",
              "const": "WithDefaultSafety"
            }
          },
          "required": [
            "rc_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "rc_op": {
              "type": "string",
              "const": "WithSafety"
            },
            "safety_selection": {
              "$ref": "#/$defs/SafetySelection"
            }
          },
          "required": [
            "rc_op",
            "safety_selection"
          ]
        },
        {
          "type": "object",
          "properties": {
            "rc_op": {
              "type": "string",
              "const": "WithSequencing"
            },
            "sequencing": {
              "$ref": "#/$defs/Sequencing"
            }
          },
          "required": [
            "rc_op",
            "sequencing"
          ]
        },
        {
          "type": "object",
          "properties": {
            "rc_op": {
              "type": "string",
              "const": "Safety"
            }
          },
          "required": [
            "rc_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "message": {
              "type": "string"
            },
            "rc_op": {
              "type": "string",
              "const": "AppCall"
            },
            "target": {
              "$ref": "#/$defs/Target"
            }
          },
          "required": [
            "rc_op",
            "target",
            "message"
          ]
        },
        {
          "type": "object",
          "properties": {
            "message": {
              "type": "string"
            },
            "rc_op": {
              "type": "string",
              "const": "AppMessage"
            },
            "target": {
              "$ref": "#/$defs/Target"
            }
          },
          "required": [
            "rc_op",
            "target",
            "message"
          ]
        },
        {
          "type": "object",
          "properties": {
            "kind": {
              "type": "string"
            },
            "owner": {
              "type": [
                "string",
                "null"
              ]
            },
            "rc_op": {
              "type": "string",
              "const": "CreateDhtRecord"
            },
            "schema": {
              "$ref": "#/$defs/DHTSchema"
            }
          },
          "required": [
            "rc_op",
            "kind",
            "schema"
          ]
        },
        {
          "type": "object",
          "properties": {
            "key": {
              "type": "string"
            },
            "rc_op": {
              "type": "string",
              "const": "OpenDhtRecord"
            },
            "writer": {
              "type": [
                "string",
                "null"
              ]
            }
          },
          "required": [
            "rc_op",
            "key"
          ]
        },
        {
          "type": "object",
          "properties": {
            "key": {
              "type": "string"
            },
            "rc_op": {
              "type": "string",
              "const": "CloseDhtRecord"
            }
          },
          "required": [
            "rc_op",
            "key"
          ]
        },
        {
          "type": "object",
          "properties": {
            "key": {
              "type": "string"
            },
            "rc_op": {
              "type": "string",
              "const": "DeleteDhtRecord"
            }
          },
          "required": [
            "rc_op",
            "key"
          ]
        },
        {
          "type": "object",
          "properties": {
            "force_refresh": {
              "type": "boolean"
            },
            "key": {
              "type": "string"
            },
            "rc_op": {
              "type": "string",
              "const": "GetDhtValue"
            },
            "subkey": {
              "type": "integer",
              "format": "uint32",
              "minimum": 0
            }
          },
          "required": [
            "rc_op",
            "key",
            "subkey",
            "force_refresh"
          ]
        },
        {
          "type": "object",
          "properties": {
            "data": {
              "type": "string"
            },
            "key": {
              "type": "string"
            },
            "options": {
              "anyOf": [
                {
                  "$ref": "#/$defs/SetDHTValueOptions"
                },
                {
                  "type": "null"
                }
              ]
            },
            "rc_op": {
              "type": "string",
              "const": "SetDhtValue"
            },
            "subkey": {
              "type": "integer",
              "format": "uint32",
              "minimum": 0
            }
          },
          "required": [
            "rc_op",
            "key",
            "subkey",
            "data"
          ]
        },
        {
          "type": "object",
          "properties": {
            "count": {
              "type": [
                "integer",
                "null"
              ],
              "format": "uint32",
              "minimum": 0
            },
            "expiration": {
              "anyOf": [
                {
                  "$ref": "#/$defs/Timestamp"
                },
                {
                  "type": "null"
                }
              ]
            },
            "key": {
              "type": "string"
            },
            "rc_op": {
              "type": "string",
              "const": "WatchDhtValues"
            },
            "subkeys": {
              "anyOf": [
                {
                  "$ref": "#/$defs/ValueSubkeyRangeSet"
                },
                {
                  "type": "null"
                }
              ]
            }
          },
          "required": [
            "rc_op",
            "key"
          ]
        },
        {
          "type": "object",
          "properties": {
            "key": {
              "type": "string"
            },
            "rc_op": {
              "type": "string",
              "const": "CancelDhtWatch"
            },
            "subkeys": {
              "anyOf": [
                {
                  "$ref": "#/$defs/ValueSubkeyRangeSet"
                },
                {
                  "type": "null"
                }
              ]
            }
          },
          "required": [
            "rc_op",
            "key"
          ]
        },
        {
          "type": "object",
          "properties": {
            "key": {
              "type": "string"
            },
            "rc_op": {
              "type": "string",
              "const": "InspectDhtRecord"
            },
            "scope": {
              "$ref": "#/$defs/DHTReportScope",
              "default": "Local"
            },
            "subkeys": {
              "anyOf": [
                {
                  "$ref": "#/$defs/ValueSubkeyRangeSet"
                },
                {
                  "type": "null"
                }
              ]
            }
          },
          "required": [
            "rc_op",
            "key"
          ]
        }
      ],
      "required": [
        "rc_id"
      ]
    },
    "SafetySelection": {
      "description": "The choice of safety route to include in compiled routes.",
      "oneOf": [
        {
          "description": "Don't use a safety route, only specify the sequencing preference.",
          "type": "object",
          "properties": {
            "Unsafe": {
              "$ref": "#/$defs/Sequencing"
            }
          },
          "additionalProperties": false,
          "required": [
            "Unsafe"
          ]
        },
        {
          "description": "Use a safety route and parameters specified by a SafetySpec.",
          "type": "object",
          "properties": {
            "Safe": {
              "$ref": "#/$defs/SafetySpec"
            }
          },
          "additionalProperties": false,
          "required": [
            "Safe"
          ]
        }
      ]
    },
    "SafetySpec": {
      "description": "Options for safety routes (sender privacy).",
      "type": "object",
      "properties": {
        "hop_count": {
          "description": "Must be greater than 0.",
          "type": "integer",
          "format": "uint",
          "minimum": 0
        },
        "preferred_route": {
          "description": "Preferred safety route set id if it still exists.",
          "type": [
            "string",
            "null"
          ]
        },
        "sequencing": {
          "description": "Prefer connection-oriented sequenced protocols.",
          "$ref": "#/$defs/Sequencing"
        },
        "stability": {
          "description": "Prefer reliability over speed.",
          "$ref": "#/$defs/Stability"
        }
      },
      "required": [
        "hop_count",
        "stability",
        "sequencing"
      ]
    },
    "Sequencing": {
      "type": "string",
      "enum": [
        "NoPreference",
        "PreferOrdered",
        "EnsureOrdered"
      ]
    },
    "SetDHTValueOptions": {
      "description": "Options that override defaults for set_dht_value",
      "type": "object",
      "properties": {
        "allow_offline": {
          "description": "Defaults to true. If false, the value will not be written if the node is offline,\nand a TryAgain error will be returned.",
          "anyOf": [
            {
              "$ref": "#/$defs/AllowOffline"
            },
            {
              "type": "null"
            }
          ]
        },
        "writer": {
          "description": "Override writer key pair for this operation",
          "type": [
            "string",
            "null"
          ]
        }
      }
    },
    "Stability": {
      "type": "string",
      "enum": [
        "LowLatency",
        "Reliable"
      ]
    },
    "TableDbRequest": {
      "type": "object",
      "properties": {
        "db_id": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        }
      },
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "db_op": {
              "type": "string",
              "const": "Release"
            }
          },
          "required": [
            "db_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "db_op": {
              "type": "string",
              "const": "GetColumnCount"
            }
          },
          "required": [
            "db_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "col": {
              "type": "integer",
              "format": "uint32",
              "minimum": 0
            },
            "db_op": {
              "type": "string",
              "const": "GetKeys"
            }
          },
          "required": [
            "db_op",
            "col"
          ]
        },
        {
          "type": "object",
          "properties": {
            "db_op": {
              "type": "string",
              "const": "Transact"
            }
          },
          "required": [
            "db_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "col": {
              "type": "integer",
              "format": "uint32",
              "minimum": 0
            },
            "db_op": {
              "type": "string",
              "const": "Store"
            },
            "key": {
              "type": "string"
            },
            "value": {
              "type": "string"
            }
          },
          "required": [
            "db_op",
            "col",
            "key",
            "value"
          ]
        },
        {
          "type": "object",
          "properties": {
            "col": {
              "type": "integer",
              "format": "uint32",
              "minimum": 0
            },
            "db_op": {
              "type": "string",
              "const": "Load"
            },
            "key": {
              "type": "string"
            }
          },
          "required": [
            "db_op",
            "col",
            "key"
          ]
        },
        {
          "type": "object",
          "properties": {
            "col": {
              "type": "integer",
              "format": "uint32",
              "minimum": 0
            },
            "db_op": {
              "type": "string",
              "const": "Delete"
            },
            "key": {
              "type": "string"
            }
          },
          "required": [
            "db_op",
            "col",
            "key"
          ]
        }
      ],
      "required": [
        "db_id"
      ]
    },
    "TableDbTransactionRequest": {
      "type": "object",
      "properties": {
        "tx_id": {
          "type": "integer",
          "format": "uint32",
          "minimum": 0
        }
      },
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "tx_op": {
              "type": "string",
              "const": "Commit"
            }
          },
          "required": [
            "tx_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "tx_op": {
              "type": "string",
              "const": "Rollback"
            }
          },
          "required": [
            "tx_op"
          ]
        },
        {
          "type": "object",
          "properties": {
            "col": {
              "type": "integer",
              "format": "uint32",
              "minimum": 0
            },
            "key": {
              "type": "string"
            },
            "tx_op": {
              "type": "string",
              "const": "Store"
            },
            "value": {
              "type": "string"
            }
          },
          "required": [
            "tx_op",
            "col",
            "key",
            "value"
          ]
        },
        {
          "type": "object",
          "properties": {
            "col": {
              "type": "integer",
              "format": "uint32",
              "minimum": 0
            },
            "key": {
              "type": "string"
            },
            "tx_op": {
              "type": "string",
              "const": "Delete"
            }
          },
          "required": [
            "tx_op",
            "col",
            "key"
          ]
        }
      ],
      "required": [
        "tx_id"
      ]
    },
    "Target": {
      "description": "Valid destinations for a message sent over a routing context.",
      "oneOf": [
        {
          "description": "Node by its node id",
          "type": "object",
          "properties": {
            "NodeId": {
              "type": "string"
            }
          },
          "additionalProperties": false,
          "required": [
            "NodeId"
          ]
        },
        {
          "description": "Remote private route by its id.",
          "type": "object",
          "properties": {
            "RouteId": {
              "type": "string"
            }
          },
          "additionalProperties": false,
          "required": [
            "RouteId"
          ]
        }
      ]
    },
    "Timestamp": {
      "type": "string"
    },
    "TransactDHTRecordsOptions": {
      "description": "Options for DHT record transactions",
      "type": "object",
      "properties": {
        "default_signing_keypair": {
          "description": "The signing keypair to use when opening the transaction.\nSetting this does not override any writer keys used by transaction operations.\nIf a record in the transaction is already opened for writing then the writer key will be used.\nThis is only useful if you have records in a transaction that are only open for reading.",
          "type": [
            "string",
            "null"
          ]
        }
      }
    },
    "ValueSubkeyRangeSet": {
      "type": "array",
      "items": {
        "type": "array",
        "maxItems": 2,
        "minItems": 2,
        "prefixItems": [
          {
            "type": "integer",
            "format": "uint32",
            "minimum": 0
          },
          {
            "type": "integer",
            "format": "uint32",
            "minimum": 0
          }
        ]
      }
    }
  }
}

{% extends "base.html" %}
{% block content %}
<h1>Marathon Generator</h1>
<div class="panel" data-marathon>
  <div class="grid-2">
    <section>
      <h2>Sources</h2>
      <p class="small">Select playlists to combine. Each source gets a label (A-Z) for interleave patterns.</p>
      <div data-sources></div>
      <button data-add-source>+ Add Source</button>
    </section>
    <section>
      <h2>Options</h2>
      <label>
        Method
        <select data-method>
          <option value="concatenate">Concatenate (in order)</option>
          <option value="shuffle">Shuffle (random)</option>
          <option value="interleave">Interleave (pattern)</option>
        </select>
      </label>

      <div data-shuffle-opts style="display:none;">
        <label>
          Shuffle Seed <span class="small">(optional, for reproducibility)</span>
          <input type="text" data-seed placeholder="e.g. movie-night-2025">
        </label>
      </div>

      <div data-interleave-opts style="display:none;">
        <label>
          Pattern <span class="small">(e.g. A2B1 = 2 from A, 1 from B, repeat)</span>
          <input type="text" data-pattern placeholder="A B C or A2B1C2">
        </label>
      </div>

      <label>
        <input type="checkbox" data-episode-order>
        Preserve episode order within each source
      </label>
    </section>
  </div>

  <hr>

  <button data-generate class="primary">Generate Marathon</button>
  <p class="small" data-status></p>

  <div data-result style="display:none;">
    <h2>Result <span class="small" data-count></span></h2>
    <ul class="list" data-items></ul>
    <div data-warnings style="display:none;">
      <p class="error" data-warnings-text></p>
    </div>
    <hr>
    <label>
      Save as new playlist
      <input type="text" data-save-name placeholder="Marathon name">
    </label>
    <button data-save>Save Playlist</button>
  </div>
</div>
{% endblock %}

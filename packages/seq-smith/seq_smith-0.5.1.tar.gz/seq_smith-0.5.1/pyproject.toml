[build-system]
requires = ["maturin>=1.0,<2.0"]
build-backend = "maturin"

[project]
name = "seq-smith"
version = "0.5.1"
authors = [
    { name = "Tobias Sargeant", email = "tobias.sargeant@gmail.com" },
]
description = "A Rust-based sequence alignment library for Python."
readme = "README.md"
license = { text = "MIT" }
keywords = ["sequence alignment", "Rust", "Python", "bioinformatics"]
requires-python = ">=3.10"
classifiers = [
    "Programming Language :: Rust",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: Python :: 3.13",
    "License :: OSI Approved :: MIT License",
    "Operating System :: OS Independent",
]
dependencies = [
    "numpy",
]

[dependency-groups]
dev = [
    "mypy",
    "myst-parser",
    "pytest>=8.4.1",
    "ruff",
    "sphinx",
    "sphinx-rtd-theme",
    "twine",
]

[project.urls]
"Homepage" = "https://github.com/folded/seq-smith"
"Bug Tracker" = "https://github.com/folded/seq-smith/issues"

[tool.maturin]
features = ["pyo3/extension-module"]
manifest-path = "Cargo.toml"
module-name = "seq_smith._seq_smith"

[tool.ruff]
line-length = 120
target-version = "py311"
indent-width = 4

[tool.ruff.lint]
select = ["A", "B", "C",  "E", "F", "G", "I", "N", "Q", "S", "W", "ANN", "ARG", "BLE", "COM", "DJ", "DTZ", "ERA", "EXE", "ICN", "ISC", "NPY", "PD", "PGH", "PIE", "PL", "PT", "PYI", "RET", "RSE", "RUF", "SIM", "SLF", "TCH", "TID", "UP", "YTT"]
ignore = [
    "ANN101",  # missing-type-self
    "PD011",   # pandas-use-of-dot-values (false positive)
]
fixable = ["A", "B", "C", "D", "E", "F", "G", "I", "N", "Q", "S", "T", "W", "ANN", "ARG", "BLE", "COM", "DJ", "DTZ", "ERA", "EXE", "FBT", "ICN", "ISC", "NPY", "PD", "PGH", "PIE", "PL", "PT", "PYI", "RET", "RSE", "RUF", "SIM", "SLF", "TCH", "TID", "UP", "YTT"]

[tool.ruff.lint.isort]
known-first-party = ["src"]

[tool.ruff.lint.per-file-ignores]
"tests/*" = [
    "S101",     # asserts.
    "S102",     # exec().
    "PLR2004",  # magic value comparisons.
    "SLF001"    # private method access.
]
"docs/*" = [
    "A001"
]


[tool.mypy]
python_version = "3.11"

[tool.cibuildwheel]
build = "cp310-* cp311-* cp312-* cp313-*"
skip = "*-musllinux*"

[tool.cibuildwheel.linux]
archs = ["x86_64", "aarch64"]

[tool.cibuildwheel.macos]
archs = ["x86_64", "arm64"]

[tool.cibuildwheel.windows]
archs = ["AMD64"]

(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[303],{812:e=>{e.exports={cardContainer:"LLMCard_cardContainer__G2amR",iconBasicInfoContainer:"LLMCard_iconBasicInfoContainer__CH9_0",iconImage:"LLMCard_iconImage__tvd_f",basicInfoContainer:"LLMCard_basicInfoContainer__bGSSy",basicInfoText:"LLMCard_basicInfoText__W3PwL",providerContainer:"LLMCard_providerContainer__msrDI",providerIcon:"LLMCard_providerIcon___XZuM",providerLabel:"LLMCard_providerLabel__P20bw",baseURLContainer:"LLMCard_baseURLContainer__GFV4Q",baseURLIcon:"LLMCard_baseURLIcon__7tneq",baseURLText:"LLMCard_baseURLText__L65fp",abilitiesContainer:"LLMCard_abilitiesContainer__UeMH8",abilityBadge:"LLMCard_abilityBadge__fwgEL",abilityIcon:"LLMCard_abilityIcon__a4f2i",abilityLabel:"LLMCard_abilityLabel__QQdJ0",bigText:"LLMCard_bigText__KgI_O"}},2184:e=>{e.exports={cardContainer:"EmbeddingCard_cardContainer__Y_Rh1",iconBasicInfoContainer:"EmbeddingCard_iconBasicInfoContainer__Bmg11",iconImage:"EmbeddingCard_iconImage__rqPPH",basicInfoContainer:"EmbeddingCard_basicInfoContainer__hbkkf",basicInfoText:"EmbeddingCard_basicInfoText__mhdbT",providerContainer:"EmbeddingCard_providerContainer__ASgpp",providerIcon:"EmbeddingCard_providerIcon__jcX7A",providerLabel:"EmbeddingCard_providerLabel__6o4wT",baseURLContainer:"EmbeddingCard_baseURLContainer__cxDzG",baseURLIcon:"EmbeddingCard_baseURLIcon__EnRmY",baseURLText:"EmbeddingCard_baseURLText__AAG7c",bigText:"EmbeddingCard_bigText__3Xb4j"}},2262:(e,a,t)=>{"use strict";t.d(a,{W:()=>i,Z:()=>n,default:()=>l});var s=t(8629);t(7048);var r=t(9941);function l(e){let{children:a}=e;return(0,s.jsx)(s.Fragment,{children:a})}let n=e=>{let a=r.Ay.language.replace("-","_");return"en_US"===a&&e.en_US?e.en_US:"zh_Hans"===a&&e.zh_Hans?e.zh_Hans:"zh_Hant"===a&&e.zh_Hant?e.zh_Hant:"ja_JP"===a&&e.ja_JP?e.ja_JP:e.en_US||e.zh_Hans||e.zh_Hant||e.ja_JP||""},i=()=>{let e=r.Ay.language;return"zh-Hans"===e?"zh_Hans":"zh-Hant"===e?"zh_Hant":"en-US"===e?"en":"ja-JP"===e?"ja_JP":"en"}},4187:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});var s=t(8629),r=t(7152),l=t.n(r);function n(e){let{height:a,plusSize:t,onClick:r,width:n="100%"}=e;return(0,s.jsx)("div",{className:"".concat(l().cardContainer," ").concat(l().createCardContainer," "),style:{width:"".concat(n),height:"".concat(a),fontSize:"".concat(t,"px")},onClick:r,children:"+"})}},4586:(e,a,t)=>{"use strict";t.d(a,{TR:()=>v,bq:()=>m,eb:()=>p,gC:()=>x,l6:()=>d,s3:()=>c,yv:()=>u});var s=t(8629);t(5329);var r=t(5771),l=t(9490),n=t(7444),i=t(5407),o=t(1573);function d(e){let{...a}=e;return(0,s.jsx)(r.bL,{"data-slot":"select",...a})}function c(e){let{...a}=e;return(0,s.jsx)(r.YJ,{"data-slot":"select-group",...a})}function u(e){let{...a}=e;return(0,s.jsx)(r.WT,{"data-slot":"select-value",...a})}function m(e){let{className:a,size:t="default",children:n,...i}=e;return(0,s.jsxs)(r.l9,{"data-slot":"select-trigger","data-size":t,className:(0,o.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...i,children:[n,(0,s.jsx)(r.In,{asChild:!0,children:(0,s.jsx)(l.A,{className:"size-4 opacity-50"})})]})}function x(e){let{className:a,children:t,position:l="popper",...n}=e;return(0,s.jsx)(r.ZL,{children:(0,s.jsxs)(r.UC,{"data-slot":"select-content",className:(0,o.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...n,children:[(0,s.jsx)(h,{}),(0,s.jsx)(r.LM,{className:(0,o.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,s.jsx)(g,{})]})})}function v(e){let{className:a,...t}=e;return(0,s.jsx)(r.JU,{"data-slot":"select-label",className:(0,o.cn)("text-muted-foreground px-2 py-1.5 text-xs",a),...t})}function p(e){let{className:a,children:t,...l}=e;return(0,s.jsxs)(r.q7,{"data-slot":"select-item",className:(0,o.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",a),...l,children:[(0,s.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(r.VF,{children:(0,s.jsx)(n.A,{className:"size-4"})})}),(0,s.jsx)(r.p4,{children:t})]})}function h(e){let{className:a,...t}=e;return(0,s.jsx)(r.PP,{"data-slot":"select-scroll-up-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...t,children:(0,s.jsx)(i.A,{className:"size-4"})})}function g(e){let{className:a,...t}=e;return(0,s.jsx)(r.wn,{"data-slot":"select-scroll-down-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...t,children:(0,s.jsx)(l.A,{className:"size-4"})})}},6009:(e,a,t)=>{"use strict";t.d(a,{S:()=>i});var s=t(8629);t(5329);var r=t(5462),l=t(7444),n=t(1573);function i(e){let{className:a,...t}=e;return(0,s.jsx)(r.bL,{"data-slot":"checkbox",className:(0,n.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...t,children:(0,s.jsx)(r.C1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,s.jsx)(l.A,{className:"size-3.5"})})})}},7152:e=>{e.exports={cardContainer:"createCartComponent_cardContainer__qLD1G",createCardContainer:"createCartComponent_createCardContainer__yO7N4"}},7366:(e,a,t)=>{"use strict";t.d(a,{Xi:()=>o,av:()=>d,j7:()=>i,tU:()=>n});var s=t(8629);t(5329);var r=t(4057),l=t(1573);function n(e){let{className:a,...t}=e;return(0,s.jsx)(r.bL,{"data-slot":"tabs",className:(0,l.cn)("flex flex-col gap-2",a),...t})}function i(e){let{className:a,...t}=e;return(0,s.jsx)(r.B8,{"data-slot":"tabs-list",className:(0,l.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a),...t})}function o(e){let{className:a,...t}=e;return(0,s.jsx)(r.l9,{"data-slot":"tabs-trigger",className:(0,l.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...t})}function d(e){let{className:a,...t}=e;return(0,s.jsx)(r.UC,{"data-slot":"tabs-content",className:(0,l.cn)("flex-1 outline-none",a),...t})}},7775:(e,a,t)=>{Promise.resolve().then(t.bind(t,9585))},8642:(e,a,t)=>{"use strict";t.d(a,{Cf:()=>u,Es:()=>x,L3:()=>v,c7:()=>m,lG:()=>o,rr:()=>p});var s=t(8629),r=t(5329),l=t(9455),n=t(5144),i=t(1573);function o(e){let{onOpenChange:a,open:t,...n}=e,i=r.useCallback(e=>{null==a||a(e),e||(document.body.style.removeProperty("pointer-events"),document.body.style.removeProperty("overflow"),setTimeout(()=>{document.body.style.removeProperty("pointer-events"),document.body.style.removeProperty("overflow")},0),setTimeout(()=>{document.body.style.removeProperty("pointer-events"),document.body.style.removeProperty("overflow")},50),setTimeout(()=>{document.body.style.removeProperty("pointer-events"),document.body.style.removeProperty("overflow")},150))},[a]);return r.useEffect(()=>{if(!1===t){let e=()=>{document.body.style.removeProperty("pointer-events"),document.body.style.removeProperty("overflow")};e();let a=setTimeout(e,0),t=setTimeout(e,50),s=setTimeout(e,150),r=setTimeout(e,300);return()=>{clearTimeout(a),clearTimeout(t),clearTimeout(s),clearTimeout(r)}}},[t]),(0,s.jsx)(l.bL,{"data-slot":"dialog",open:t,...n,onOpenChange:i})}function d(e){let{...a}=e;return(0,s.jsx)(l.ZL,{"data-slot":"dialog-portal",...a})}function c(e){let{className:a,...t}=e;return(0,s.jsx)(l.hJ,{"data-slot":"dialog-overlay",className:(0,i.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...t})}function u(e){let{className:a,children:t,...r}=e;return(0,s.jsxs)(d,{"data-slot":"dialog-portal",children:[(0,s.jsx)(c,{}),(0,s.jsxs)(l.UC,{"data-slot":"dialog-content",className:(0,i.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...r,children:[t,(0,s.jsxs)(l.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(n.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function m(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"dialog-header",className:(0,i.cn)("flex flex-col gap-2 text-center sm:text-left",a),...t})}function x(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"dialog-footer",className:(0,i.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...t})}function v(e){let{className:a,...t}=e;return(0,s.jsx)(l.hE,{"data-slot":"dialog-title",className:(0,i.cn)("text-lg leading-none font-semibold",a),...t})}function p(e){let{className:a,...t}=e;return(0,s.jsx)(l.VY,{"data-slot":"dialog-description",className:(0,i.cn)("text-muted-foreground text-sm",a),...t})}},8915:e=>{e.exports={modelListContainer:"LLMConfig_modelListContainer__wFrBk",emptyContainer:"LLMConfig_emptyContainer__7xLP9"}},9585:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>U});var s=t(8629),r=t(5329);class l{constructor(e){this.id=e.id,this.iconURL=e.iconURL,this.providerLabel=e.providerLabel,this.name=e.name,this.baseURL=e.baseURL,this.abilities=e.abilities}}var n=t(8915),i=t.n(n),o=t(812),d=t.n(o),c=t(8396);function u(e){let{cardVO:a}=e;return(0,s.jsx)("div",{className:"".concat(d().cardContainer),children:(0,s.jsxs)("div",{className:"".concat(d().iconBasicInfoContainer),children:[(0,s.jsx)("img",{className:"".concat(d().iconImage),src:a.iconURL,alt:"icon"}),(0,s.jsxs)("div",{className:"".concat(d().basicInfoContainer),children:[(0,s.jsx)("div",{className:"".concat(d().basicInfoText,"  ").concat(d().bigText),children:a.name}),(0,s.jsxs)("div",{className:"".concat(d().providerContainer),children:[(0,s.jsx)("svg",{className:"".concat(d().providerIcon),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"36",height:"36",fill:"currentColor",children:(0,s.jsx)("path",{d:"M21 13.2422V20H22V22H2V20H3V13.2422C1.79401 12.435 1 11.0602 1 9.5C1 8.67286 1.22443 7.87621 1.63322 7.19746L4.3453 2.5C4.52393 2.1906 4.85406 2 5.21132 2H18.7887C19.1459 2 19.4761 2.1906 19.6547 2.5L22.3575 7.18172C22.7756 7.87621 23 8.67286 23 9.5C23 11.0602 22.206 12.435 21 13.2422ZM19 13.9725C18.8358 13.9907 18.669 14 18.5 14C17.2409 14 16.0789 13.478 15.25 12.6132C14.4211 13.478 13.2591 14 12 14C10.7409 14 9.5789 13.478 8.75 12.6132C7.9211 13.478 6.75911 14 5.5 14C5.331 14 5.16417 13.9907 5 13.9725V20H19V13.9725ZM5.78865 4L3.35598 8.21321C3.12409 8.59843 3 9.0389 3 9.5C3 10.8807 4.11929 12 5.5 12C6.53096 12 7.44467 11.3703 7.82179 10.4295C8.1574 9.59223 9.3426 9.59223 9.67821 10.4295C10.0553 11.3703 10.969 12 12 12C13.031 12 13.9447 11.3703 14.3218 10.4295C14.6574 9.59223 15.8426 9.59223 16.1782 10.4295C16.5553 11.3703 17.469 12 18.5 12C19.8807 12 21 10.8807 21 9.5C21 9.0389 20.8759 8.59843 20.6347 8.19746L18.2113 4H5.78865Z"})}),(0,s.jsx)("span",{className:"".concat(d().providerLabel),children:a.providerLabel})]}),(0,s.jsxs)("div",{className:"".concat(d().baseURLContainer),children:[(0,s.jsx)("svg",{className:"".concat(d().baseURLIcon),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"36",height:"36",fill:"rgba(98,98,98,1)",children:(0,s.jsx)("path",{d:"M13.0607 8.11097L14.4749 9.52518C17.2086 12.2589 17.2086 16.691 14.4749 19.4247L14.1214 19.7782C11.3877 22.5119 6.95555 22.5119 4.22188 19.7782C1.48821 17.0446 1.48821 12.6124 4.22188 9.87874L5.6361 11.293C3.68348 13.2456 3.68348 16.4114 5.6361 18.364C7.58872 20.3166 10.7545 20.3166 12.7072 18.364L13.0607 18.0105C15.0133 16.0578 15.0133 12.892 13.0607 10.9394L11.6465 9.52518L13.0607 8.11097ZM19.7782 14.1214L18.364 12.7072C20.3166 10.7545 20.3166 7.58872 18.364 5.6361C16.4114 3.68348 13.2456 3.68348 11.293 5.6361L10.9394 5.98965C8.98678 7.94227 8.98678 11.1081 10.9394 13.0607L12.3536 14.4749L10.9394 15.8891L9.52518 14.4749C6.79151 11.7413 6.79151 7.30911 9.52518 4.57544L9.87874 4.22188C12.6124 1.48821 17.0446 1.48821 19.7782 4.22188C22.5119 6.95555 22.5119 11.3877 19.7782 14.1214Z"})}),(0,s.jsx)("span",{className:"".concat(d().baseURLText),children:a.baseURL})]}),(0,s.jsx)("div",{className:"".concat(d().abilitiesContainer),children:function(e){let{t:a}=(0,c.Bd)(),t={vision:(0,s.jsxs)("div",{className:"".concat(d().abilityBadge),children:[(0,s.jsx)("svg",{className:"".concat(d().abilityIcon),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:(0,s.jsx)("path",{d:"M12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2ZM12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM12 7C14.7614 7 17 9.23858 17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12C7 11.4872 7.07719 10.9925 7.22057 10.5268C7.61175 11.3954 8.48527 12 9.5 12C10.8807 12 12 10.8807 12 9.5C12 8.48527 11.3954 7.61175 10.5269 7.21995C10.9925 7.07719 11.4872 7 12 7Z"})}),(0,s.jsx)("span",{className:"".concat(d().abilityLabel),children:a("models.visionAbility")})]},"vision"),func_call:(0,s.jsxs)("div",{className:"".concat(d().abilityBadge),children:[(0,s.jsx)("svg",{className:"".concat(d().abilityIcon),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:(0,s.jsx)("path",{d:"M5.32943 3.27158C6.56252 2.8332 7.9923 3.10749 8.97927 4.09446C10.1002 5.21537 10.3019 6.90741 9.5843 8.23385L20.293 18.9437L18.8788 20.3579L8.16982 9.64875C6.84325 10.3669 5.15069 10.1654 4.02952 9.04421C3.04227 8.05696 2.7681 6.62665 3.20701 5.39332L5.44373 7.63C6.02952 8.21578 6.97927 8.21578 7.56505 7.63C8.15084 7.04421 8.15084 6.09446 7.56505 5.50868L5.32943 3.27158ZM15.6968 5.15512L18.8788 3.38736L20.293 4.80157L18.5252 7.98355L16.7574 8.3371L14.6361 10.4584L13.2219 9.04421L15.3432 6.92289L15.6968 5.15512ZM8.97927 13.2868L10.3935 14.7011L5.09018 20.0044C4.69966 20.3949 4.06649 20.3949 3.67597 20.0044C3.31334 19.6417 3.28744 19.0699 3.59826 18.6774L3.67597 18.5902L8.97927 13.2868Z"})}),(0,s.jsx)("span",{className:"".concat(d().abilityLabel),children:a("models.functionCallAbility")})]},"func_call")};return e.map(e=>t[e])}(a.abilities)})]})]})})}var m=t(2959),x=t(3179),v=t(3850),p=t(8893),h=t(2985),g=t(7731),b=t(8642),f=t(5702),j=t(4996),C=t(9854),_=t(4586),y=t(6009),L=t(4001),k=t(2262);function N(e){let{editMode:a,initLLMId:t,onFormSubmit:l,onFormCancel:n,onLLMDeleted:i}=e,{t:o}=(0,c.Bd)(),d=h.Ik({name:h.Yj().min(1,{message:o("models.modelNameRequired")}),model_provider:h.Yj().min(1,{message:o("models.modelProviderRequired")}),url:h.Yj().min(1,{message:o("models.requestURLRequired")}),api_key:h.Yj().optional(),abilities:h.YO(h.Yj()),extra_args:h.YO(h.Ik({key:h.Yj().min(1,{message:o("models.keyNameRequired")}),type:h.k5(["string","number","boolean"]),value:h.Yj()}).superRefine((e,a)=>{"number"===e.type&&isNaN(Number(e.value))&&a.addIssue({code:g.eq.custom,message:o("models.mustBeValidNumber"),path:["value"]}),"boolean"===e.type&&"true"!==e.value&&"false"!==e.value&&a.addIssue({code:g.eq.custom,message:o("models.mustBeTrueOrFalse"),path:["value"]})})).optional()}),u=(0,p.mN)({resolver:(0,v.u)(d),defaultValues:{name:"",model_provider:"",url:"",api_key:"",abilities:[],extra_args:[]}}),[N,w]=(0,r.useState)([]),[R,M]=(0,r.useState)(!1),V=[{label:o("models.visionAbility"),value:"vision"},{label:o("models.functionCallAbility"),value:"func_call"}],[I,P]=(0,r.useState)([]),[q,U]=(0,r.useState)([]),[z,H]=(0,r.useState)(!1),[E,S]=(0,r.useState)("");(0,r.useEffect)(()=>{B().then(()=>{a&&t?Z(t).then(e=>{if(u.setValue("name",e.name),u.setValue("model_provider",e.model_provider),S(e.model_provider),u.setValue("url",e.url),u.setValue("api_key",e.api_key),u.setValue("abilities",e.abilities),e.extra_args){let a=e.extra_args.map(e=>{let[a,t]=e.split(":"),s="string";return isNaN(Number(t))?("true"===t||"false"===t)&&(s="boolean"):s="number",{key:a,type:s,value:t}});w(a),u.setValue("extra_args",a)}}):u.reset()})},[]);let T=(e,a,t)=>{let s=[...N];s[e]={...s[e],[a]:t},w(s),u.setValue("extra_args",s)};async function B(){let e=await m.ok.getProviderRequesters("llm");P(e.requesters.map(e=>({label:(0,k.Z)(e.label),value:e.name,provider_category:e.spec.provider_category||"manufacturer"}))),U(e.requesters.map(e=>{let a=e.spec.config;for(let e=0;e<a.length;e++)if("base_url"==a[e].name){var t;return(null==(t=a[e].default)?void 0:t.toString())||""}return""}))}async function Z(e){var a;let t=await m.ok.getProviderLLMModel(e),s=[],r=t.model.extra_args;for(let e in r)s.push("".concat(e,":").concat(r[e]));return{name:t.model.name,model_provider:t.model.requester,url:null==(a=t.model.requester_config)?void 0:a.base_url,api_key:t.model.api_keys[0],abilities:t.model.abilities||[],extra_args:s}}async function A(e){try{await m.ok.createProviderLLMModel(e),l(),L.oR.success(o("models.createSuccess"))}catch(e){L.oR.error(o("models.createError")+e.message)}}async function Y(e){try{await m.ok.updateProviderLLMModel(t||"",e),l(),L.oR.success(o("models.saveSuccess"))}catch(e){L.oR.error(o("models.saveError")+e.message)}}return(0,s.jsxs)("div",{children:[(0,s.jsx)(b.lG,{open:R,onOpenChange:M,children:(0,s.jsxs)(b.Cf,{children:[(0,s.jsx)(b.c7,{children:(0,s.jsx)(b.L3,{children:o("common.confirmDelete")})}),(0,s.jsx)(b.rr,{children:o("models.deleteConfirmation")}),(0,s.jsxs)(b.Es,{children:[(0,s.jsx)(f.$,{variant:"outline",onClick:()=>M(!1),children:o("common.cancel")}),(0,s.jsx)(f.$,{variant:"destructive",onClick:()=>{t&&m.ok.deleteProviderLLMModel(t).then(()=>{i(),L.oR.success(o("models.deleteSuccess"))}).catch(e=>{L.oR.error(o("models.deleteError")+e.message)}),M(!1)},children:o("common.confirmDelete")})]})]})}),(0,s.jsx)(j.lV,{...u,children:(0,s.jsxs)("form",{onSubmit:u.handleSubmit(function(e){var s;let r={};null==(s=e.extra_args)||s.forEach(e=>{"number"===e.type?r[e.key]=Number(e.value):"boolean"===e.type?r[e.key]="true"===e.value:r[e.key]=e.value});let l={uuid:a?t||"":x.k.generate(),name:e.name,description:"",requester:e.model_provider,requester_config:{base_url:e.url,timeout:120},extra_args:r,api_keys:e.api_key?[e.api_key]:[],abilities:e.abilities};a?Y(l).then(()=>{u.reset()}):A(l).then(()=>{u.reset()})}),className:"space-y-8",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(j.zB,{control:u.control,name:"name",render:e=>{let{field:a}=e;return(0,s.jsxs)(j.eI,{children:[(0,s.jsxs)(j.lR,{children:[o("models.modelName"),(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)(j.MJ,{children:(0,s.jsx)(C.p,{...a})}),(0,s.jsx)(j.C5,{}),(0,s.jsx)(j.Rr,{children:o("models.modelProviderDescription")})]})}}),(0,s.jsx)(j.zB,{control:u.control,name:"model_provider",render:e=>{let{field:a}=e;return(0,s.jsxs)(j.eI,{children:[(0,s.jsxs)(j.lR,{children:[o("models.modelProvider"),(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)(j.MJ,{children:(0,s.jsxs)(_.l6,{onValueChange:e=>{a.onChange(e),S(e);let t=I.findIndex(a=>a.value===e);-1!==t&&u.setValue("url",q[t])},value:a.value,children:[(0,s.jsx)(_.bq,{className:"w-[180px] bg-[#ffffff] dark:bg-[#2a2a2e]",children:(0,s.jsx)(_.yv,{placeholder:o("models.selectModelProvider")})}),(0,s.jsxs)(_.gC,{children:[(0,s.jsxs)(_.s3,{children:[(0,s.jsx)(_.TR,{children:o("models.modelManufacturer")}),I.filter(e=>"manufacturer"===e.provider_category).map(e=>(0,s.jsx)(_.eb,{value:e.value,children:e.label},e.value))]}),(0,s.jsxs)(_.s3,{children:[(0,s.jsx)(_.TR,{children:o("models.aggregationPlatform")}),I.filter(e=>"maas"===e.provider_category).map(e=>(0,s.jsx)(_.eb,{value:e.value,children:e.label},e.value))]}),(0,s.jsxs)(_.s3,{children:[(0,s.jsx)(_.TR,{children:o("models.selfDeployed")}),I.filter(e=>"self-hosted"===e.provider_category).map(e=>(0,s.jsx)(_.eb,{value:e.value,children:e.label},e.value))]})]})]})}),(0,s.jsx)(j.C5,{})]})}}),(0,s.jsx)(j.zB,{control:u.control,name:"url",render:e=>{let{field:a}=e;return(0,s.jsxs)(j.eI,{children:[(0,s.jsxs)(j.lR,{children:[o("models.requestURL"),(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)(j.MJ,{children:(0,s.jsx)(C.p,{...a})}),(0,s.jsx)(j.C5,{})]})}}),!["lmstudio-chat-completions","ollama-chat"].includes(E)&&(0,s.jsx)(j.zB,{control:u.control,name:"api_key",render:e=>{let{field:a}=e;return(0,s.jsxs)(j.eI,{children:[(0,s.jsx)(j.lR,{children:o("models.apiKey")}),(0,s.jsx)(j.MJ,{children:(0,s.jsx)(C.p,{...a})}),(0,s.jsx)(j.C5,{})]})}}),(0,s.jsx)(j.zB,{control:u.control,name:"abilities",render:()=>(0,s.jsxs)(j.eI,{children:[(0,s.jsx)(j.lR,{children:o("models.abilities")}),(0,s.jsx)("div",{className:"mb-0",children:(0,s.jsx)(j.Rr,{children:o("models.selectModelAbilities")})}),V.map(e=>(0,s.jsx)(j.zB,{control:u.control,name:"abilities",render:a=>{var t;let{field:r}=a;return(0,s.jsxs)(j.eI,{className:"flex flex-row items-start space-x-1 space-y-0",children:[(0,s.jsx)(j.MJ,{children:(0,s.jsx)(y.S,{checked:Array.isArray(r.value)&&(null==(t=r.value)?void 0:t.includes(e.value)),onCheckedChange:a=>{var t;return a?r.onChange([...r.value||[],e.value]):r.onChange(null==(t=r.value)?void 0:t.filter(a=>a!==e.value))}})}),(0,s.jsx)(j.lR,{className:"font-normal",children:e.label})]},e.value)}},e.value)),(0,s.jsx)(j.C5,{})]})}),(0,s.jsxs)(j.eI,{children:[(0,s.jsx)(j.lR,{children:o("models.extraParameters")}),(0,s.jsxs)("div",{className:"space-y-2",children:[N.map((e,a)=>(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(C.p,{placeholder:o("models.keyName"),value:e.key,onChange:e=>T(a,"key",e.target.value)}),(0,s.jsxs)(_.l6,{value:e.type,onValueChange:e=>T(a,"type",e),children:[(0,s.jsx)(_.bq,{className:"w-[120px] bg-[#ffffff] dark:bg-[#2a2a2e]",children:(0,s.jsx)(_.yv,{placeholder:o("models.type")})}),(0,s.jsxs)(_.gC,{children:[(0,s.jsx)(_.eb,{value:"string",children:o("models.string")}),(0,s.jsx)(_.eb,{value:"number",children:o("models.number")}),(0,s.jsx)(_.eb,{value:"boolean",children:o("models.boolean")})]})]}),(0,s.jsx)(C.p,{placeholder:o("models.value"),value:e.value,onChange:e=>T(a,"value",e.target.value)}),(0,s.jsx)("button",{type:"button",className:"p-2 hover:bg-gray-100 rounded",onClick:()=>(e=>{let a=N.filter((a,t)=>t!==e);w(a),u.setValue("extra_args",a)})(a),children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5 text-red-500",children:(0,s.jsx)("path",{d:"M7 4V2H17V4H22V6H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V6H2V4H7ZM6 6V20H18V6H6ZM9 9H11V17H9V9ZM13 9H15V17H13V9Z"})})})]},a)),(0,s.jsx)(f.$,{type:"button",variant:"outline",onClick:()=>{w([...N,{key:"",type:"string",value:""}])},children:o("models.addParameter")})]}),(0,s.jsx)(j.Rr,{children:o("llm.extraParametersDescription")}),(0,s.jsx)(j.C5,{})]})]}),(0,s.jsxs)(b.Es,{children:[a&&(0,s.jsx)(f.$,{type:"button",variant:"destructive",onClick:()=>M(!0),children:o("common.delete")}),(0,s.jsx)(f.$,{type:"submit",children:a?o("common.save"):o("common.submit")}),(0,s.jsx)(f.$,{type:"button",variant:"outline",onClick:()=>(function(){var e;H(!0);let a={};null==(e=u.getValues("extra_args"))||e.forEach(e=>{"number"===e.type?a[e.key]=Number(e.value):"boolean"===e.type?a[e.key]="true"===e.value:a[e.key]=e.value});let t=u.getValues("api_key");m.ok.testLLMModel("_",{uuid:"",name:u.getValues("name"),description:"",requester:u.getValues("model_provider"),requester_config:{base_url:u.getValues("url"),timeout:120},api_keys:t?[t]:[],abilities:u.getValues("abilities"),extra_args:a}).then(()=>{L.oR.success(o("models.testSuccess"))}).catch(()=>{L.oR.error(o("models.testError"))}).finally(()=>{H(!1)})})(),disabled:z,children:o("common.test")}),(0,s.jsx)(f.$,{type:"button",variant:"outline",onClick:()=>n(),children:o("common.cancel")})]})]})})]})}var w=t(4187),R=t(7366);class M{constructor(e){this.id=e.id,this.iconURL=e.iconURL,this.providerLabel=e.providerLabel,this.name=e.name,this.baseURL=e.baseURL}}var V=t(2184),I=t.n(V);function P(e){let{cardVO:a}=e;return(0,s.jsx)("div",{className:"".concat(I().cardContainer),children:(0,s.jsxs)("div",{className:"".concat(I().iconBasicInfoContainer),children:[(0,s.jsx)("img",{className:"".concat(I().iconImage),src:a.iconURL,alt:"icon"}),(0,s.jsxs)("div",{className:"".concat(I().basicInfoContainer),children:[(0,s.jsx)("div",{className:"".concat(I().basicInfoText," ").concat(I().bigText),children:a.name}),(0,s.jsxs)("div",{className:"".concat(I().providerContainer),children:[(0,s.jsx)("svg",{className:"".concat(I().providerIcon),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"36",height:"36",fill:"currentColor",children:(0,s.jsx)("path",{d:"M21 13.2422V20H22V22H2V20H3V13.2422C1.79401 12.435 1 11.0602 1 9.5C1 8.67286 1.22443 7.87621 1.63322 7.19746L4.3453 2.5C4.52393 2.1906 4.85406 2 5.21132 2H18.7887C19.1459 2 19.4761 2.1906 19.6547 2.5L22.3575 7.18172C22.7756 7.87621 23 8.67286 23 9.5C23 11.0602 22.206 12.435 21 13.2422ZM19 13.9725C18.8358 13.9907 18.669 14 18.5 14C17.2409 14 16.0789 13.478 15.25 12.6132C14.4211 13.478 13.2591 14 12 14C10.7409 14 9.5789 13.478 8.75 12.6132C7.9211 13.478 6.75911 14 5.5 14C5.331 14 5.16417 13.9907 5 13.9725V20H19V13.9725ZM5.78865 4L3.35598 8.21321C3.12409 8.59843 3 9.0389 3 9.5C3 10.8807 4.11929 12 5.5 12C6.53096 12 7.44467 11.3703 7.82179 10.4295C8.1574 9.59223 9.3426 9.59223 9.67821 10.4295C10.0553 11.3703 10.969 12 12 12C13.031 12 13.9447 11.3703 14.3218 10.4295C14.6574 9.59223 15.8426 9.59223 16.1782 10.4295C16.5553 11.3703 17.469 12 18.5 12C19.8807 12 21 10.8807 21 9.5C21 9.0389 20.8759 8.59843 20.6347 8.19746L18.2113 4H5.78865Z"})}),(0,s.jsx)("span",{className:"".concat(I().providerLabel),children:a.providerLabel})]}),a.baseURL&&(0,s.jsxs)("div",{className:"".concat(I().baseURLContainer),children:[(0,s.jsx)("svg",{className:"".concat(I().baseURLIcon),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"36",height:"36",fill:"rgba(98,98,98,1)",children:(0,s.jsx)("path",{d:"M13.0607 8.11097L14.4749 9.52518C17.2086 12.2589 17.2086 16.691 14.4749 19.4247L14.1214 19.7782C11.3877 22.5119 6.95555 22.5119 4.22188 19.7782C1.48821 17.0446 1.48821 12.6124 4.22188 9.87874L5.6361 11.293C3.68348 13.2456 3.68348 16.4114 5.6361 18.364C7.58872 20.3166 10.7545 20.3166 12.7072 18.364L13.0607 18.0105C15.0133 16.0578 15.0133 12.892 13.0607 10.9394L11.6465 9.52518L13.0607 8.11097ZM19.7782 14.1214L18.364 12.7072C20.3166 10.7545 20.3166 7.58872 18.364 5.6361C16.4114 3.68348 13.2456 3.68348 11.293 5.6361L10.9394 5.98965C8.98678 7.94227 8.98678 11.1081 10.9394 13.0607L12.3536 14.4749L10.9394 15.8891L9.52518 14.4749C6.79151 11.7413 6.79151 7.30911 9.52518 4.57544L9.87874 4.22188C12.6124 1.48821 17.0446 1.48821 19.7782 4.22188C22.5119 6.95555 22.5119 11.3877 19.7782 14.1214Z"})}),(0,s.jsx)("span",{className:"".concat(I().baseURLText),children:a.baseURL})]})]})]})})}function q(e){let{editMode:a,initEmbeddingId:t,onFormSubmit:l,onFormCancel:n,onEmbeddingDeleted:i}=e,{t:o}=(0,c.Bd)(),d=h.Ik({name:h.Yj().min(1,{message:o("models.modelNameRequired")}),model_provider:h.Yj().min(1,{message:o("models.modelProviderRequired")}),url:h.Yj().optional(),api_key:h.Yj().optional(),extra_args:h.YO(h.Ik({key:h.Yj().min(1,{message:o("models.keyNameRequired")}),type:h.k5(["string","number","boolean"]),value:h.Yj()}).superRefine((e,a)=>{"number"===e.type&&isNaN(Number(e.value))&&a.addIssue({code:g.eq.custom,message:o("models.mustBeValidNumber"),path:["value"]}),"boolean"===e.type&&"true"!==e.value&&"false"!==e.value&&a.addIssue({code:g.eq.custom,message:o("models.mustBeTrueOrFalse"),path:["value"]})})).optional()}),u=(0,p.mN)({resolver:(0,v.u)(d),defaultValues:{name:"",model_provider:"",url:"",api_key:"",extra_args:[]}}),[y,N]=(0,r.useState)([]),[w,R]=(0,r.useState)(!1),[M,V]=(0,r.useState)([]),[I,P]=(0,r.useState)([]),[q,U]=(0,r.useState)(!1),[z,H]=(0,r.useState)("");(0,r.useEffect)(()=>{S().then(()=>{a&&t?T(t).then(e=>{if(u.setValue("name",e.name),u.setValue("model_provider",e.model_provider),H(e.model_provider),u.setValue("url",e.url),u.setValue("api_key",e.api_key),e.extra_args){let a=e.extra_args.map(e=>{let[a,t]=e.split(":"),s="string";return isNaN(Number(t))?("true"===t||"false"===t)&&(s="boolean"):s="number",{key:a,type:s,value:t}});N(a),u.setValue("extra_args",a)}}):u.reset()})},[]);let E=(e,a,t)=>{let s=[...y];s[e]={...s[e],[a]:t},N(s),u.setValue("extra_args",s)};async function S(){let e=await m.ok.getProviderRequesters("text-embedding");V(e.requesters.map(e=>({label:(0,k.Z)(e.label),value:e.name,provider_category:e.spec.provider_category||"manufacturer",description:(0,k.Z)(e.description)||void 0}))),P(e.requesters.map(e=>{let a=e.spec.config;for(let e=0;e<a.length;e++)if("base_url"==a[e].name){var t;return(null==(t=a[e].default)?void 0:t.toString())||""}return""}))}async function T(e){var a;let t=await m.ok.getProviderEmbeddingModel(e),s=[],r=t.model.extra_args;for(let e in r)s.push("".concat(e,":").concat(r[e]));return{name:t.model.name,model_provider:t.model.requester,url:null==(a=t.model.requester_config)?void 0:a.base_url,api_key:t.model.api_keys[0],extra_args:s}}async function B(e){try{await m.ok.createProviderEmbeddingModel(e),l(),L.oR.success(o("models.createSuccess"))}catch(e){L.oR.error(o("models.createError")+e.message)}}async function Z(e){try{await m.ok.updateProviderEmbeddingModel(t||"",e),l(),L.oR.success(o("models.saveSuccess"))}catch(e){L.oR.error(o("models.saveError")+e.message)}}return(0,s.jsxs)("div",{children:[(0,s.jsx)(b.lG,{open:w,onOpenChange:R,children:(0,s.jsxs)(b.Cf,{children:[(0,s.jsx)(b.c7,{children:(0,s.jsx)(b.L3,{children:o("common.confirmDelete")})}),(0,s.jsx)(b.rr,{children:o("models.deleteConfirmation")}),(0,s.jsxs)(b.Es,{children:[(0,s.jsx)(f.$,{variant:"outline",onClick:()=>R(!1),children:o("common.cancel")}),(0,s.jsx)(f.$,{variant:"destructive",onClick:()=>{t&&m.ok.deleteProviderEmbeddingModel(t).then(()=>{i(),L.oR.success(o("models.deleteSuccess"))}).catch(e=>{L.oR.error(o("models.deleteError")+e.message)}),R(!1)},children:o("common.confirmDelete")})]})]})}),(0,s.jsx)(j.lV,{...u,children:(0,s.jsxs)("form",{onSubmit:u.handleSubmit(function(e){var s;let r={};null==(s=e.extra_args)||s.forEach(e=>{"number"===e.type?r[e.key]=Number(e.value):"boolean"===e.type?r[e.key]="true"===e.value:r[e.key]=e.value});let l={uuid:a?t||"":x.k.generate(),name:e.name,description:"",requester:e.model_provider,requester_config:{base_url:e.url||"",timeout:120},extra_args:r,api_keys:e.api_key?[e.api_key]:[]};a?Z(l).then(()=>{u.reset()}):B(l).then(()=>{u.reset()})}),className:"space-y-8",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(j.zB,{control:u.control,name:"name",render:e=>{let{field:a}=e;return(0,s.jsxs)(j.eI,{children:[(0,s.jsxs)(j.lR,{children:[o("models.modelName"),(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)(j.MJ,{children:(0,s.jsx)(C.p,{...a})}),(0,s.jsx)(j.C5,{}),(0,s.jsx)(j.Rr,{children:o("models.modelProviderDescription")})]})}}),(0,s.jsx)(j.zB,{control:u.control,name:"model_provider",render:e=>{var a,t;let{field:r}=e;return(0,s.jsxs)(j.eI,{children:[(0,s.jsxs)(j.lR,{children:[o("models.modelProvider"),(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)(j.MJ,{children:(0,s.jsxs)(_.l6,{onValueChange:e=>{r.onChange(e),H(e);let a=M.findIndex(a=>a.value===e);-1!==a&&u.setValue("url",I[a])},value:r.value,children:[(0,s.jsx)(_.bq,{className:"w-[180px] bg-[#ffffff] dark:bg-[#2a2a2e]",children:(0,s.jsx)(_.yv,{placeholder:o("models.selectModelProvider")})}),(0,s.jsxs)(_.gC,{children:[(0,s.jsxs)(_.s3,{children:[(0,s.jsx)(_.TR,{children:o("models.builtin")}),M.filter(e=>"builtin"===e.provider_category).map(e=>(0,s.jsx)(_.eb,{value:e.value,children:e.label},e.value))]}),(0,s.jsxs)(_.s3,{children:[(0,s.jsx)(_.TR,{children:o("models.modelManufacturer")}),M.filter(e=>"manufacturer"===e.provider_category).map(e=>(0,s.jsx)(_.eb,{value:e.value,children:e.label},e.value))]}),(0,s.jsxs)(_.s3,{children:[(0,s.jsx)(_.TR,{children:o("models.aggregationPlatform")}),M.filter(e=>"maas"===e.provider_category).map(e=>(0,s.jsx)(_.eb,{value:e.value,children:e.label},e.value))]}),(0,s.jsxs)(_.s3,{children:[(0,s.jsx)(_.TR,{children:o("models.selfDeployed")}),M.filter(e=>"self-hosted"===e.provider_category).map(e=>(0,s.jsx)(_.eb,{value:e.value,children:e.label},e.value))]})]})]})}),z&&(null==(a=M.find(e=>e.value===z))?void 0:a.description)&&(0,s.jsx)(j.Rr,{children:null==(t=M.find(e=>e.value===z))?void 0:t.description}),(0,s.jsx)(j.C5,{})]})}}),!["seekdb-embedding"].includes(z)&&(0,s.jsx)(j.zB,{control:u.control,name:"url",render:e=>{let{field:a}=e;return(0,s.jsxs)(j.eI,{children:[(0,s.jsx)(j.lR,{children:o("models.requestURL")}),(0,s.jsx)(j.MJ,{children:(0,s.jsx)(C.p,{...a})}),(0,s.jsx)(j.C5,{})]})}}),!["ollama-chat","seekdb-embedding"].includes(z)&&(0,s.jsx)(j.zB,{control:u.control,name:"api_key",render:e=>{let{field:a}=e;return(0,s.jsxs)(j.eI,{children:[(0,s.jsx)(j.lR,{children:o("models.apiKey")}),(0,s.jsx)(j.MJ,{children:(0,s.jsx)(C.p,{...a})}),(0,s.jsx)(j.C5,{})]})}}),(0,s.jsxs)(j.eI,{children:[(0,s.jsx)(j.lR,{children:o("models.extraParameters")}),(0,s.jsxs)("div",{className:"space-y-2",children:[y.map((e,a)=>(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(C.p,{placeholder:o("models.keyName"),value:e.key,onChange:e=>E(a,"key",e.target.value)}),(0,s.jsxs)(_.l6,{value:e.type,onValueChange:e=>E(a,"type",e),children:[(0,s.jsx)(_.bq,{className:"w-[120px] bg-[#ffffff] dark:bg-[#2a2a2e]",children:(0,s.jsx)(_.yv,{placeholder:o("models.type")})}),(0,s.jsxs)(_.gC,{children:[(0,s.jsx)(_.eb,{value:"string",children:o("models.string")}),(0,s.jsx)(_.eb,{value:"number",children:o("models.number")}),(0,s.jsx)(_.eb,{value:"boolean",children:o("models.boolean")})]})]}),(0,s.jsx)(C.p,{placeholder:o("models.value"),value:e.value,onChange:e=>E(a,"value",e.target.value)}),(0,s.jsx)("button",{type:"button",className:"p-2 hover:bg-gray-100 rounded",onClick:()=>(e=>{let a=y.filter((a,t)=>t!==e);N(a),u.setValue("extra_args",a)})(a),children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5 text-red-500",children:(0,s.jsx)("path",{d:"M7 4V2H17V4H22V6H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V6H2V4H7ZM6 6V20H18V6H6ZM9 9H11V17H9V9ZM13 9H15V17H13V9Z"})})})]},a)),(0,s.jsx)(f.$,{type:"button",variant:"outline",onClick:()=>{N([...y,{key:"",type:"string",value:""}])},children:o("models.addParameter")})]}),(0,s.jsx)(j.Rr,{children:o("embedding.extraParametersDescription")}),(0,s.jsx)(j.C5,{})]})]}),(0,s.jsxs)(b.Es,{children:[a&&(0,s.jsx)(f.$,{type:"button",variant:"destructive",onClick:()=>R(!0),children:o("common.delete")}),(0,s.jsx)(f.$,{type:"submit",children:a?o("common.save"):o("common.submit")}),(0,s.jsx)(f.$,{type:"button",variant:"outline",onClick:()=>(function(){var e,a;U(!0);let t={};null==(e=u.getValues("extra_args"))||e.forEach(e=>{"number"===e.type?t[e.key]=Number(e.value):"boolean"===e.type?t[e.key]="true"===e.value:t[e.key]=e.value});let s=u.getValues("api_key");m.ok.testEmbeddingModel("_",{uuid:"",name:u.getValues("name"),description:"",requester:u.getValues("model_provider"),requester_config:{base_url:null!=(a=u.getValues("url"))?a:"",timeout:120},api_keys:s?[s]:[],extra_args:t}).then(()=>{L.oR.success(o("models.testSuccess"))}).catch(()=>{L.oR.error(o("models.testError"))}).finally(()=>{U(!1)})})(),disabled:q,children:o("common.test")}),(0,s.jsx)(f.$,{type:"button",variant:"outline",onClick:()=>n(),children:o("common.cancel")})]})]})})]})}function U(){let{t:e}=(0,c.Bd)(),[a,t]=(0,r.useState)([]),[n,o]=(0,r.useState)(!1),[d,x]=(0,r.useState)(!1),[v,p]=(0,r.useState)(null),[h,g]=(0,r.useState)([]),[f,j]=(0,r.useState)(!1),[C,_]=(0,r.useState)(!1),[y,V]=(0,r.useState)(null);async function I(){let a=(await m.ok.getProviderRequesters("llm")).requesters.map(e=>({label:(0,k.Z)(e.label),value:e.name}));m.ok.getProviderLLMModels().then(e=>{t(e.models.map(e=>{var t,s;return new l({id:e.uuid,iconURL:m.ok.getProviderRequesterIconURL(e.requester),name:e.name,providerLabel:(null==(t=a.find(a=>a.value===e.requester))?void 0:t.label)||e.requester.substring(0,10),baseURL:null==(s=e.requester_config)?void 0:s.base_url,abilities:e.abilities||[]})}))}).catch(a=>{console.error("get LLM model list error",a),L.oR.error(e("models.getModelListError")+a.message)})}async function U(){let a=(await m.ok.getProviderRequesters("text-embedding")).requesters.map(e=>({label:(0,k.Z)(e.label),value:e.name}));m.ok.getProviderEmbeddingModels().then(e=>{g(e.models.map(e=>{var t,s;return new M({id:e.uuid,iconURL:m.ok.getProviderRequesterIconURL(e.requester),name:e.name,providerLabel:(null==(t=a.find(a=>a.value===e.requester))?void 0:t.label)||e.requester.substring(0,10),baseURL:(null==(s=e.requester_config)?void 0:s.base_url)||""})}))}).catch(a=>{console.error("get Embedding model list error",a),L.oR.error(e("embedding.getModelListError")+a.message)})}return(0,r.useEffect)(()=>{I(),U()},[]),(0,s.jsxs)("div",{children:[(0,s.jsx)(b.lG,{open:n,onOpenChange:o,children:(0,s.jsxs)(b.Cf,{className:"w-[700px] p-6",children:[(0,s.jsx)(b.c7,{children:(0,s.jsx)(b.L3,{children:d?e("models.editModel"):e("models.createModel")})}),(0,s.jsx)(N,{editMode:d,initLLMId:null==v?void 0:v.id,onFormSubmit:()=>{o(!1),I()},onFormCancel:()=>{o(!1)},onLLMDeleted:()=>{o(!1),I()}})]})}),(0,s.jsx)(b.lG,{open:f,onOpenChange:j,children:(0,s.jsxs)(b.Cf,{className:"w-[700px] p-6",children:[(0,s.jsx)(b.c7,{children:(0,s.jsx)(b.L3,{children:C?e("embedding.editModel"):e("embedding.createModel")})}),(0,s.jsx)(q,{editMode:C,initEmbeddingId:null==y?void 0:y.id,onFormSubmit:()=>{j(!1),U()},onFormCancel:()=>{j(!1)},onEmbeddingDeleted:()=>{j(!1),U()}})]})}),(0,s.jsxs)(R.tU,{defaultValue:"llm",className:"w-full",children:[(0,s.jsxs)("div",{className:"flex flex-row gap-0 mb-4",children:[(0,s.jsx)("div",{className:"flex flex-row justify-between items-center px-[0.8rem]",children:(0,s.jsxs)(R.j7,{className:"shadow-md py-5 bg-[#f0f0f0] dark:bg-[#2a2a2e]",children:[(0,s.jsx)(R.Xi,{value:"llm",className:"px-6 py-4 cursor-pointer",children:e("llm.llmModels")}),(0,s.jsx)(R.Xi,{value:"embedding",className:"px-6 py-4 cursor-pointer",children:e("embedding.embeddingModels")})]})}),(0,s.jsx)(R.av,{value:"llm",children:(0,s.jsx)("div",{className:"flex flex-row justify-between items-center px-[0.4rem] h-full",children:(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("llm.description")})})}),(0,s.jsx)(R.av,{value:"embedding",children:(0,s.jsx)("div",{className:"flex flex-row justify-between items-center px-[0.4rem] h-full",children:(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("embedding.description")})})})]}),(0,s.jsx)(R.av,{value:"llm",children:(0,s.jsxs)("div",{className:"".concat(i().modelListContainer),children:[(0,s.jsx)(w.A,{width:"100%",height:"10rem",plusSize:"90px",onClick:function(){x(!1),p(null),o(!0)}}),a.map(e=>(0,s.jsx)("div",{onClick:()=>{x(!0),p(e),o(!0)},children:(0,s.jsx)(u,{cardVO:e})},e.id))]})}),(0,s.jsx)(R.av,{value:"embedding",children:(0,s.jsxs)("div",{className:"".concat(i().modelListContainer),children:[(0,s.jsx)(w.A,{width:"100%",height:"10rem",plusSize:"90px",onClick:function(){_(!1),V(null),j(!0)}}),h.map(e=>(0,s.jsx)("div",{onClick:()=>{_(!0),V(e),j(!0)},children:(0,s.jsx)(P,{cardVO:e})},e.id))]})})]})]})}}},e=>{e.O(0,[86,346,615,611,785,698,574,48,570,422,247,358],()=>e(e.s=7775)),_N_E=e.O()}]);
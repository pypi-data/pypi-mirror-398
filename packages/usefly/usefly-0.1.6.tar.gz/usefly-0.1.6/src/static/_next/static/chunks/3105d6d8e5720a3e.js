(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,21658,e=>{"use strict";var t=e.i(96243),r=e.i(93221),a=e.i(26587),n=e.i(40495),s=e.i(70065),i=e.i(67881),l=e.i(12524),o=e.i(29439),c=e.i(10965);let d=(0,c.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),u=(0,c.default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var m=e.i(22036),p=e.i(44215),f=e.i(30374),h=e.i(23750),x=e.i(84762),g=e.i(59377),v=/[\\\/_+.#"@\[\(\{&]/,j=/[\\\/_+.#"@\[\(\{&]/g,b=/[\s-]/,y=/[\s-]/g;function w(e){return e.toLowerCase().replace(y," ")}var C=e.i(99359);e.i(35059);var N=e.i(81380),k=Symbol.for("react.lazy"),S=r[" use ".trim().toString()];function E(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===k&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}var D=Symbol("radix.slottable");function R(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===D}var _=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{var n,s;let i,l,o,c=(s=n=`Primitive.${a}`,(i=r.forwardRef((e,t)=>{let{children:a,...n}=e;if(E(a)&&"function"==typeof S&&(a=S(a._payload)),r.isValidElement(a)){var s;let e,i,l=(s=a,(i=(e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.ref:(i=(e=Object.getOwnPropertyDescriptor(s,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.props.ref:s.props.ref||s.ref),o=function(e,t){let r={...t};for(let a in t){let n=e[a],s=t[a];/^on[A-Z]/.test(a)?n&&s?r[a]=(...e)=>{let t=s(...e);return n(...e),t}:n&&(r[a]=n):"style"===a?r[a]={...n,...s}:"className"===a&&(r[a]=[n,s].filter(Boolean).join(" "))}return{...e,...r}}(n,a.props);return a.type!==r.Fragment&&(o.ref=t?(0,N.composeRefs)(t,l):l),r.cloneElement(a,o)}return r.Children.count(a)>1?r.Children.only(null):null})).displayName=`${s}.SlotClone`,l=i,(o=r.forwardRef((e,a)=>{let{children:n,...s}=e;E(n)&&"function"==typeof S&&(n=S(n._payload));let i=r.Children.toArray(n),o=i.find(R);if(o){let e=o.props.children,n=i.map(t=>t!==o?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,t.jsx)(l,{...s,ref:a,children:r.isValidElement(e)?r.cloneElement(e,void 0,n):null})}return(0,t.jsx)(l,{...s,ref:a,children:n})})).displayName=`${n}.Slot`,o),d=r.forwardRef((e,r)=>{let{asChild:n,...s}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(n?c:a,{...s,ref:r})});return d.displayName=`Primitive.${a}`,{...e,[a]:d}},{}),A=e.i(26993),P=e.i(34960),I='[cmdk-group=""]',F='[cmdk-group-items=""]',O='[cmdk-item=""]',M=`${O}:not([aria-disabled="true"])`,T="cmdk-item-select",$="data-value",z=(e,t,r)=>{var a;return a=e,function e(t,r,a,n,s,i,l){if(i===r.length)return s===t.length?1:.99;var o=`${s},${i}`;if(void 0!==l[o])return l[o];for(var c,d,u,m,p=n.charAt(i),f=a.indexOf(p,s),h=0;f>=0;)(c=e(t,r,a,n,f+1,i+1,l))>h&&(f===s?c*=1:v.test(t.charAt(f-1))?(c*=.8,(u=t.slice(s,f-1).match(j))&&s>0&&(c*=Math.pow(.999,u.length))):b.test(t.charAt(f-1))?(c*=.9,(m=t.slice(s,f-1).match(y))&&s>0&&(c*=Math.pow(.999,m.length))):(c*=.17,s>0&&(c*=Math.pow(.999,f-s))),t.charAt(f)!==r.charAt(i)&&(c*=.9999)),(c<.1&&a.charAt(f-1)===n.charAt(i+1)||n.charAt(i+1)===n.charAt(i)&&a.charAt(f-1)!==n.charAt(i))&&.1*(d=e(t,r,a,n,f+1,i+2,l))>c&&(c=.1*d),c>h&&(h=c),f=a.indexOf(p,f+1);return l[o]=h,h}(a=r&&r.length>0?`${a+" "+r.join(" ")}`:a,t,w(a),w(t),0,0,{})},L=r.createContext(void 0),B=r.createContext(void 0),H=r.createContext(void 0),V=r.forwardRef((e,t)=>{let a=Q(()=>{var t,r;return{search:"",value:null!=(r=null!=(t=e.value)?t:e.defaultValue)?r:"",filtered:{count:0,items:new Map,groups:new Set}}}),n=Q(()=>new Set),s=Q(()=>new Map),i=Q(()=>new Map),l=Q(()=>new Set),o=J(e),{label:c,children:d,value:u,onValueChange:m,filter:p,shouldFilter:f,loop:h,disablePointerSelection:x=!1,vimBindings:g=!0,...v}=e,j=(0,A.useId)(),b=(0,A.useId)(),y=(0,A.useId)(),w=r.useRef(null),C=ea();X(()=>{if(void 0!==u){let e=u.trim();a.current.value=e,N.emit()}},[u]),X(()=>{C(6,P)},[]);let N=r.useMemo(()=>({subscribe:e=>(l.current.add(e),()=>l.current.delete(e)),snapshot:()=>a.current,setState:(e,t,r)=>{var n,s,i;if(!Object.is(a.current[e],t)){if(a.current[e]=t,"search"===e)R(),E(),C(1,D);else if("value"===e&&(r||C(5,P),(null==(n=o.current)?void 0:n.value)!==void 0)){null==(i=(s=o.current).onValueChange)||i.call(s,null!=t?t:"");return}N.emit()}},emit:()=>{l.current.forEach(e=>e())}}),[]),k=r.useMemo(()=>({value:(e,t,r)=>{var n;t!==(null==(n=i.current.get(e))?void 0:n.value)&&(i.current.set(e,{value:t,keywords:r}),a.current.filtered.items.set(e,S(t,r)),C(2,()=>{E(),N.emit()}))},item:(e,t)=>(n.current.add(e),t&&(s.current.has(t)?s.current.get(t).add(e):s.current.set(t,new Set([e]))),C(3,()=>{R(),E(),a.current.value||D(),N.emit()}),()=>{i.current.delete(e),n.current.delete(e),a.current.filtered.items.delete(e);let t=H();C(4,()=>{R(),(null==t?void 0:t.getAttribute("id"))===e&&D(),N.emit()})}),group:e=>(s.current.has(e)||s.current.set(e,new Set),()=>{i.current.delete(e),s.current.delete(e)}),filter:()=>o.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>o.current.disablePointerSelection,listId:j,inputId:y,labelId:b,listInnerRef:w}),[]);function S(e,t){var r,n;let s=null!=(n=null==(r=o.current)?void 0:r.filter)?n:z;return e?s(e,a.current.search,t):0}function E(){if(!a.current.search||!1===o.current.shouldFilter)return;let e=a.current.filtered.items,t=[];a.current.filtered.groups.forEach(r=>{let a=s.current.get(r),n=0;a.forEach(t=>{n=Math.max(e.get(t),n)}),t.push([r,n])});let r=w.current;V().sort((t,r)=>{var a,n;let s=t.getAttribute("id"),i=r.getAttribute("id");return(null!=(a=e.get(i))?a:0)-(null!=(n=e.get(s))?n:0)}).forEach(e=>{let t=e.closest(F);t?t.appendChild(e.parentElement===t?e:e.closest(`${F} > *`)):r.appendChild(e.parentElement===r?e:e.closest(`${F} > *`))}),t.sort((e,t)=>t[1]-e[1]).forEach(e=>{var t;let r=null==(t=w.current)?void 0:t.querySelector(`${I}[${$}="${encodeURIComponent(e[0])}"]`);null==r||r.parentElement.appendChild(r)})}function D(){let e=V().find(e=>"true"!==e.getAttribute("aria-disabled")),t=null==e?void 0:e.getAttribute($);N.setState("value",t||void 0)}function R(){var e,t,r,l;if(!a.current.search||!1===o.current.shouldFilter){a.current.filtered.count=n.current.size;return}a.current.filtered.groups=new Set;let c=0;for(let s of n.current){let n=S(null!=(t=null==(e=i.current.get(s))?void 0:e.value)?t:"",null!=(l=null==(r=i.current.get(s))?void 0:r.keywords)?l:[]);a.current.filtered.items.set(s,n),n>0&&c++}for(let[e,t]of s.current)for(let r of t)if(a.current.filtered.items.get(r)>0){a.current.filtered.groups.add(e);break}a.current.filtered.count=c}function P(){var e,t,r;let a=H();a&&((null==(e=a.parentElement)?void 0:e.firstChild)===a&&(null==(r=null==(t=a.closest(I))?void 0:t.querySelector('[cmdk-group-heading=""]'))||r.scrollIntoView({block:"nearest"})),a.scrollIntoView({block:"nearest"}))}function H(){var e;return null==(e=w.current)?void 0:e.querySelector(`${O}[aria-selected="true"]`)}function V(){var e;return Array.from((null==(e=w.current)?void 0:e.querySelectorAll(M))||[])}function U(e){let t=V()[e];t&&N.setState("value",t.getAttribute($))}function G(e){var t;let r=H(),a=V(),n=a.findIndex(e=>e===r),s=a[n+e];null!=(t=o.current)&&t.loop&&(s=n+e<0?a[a.length-1]:n+e===a.length?a[0]:a[n+e]),s&&N.setState("value",s.getAttribute($))}function q(e){let t=H(),r=null==t?void 0:t.closest(I),a;for(;r&&!a;)a=null==(r=e>0?function(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}(r,I):function(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}(r,I))?void 0:r.querySelector(M);a?N.setState("value",a.getAttribute($)):G(e)}let K=()=>U(V().length-1),W=e=>{e.preventDefault(),e.metaKey?K():e.altKey?q(1):G(1)},Y=e=>{e.preventDefault(),e.metaKey?U(0):e.altKey?q(-1):G(-1)};return r.createElement(_.div,{ref:t,tabIndex:-1,...v,"cmdk-root":"",onKeyDown:e=>{var t;if(null==(t=v.onKeyDown)||t.call(v,e),!e.defaultPrevented)switch(e.key){case"n":case"j":g&&e.ctrlKey&&W(e);break;case"ArrowDown":W(e);break;case"p":case"k":g&&e.ctrlKey&&Y(e);break;case"ArrowUp":Y(e);break;case"Home":e.preventDefault(),U(0);break;case"End":e.preventDefault(),K();break;case"Enter":if(!e.nativeEvent.isComposing&&229!==e.keyCode){e.preventDefault();let t=H();if(t){let e=new Event(T);t.dispatchEvent(e)}}}}},r.createElement("label",{"cmdk-label":"",htmlFor:k.inputId,id:k.labelId,style:es},c),en(e,e=>r.createElement(B.Provider,{value:N},r.createElement(L.Provider,{value:k},e))))}),U=r.forwardRef((e,t)=>{var a,n;let s=(0,A.useId)(),i=r.useRef(null),l=r.useContext(H),o=r.useContext(L),c=J(e),d=null!=(n=null==(a=c.current)?void 0:a.forceMount)?n:null==l?void 0:l.forceMount;X(()=>{if(!d)return o.item(s,null==l?void 0:l.id)},[d]);let u=er(s,i,[e.value,e.children,i],e.keywords),m=r.useContext(B),p=et(e=>e.value&&e.value===u.current),f=et(e=>!!d||!1===o.filter()||!e.search||e.filtered.items.get(s)>0);function h(){var e,t;x(),null==(t=(e=c.current).onSelect)||t.call(e,u.current)}function x(){m.setState("value",u.current,!0)}if(r.useEffect(()=>{let t=i.current;if(!(!t||e.disabled))return t.addEventListener(T,h),()=>t.removeEventListener(T,h)},[f,e.onSelect,e.disabled]),!f)return null;let{disabled:g,value:v,onSelect:j,forceMount:b,keywords:y,...w}=e;return r.createElement(_.div,{ref:ee([i,t]),...w,id:s,"cmdk-item":"",role:"option","aria-disabled":!!g,"aria-selected":!!p,"data-disabled":!!g,"data-selected":!!p,onPointerMove:g||o.getDisablePointerSelection()?void 0:x,onClick:g?void 0:h},e.children)}),G=r.forwardRef((e,t)=>{let{heading:a,children:n,forceMount:s,...i}=e,l=(0,A.useId)(),o=r.useRef(null),c=r.useRef(null),d=(0,A.useId)(),u=r.useContext(L),m=et(e=>!!s||!1===u.filter()||!e.search||e.filtered.groups.has(l));X(()=>u.group(l),[]),er(l,o,[e.value,e.heading,c]);let p=r.useMemo(()=>({id:l,forceMount:s}),[s]);return r.createElement(_.div,{ref:ee([o,t]),...i,"cmdk-group":"",role:"presentation",hidden:!m||void 0},a&&r.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:d},a),en(e,e=>r.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":a?d:void 0},r.createElement(H.Provider,{value:p},e))))}),q=r.forwardRef((e,t)=>{let{alwaysRender:a,...n}=e,s=r.useRef(null),i=et(e=>!e.search);return a||i?r.createElement(_.div,{ref:ee([s,t]),...n,"cmdk-separator":"",role:"separator"}):null}),K=r.forwardRef((e,t)=>{let{onValueChange:a,...n}=e,s=null!=e.value,i=r.useContext(B),l=et(e=>e.search),o=et(e=>e.value),c=r.useContext(L),d=r.useMemo(()=>{var e;let t=null==(e=c.listInnerRef.current)?void 0:e.querySelector(`${O}[${$}="${encodeURIComponent(o)}"]`);return null==t?void 0:t.getAttribute("id")},[]);return r.useEffect(()=>{null!=e.value&&i.setState("search",e.value)},[e.value]),r.createElement(_.input,{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":d,id:c.inputId,type:"text",value:s?e.value:l,onChange:e=>{s||i.setState("search",e.target.value),null==a||a(e.target.value)}})}),W=r.forwardRef((e,t)=>{let{children:a,label:n="Suggestions",...s}=e,i=r.useRef(null),l=r.useRef(null),o=r.useContext(L);return r.useEffect(()=>{if(l.current&&i.current){let e=l.current,t=i.current,r,a=new ResizeObserver(()=>{r=requestAnimationFrame(()=>{let r=e.offsetHeight;t.style.setProperty("--cmdk-list-height",r.toFixed(1)+"px")})});return a.observe(e),()=>{cancelAnimationFrame(r),a.unobserve(e)}}},[]),r.createElement(_.div,{ref:ee([i,t]),...s,"cmdk-list":"",role:"listbox","aria-label":n,id:o.listId},en(e,e=>r.createElement("div",{ref:ee([l,o.listInnerRef]),"cmdk-list-sizer":""},e)))}),Y=r.forwardRef((e,t)=>{let{open:a,onOpenChange:n,overlayClassName:s,contentClassName:i,container:l,...o}=e;return r.createElement(C.Root,{open:a,onOpenChange:n},r.createElement(C.Portal,{container:l},r.createElement(C.Overlay,{"cmdk-overlay":"",className:s}),r.createElement(C.Content,{"aria-label":e.label,"cmdk-dialog":"",className:i},r.createElement(V,{ref:t,...o}))))}),Z=Object.assign(V,{List:W,Item:U,Input:K,Group:G,Separator:q,Dialog:Y,Empty:r.forwardRef((e,t)=>et(e=>0===e.filtered.count)?r.createElement(_.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Loading:r.forwardRef((e,t)=>{let{progress:a,children:n,label:s="Loading...",...i}=e;return r.createElement(_.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":a,"aria-valuemin":0,"aria-valuemax":100,"aria-label":s},en(e,e=>r.createElement("div",{"aria-hidden":!0},e)))})});function J(e){let t=r.useRef(e);return X(()=>{t.current=e}),t}var X="undefined"==typeof window?r.useEffect:r.useLayoutEffect;function Q(e){let t=r.useRef();return void 0===t.current&&(t.current=e()),t}function ee(e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}function et(e){let t=r.useContext(B),a=()=>e(t.snapshot());return(0,P.useSyncExternalStore)(t.subscribe,a,a)}function er(e,t,a,n=[]){let s=r.useRef(),i=r.useContext(L);return X(()=>{var r;let l=(()=>{var e;for(let t of a){if("string"==typeof t)return t.trim();if("object"==typeof t&&"current"in t)return t.current?null==(e=t.current.textContent)?void 0:e.trim():s.current}})(),o=n.map(e=>e.trim());i.value(e,l,o),null==(r=t.current)||r.setAttribute($,l),s.current=l}),s}var ea=()=>{let[e,t]=r.useState(),a=Q(()=>new Map);return X(()=>{a.current.forEach(e=>e()),a.current=new Map},[e]),(e,r)=>{a.current.set(e,r),t({})}};function en({asChild:e,children:t},a){let n;return e&&r.isValidElement(t)?r.cloneElement("function"==typeof(n=t.type)?n(t.props):"render"in n?n.render(t.props):t,{ref:t.ref},a(t.props.children)):a(t)}var es={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"},ei=(e.i(60061),e.i(47163));function el({className:e,...r}){return(0,t.jsx)(Z,{"data-slot":"command",className:(0,ei.cn)("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),...r})}function eo({className:e,...r}){return(0,t.jsx)(Z.List,{"data-slot":"command-list",className:(0,ei.cn)("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",e),...r})}function ec({className:e,...r}){return(0,t.jsx)(Z.Group,{"data-slot":"command-group",className:(0,ei.cn)("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e),...r})}function ed({className:e,...r}){return(0,t.jsx)(Z.Item,{"data-slot":"command-item",className:(0,ei.cn)("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}var eu=e.i(46801),em=e.i(63681),ep=e.i(78896),ef=e.i(53017),eh=e.i(6885),ex=e.i(31421),eg=e.i(25937),ev=e.i(52901),ej="Checkbox",[eb,ey]=(0,em.createContextScope)(ej),[ew,eC]=eb(ej),eN=r.forwardRef((e,a)=>{let{__scopeCheckbox:n,name:s,checked:i,defaultChecked:l,required:o,disabled:c,value:d="on",onCheckedChange:u,form:m,...p}=e,[f,h]=r.useState(null),x=(0,eu.useComposedRefs)(a,e=>h(e)),g=r.useRef(!1),v=!f||m||!!f.closest("form"),[j=!1,b]=(0,ef.useControllableState)({prop:i,defaultProp:l,onChange:u}),y=r.useRef(j);return r.useEffect(()=>{let e=f?.form;if(e){let t=()=>b(y.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[f,b]),(0,t.jsxs)(ew,{scope:n,state:j,disabled:c,children:[(0,t.jsx)(ev.Primitive.button,{type:"button",role:"checkbox","aria-checked":eD(j)?"mixed":j,"aria-required":o,"data-state":eR(j),"data-disabled":c?"":void 0,disabled:c,value:d,...p,ref:x,onKeyDown:(0,ep.composeEventHandlers)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,ep.composeEventHandlers)(e.onClick,e=>{b(e=>!!eD(e)||!e),v&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})}),v&&(0,t.jsx)(eE,{control:f,bubbles:!g.current,name:s,value:d,checked:j,required:o,disabled:c,form:m,style:{transform:"translateX(-100%)"},defaultChecked:!eD(l)&&l})]})});eN.displayName=ej;var ek="CheckboxIndicator",eS=r.forwardRef((e,r)=>{let{__scopeCheckbox:a,forceMount:n,...s}=e,i=eC(ek,a);return(0,t.jsx)(eg.Presence,{present:n||eD(i.state)||!0===i.state,children:(0,t.jsx)(ev.Primitive.span,{"data-state":eR(i.state),"data-disabled":i.disabled?"":void 0,...s,ref:r,style:{pointerEvents:"none",...e.style}})})});eS.displayName=ek;var eE=e=>{let{control:a,checked:n,bubbles:s=!0,defaultChecked:i,...l}=e,o=r.useRef(null),c=(0,eh.usePrevious)(n),d=(0,ex.useSize)(a);r.useEffect(()=>{let e=o.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(c!==n&&t){let r=new Event("click",{bubbles:s});e.indeterminate=eD(n),t.call(e,!eD(n)&&n),e.dispatchEvent(r)}},[c,n,s]);let u=r.useRef(!eD(n)&&n);return(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??u.current,...l,tabIndex:-1,ref:o,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function eD(e){return"indeterminate"===e}function eR(e){return eD(e)?"indeterminate":e?"checked":"unchecked"}var e_=e.i(49894);function eA({className:e,...r}){return(0,t.jsx)(eN,{"data-slot":"checkbox",className:(0,ei.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...r,children:(0,t.jsx)(eS,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,t.jsx)(e_.CheckIcon,{className:"size-3.5"})})})}var eP=e.i(94179),eI=e.i(90768);let eF=(0,c.default)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),eO=(0,c.default)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var eM=e.i(60813),eT=e.i(72809);let e$=(0,c.default)("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);var ez=e.i(87668),eL=e.i(78196),eB=e.i(28084),eH=e.i(50516),eV=e.i(97420),eU=e.i(93517),eG=e.i(73772),eq=e.i(55378),eK="Dialog",[eW,eY]=(0,em.createContextScope)(eK),[eZ,eJ]=eW(eK),eX=e=>{let{__scopeDialog:a,children:n,open:s,defaultOpen:i,onOpenChange:l,modal:o=!0}=e,c=r.useRef(null),d=r.useRef(null),[u=!1,m]=(0,ef.useControllableState)({prop:s,defaultProp:i,onChange:l});return(0,t.jsx)(eZ,{scope:a,triggerRef:c,contentRef:d,contentId:(0,ez.useId)(),titleId:(0,ez.useId)(),descriptionId:(0,ez.useId)(),open:u,onOpenChange:m,onOpenToggle:r.useCallback(()=>m(e=>!e),[m]),modal:o,children:n})};eX.displayName=eK;var eQ="DialogTrigger",e0=r.forwardRef((e,r)=>{let{__scopeDialog:a,...n}=e,s=eJ(eQ,a),i=(0,eu.useComposedRefs)(r,s.triggerRef);return(0,t.jsx)(ev.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":tc(s.open),...n,ref:i,onClick:(0,ep.composeEventHandlers)(e.onClick,s.onOpenToggle)})});e0.displayName=eQ;var e1="DialogPortal",[e2,e4]=eW(e1,{forceMount:void 0}),e5=e=>{let{__scopeDialog:a,forceMount:n,children:s,container:i}=e,l=eJ(e1,a);return(0,t.jsx)(e2,{scope:a,forceMount:n,children:r.Children.map(s,e=>(0,t.jsx)(eg.Presence,{present:n||l.open,children:(0,t.jsx)(eH.Portal,{asChild:!0,container:i,children:e})}))})};e5.displayName=e1;var e9="DialogOverlay",e3=r.forwardRef((e,r)=>{let a=e4(e9,e.__scopeDialog),{forceMount:n=a.forceMount,...s}=e,i=eJ(e9,e.__scopeDialog);return i.modal?(0,t.jsx)(eg.Presence,{present:n||i.open,children:(0,t.jsx)(e6,{...s,ref:r})}):null});e3.displayName=e9;var e6=r.forwardRef((e,r)=>{let{__scopeDialog:a,...n}=e,s=eJ(e9,a);return(0,t.jsx)(eU.RemoveScroll,{as:eq.Slot,allowPinchZoom:!0,shards:[s.contentRef],children:(0,t.jsx)(ev.Primitive.div,{"data-state":tc(s.open),...n,ref:r,style:{pointerEvents:"auto",...n.style}})})}),e7="DialogContent",e8=r.forwardRef((e,r)=>{let a=e4(e7,e.__scopeDialog),{forceMount:n=a.forceMount,...s}=e,i=eJ(e7,e.__scopeDialog);return(0,t.jsx)(eg.Presence,{present:n||i.open,children:i.modal?(0,t.jsx)(te,{...s,ref:r}):(0,t.jsx)(tt,{...s,ref:r})})});e8.displayName=e7;var te=r.forwardRef((e,a)=>{let n=eJ(e7,e.__scopeDialog),s=r.useRef(null),i=(0,eu.useComposedRefs)(a,n.contentRef,s);return r.useEffect(()=>{let e=s.current;if(e)return(0,eG.hideOthers)(e)},[]),(0,t.jsx)(tr,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,ep.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:(0,ep.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:(0,ep.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault())})}),tt=r.forwardRef((e,a)=>{let n=eJ(e7,e.__scopeDialog),s=r.useRef(!1),i=r.useRef(!1);return(0,t.jsx)(tr,{...e,ref:a,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(s.current||n.triggerRef.current?.focus(),t.preventDefault()),s.current=!1,i.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(s.current=!0,"pointerdown"===t.detail.originalEvent.type&&(i.current=!0));let r=t.target;n.triggerRef.current?.contains(r)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}})}),tr=r.forwardRef((e,a)=>{let{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:l,...o}=e,c=eJ(e7,n),d=r.useRef(null),u=(0,eu.useComposedRefs)(a,d);return(0,eV.useFocusGuards)(),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eB.FocusScope,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:i,onUnmountAutoFocus:l,children:(0,t.jsx)(eL.DismissableLayer,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":tc(c.open),...o,ref:u,onDismiss:()=>c.onOpenChange(!1)})}),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(tp,{titleId:c.titleId}),(0,t.jsx)(tf,{contentRef:d,descriptionId:c.descriptionId})]})]})}),ta="DialogTitle",tn=r.forwardRef((e,r)=>{let{__scopeDialog:a,...n}=e,s=eJ(ta,a);return(0,t.jsx)(ev.Primitive.h2,{id:s.titleId,...n,ref:r})});tn.displayName=ta;var ts="DialogDescription",ti=r.forwardRef((e,r)=>{let{__scopeDialog:a,...n}=e,s=eJ(ts,a);return(0,t.jsx)(ev.Primitive.p,{id:s.descriptionId,...n,ref:r})});ti.displayName=ts;var tl="DialogClose",to=r.forwardRef((e,r)=>{let{__scopeDialog:a,...n}=e,s=eJ(tl,a);return(0,t.jsx)(ev.Primitive.button,{type:"button",...n,ref:r,onClick:(0,ep.composeEventHandlers)(e.onClick,()=>s.onOpenChange(!1))})});function tc(e){return e?"open":"closed"}to.displayName=tl;var td="DialogTitleWarning",[tu,tm]=(0,em.createContext)(td,{contentName:e7,titleName:ta,docsSlug:"dialog"}),tp=({titleId:e})=>{let t=tm(td),a=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return r.useEffect(()=>{e&&(document.getElementById(e)||console.error(a))},[a,e]),null},tf=({contentRef:e,descriptionId:t})=>{let a=tm("DialogDescriptionWarning"),n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${a.contentName}}.`;return r.useEffect(()=>{let r=e.current?.getAttribute("aria-describedby");t&&r&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},th="AlertDialog",[tx,tg]=(0,em.createContextScope)(th,[eY]),tv=eY(),tj=e=>{let{__scopeAlertDialog:r,...a}=e,n=tv(r);return(0,t.jsx)(eX,{...n,...a,modal:!0})};tj.displayName=th,r.forwardRef((e,r)=>{let{__scopeAlertDialog:a,...n}=e,s=tv(a);return(0,t.jsx)(e0,{...s,...n,ref:r})}).displayName="AlertDialogTrigger";var tb=e=>{let{__scopeAlertDialog:r,...a}=e,n=tv(r);return(0,t.jsx)(e5,{...n,...a})};tb.displayName="AlertDialogPortal";var ty=r.forwardRef((e,r)=>{let{__scopeAlertDialog:a,...n}=e,s=tv(a);return(0,t.jsx)(e3,{...s,...n,ref:r})});ty.displayName="AlertDialogOverlay";var tw="AlertDialogContent",[tC,tN]=tx(tw),tk=r.forwardRef((e,a)=>{let{__scopeAlertDialog:n,children:s,...i}=e,l=tv(n),o=r.useRef(null),c=(0,eu.useComposedRefs)(a,o),d=r.useRef(null);return(0,t.jsx)(tu,{contentName:tw,titleName:tS,docsSlug:"alert-dialog",children:(0,t.jsx)(tC,{scope:n,cancelRef:d,children:(0,t.jsxs)(e8,{role:"alertdialog",...l,...i,ref:c,onOpenAutoFocus:(0,ep.composeEventHandlers)(i.onOpenAutoFocus,e=>{e.preventDefault(),d.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,t.jsx)(eq.Slottable,{children:s}),(0,t.jsx)(tI,{contentRef:o})]})})})});tk.displayName=tw;var tS="AlertDialogTitle",tE=r.forwardRef((e,r)=>{let{__scopeAlertDialog:a,...n}=e,s=tv(a);return(0,t.jsx)(tn,{...s,...n,ref:r})});tE.displayName=tS;var tD="AlertDialogDescription",tR=r.forwardRef((e,r)=>{let{__scopeAlertDialog:a,...n}=e,s=tv(a);return(0,t.jsx)(ti,{...s,...n,ref:r})});tR.displayName=tD;var t_=r.forwardRef((e,r)=>{let{__scopeAlertDialog:a,...n}=e,s=tv(a);return(0,t.jsx)(to,{...s,...n,ref:r})});t_.displayName="AlertDialogAction";var tA="AlertDialogCancel",tP=r.forwardRef((e,r)=>{let{__scopeAlertDialog:a,...n}=e,{cancelRef:s}=tN(tA,a),i=tv(a),l=(0,eu.useComposedRefs)(r,s);return(0,t.jsx)(to,{...i,...n,ref:l})});tP.displayName=tA;var tI=({contentRef:e})=>{let t=`\`${tw}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${tw}\` by passing a \`${tD}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${tw}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return r.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null};function tF({...e}){return(0,t.jsx)(tj,{"data-slot":"alert-dialog",...e})}function tO({...e}){return(0,t.jsx)(tb,{"data-slot":"alert-dialog-portal",...e})}function tM({className:e,...r}){return(0,t.jsx)(ty,{"data-slot":"alert-dialog-overlay",className:(0,ei.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...r})}function tT({className:e,...r}){return(0,t.jsxs)(tO,{children:[(0,t.jsx)(tM,{}),(0,t.jsx)(tk,{"data-slot":"alert-dialog-content",className:(0,ei.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...r})]})}function t$({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,ei.cn)("flex flex-col gap-2 text-center sm:text-left",e),...r})}function tz({className:e,...r}){return(0,t.jsx)(tE,{"data-slot":"alert-dialog-title",className:(0,ei.cn)("text-lg font-semibold",e),...r})}function tL({className:e,...r}){return(0,t.jsx)(tR,{"data-slot":"alert-dialog-description",className:(0,ei.cn)("text-muted-foreground text-sm",e),...r})}function tB({className:e,...r}){return(0,t.jsx)(t_,{className:(0,ei.cn)((0,i.buttonVariants)(),e),...r})}function tH({className:e,...r}){return(0,t.jsx)(tP,{className:(0,ei.cn)((0,i.buttonVariants)({variant:"outline"}),e),...r})}var tV=e.i(10708);function tU({open:e,onOpenChange:a,scenarioId:n,onSuccess:s}){let[l,o]=(0,r.useState)(15),[c,d]=(0,r.useState)("friction"),[u,g]=(0,r.useState)(""),[v,j]=(0,r.useState)(!1),b=async()=>{if(console.log("handleGenerate called",{scenarioId:n,numTasks:l,promptType:c,customPrompt:u}),l<1)return void m.toast.error("Number of personas must be at least 1");j(!0);try{let e=await p.scenarioApi.generateMoreTasks(n,{num_tasks:l,prompt_type:c,custom_prompt:u||void 0});m.toast.success("Personas generated successfully!",{description:`Generated ${e.new_tasks.length} new personas`}),s(),a(!1),o(15),d("friction"),g("")}catch(t){let e=t instanceof Error?t.message:"Persona generation failed";m.toast.error("Generation failed",{description:e})}finally{j(!1)}};return(0,t.jsx)(f.Dialog,{open:e,onOpenChange:a,children:(0,t.jsxs)(f.DialogContent,{className:"max-w-2xl",children:[(0,t.jsxs)(f.DialogHeader,{children:[(0,t.jsxs)(f.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(eM.Sparkles,{className:"w-5 h-5"}),"Generate More Personas"]}),(0,t.jsx)(f.DialogDescription,{children:"Generate additional personas for this scenario using AI. New personas will be automatically selected."})]}),(0,t.jsxs)("div",{className:"space-y-6 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(tV.Label,{htmlFor:"num-personas",children:"Number of Personas"}),(0,t.jsx)(h.Input,{id:"num-personas",type:"number",min:1,value:l,onChange:e=>o(parseInt(e.target.value)||5)}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Recommended: 3-8 personas for focused testing"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(tV.Label,{htmlFor:"custom-prompt",children:"Custom Instructions (Optional)"}),(0,t.jsx)(x.Textarea,{id:"custom-prompt",placeholder:"Add specific instructions to customize task generation, e.g., 'Focus on mobile checkout flow' or 'Test international shipping scenarios'",rows:4,value:u,onChange:e=>g(e.target.value)}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"These instructions will be included in the prompt to tailor persona generation"})]})]}),(0,t.jsxs)(f.DialogFooter,{children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>a(!1),disabled:v,children:"Cancel"}),(0,t.jsx)(i.Button,{type:"button",onClick:b,disabled:v,children:v?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eI.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eM.Sparkles,{className:"w-4 h-4 mr-2"}),"Generate ",l," Personas"]})})]})]})})}let tG=["First-time Visitor","Web Shopper","Mobile Shopper","Power User","Free Trial User","Demo Requester","Subscription Manager","Support Seeker","Feature Explorer"];function tq({open:e,onOpenChange:n,mode:l,scenario:c,analysisResult:u,createFormData:v,onSave:j,onUpdate:b,onDelete:y,onRun:w}){(0,a.useRouter)();let[C,N]=(0,r.useState)(new Set),[k,S]=(0,r.useState)([]),[E,D]=(0,r.useState)(!1),[R,_]=(0,r.useState)(!1),[A,P]=(0,r.useState)(!1),[I,F]=(0,r.useState)(!1),[O,M]=(0,r.useState)(!1),[T,$]=(0,r.useState)(!1),[z,L]=(0,r.useState)(new Set),[B,H]=(0,r.useState)(null),[V,U]=(0,r.useState)(!1),[G,q]=(0,r.useState)(!1);(0,r.useEffect)(()=>{e&&("create"===l&&u?.tasks?(S(u.tasks),N(new Set(u.tasks.map(e=>e.number))),D(!1)):"edit"===l&&c&&(S(c.tasks||[]),N(new Set(c.tasks_metadata?.selected_task_numbers||[])),D(!1)))},[e,l,u,c]);let K="create"===l?u?.tasks_metadata:c?.tasks_metadata,W="create"===l?u?.crawler_summary:c?.crawler_final_result,Y=e=>{N(t=>{let r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})},Z=async()=>{_(!0);try{if("create"===l){if(!u||!v)return void m.toast.error("Missing required data for scenario creation");let e={name:v.name,website_url:v.website_url,description:v.description||"",personas:["crawler"],metrics:v.metrics,email:v.email,tasks:k,selected_task_indices:Array.from(C).map(e=>k.findIndex(t=>t.number===e)),tasks_metadata:u.tasks_metadata||{total_tasks:0,persona_distribution:{}},discovered_urls:[],crawler_final_result:u.crawler_summary||"",crawler_extracted_content:u.crawler_extracted_content||""},t=await p.crawlerApi.save(e);m.toast.success("Scenario saved successfully!",{description:`Created scenario with ${C.size} personas`}),j?.(t.id),n(!1)}else{if(!c)return void m.toast.error("Scenario not found");E?await p.scenarioApi.updateTasksFull(c.id,k,Array.from(C)):await p.scenarioApi.updateTasks(c.id,Array.from(C)),m.toast.success("Scenario updated successfully!",{description:`Updated with ${C.size} selected personas`}),b?.(c.id),n(!1)}}catch(t){let e=t instanceof Error?t.message:"Operation failed";m.toast.error("create"===l?"Save failed":"Update failed",{description:e})}finally{_(!1)}},J=async()=>{if(c&&w){F(!0);try{let e=c.tasks_metadata?.selected_task_numbers||[],t=Array.from(C),r=e.length!==t.length||!e.every(e=>t.includes(e));(E||r)&&(m.toast.info("Saving changes before running..."),E?await p.scenarioApi.updateTasksFull(c.id,k,t):await p.scenarioApi.updateTasks(c.id,t)),await w(c),n(!1)}catch(t){let e=t instanceof Error?t.message:"Failed to run scenario";m.toast.error(e)}finally{F(!1)}}},X=async()=>{if(c){P(!0);try{await p.scenarioApi.delete(c.id),m.toast.success("Scenario deleted successfully"),y?.(c.id),M(!1),n(!1)}catch(t){let e=t instanceof Error?t.message:"Delete failed";m.toast.error("Delete failed",{description:e})}finally{P(!1)}}},Q=async()=>{if("edit"===l&&c)try{let e=await p.scenarioApi.get(c.id);S(e.tasks||[]);let t=e.tasks_metadata?.selected_task_numbers||[];N(new Set(t)),m.toast.success("Tasks refreshed")}catch(e){console.error("Failed to refresh tasks:",e)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.Dialog,{open:e,onOpenChange:n,children:(0,t.jsxs)(f.DialogContent,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,t.jsxs)(f.DialogHeader,{children:[(0,t.jsx)(f.DialogTitle,{className:"text-2xl",children:"create"===l?"Scenario Analysis Complete":"Edit Scenario Personas to Run"}),(0,t.jsx)(f.DialogDescription,{children:"create"===l?"Review the generated personas and select which ones to include in your scenario":"Update persona selection or add new personas for this scenario"})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-6 pr-4",children:[!k.length&&(0,t.jsxs)(s.Card,{className:"border-amber-200 bg-amber-50",children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsx)(s.CardTitle,{className:"text-sm text-amber-900",children:"No Personas Available"})}),(0,t.jsx)(s.CardContent,{className:"text-sm text-amber-800",children:'This scenario doesn\'t have any personas yet. Click "Add Persona" to create one.'})]}),W&&(()=>{let e=null;try{let t="string"==typeof W?JSON.parse(W):W;e=t?.context||null}catch{}return e?(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsx)(s.CardTitle,{className:"text-lg",children:"Website Analysis Summary"})}),(0,t.jsxs)(s.CardContent,{className:"space-y-3",children:[e.summary&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-foreground",children:"Summary"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.summary})]}),e.target_audience&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-foreground",children:"Target Audience"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.target_audience})]}),e.value_proposition&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-foreground",children:"Value Proposition"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.value_proposition})]}),e.vertical&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-foreground",children:"Vertical"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.vertical})]})]})]}):null})(),K?.persona_distribution&&Object.keys(K.persona_distribution).length>0&&(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(s.CardTitle,{className:"text-lg",children:"Filter by Persona Type"}),(0,t.jsx)(s.CardDescription,{className:"mt-1",children:"Click to filter the personas list below"})]}),z.size>0&&(0,t.jsx)("button",{type:"button",onClick:()=>L(new Set),className:"text-xs text-muted-foreground hover:text-foreground underline underline-offset-2 transition-colors",children:"Clear filters"})]})}),(0,t.jsx)(s.CardContent,{children:(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Object.entries(K.persona_distribution).map(([e,r])=>{let a=z.has(e);return(0,t.jsxs)("button",{type:"button",onClick:()=>{L(t=>{let r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})},className:(0,ei.cn)("flex items-center justify-between p-3 rounded transition-all duration-150","border hover:border-primary/50 cursor-pointer",a?"bg-primary/10 border-primary ring-1 ring-primary/30":"bg-muted border-transparent hover:bg-muted/80"),children:[(0,t.jsx)("span",{className:(0,ei.cn)("text-sm font-medium",a&&"text-primary"),children:e}),(0,t.jsx)(eP.Badge,{variant:a?"default":"secondary",children:String(r)})]},e)})})})]}),K?.error&&(0,t.jsxs)(s.Card,{className:"border-amber-200 bg-amber-50",children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsx)(s.CardTitle,{className:"text-sm text-amber-900",children:"Task Generation Warning"})}),(0,t.jsx)(s.CardContent,{className:"text-sm text-amber-800",children:K.error})]}),(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(s.CardTitle,{className:"text-lg",children:["Personas to Run (",k.length,")"]}),(0,t.jsx)(s.CardDescription,{children:z.size>0?(0,t.jsxs)(t.Fragment,{children:["Showing ",k.filter(e=>z.has(e.persona)).length," of ",k.length," personas",(0,t.jsx)("span",{className:"ml-1 text-primary",children:"(filtered)"})]}):(0,t.jsxs)(t.Fragment,{children:["Selected: ",C.size," of ",k.length]})})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:["edit"===l&&(0,t.jsxs)(i.Button,{onClick:()=>$(!0),size:"sm",variant:"default",children:[(0,t.jsx)(eM.Sparkles,{className:"w-4 h-4 mr-1"}),"Generate More Personas"]}),(0,t.jsxs)(i.Button,{onClick:()=>{H({number:k.length>0?Math.max(...k.map(e=>e.number))+1:1,persona:tG[0]||"Explorer",starting_url:c?.website_url||v?.website_url||"",goal:"",steps:""}),U(!0)},size:"sm",variant:"outline",children:[(0,t.jsx)(o.Plus,{className:"w-4 h-4 mr-1"}),"Add Persona"]})]})]})}),(0,t.jsx)(s.CardContent,{className:"space-y-4",children:k.filter(e=>0===z.size||z.has(e.persona)).map(e=>(0,t.jsx)("div",{className:(0,ei.cn)("border rounded-lg p-4 transition-colors cursor-pointer group",C.has(e.number)?"border-primary bg-primary/5":"border-border hover:border-primary/50"),onClick:()=>Y(e.number),children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(eA,{checked:C.has(e.number),onCheckedChange:()=>Y(e.number),onClick:e=>e.stopPropagation()}),(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"font-semibold",children:["Persona Run ",e.number]}),(0,t.jsx)(eP.Badge,{variant:"outline",className:"text-xs",children:e.persona})]}),(0,t.jsxs)("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:t=>{t.stopPropagation(),H({...e}),U(!0)},children:(0,t.jsx)(eO,{className:"w-3.5 h-3.5"})}),(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive",onClick:t=>{var r;return r=e.number,void(t.stopPropagation(),S(e=>e.filter(e=>e.number!==r)),N(e=>{let t=new Set(e);return t.delete(r),t}),D(!0),m.toast.success("Persona deleted"))},children:(0,t.jsx)(d,{className:"w-3.5 h-3.5"})})]})]}),(0,t.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,t.jsxs)("p",{className:"text-muted-foreground",children:[(0,t.jsx)("span",{className:"font-medium",children:"Starting URL:"})," ",(0,t.jsx)("span",{className:"break-all",children:e.starting_url})]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Goal:"})," ",e.goal]}),(0,t.jsxs)("p",{className:"text-muted-foreground",children:[(0,t.jsx)("span",{className:"font-medium",children:"Steps:"})," ",e.steps]}),e.stop&&(0,t.jsxs)("p",{className:"text-muted-foreground",children:[(0,t.jsx)("span",{className:"font-medium",children:"Stop:"})," ",e.stop]})]})]})]})},e.number))})]})]}),(0,t.jsx)(f.DialogFooter,{className:"mt-4 border-t pt-4",children:(0,t.jsxs)("div",{className:"flex justify-between w-full",children:[(0,t.jsx)("div",{className:"flex gap-2",children:"edit"===l&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Button,{variant:"default",onClick:J,disabled:I||R||0===C.size,children:I?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eI.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Starting..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eF,{className:"w-4 h-4 mr-2"}),"Run Selected Personas"]})}),(0,t.jsx)(i.Button,{variant:"destructive",onClick:()=>M(!0),disabled:A||R||I,children:"Delete Scenario"})]})}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>n(!1),children:"create"===l?"Cancel":"Close"}),(0,t.jsx)(i.Button,{onClick:Z,disabled:R||I,children:R?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eI.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"create"===l?"Saving...":"Updating..."]}):(0,t.jsx)(t.Fragment,{children:"create"===l?`Save Scenario (${C.size} personas)`:`Save Changes (${C.size} personas)`})})]})]})})]})}),(0,t.jsx)(f.Dialog,{open:V,onOpenChange:U,children:(0,t.jsxs)(f.DialogContent,{className:"max-w-lg",children:[(0,t.jsx)(f.DialogHeader,{children:(0,t.jsx)(f.DialogTitle,{children:B&&k.find(e=>e.number===B.number)?"Edit Persona":"Add New Persona"})}),B&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-1.5 block",children:"Persona"}),(0,t.jsxs)(g.Popover,{open:G,onOpenChange:q,children:[(0,t.jsx)(g.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(h.Input,{value:B.persona,onChange:e=>H({...B,persona:e.target.value}),onFocus:()=>q(!0),placeholder:"Type or select a persona...",className:"pr-8"}),(0,t.jsx)(e$,{className:"absolute right-2 top-1/2 -translate-y-1/2 h-4 w-4 opacity-50 pointer-events-none"})]})}),(0,t.jsx)(g.PopoverContent,{className:"w-[--radix-popover-trigger-width] p-0",align:"start",onOpenAutoFocus:e=>e.preventDefault(),children:(0,t.jsx)(el,{children:(0,t.jsx)(eo,{className:"max-h-48 overflow-y-auto",children:(0,t.jsx)(ec,{heading:"Suggested Personas",children:tG.filter(e=>e.toLowerCase().includes(B.persona.toLowerCase())).map(e=>(0,t.jsxs)(ed,{value:e,onSelect:()=>{H({...B,persona:e}),q(!1)},children:[(0,t.jsx)(eT.Check,{className:(0,ei.cn)("mr-2 h-4 w-4",B.persona===e?"opacity-100":"opacity-0")}),e]},e))})})})})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Select from suggestions or type your own custom persona"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-1.5 block",children:"Starting URL"}),(0,t.jsx)(h.Input,{value:B.starting_url,onChange:e=>H({...B,starting_url:e.target.value}),placeholder:"https://example.com"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-1.5 block",children:"Goal *"}),(0,t.jsx)(h.Input,{value:B.goal,onChange:e=>H({...B,goal:e.target.value}),placeholder:"What should the persona accomplish?"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-1.5 block",children:"Steps"}),(0,t.jsx)(x.Textarea,{value:B.steps,onChange:e=>H({...B,steps:e.target.value}),placeholder:"Describe the steps to complete the goal...",rows:4})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:[(0,t.jsx)(i.Button,{variant:"outline",onClick:()=>U(!1),children:"Cancel"}),(0,t.jsx)(i.Button,{onClick:()=>{if(!B)return;if(!B.goal.trim())return void m.toast.error("Goal is required");let e=!k.find(e=>e.number===B.number);e?(S(e=>[...e,B]),N(e=>new Set([...e,B.number]))):S(e=>e.map(e=>e.number===B.number?B:e)),D(!0),U(!1),H(null),m.toast.success(e?"Persona added":"Persona updated")},children:k.find(e=>e.number===B.number)?"Update Persona":"Add Persona"})]})]})]})}),(0,t.jsx)(tF,{open:O,onOpenChange:M,children:(0,t.jsxs)(tT,{children:[(0,t.jsxs)(t$,{children:[(0,t.jsx)(tz,{children:"Delete Scenario"}),(0,t.jsx)(tL,{children:"Are you sure you want to delete this scenario? This action cannot be undone."})]}),(0,t.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,t.jsx)(tH,{children:"Cancel"}),(0,t.jsx)(tB,{onClick:X,disabled:A,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:A?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eI.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Deleting..."]}):"Delete"})]})]})}),"edit"===l&&c&&(0,t.jsx)(tU,{open:T,onOpenChange:$,scenarioId:c.id,onSuccess:Q})]})}var tK=e.i(74001);function tW(){let e=(0,a.useRouter)(),{activeExecutions:c,startExecution:f,refreshExecutions:h,onExecutionComplete:x}=(0,tK.useExecutions)(),[g,v]=(0,r.useState)([]),[j,b]=(0,r.useState)(!0),[y,w]=(0,r.useState)(null),[C,N]=(0,r.useState)(null),[k,S]=(0,r.useState)(null),[E,D]=(0,r.useState)(!1),[R,_]=(0,r.useState)(new Set),A=(0,r.useCallback)(async()=>{try{let e=await p.scenarioApi.list();return v(e),e}catch(t){let e=t instanceof Error?t.message:"Failed to fetch scenarios";return m.toast.error(e),[]}},[]);(0,r.useEffect)(()=>{(async()=>{b(!0),0===(await A()).length&&e.push("/scenarios/new"),b(!1)})()},[e,A]),(0,r.useEffect)(()=>x(()=>{A()}),[x,A]);let P=async e=>{console.log("handleViewDetails called with scenario:",e);try{console.log("Fetching scenario with ID:",e.id);let t=await p.scenarioApi.get(e.id);console.log("Received full scenario:",t),S(t),D(!0),console.log("Modal should now be open")}catch(t){console.error("Error in handleViewDetails:",t);let e=t instanceof Error?t.message:"Failed to load scenario";m.toast.error(e)}},I=async()=>{try{let e=await p.scenarioApi.list();v(e)}catch(t){let e=t instanceof Error?t.message:"Failed to refresh scenarios";m.toast.error(e)}},F=async e=>{w(e);try{await p.scenarioApi.delete(e),v(g.filter(t=>t.id!==e)),m.toast.success("Scenario deleted successfully"),N(null)}catch(t){let e=t instanceof Error?t.message:"Failed to delete scenario";m.toast.error(e)}finally{w(null)}},O=async e=>{try{await f(e.id)}catch(e){}},M=async e=>{try{_(t=>new Set(t).add(e.id)),await p.crawlerApi.analyze({scenario_id:e.id,website_url:e.website_url,description:e.description||"",name:e.name,metrics:e.metrics||[],email:e.email||""}),m.toast.success("Reindexing started",{description:"Check the status bar below for progress"}),await h()}catch(t){let e=t instanceof Error?t.message:"Failed to start reindexing";m.toast.error("Failed to start reindexing",{description:e})}finally{_(t=>{let r=new Set(t);return r.delete(e.id),r})}};return j?(0,t.jsx)(n.AppLayout,{children:(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,t.jsx)(l.Loader,{className:"w-6 h-6 animate-spin text-muted-foreground"}),(0,t.jsx)("span",{className:"ml-2 text-muted-foreground",children:"Loading scenarios..."})]})})}):(0,t.jsxs)(n.AppLayout,{children:[(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Scenarios"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage your scenarios and create new ones"})]}),(0,t.jsxs)(i.Button,{onClick:()=>e.push("/scenarios/new"),className:"gap-2",children:[(0,t.jsx)(o.Plus,{className:"w-4 h-4"}),"Create New Scenario"]})]})}),0===g.length?(0,t.jsx)(s.Card,{className:"border-dashed",children:(0,t.jsxs)(s.CardContent,{className:"flex flex-col items-center justify-center py-12",children:[(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"No scenarios yet"}),(0,t.jsx)(i.Button,{onClick:()=>e.push("/scenarios/new"),children:"Create Your First Scenario"})]})}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(e=>{let r,a;return(0,t.jsx)(s.Card,{className:"hover:shadow-lg transition-shadow",children:(0,t.jsx)(s.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-lg text-foreground truncate",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground truncate mt-1",children:e.website_url})]}),!e.tasks?.length&&(0,t.jsxs)("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,t.jsx)(l.Loader,{className:"w-3 h-3 animate-spin"}),"Reindexing..."]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Created ",new Date(e.created_at).toLocaleDateString()]}),(0,t.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,t.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>M(e),disabled:R.has(e.id),children:R.has(e.id)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Loader,{className:"w-4 h-4 mr-2 animate-spin"}),"Reindexing..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u,{className:"w-4 h-4 mr-2"}),"Reindex"]})}),(0,t.jsx)(i.Button,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>P(e),children:"View Details"}),(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>N(e.id),disabled:y===e.id,className:"text-destructive hover:text-destructive hover:bg-destructive/10",children:y===e.id?(0,t.jsx)(l.Loader,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(d,{className:"w-4 h-4"})})]}),(r=e.id,(a=c.find(e=>e.scenario_id===r&&"in_progress"===e.status))?(0,t.jsxs)("div",{className:"mt-2 text-xs text-muted-foreground",children:["Progress: ",a.completed_tasks+a.failed_tasks,"/",a.total_tasks," tasks"]}):null)]})})},e.id)})})]}),(0,t.jsx)(tF,{open:null!==C,onOpenChange:e=>!e&&N(null),children:(0,t.jsxs)(tT,{children:[(0,t.jsxs)(t$,{children:[(0,t.jsx)(tz,{children:"Delete Scenario"}),(0,t.jsx)(tL,{children:"Are you sure you want to delete this scenario? This action cannot be undone."})]}),(0,t.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,t.jsx)(tH,{children:"Cancel"}),(0,t.jsx)(tB,{onClick:()=>C&&F(C),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})}),(0,t.jsx)(tq,{open:E,onOpenChange:e=>{D(e),e||S(null)},mode:"edit",scenario:k||void 0,onUpdate:I,onDelete:e=>{v(g.filter(t=>t.id!==e))},onRun:O})]})}e.s(["default",()=>tW],21658)}]);
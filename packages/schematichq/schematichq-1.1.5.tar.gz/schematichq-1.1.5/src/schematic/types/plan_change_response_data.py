# This file was auto-generated by Fern from our API Definition.

import datetime as dt
import typing

import pydantic
from ..core.pydantic_utilities import IS_PYDANTIC_V2, UniversalBaseModel
from .api_key_request_list_response_data import ApiKeyRequestListResponseData
from .api_key_response_data import ApiKeyResponseData
from .company_response_data import CompanyResponseData
from .plan_change_action import PlanChangeAction
from .plan_change_actor_type import PlanChangeActorType
from .plan_change_base_plan_action import PlanChangeBasePlanAction
from .plan_change_subscription_action import PlanChangeSubscriptionAction
from .plan_snapshot_view import PlanSnapshotView
from .subscription_trait_update import SubscriptionTraitUpdate


class PlanChangeResponseData(UniversalBaseModel):
    action: PlanChangeAction
    actor_type: PlanChangeActorType
    add_ons_added: typing.List[PlanSnapshotView]
    add_ons_removed: typing.List[PlanSnapshotView]
    api_key: typing.Optional[ApiKeyResponseData] = None
    api_key_request: typing.Optional[ApiKeyRequestListResponseData] = None
    base_plan: typing.Optional[PlanSnapshotView] = None
    base_plan_action: typing.Optional[PlanChangeBasePlanAction] = None
    company: typing.Optional[CompanyResponseData] = None
    company_id: str
    created_at: dt.datetime
    environment_id: str
    id: str
    previous_base_plan: typing.Optional[PlanSnapshotView] = None
    request_id: typing.Optional[str] = None
    subscription_change_action: typing.Optional[PlanChangeSubscriptionAction] = None
    traits_updated: typing.List[SubscriptionTraitUpdate] = pydantic.Field()
    """
    Any traits were updated as part of this plan change (via pay-in-advance entitlements).
    """

    updated_at: dt.datetime
    user_id: typing.Optional[str] = None
    user_name: typing.Optional[str] = None

    if IS_PYDANTIC_V2:
        model_config: typing.ClassVar[pydantic.ConfigDict] = pydantic.ConfigDict(extra="allow", frozen=True)  # type: ignore # Pydantic v2
    else:

        class Config:
            frozen = True
            smart_union = True
            extra = pydantic.Extra.allow

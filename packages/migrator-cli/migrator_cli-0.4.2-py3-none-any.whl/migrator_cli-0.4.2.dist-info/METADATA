Metadata-Version: 2.4
Name: migrator-cli
Version: 0.4.2
Summary: Universal migration CLI for Python apps
Project-URL: Homepage, https://github.com/db-toolkit/migrator
Project-URL: Repository, https://github.com/db-toolkit/migrator
Project-URL: Issues, https://github.com/db-toolkit/migrator/issues
Project-URL: Changelog, https://github.com/db-toolkit/migrator/blob/main/CHANGELOG.md
Author-email: Peter Adelodun <adelodunpeter24@gmail.com>
License: MIT
License-File: LICENSE
Keywords: alembic,cli,database,migration,orm,sqlalchemy
Classifier: Development Status :: 5 - Production/Stable
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: 3.13
Classifier: Topic :: Database
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Requires-Python: >=3.9
Requires-Dist: alembic>=1.13.0
Requires-Dist: mako>=1.3.0
Requires-Dist: psycopg2-binary>=2.9.0
Requires-Dist: pydantic>=2.0.0
Requires-Dist: python-dotenv>=1.0.0
Requires-Dist: pyyaml>=6.0
Requires-Dist: rich>=13.0.0
Requires-Dist: sqlalchemy>=2.0.0
Requires-Dist: typer>=0.9.0
Description-Content-Type: text/markdown

# Migrator

**The Universal Migration CLI for Python Apps**

A lightweight, framework-agnostic database migration tool for Python projects using SQLAlchemy. 
Migrator automates what Alembic requires developers to set up manually ‚Äî making migrations as simple as Django's `makemigrations` and `migrate`, but flexible enough for Python any project.

## ‚ú® Features

- **Zero boilerplate** ‚Äî one command to init and start migrating
- **Auto-detect models** ‚Äî finds SQLAlchemy Base classes automatically
- **Smart config** ‚Äî no need to manually edit alembic.ini or env.py
- **Framework agnostic** ‚Äî works with FastAPI, Flask, or standalone SQLAlchemy

## üì¶ Installation

```bash
# Quick install
curl -sSL https://raw.githubusercontent.com/db-toolkit/migrator/main/install.sh | bash

# Or using pip
pip install migrator-cli

```

## üöÄ Quick Start

> **Note:** If you have an existing database with tables, see [MIGRATION_GUIDE.md](MIGRATION_GUIDE.md) first.

### 1. Set up your database URL

Create a `.env` file:

```bash
DATABASE_URL=postgresql://user:password@localhost:5432/dbname
```

### 2. Initialize migrations

```bash
migrator init
```

### 3. Create your first migration

```bash
migrator makemigrations "create user table"
```

### 4. Apply migrations

```bash
migrator migrate
```

## üìñ Commands

```bash
# Initialize migration environment
migrator init

# Create new migration
migrator makemigrations "add email to users"

# Create migration and show SQL
migrator makemigrations "add email to users" --show-sql

# Apply migrations
migrator migrate

# Apply migrations without confirmation
migrator migrate --yes

# Preview migration SQL without applying
migrator migrate --dry-run

# Rollback migrations
migrator downgrade

# Show migration history
migrator history

# Show current revision
migrator current

# Mark database as migrated (for existing databases)
migrator stamp head

# Show migration status
migrator status
```

## üèóÔ∏è Advanced Usage

### Nested Project Structures

```bash
migrator init --base app.core.database:Base
migrator makemigrations "initial" --base app.core.database:Base
```

### Async SQLAlchemy

```bash
# Your .env
DATABASE_URL=postgresql+asyncpg://user:pass@localhost/db
# Migrator auto-converts to: postgresql://user:pass@localhost/db
```

### Custom Config

```bash
migrator init --config backend/settings.py
```

### Verbose Mode

```bash
migrator init --verbose
```

## üîß Troubleshooting

**Base not found?** Use `--base` flag:
```bash
migrator init --base app.core.database:Base
```

**Existing database?** Use `stamp`:
```bash
migrator stamp head
```

## ü§ù Contributing

Contributions welcome! Submit a Pull Request.

## üìÑ License

MIT License - see [LICENSE](LICENSE) file.

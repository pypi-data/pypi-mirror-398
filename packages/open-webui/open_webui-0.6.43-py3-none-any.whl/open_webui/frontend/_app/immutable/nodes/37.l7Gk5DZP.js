import"../chunks/CWj6FrbW.js";import"../chunks/CN51-NxK.js";import{b as Ge,g as Ye,j as e,i as x,d as Qe,e as T,a as p,c as r,w as d,k as c,r as t,t as P,s as _,p as Ze,f as y,m as C,n as ye,o as bt,q as ht,v as wt,h as $t,$ as kt,A as Pt,x as St,l as Q,aX as Ct,u as Dt}from"../chunks/lUdQH9Xf.js";import{i as O}from"../chunks/a8_cTibZ.js";import{e as Et,i as Ht}from"../chunks/CyDjujdM.js";import{r as Nt,a as Fe}from"../chunks/AGdekky4.js";import{a as Lt,b as jt}from"../chunks/gZt8HVPH.js";import{b as Re}from"../chunks/D72e2DEW.js";import{i as et}from"../chunks/VsCEtJ32.js";import{a as R,s as tt}from"../chunks/CcA7kcll.js";import{t as xe}from"../chunks/1N3xujas.js";import{D as It,f as Mt}from"../chunks/CHfhHIQf.js";import{g as Ot}from"../chunks/CSKGYGI6.js";import{c as rt,u as at,W as zt,p as Ve}from"../chunks/B-g4jA4X.js";import{b as qe,g as Ke,c as Bt,d as Ut}from"../chunks/dCd4_7hp.js";import{j as Xe,s as Wt}from"../chunks/DqlUe4q2.js";import{s as At}from"../chunks/9RuGBeWD.js";import{p as se}from"../chunks/wFFmXPqF.js";import"../chunks/BAX94-W5.js";import{b as Tt,c as _e}from"../chunks/VjqWeGTs.js";import{f as Jt}from"../chunks/BjO3HhBo.js";import{D as Ft}from"../chunks/0lhZwTI1.js";import{G as st}from"../chunks/DW4Ik_WH.js";import{T as Le}from"../chunks/BtoSXKKz.js";import{S as Rt}from"../chunks/CXYkuSwN.js";import{D as Vt}from"../chunks/Bj0Dc9XC.js";import{E as qt}from"../chunks/CJyvYL24.js";import{C as Kt}from"../chunks/BjJmTenr.js";import{S as Xt}from"../chunks/BoK-DDlo.js";import{P as Gt}from"../chunks/C4_WGY8S.js";import{C as Yt}from"../chunks/CNi-Z1CP.js";import{S as Qt}from"../chunks/CkkUFZ96.js";import{X as Zt}from"../chunks/9jNi-Hzr.js";import{V as er}from"../chunks/BbkHPwf0.js";var tr=y('<!> <div class="flex items-center"> </div>',1),rr=y('<!> <div class="flex items-center"> </div>',1),ar=y('<!> <div class="flex items-center"> </div>',1),sr=y('<!> <div class="flex items-center"> </div>',1),or=y('<!> <!> <!> <hr class="border-gray-50 dark:border-gray-850/30 my-1"/> <!>',1),nr=y('<div slot="content"><!></div>');function ir(Z,j){Ge(j,!1);const f=()=>R(be,"$i18n",V),l=()=>R(rt,"$config",V),ee=()=>R(at,"$user",V),[V,q]=tt(),be=Ye("i18n");let oe=se(j,"shareHandler",8),K=se(j,"cloneHandler",8),he=se(j,"exportHandler",8),J=se(j,"deleteHandler",8),ne=se(j,"onClose",8),z=C(!1);et(),Ft(Z,{get show(){return e(z)},set show(b){x(z,b)},$$events:{change:b=>{b.detail===!1&&ne()()}},children:(b,H)=>{{let I=ye(()=>(f(),d(()=>f().t("More"))));Le(b,{get content(){return e(I)},children:(B,te)=>{var $=Qe(),D=T($);At(D,j,"default",{},null),p(B,$)},$$slots:{default:!0}})}},$$slots:{default:!0,content:(b,H)=>{var I=nr(),B=r(I);Tt(B,{class:"w-full max-w-[170px] rounded-2xl p-1 border border-gray-100  dark:border-gray-800 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:-2,side:"bottom",align:"start",get transition(){return Jt},children:(te,$)=>{var D=or(),ie=T(D);{var we=w=>{_e(w,{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800  rounded-xl",$$events:{click:()=>{oe()()}},children:(N,S)=>{var h=tr(),i=T(h);Rt(i,{});var o=c(i,2),u=r(o,!0);t(o),P(g=>_(u,g),[()=>(f(),d(()=>f().t("Share")))]),p(N,h)},$$slots:{default:!0}})};O(ie,w=>{l(),d(()=>l().features.enable_community_sharing)&&w(we)})}var le=c(ie,2);_e(le,{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$events:{click:()=>{K()()}},children:(w,N)=>{var S=rr(),h=T(S);Vt(h,{});var i=c(h,2),o=r(i,!0);t(i),P(u=>_(o,u),[()=>(f(),d(()=>f().t("Clone")))]),p(w,S)},$$slots:{default:!0}});var de=c(le,2);{var ve=w=>{_e(w,{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$events:{click:()=>{he()()}},children:(N,S)=>{var h=ar(),i=T(h);It(i,{});var o=c(i,2),u=r(o,!0);t(o),P(g=>_(u,g),[()=>(f(),d(()=>f().t("Export")))]),p(N,h)},$$slots:{default:!0}})};O(de,w=>{ee(),d(()=>{var N,S,h,i;return((N=ee())==null?void 0:N.role)==="admin"||((i=(h=(S=ee())==null?void 0:S.permissions)==null?void 0:h.workspace)==null?void 0:i.prompts_export)})&&w(ve)})}var ce=c(de,4);_e(ce,{class:"flex  gap-2  items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$events:{click:()=>{J()()}},children:(w,N)=>{var S=sr(),h=T(S);st(h,{});var i=c(h,2),o=r(i,!0);t(i),P(u=>_(o,u),[()=>(f(),d(()=>f().t("Delete")))]),p(w,S)},$$slots:{default:!0}}),p(te,D)},$$slots:{default:!0}}),t(I),p(b,I)}},$$legacy:!0}),Ze(),q()}var lr=y('<div class=" text-sm text-gray-500 truncate"> <span class="  font-medium"> </span>.</div>'),dr=y('<button class="flex text-xs items-center space-x-1 px-3 py-1.5 rounded-xl bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-gray-200 transition"><div class=" self-center font-medium line-clamp-1"> </div></button>'),vr=y('<button class="flex text-xs items-center space-x-1 px-3 py-1.5 rounded-xl bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-gray-200 transition"><div class=" self-center font-medium line-clamp-1"> </div></button>'),cr=y('<div class="self-center pl-1.5 translate-y-[0.5px] rounded-l-xl bg-transparent"><button class="p-0.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-900 transition"><!></button></div>'),mr=y('<div class="shrink-0 text-gray-500"> </div>'),ur=y('<button class="self-center w-fit text-sm px-2 py-2 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl" type="button"><!></button>'),pr=y('<button class="self-center w-fit text-sm p-1.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl" type="button"><!></button>'),fr=y('<a class=" flex space-x-4 cursor-pointer text-left w-full px-3 py-2.5 dark:hover:bg-gray-850/50 hover:bg-gray-50 transition rounded-2xl"><div class=" flex flex-col flex-1 space-x-4 cursor-pointer w-full pl-1"><div class=" flex-1 flex items-center gap-2 self-start"><div class=" font-medium line-clamp-1 capitalize"> </div> <div class=" text-xs overflow-hidden text-ellipsis line-clamp-1 text-gray-500"> </div></div> <div class=" text-xs"><!></div></div> <div class="flex flex-row gap-0.5 self-center"><!></div></a>'),gr=y('<div class="gap-2 grid my-2 px-3 lg:grid-cols-2"></div>'),xr=y('<div class=" w-full h-full flex flex-col justify-center items-center my-16 mb-24"><div class="max-w-md text-center"><div class=" text-3xl mb-3">ðŸ˜•</div> <div class=" text-lg font-medium mb-1"> </div> <div class=" text-gray-500 text-center text-xs"> </div></div></div>'),_r=y('<div class=" my-16"><div class=" text-xl font-medium mb-1 line-clamp-1"> </div> <a class=" flex cursor-pointer items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-850 w-full mb-2 px-3.5 py-1.5 rounded-xl transition" href="https://openwebui.com/prompts" target="_blank"><div class=" self-center"><div class=" font-medium line-clamp-1"> </div> <div class=" text-sm line-clamp-1"> </div></div> <div><div><!></div></div></a></div>'),yr=y('<!> <div class="flex flex-col gap-1 px-1 mt-1.5 mb-3"><input id="prompts-import-input" type="file" accept=".json" hidden=""/> <div class="flex justify-between items-center"><div class="flex items-center md:self-center text-xl font-medium px-0.5 gap-2 shrink-0"><div> </div> <div class="text-lg font-medium text-gray-500 dark:text-gray-500"> </div></div> <div class="flex w-full justify-end gap-1.5"><!> <!> <a class=" px-2 py-1.5 rounded-xl bg-black text-white dark:bg-white dark:text-black transition font-medium text-sm flex items-center" href="/workspace/prompts/create"><!> <div class=" hidden md:block md:ml-1 text-xs"> </div></a></div></div></div> <div class="py-2 bg-white dark:bg-gray-900 rounded-3xl border border-gray-100/30 dark:border-gray-850/30"><div class=" flex w-full space-x-2 py-0.5 px-3.5 pb-2"><div class="flex flex-1"><div class=" self-center ml-1 mr-3"><!></div> <input class=" w-full text-sm pr-4 py-1 rounded-r-xl outline-hidden bg-transparent"/> <!></div></div> <div class="px-3 flex w-full bg-transparent overflow-x-auto scrollbar-none -mx-1"><div class="flex gap-0.5 w-fit text-center text-sm rounded-full bg-transparent px-1.5 whitespace-nowrap"><!></div></div> <!></div> <!>',1),br=y('<div class="w-full h-full flex justify-center items-center"><!></div>');function hr(Z,j){Ge(j,!1);const f=()=>R(at,"$user",q),l=()=>R(he,"$i18n",q),ee=()=>R(zt,"$WEBUI_NAME",q),V=()=>R(rt,"$config",q),[q,be]=tt(),{saveAs:oe}=Mt;let K=C(!1);const he=Ye("i18n");let J=C(),ne=C(!1),z=C(null),b=C(""),H=C([]),I=C(!1),B=C(null),te=C(),$=C(""),D=C([]);const ie=()=>{x(D,e(H).filter(i=>{var u,g,F,re;if(e(b)===""&&e($)==="")return!0;const o=e(b).toLowerCase();return((i.title||"").toLowerCase().includes(o)||(i.command||"").toLowerCase().includes(o)||(((u=i.user)==null?void 0:u.name)||"").toLowerCase().includes(o)||(((g=i.user)==null?void 0:g.email)||"").toLowerCase().includes(o))&&(e($)===""||e($)==="created"&&i.user_id===((F=f())==null?void 0:F.id)||e($)==="shared"&&i.user_id!==((re=f())==null?void 0:re.id))}))},we=async i=>{xe.success(l().t("Redirecting you to Open WebUI Community"));const o="https://openwebui.com",u=await window.open(`${o}/prompts/create`,"_blank");window.addEventListener("message",g=>{g.origin===o&&g.data==="loaded"&&u.postMessage(JSON.stringify(i),"*")},!1)},le=async i=>{const o={...i};o.title=`${o.title} (Clone)`;const u=o.command.startsWith("/")?o.command.substring(1):o.command;o.command=Wt(`${u} clone`),sessionStorage.prompt=JSON.stringify(o),Ot("/workspace/prompts/create")},de=async i=>{let o=new Blob([JSON.stringify([i])],{type:"application/json"});oe(o,`prompt-export-${Date.now()}.json`)},ve=async i=>{const o=i.command;await Ut(localStorage.token,o).catch(g=>(xe.error(g),null))&&xe.success(l().t("Deleted {{name}}",{name:o})),await ce()},ce=async()=>{x(H,await qe(localStorage.token)),await Ve.set(await Ke(localStorage.token))};bt(async()=>{x($,(localStorage==null?void 0:localStorage.workspaceViewOption)||""),await ce(),x(ne,!0);const i=g=>{g.key==="Shift"&&x(K,!0)},o=g=>{g.key==="Shift"&&x(K,!1)},u=()=>{x(K,!1)};return window.addEventListener("keydown",i),window.addEventListener("keyup",o),window.addEventListener("blur",u),()=>{window.removeEventListener("keydown",i),window.removeEventListener("keyup",o),window.removeEventListener("blur",u)}}),ht(()=>(e(H),e(b),e($)),()=>{e(H)&&e(b)!==void 0&&e($)!==void 0&&ie()}),wt(),et();var w=Qe();$t(i=>{P(o=>kt.title=`
		${o??""} â€¢ ${ee()??""}
	`,[()=>(l(),d(()=>l().t("Prompts")))])});var N=T(w);{var S=i=>{var o=yr(),u=T(o);{let a=ye(()=>(l(),d(()=>l().t("Delete prompt?"))));Kt(u,{get title(){return e(a)},get show(){return e(I)},set show(n){x(I,n)},$$events:{confirm:()=>{ve(e(B))}},children:(n,v)=>{var s=lr(),m=r(s),k=c(m),E=r(k,!0);t(k),Pt(),t(s),P(M=>{_(m,`${M??""} `),_(E,(e(B),d(()=>e(B).command)))},[()=>(l(),d(()=>l().t("This will delete")))]),p(n,s)},$$slots:{default:!0},$$legacy:!0})}var g=c(u,2),F=r(g);Re(F,a=>x(J,a),()=>e(J));var re=c(F,2),$e=r(re),ke=r($e),ot=r(ke,!0);t(ke);var je=c(ke,2),nt=r(je,!0);t(je),t($e);var Ie=c($e,2),Me=r(Ie);{var it=a=>{var n=dr(),v=r(n),s=r(v,!0);t(v),t(n),P(m=>_(s,m),[()=>(l(),d(()=>l().t("Import")))]),Q("click",n,()=>{e(J).click()}),p(a,n)};O(Me,a=>{f(),d(()=>{var n,v,s,m;return((n=f())==null?void 0:n.role)==="admin"||((m=(s=(v=f())==null?void 0:v.permissions)==null?void 0:s.workspace)==null?void 0:m.prompts_import)})&&a(it)})}var Oe=c(Me,2);{var lt=a=>{var n=vr(),v=r(n),s=r(v,!0);t(v),t(n),P(m=>_(s,m),[()=>(l(),d(()=>l().t("Export")))]),Q("click",n,async()=>{let m=new Blob([JSON.stringify(e(H))],{type:"application/json"});oe(m,`prompts-export-${Date.now()}.json`)}),p(a,n)};O(Oe,a=>{e(H),f(),d(()=>{var n,v,s,m;return e(H).length&&(((n=f())==null?void 0:n.role)==="admin"||((m=(s=(v=f())==null?void 0:v.permissions)==null?void 0:s.workspace)==null?void 0:m.prompts_export))})&&a(lt)})}var ze=c(Oe,2),Be=r(ze);Gt(Be,{className:"size-3",strokeWidth:"2.5"});var Ue=c(Be,2),dt=r(Ue,!0);t(Ue),t(ze),t(Ie),t(re),t(g);var Pe=c(g,2),Se=r(Pe),We=r(Se),Ce=r(We),vt=r(Ce);Xt(vt,{className:"size-3.5"}),t(Ce);var me=c(Ce,2);Nt(me);var ct=c(me,2);{var mt=a=>{var n=cr(),v=r(n),s=r(v);Zt(s,{className:"size-3",strokeWidth:"2"}),t(v),t(n),Q("click",v,()=>{x(b,"")}),p(a,n)};O(ct,a=>{e(b)&&a(mt)})}t(We),t(Se);var ue=c(Se,2),De=r(ue),ut=r(De);er(ut,{onChange:async a=>{localStorage.workspaceViewOption=a,await St()},get value(){return e($)},set value(a){x($,a)},$$legacy:!0}),t(De),Re(De,a=>x(te,a),()=>e(te)),t(ue);var pt=c(ue,2);{var ft=a=>{var n=gr();Et(n,5,()=>e(D),Ht,(v,s)=>{var m=fr(),k=r(m),E=r(k),M=r(E),X=r(M,!0);t(M);var pe=c(M,2),fe=r(pe,!0);t(pe),t(E);var ae=c(E,2),Ee=r(ae);{let L=ye(()=>(e(s),l(),d(()=>{var U,G;return((G=(U=e(s))==null?void 0:U.user)==null?void 0:G.email)??l().t("Deleted User")})));Le(Ee,{get content(){return e(L)},className:"flex shrink-0",placement:"top-start",children:(U,G)=>{var W=mr(),A=r(W,!0);t(W),P(Y=>_(A,Y),[()=>(l(),Dt(Xe),e(s),d(()=>{var Y,Ae,Te,Je;return l().t("By {{name}}",{name:Xe(((Ae=(Y=e(s))==null?void 0:Y.user)==null?void 0:Ae.name)??((Je=(Te=e(s))==null?void 0:Te.user)==null?void 0:Je.email)??l().t("Deleted User"))})}))]),p(U,W)},$$slots:{default:!0}})}t(ae),t(k);var ge=c(k,2),He=r(ge);{var Ne=L=>{{let U=ye(()=>(l(),d(()=>l().t("Delete"))));Le(L,{get content(){return e(U)},children:(G,W)=>{var A=ur(),Y=r(A);st(Y,{}),t(A),Q("click",A,()=>{ve(e(s))}),p(G,A)},$$slots:{default:!0}})}},yt=L=>{ir(L,{shareHandler:()=>{we(e(s))},cloneHandler:()=>{le(e(s))},exportHandler:()=>{de(e(s))},deleteHandler:async()=>{x(B,e(s)),x(I,!0)},onClose:()=>{},children:(U,G)=>{var W=pr(),A=r(W);qt(A,{className:"size-5"}),t(W),p(U,W)},$$slots:{default:!0}})};O(He,L=>{e(K)?L(Ne):L(yt,!1)})}t(ge),t(m),P(L=>{Fe(m,"href",L),_(X,(e(s),d(()=>e(s).title))),_(fe,(e(s),d(()=>e(s).command)))},[()=>(e(s),d(()=>`/workspace/prompts/edit?command=${encodeURIComponent(e(s).command)}`))]),p(v,m)}),t(n),p(a,n)},gt=a=>{var n=xr(),v=r(n),s=c(r(v),2),m=r(s,!0);t(s);var k=c(s,2),E=r(k,!0);t(k),t(v),t(n),P((M,X)=>{_(m,M),_(E,X)},[()=>(l(),d(()=>l().t("No prompts found"))),()=>(l(),d(()=>l().t("Try adjusting your search or filter to find what you are looking for.")))]),p(a,n)};O(pt,a=>{e(D),d(()=>(e(D)??[]).length!==0)?a(ft):a(gt,!1)})}t(Pe);var xt=c(Pe,2);{var _t=a=>{var n=_r(),v=r(n),s=r(v,!0);t(v);var m=c(v,2),k=r(m),E=r(k),M=r(E,!0);t(E);var X=c(E,2),pe=r(X,!0);t(X),t(k);var fe=c(k,2),ae=r(fe),Ee=r(ae);Yt(Ee,{}),t(ae),t(fe),t(m),t(n),P((ge,He,Ne)=>{_(s,ge),_(M,He),_(pe,Ne)},[()=>(l(),d(()=>l().t("Made by Open WebUI Community"))),()=>(l(),d(()=>l().t("Discover a prompt"))),()=>(l(),d(()=>l().t("Discover, download, and explore custom prompts")))]),p(a,n)};O(xt,a=>{V(),d(()=>{var n;return(n=V())==null?void 0:n.features.enable_community_sharing})&&a(_t)})}P((a,n,v)=>{_(ot,a),_(nt,(e(D),d(()=>e(D).length))),_(dt,n),Fe(me,"placeholder",v)},[()=>(l(),d(()=>l().t("Prompts"))),()=>(l(),d(()=>l().t("New Prompt"))),()=>(l(),d(()=>l().t("Search Prompts")))]),Lt(F,()=>e(z),a=>x(z,a)),Q("change",F,()=>{e(z);const a=new FileReader;a.onload=async n=>{const v=JSON.parse(n.target.result);for(const s of v)await Bt(localStorage.token,{command:s.command.charAt(0)==="/"?s.command.slice(1):s.command,title:s.title,content:s.content}).catch(m=>(xe.error(`${m}`),null));x(H,await qe(localStorage.token)),await Ve.set(await Ke(localStorage.token)),x(z,[]),Ct(J,e(J).value="")},a.readAsText(e(z)[0])}),jt(me,()=>e(b),a=>x(b,a)),Q("wheel",ue,a=>{a.deltaY!==0&&(a.preventDefault(),a.currentTarget.scrollLeft+=a.deltaY)}),p(i,o)},h=i=>{var o=br(),u=r(o);Qt(u,{className:"size-5"}),t(o),p(i,o)};O(N,i=>{e(ne)?i(S):i(h,!1)})}p(Z,w),Ze(),be()}function ra(Z){hr(Z,{})}export{ra as component};
//# sourceMappingURL=37.l7Gk5DZP.js.map

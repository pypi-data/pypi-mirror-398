import{a as h}from"./DSSqs2bl.js";import{n as g}from"./DqlUe4q2.js";import"./CWj6FrbW.js";import"./CN51-NxK.js";import{t as j,a as y,B as k}from"./lUdQH9Xf.js";import{a as S,s as $,c as B}from"./AGdekky4.js";import{p as u}from"./wFFmXPqF.js";const z=async(o,r,a,t)=>{const e=new FormData;e.append("file",r),a&&e.append("metadata",JSON.stringify(a));const n=new URLSearchParams;t!=null&&n.append("process",String(t));let c=null;const i=await fetch(`${h}/files/?${n.toString()}`,{method:"POST",headers:{Accept:"application/json",authorization:`Bearer ${o}`},body:e}).then(async s=>{if(!s.ok)throw await s.json();return s.json()}).catch(s=>(c=s.detail||s.message,null));if(c)throw c;if(i){const s=await C(o,i.id);if(s&&s.ok){const f=s.body.pipeThrough(new TextDecoderStream).pipeThrough(g(`
`)).getReader();for(;;){const{value:m,done:w}=await f.read();if(w)break;try{let d=m.split(`
`);for(const p of d)if(p!==""&&p!=="data: [DONE]"){let l=JSON.parse(p.replace(/^data: /,""));l!=null&&l.error&&(l.error,i.error=l.error),i!=null&&i.data&&(i.data=l)}}catch{}}}}if(c)throw c;return i},C=async(o,r)=>{const a=new URLSearchParams;a.append("stream","true");let t=null;const e=await fetch(`${h}/files/${r}/process/status?${a}`,{method:"GET",headers:{Accept:"application/json",authorization:`Bearer ${o}`}}).catch(n=>(t=n.detail,null));if(t)throw t;return e},F=async(o,r)=>{let a=null;const t=await fetch(`${h}/files/${r}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${o}`}}).then(async e=>{if(!e.ok)throw await e.json();return e.json()}).then(e=>e).catch(e=>(a=e.detail,null));if(a)throw a;return t},N=async(o,r,a)=>{let t=null;const e=await fetch(`${h}/files/${r}/data/content/update`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${o}`},body:JSON.stringify({content:a})}).then(async n=>{if(!n.ok)throw await n.json();return n.json()}).then(n=>n).catch(n=>(t=n.detail,null));if(t)throw t;return e},O=async o=>{let r=null;const a=await fetch(`${h}/files/all`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${o}`}}).then(async t=>{if(!t.ok)throw await t.json();return t.json()}).then(t=>t).catch(t=>(r=t.detail,null));if(r)throw r;return a};var T=k('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M4 21.4V2.6C4 2.26863 4.26863 2 4.6 2H16.2515C16.4106 2 16.5632 2.06321 16.6757 2.17574L19.8243 5.32426C19.9368 5.43679 20 5.5894 20 5.74853V21.4C20 21.7314 19.7314 22 19.4 22H4.6C4.26863 22 4 21.7314 4 21.4Z" stroke-linecap="round" stroke-linejoin="round"></path><path d="M8 10L16 10" stroke-linecap="round" stroke-linejoin="round"></path><path d="M8 18L16 18" stroke-linecap="round" stroke-linejoin="round"></path><path d="M8 14L12 14" stroke-linecap="round" stroke-linejoin="round"></path><path d="M16 2V5.4C16 5.73137 16.2686 6 16.6 6H20" stroke-linecap="round" stroke-linejoin="round"></path></svg>');function b(o,r){let a=u(r,"className",8,"size-4"),t=u(r,"strokeWidth",8,"1.5");var e=T();j(()=>{S(e,"stroke-width",t()),$(e,0,B(a()))}),y(o,e)}export{b as D,N as a,O as d,F as g,z as u};
//# sourceMappingURL=B4ANdNTO.js.map

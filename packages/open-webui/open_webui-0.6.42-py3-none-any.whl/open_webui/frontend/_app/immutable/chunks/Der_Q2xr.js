import"./CWj6FrbW.js";import"./CN51-NxK.js";import{g as Te,o as Ue,q as Ye,v as Ze,t as w,l as D,a as p,p as $e,f as z,b as et,i as U,k as f,c as r,w as o,s as m,m as ge,u as q,r as a,z as me,d as tt,e as at,B as he,j as t,aW as rt,n as Y}from"./lUdQH9Xf.js";import{i as y}from"./a8_cTibZ.js";import{e as xe,i as be}from"./CyDjujdM.js";import{i as st,b as it,s as lt,d as dt}from"./AGdekky4.js";import{i as ot}from"./VsCEtJ32.js";import{p as H}from"./wFFmXPqF.js";import{s as vt,a as nt}from"./CcA7kcll.js";import{g as ct}from"./mkPM8hrz.js";import"./BFmuJLeH.js";import{X as ut}from"./9jNi-Hzr.js";import{B as we}from"./9Bw9E4Yf.js";var _t=he('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"></path></svg>'),pt=he('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.115 5.19l.319 1.913A6 6 0 008.11 10.36L9.75 12l-.387.775c-.217.433-.132.956.21 1.298l1.348 1.348c.21.21.329.497.329.795v1.089c0 .426.24.815.622 1.006l.153.076c.433.217.956.132 1.298-.21l.723-.723a8.7 8.7 0 002.288-4.042 1.087 1.087 0 00-.358-1.099l-1.33-1.108c-.251-.21-.582-.299-.905-.245l-1.17.195a1.125 1.125 0 01-.98-.314l-.295-.295a1.125 1.125 0 010-1.591l.13-.132a1.125 1.125 0 011.3-.21l.603.302a.809.809 0 001.086-1.086L14.25 7.5l1.256-.837a4.5 4.5 0 001.528-1.732l.146-.292M6.115 5.19A9 9 0 1017.18 4.64M6.115 5.19A8.965 8.965 0 0112 3c1.929 0 3.716.607 5.18 1.64"></path></svg>'),ft=z('<option class=" text-gray-700" selected> </option>'),gt=z('<div class="flex items-center gap-3 justify-between text-sm w-full transition"><div class="flex items-center gap-1.5 w-full"><div> <span class="text-xs text-gray-500"> </span></div></div> <div class="w-full flex justify-end items-center gap-0.5"><button type="button"><!></button> <button class=" rounded-full p-1 hover:bg-gray-100 dark:hover:bg-gray-850 transition" type="button"><!></button></div></div>'),mt=z('<div class="flex flex-col gap-1.5 mb-2 px-0.5 mx-0.5"></div>'),xt=z('<option class=" text-gray-700"> </option>'),bt=z('<div><div><div class="flex justify-between mb-2.5"><div class="text-xs font-medium text-gray-500"> </div></div> <!> <div class="mb-1"><div class="flex w-full"><div class="flex flex-1 items-center"><div class="w-full px-0.5"><select><option class=" text-gray-700" disabled selected> </option><!></select></div></div></div></div></div></div>'),wt=z('<div class=" rounded-lg flex flex-col gap-2"><div><div class=" text-xs font-medium mb-2.5 text-gray-500"> </div> <div class="flex gap-2.5 items-center mb-1"><div><div class=" p-2 bg-black/5 dark:bg-white/5 rounded-full"><!></div></div> <div><select id="models" class="dark:bg-gray-900 outline-hidden bg-transparent text-sm font-medium block w-fit pr-10 max-w-full placeholder-gray-400"><option class=" text-gray-700" selected> </option><!></select> <div class=" text-xs text-gray-400 font-medium"><!></div></div></div></div> <!></div>');function Lt(ye,k){et(k,!1);const d=()=>nt(Ae,"$i18n",ke),[ke,Ce]=vt(),Ae=Te("i18n");let C=H(k,"onChange",8,()=>{}),je=H(k,"accessRoles",24,()=>["read"]),e=H(k,"accessControl",28,()=>({})),Z=H(k,"share",8,!0),I=H(k,"sharePublic",8,!0),h=ge(""),A=ge([]);const $=()=>{!I()&&e()===null&&(e({read:{group_ids:[],user_ids:[]},write:{group_ids:[],user_ids:[]}}),C()(e()))};Ue(async()=>{var s,i,g,j,M,B,P,S;U(A,await ct(localStorage.token,!0)),e()===null?$():e({read:{group_ids:((i=(s=e())==null?void 0:s.read)==null?void 0:i.group_ids)??[],user_ids:((j=(g=e())==null?void 0:g.read)==null?void 0:j.user_ids)??[]},write:{group_ids:((B=(M=e())==null?void 0:M.write)==null?void 0:B.group_ids)??[],user_ids:((S=(P=e())==null?void 0:P.write)==null?void 0:S.user_ids)??[]}})}),Ye(()=>(q(I()),q(e())),()=>{!I()&&e()===null&&$()}),Ze(),ot();var E=wt(),F=r(E),J=r(F),Me=r(J,!0);a(J);var ee=f(J,2),K=r(ee),te=r(K),Be=r(te);{var Pe=s=>{var i=_t();p(s,i)},Ge=s=>{var i=pt();p(s,i)};y(Be,s=>{e()!==null?s(Pe):s(Ge,!1)})}a(te),a(K);var ae=f(K,2),x=r(ae),L=r(x),Re=r(L,!0);a(L),L.value=L.__value="private";var qe=f(L);{var ze=s=>{var i=ft(),g=r(i,!0);a(i),i.value=i.__value="public",w(j=>m(g,j),[()=>(d(),o(()=>d().t("Public")))]),p(s,i)};y(qe,s=>{Z()&&I()&&s(ze)})}a(x);var re;st(x);var se=f(x,2),Le=r(se);{var Se=s=>{var i=me();w(g=>m(i,g),[()=>(d(),o(()=>d().t("Only select users and groups with permission can access")))]),p(s,i)},Ve=s=>{var i=me();w(g=>m(i,g),[()=>(d(),o(()=>d().t("Accessible to all users")))]),p(s,i)};y(Le,s=>{e()!==null?s(Se):s(Ve,!1)})}a(se),a(ae),a(ee),a(F);var We=f(F,2);{var Xe=s=>{var i=tt(),g=at(i);{var j=M=>{const B=Y(()=>(t(A),q(e()),o(()=>t(A).filter(v=>{var l,c;return(((c=(l=e())==null?void 0:l.read)==null?void 0:c.group_ids)??[]).includes(v.id)}))));var P=bt(),S=r(P),N=r(S),ie=r(N),He=r(ie,!0);a(ie),a(N);var le=f(N,2);{var Ie=v=>{var l=mt();xe(l,5,()=>t(B),be,(c,u)=>{var G=gt(),Q=r(G),ce=r(Q),ue=r(ce),_e=f(ue),Ee=r(_e,!0);a(_e),a(ce),a(Q);var pe=f(Q,2),O=r(pe),Fe=r(O);{var Je=n=>{{let _=Y(()=>(d(),o(()=>d().t("Write"))));we(n,{type:"success",get content(){return t(_)}})}},Ke=n=>{{let _=Y(()=>(d(),o(()=>d().t("Read"))));we(n,{type:"info",get content(){return t(_)}})}};y(Fe,n=>{q(e()),t(u),o(()=>{var _,b;return(((b=(_=e())==null?void 0:_.write)==null?void 0:b.group_ids)??[]).includes(t(u).id)})?n(Je):n(Ke,!1)})}a(O);var T=f(O,2),Ne=r(T);ut(Ne,{}),a(T),a(pe),a(G),w(()=>{m(ue,`${t(u),o(()=>t(u).name)??""} `),m(Ee,(t(u),o(()=>{var n;return(n=t(u))==null?void 0:n.member_count})))}),D("click",O,()=>{var n,_,b,X,R,fe;je().includes("write")&&((((_=(n=e())==null?void 0:n.write)==null?void 0:_.group_ids)??[]).includes(t(u).id)?e(e().write.group_ids=(((X=(b=e())==null?void 0:b.write)==null?void 0:X.group_ids)??[]).filter(Qe=>Qe!==t(u).id),!0):e(e().write.group_ids=[...((fe=(R=e())==null?void 0:R.write)==null?void 0:fe.group_ids)??[],t(u).id],!0),C()(e()))}),D("click",T,()=>{var n,_,b,X;e(e().read.group_ids=(((_=(n=e())==null?void 0:n.read)==null?void 0:_.group_ids)??[]).filter(R=>R!==t(u).id),!0),e(e().write.group_ids=(((X=(b=e())==null?void 0:b.write)==null?void 0:X.group_ids)??[]).filter(R=>R!==t(u).id),!0),C()(e())}),p(c,G)}),a(l),p(v,l)};y(le,v=>{q(t(B)),o(()=>t(B).length>0)&&v(Ie)})}var de=f(le,2),oe=r(de),ve=r(oe),ne=r(ve),V=r(ne);w(()=>{t(h),rt(()=>{e(),C(),d(),t(A)})});var W=r(V),Oe=r(W,!0);a(W),W.value=W.__value="";var De=f(W);xe(De,1,()=>(t(A),q(e()),o(()=>t(A).filter(v=>{var l,c;return!(((c=(l=e())==null?void 0:l.read)==null?void 0:c.group_ids)??[]).includes(v.id)}))),be,(v,l)=>{var c=xt(),u=r(c,!0);a(c);var G={};w(()=>{m(u,(t(l),o(()=>t(l).name))),G!==(G=(t(l),o(()=>t(l).id)))&&(c.value=(c.__value=(t(l),o(()=>t(l).id)))??"")}),p(v,c)}),a(V),a(ne),a(ve),a(oe),a(de),a(S),a(P),w((v,l)=>{m(He,v),lt(V,1,`dark:bg-gray-900 outline-hidden bg-transparent text-sm block w-full pr-10 max-w-full
									${t(h)?"":"text-gray-500"}
									dark:placeholder-gray-500`),m(Oe,l)},[()=>(d(),o(()=>d().t("Groups"))),()=>(d(),o(()=>d().t("Select a group")))]),dt(V,()=>t(h),v=>U(h,v)),D("change",V,()=>{var v,l;t(h)!==""&&(e(e().read.group_ids=[...((l=(v=e())==null?void 0:v.read)==null?void 0:l.group_ids)??[],t(h)],!0),U(h,""),C()(e()))}),p(M,P)};y(g,M=>{e()!==null&&M(j)})}p(s,i)};y(We,s=>{Z()&&s(Xe)})}a(E),w((s,i)=>{m(Me,s),m(Re,i),re!==(re=e()!==null?"private":"public")&&(x.value=x.__value=e()!==null?"private":"public",it(x,e()!==null?"private":"public"))},[()=>(d(),o(()=>d().t("Visibility"))),()=>(d(),o(()=>d().t("Private")))]),D("change",x,s=>{s.target.value==="public"?e(null):e({read:{group_ids:[],user_ids:[]},write:{group_ids:[],user_ids:[]}}),C()(e())}),p(ye,E),$e(),Ce()}export{Lt as A};
//# sourceMappingURL=Der_Q2xr.js.map

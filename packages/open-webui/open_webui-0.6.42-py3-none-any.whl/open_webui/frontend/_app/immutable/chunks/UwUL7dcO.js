import"./CWj6FrbW.js";import"./CN51-NxK.js";import{b as Ee,g as Ue,q as Me,i as $,j as r,u as fe,v as Be,c as t,r as a,k as d,t as S,w as l,s as m,l as A,a as _,p as De,f as C,m as ae,e as ue,A as Ne,z as me,y as Oe,n as Le,aX as he,x as Ke}from"./lUdQH9Xf.js";import{i as Y}from"./a8_cTibZ.js";import{a as ze,r as We,s as Xe}from"./AGdekky4.js";import{i as Fe}from"./VsCEtJ32.js";import{p as j}from"./wFFmXPqF.js";import{a as re,s as je}from"./CcA7kcll.js";import{c as qe,a as Ge,u as Ye}from"./CQ5nDkjA.js";import{t as ye}from"./1N3xujas.js";import{a as Ie,s as He,b as Je}from"./CXz3UUqn.js";import{k as Qe}from"./BXNnaNI-.js";import{M as Ae}from"./CbKu5dqy.js";import{L as Ve}from"./DxSu1Hoz.js";import{X as Re}from"./9jNi-Hzr.js";import{s as Ze}from"./9RuGBeWD.js";import"./BAX94-W5.js";import{b as et,c as Pe}from"./VjqWeGTs.js";import{f as tt}from"./BjO3HhBo.js";import{D as at}from"./0lhZwTI1.js";import{G as rt}from"./DW4Ik_WH.js";import{P as st}from"./C2a4pS38.js";import{T as ot}from"./BtoSXKKz.js";import{D as lt}from"./CHfhHIQf.js";import{b as it}from"./gZt8HVPH.js";import{p as nt}from"./Bfc47y5P.js";import{S as dt}from"./CkkUFZ96.js";import"./CeIFb-7H.js";import{T as ct}from"./DljGs0XM.js";import{K as vt}from"./P7D3dOgw.js";import{g as ut}from"./BxNuK-Gs.js";var ft=C('<a target="_blank"> <span class=" underline"> </span>.</a> <button class="underline"> </button> ',1),mt=C('<button class="self-center flex items-center gap-1 px-3.5 py-2 text-sm font-medium bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-850 dark:text-white dark:hover:bg-gray-800 transition rounded-full" type="button"> </button>'),gt=C('<div class="px-5 pt-4 pb-5 w-full flex flex-col justify-center"><div class=" text-sm dark:text-gray-300 mb-1"><!></div> <div class="flex justify-end"><div class="flex flex-col items-end space-x-1 mt-3"><div class="flex gap-1"><!> <button class="self-center flex items-center gap-1 px-3.5 py-2 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full" type="button" id="copy-and-share-chat-button"><!> <!></button></div></div></div></div>'),pt=C('<div><div class=" flex justify-between dark:text-gray-300 px-5 pt-4 pb-0.5"><div class=" text-lg font-medium self-center"> </div> <button class="self-center"><!></button></div> <!></div>');function sa(se,h){Ee(h,!1);const e=()=>re(X,"$i18n",W),O=()=>re(Ge,"$models",W),K=()=>re(qe,"$config",W),[W,oe]=je();let x=j(h,"chatId",8),v=ae(null),R=null;const X=Ue("i18n"),E=async()=>{r(v);const i=await He(localStorage.token,x());return R=`${window.location.origin}/s/${i.id}`,$(v,await Ie(localStorage.token,x())),R},w=async()=>{const i=r(v).chat;ye.success(e().t("Redirecting you to Open WebUI Community"));const T="https://openwebui.com",I=await window.open(`${T}/chats/upload`,"_blank");window.addEventListener("message",P=>{P.origin===T&&P.data==="loaded"&&I.postMessage(JSON.stringify({chat:i,models:O().filter(c=>i.models.includes(c.id))}),"*")},!1)};let g=j(h,"show",12,!1);const b=i=>r(v)?i?r(v).id!==i.id||r(v).share_id!==i.share_id:!1:!0;Me(()=>(fe(g()),fe(x()),r(v)),()=>{g()&&(async()=>{if(x()){const i=await Ie(localStorage.token,x());b(i)&&$(v,i)}else $(v,null),r(v)})()}),Be(),Fe(),Ae(se,{size:"md",get show(){return g()},set show(i){g(i)},children:(i,T)=>{var I=pt(),P=t(I),c=t(P),q=t(c,!0);a(c);var B=d(c,2),D=t(B);Re(D,{className:"size-5"}),a(B),a(P);var N=d(P,2);{var U=y=>{var k=gt(),M=t(k),L=t(M);{var ge=u=>{var n=ft(),p=ue(n),V=t(p),de=d(V),we=t(de,!0);a(de),Ne(),a(p);var Z=d(p),ee=d(Z),be=t(ee,!0);a(ee);var te=d(ee);S((ce,ke,Se,s,o)=>{ze(p,"href",`/s/${r(v),l(()=>r(v).share_id)??""}`),m(V,`${ce??""} `),m(we,ke),m(Z,` ${Se??""} `),m(be,s),m(te,` ${o??""}`)},[()=>(e(),l(()=>e().t("You have shared this chat"))),()=>(e(),l(()=>e().t("before"))),()=>(e(),l(()=>e().t("Click here to"))),()=>(e(),l(()=>e().t("delete this link"))),()=>(e(),l(()=>e().t("and create a new shared link.")))]),A("click",ee,async()=>{await Je(localStorage.token,x())&&$(v,await Ie(localStorage.token,x()))}),_(u,n)},pe=u=>{var n=me();S(p=>m(n,p),[()=>(e(),l(()=>e().t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")))]),_(u,n)};Y(L,u=>{r(v),l(()=>r(v).share_id)?u(ge):u(pe,!1)})}a(M);var H=d(M,2),J=t(H),Q=t(J),_e=t(Q);{var xe=u=>{var n=mt(),p=t(n,!0);a(n),S(V=>m(p,V),[()=>(e(),l(()=>e().t("Share to Open WebUI Community")))]),A("click",n,()=>{w(),g(!1)}),_(u,n)};Y(_e,u=>{K(),l(()=>{var n;return(n=K())==null?void 0:n.features.enable_community_sharing})&&u(xe)})}var G=d(_e,2),le=t(G);Ve(le,{});var ie=d(le,2);{var ne=u=>{var n=me();S(p=>m(n,p),[()=>(e(),l(()=>e().t("Update and Copy Link")))]),_(u,n)},$e=u=>{var n=me();S(p=>m(n,p),[()=>(e(),l(()=>e().t("Copy Link")))]),_(u,n)};Y(ie,u=>{r(v),l(()=>r(v).share_id)?u(ne):u($e,!1)})}a(G),a(Q),a(J),a(H),a(k),A("click",G,async()=>{if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){const n=async()=>{const p=await E();return new Blob([p],{type:"text/plain"})};navigator.clipboard.write([new ClipboardItem({"text/plain":n()})]).then(()=>!0).catch(p=>!1)}else Qe(await E());ye.success(e().t("Copied shared chat URL to clipboard!")),g(!1)}),_(y,k)};Y(N,y=>{r(v)&&y(U)})}a(I),S(y=>m(q,y),[()=>(e(),l(()=>e().t("Share Chat")))]),A("click",B,()=>{g(!1)}),_(i,I)},$$slots:{default:!0},$$legacy:!0}),De(),oe()}var _t=C("<button><!></button>"),xt=C('<!> <div class="flex items-center"> </div>',1),bt=C('<!> <div class="flex items-center"> </div>',1),ht=C('<!> <div class="flex items-center"> </div>',1),yt=C("<!> <!> <!>",1),$t=C('<div slot="content"><!></div>');function oa(se,h){Ee(h,!1);const e=()=>re(W,"$i18n",O),[O,K]=je(),W=Ue("i18n"),oe=Oe();let x=j(h,"align",8,"start"),v=j(h,"onEdit",8,()=>{}),R=j(h,"onExport",8,()=>{}),X=j(h,"onDelete",8,()=>{}),E=ae(!1);Fe(),at(se,{get show(){return r(E)},set show(w){$(E,w)},$$events:{change:w=>{w.detail===!1&&oe("close")}},children:(w,g)=>{{let b=Le(()=>(e(),l(()=>e().t("More"))));ot(w,{get content(){return r(b)},children:(i,T)=>{var I=_t(),P=t(I);Ze(P,h,"default",{},null),a(I),A("click",I,c=>{c.stopPropagation(),$(E,!r(E))}),_(i,I)},$$slots:{default:!0}})}},$$slots:{default:!0,content:(w,g)=>{var b=$t(),i=t(b);et(i,{class:"w-full max-w-[170px] rounded-2xl px-1 py-1 border border-gray-100  dark:border-gray-800   z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:-2,side:"bottom",get align(){return x()},get transition(){return tt},children:(T,I)=>{var P=yt(),c=ue(P);Pe(c,{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$events:{click:()=>{v()()}},children:(D,N)=>{var U=xt(),y=ue(U);st(y,{});var k=d(y,2),M=t(k,!0);a(k),S(L=>m(M,L),[()=>(e(),l(()=>e().t("Edit")))]),_(D,U)},$$slots:{default:!0}});var q=d(c,2);Pe(q,{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$events:{click:()=>{R()()}},children:(D,N)=>{var U=bt(),y=ue(U);lt(y,{});var k=d(y,2),M=t(k,!0);a(k),S(L=>m(M,L),[()=>(e(),l(()=>e().t("Export")))]),_(D,U)},$$slots:{default:!0}});var B=d(q,2);Pe(B,{class:"flex  gap-2  items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$events:{click:()=>{X()()}},children:(D,N)=>{var U=ht(),y=ue(U);rt(y,{});var k=d(y,2),M=t(k,!0);a(k),S(L=>m(M,L),[()=>(e(),l(()=>e().t("Delete")))]),_(D,U)},$$slots:{default:!0}}),_(T,P)},$$slots:{default:!0}}),a(b),_(w,b)}},$$legacy:!0}),De(),K()}var wt=C('<div class="my-1"><div class="mb-2 text-xs text-gray-500"> </div> <div><!></div></div>'),kt=C('<div slot="label"><div class="flex w-full justify-between"><div class=" mb-2 text-xs text-gray-500"> </div></div></div>'),St=C('<div class="ml-2 self-center"><!></div>'),Ct=C('<div><div class=" flex justify-between dark:text-gray-300 px-5 pt-4 pb-1"><div class=" text-lg font-medium self-center"><!></div> <button class="self-center"><!></button></div> <div class="flex flex-col md:flex-row w-full px-5 pb-4 md:space-x-4 dark:text-gray-200"><div class=" flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"><form class="flex flex-col w-full"><div class="flex flex-col w-full mt-1"><div class=" mb-1 text-xs text-gray-500"> </div> <div class="flex-1"><input id="folder-name" class="w-full text-sm bg-transparent placeholder:text-gray-300 dark:placeholder:text-gray-700 outline-hidden" type="text" autocomplete="off"/></div></div> <input id="folder-background-image-input" type="file" hidden="" accept="image/*"/> <div class="flex justify-between w-full mt-1 items-center"><div class="text-xs text-gray-500"> </div> <div><button aria-labelledby="chat-background-label background-image-url-state" class="p-1 px-3 text-xs flex rounded-sm transition" type="button"><span class="ml-2 self-center" id="background-image-url-state"> </span></button></div></div> <hr class=" border-gray-50 dark:border-gray-850/30 my-2.5 w-full"/> <!> <div class="my-2"><!></div> <div class="flex justify-end pt-3 text-sm font-medium gap-1.5"><button type="submit"> <!></button></div></form></div></div></div>');function la(se,h){Ee(h,!1);const e=()=>re(oe,"$i18n",K),O=()=>re(Ye,"$user",K),[K,W]=je(),oe=Ue("i18n");let x=j(h,"show",12,!1),v=j(h,"onSubmit",8,c=>{}),R=j(h,"folderId",8,null),X=j(h,"edit",8,!1),E=null,w=ae(""),g=ae({background_image_url:null}),b=ae({system_prompt:"",files:[]}),i=ae(!1);const T=async()=>{var c;if($(i,!0),(((c=r(b))==null?void 0:c.files)??[]).some(q=>q.status==="uploading")){ye.error(e().t("Please wait until all files are uploaded.")),$(i,!1);return}await v()({name:r(w),meta:r(g),data:r(b)}),x(!1),$(i,!1)},I=async()=>{R()&&(E=await ut(localStorage.token,R()).catch(c=>(ye.error(`${c}`),null)),$(w,E.name),$(g,E.meta||{background_image_url:null}),$(b,E.data||{system_prompt:"",files:[]})),P()},P=async()=>{await Ke();const c=document.getElementById("folder-name");c&&(c.focus(),c.select())};Me(()=>fe(x()),()=>{x()&&I()}),Me(()=>(fe(x()),fe(X())),()=>{!x()&&!X()&&($(w,""),$(g,{background_image_url:null}),$(b,{system_prompt:"",files:[]}))}),Be(),Fe(),Ae(se,{size:"md",get show(){return x()},set show(c){x(c)},children:(c,q)=>{var B=Ct(),D=t(B),N=t(D),U=t(N);{var y=s=>{var o=me();S(f=>m(o,f),[()=>(e(),l(()=>e().t("Edit Folder")))]),_(s,o)},k=s=>{var o=me();S(f=>m(o,f),[()=>(e(),l(()=>e().t("Create Folder")))]),_(s,o)};Y(U,s=>{X()?s(y):s(k,!1)})}a(N);var M=d(N,2),L=t(M);Re(L,{className:"size-5"}),a(M),a(D);var ge=d(D,2),pe=t(ge),H=t(pe),J=t(H),Q=t(J),_e=t(Q,!0);a(Q);var xe=d(Q,2),G=t(xe);We(G),a(xe),a(J);var le=d(J,2),ie=d(le,2),ne=t(ie),$e=t(ne,!0);a(ne);var u=d(ne,2),n=t(u),p=t(n),V=t(p,!0);a(p),a(n),a(u),a(ie);var de=d(ie,4);{var we=s=>{var o=wt(),f=t(o),F=t(f,!0);a(f);var z=d(f,2),Ce=t(z);{let ve=Le(()=>(e(),l(()=>e().t(`Write your model system prompt content here
e.g.) You are Mario from Super Mario Bros, acting as an assistant.`))));ct(Ce,{className:" text-sm w-full bg-transparent outline-hidden ",get placeholder(){return r(ve)},maxSize:200,get value(){return r(b).system_prompt},set value(Te){he(b,r(b).system_prompt=Te)},$$legacy:!0})}a(z),a(o),S(ve=>m(F,ve),[()=>(e(),l(()=>e().t("System Prompt")))]),_(s,o)};Y(de,s=>{O(),l(()=>{var o,f,F;return((o=O())==null?void 0:o.role)==="admin"||(((F=(f=O())==null?void 0:f.permissions.chat)==null?void 0:F.system_prompt)??!0)})&&s(we)})}var Z=d(de,2),ee=t(Z);vt(ee,{get selectedItems(){return r(b).files},set selectedItems(s){he(b,r(b).files=s)},$$slots:{label:(s,o)=>{var f=kt(),F=t(f),z=t(F),Ce=t(z,!0);a(z),a(F),a(f),S(ve=>m(Ce,ve),[()=>(e(),l(()=>e().t("Knowledge")))]),_(s,f)}},$$legacy:!0}),a(Z);var be=d(Z,2),te=t(be),ce=t(te),ke=d(ce);{var Se=s=>{var o=St(),f=t(o);dt(f,{}),a(o),_(s,o)};Y(ke,s=>{r(i)&&s(Se)})}a(te),a(be),a(H),a(pe),a(ge),a(B),S((s,o,f,F,z)=>{m(_e,s),ze(G,"placeholder",o),m($e,f),m(V,F),Xe(te,1,`px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-950 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full flex flex-row space-x-1 items-center ${r(i)?" cursor-not-allowed":""}`),te.disabled=r(i),m(ce,`${z??""} `)},[()=>(e(),l(()=>e().t("Folder Name"))),()=>(e(),l(()=>e().t("Enter folder name"))),()=>(e(),l(()=>e().t("Folder Background Image"))),()=>(r(g),e(),l(()=>{var s;return(((s=r(g))==null?void 0:s.background_image_url)??null)===null?e().t("Upload"):e().t("Reset")})),()=>(e(),l(()=>e().t("Save")))]),A("click",M,()=>{x(!1)}),it(G,()=>r(w),s=>$(w,s)),A("change",le,s=>{const o=s.target.files;let f=new FileReader;f.onload=F=>{let z=`${F.target.result}`;he(g,r(g).background_image_url=z)},o&&o.length>0&&["image/gif","image/webp","image/jpeg","image/png"].includes(o[0].type)?f.readAsDataURL(o[0]):(`${o[0].type}`,s.target.value="")}),A("click",n,()=>{var s;if(((s=r(g))==null?void 0:s.background_image_url)!==null)he(g,r(g).background_image_url=null);else{const o=document.getElementById("folder-background-image-input");o&&o.click()}}),A("submit",H,nt(()=>{T()})),_(c,B)},$$slots:{default:!0},$$legacy:!0}),De(),W()}export{la as F,sa as S,oa as a};
//# sourceMappingURL=UwUL7dcO.js.map

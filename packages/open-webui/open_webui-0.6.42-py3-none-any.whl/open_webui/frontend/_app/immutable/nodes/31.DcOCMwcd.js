import"../chunks/CWj6FrbW.js";import"../chunks/CN51-NxK.js";import{b as qe,y as _t,g as Ge,j as e,i,d as je,e as G,c as a,r as t,l as ie,a as v,k as n,t as I,w as d,s as h,p as He,f as u,m as y,n as q,o as xt,q as $t,v as wt,h as ht,$ as yt,x as bt,u as ye,A as kt,z as jt}from"../chunks/lUdQH9Xf.js";import{i as D}from"../chunks/a8_cTibZ.js";import{e as Nt,i as Pt}from"../chunks/CyDjujdM.js";import{r as zt,a as Lt}from"../chunks/AGdekky4.js";import{b as St}from"../chunks/gZt8HVPH.js";import{b as Et}from"../chunks/D72e2DEW.js";import{i as Xe}from"../chunks/VsCEtJ32.js";import{a as de,s as Ye}from"../chunks/CcA7kcll.js";import{d as ee,r as It}from"../chunks/I1CDPYOB.js";import{t as be}from"../chunks/1N3xujas.js";import{W as Mt,u as Bt}from"../chunks/CQ5nDkjA.js";import{s as Ct,d as Dt}from"../chunks/A1dUqqBB.js";import{g as Kt}from"../chunks/CeIFb-7H.js";import{j as Te}from"../chunks/BXNnaNI-.js";import{C as Ut}from"../chunks/7L2QCwoR.js";import{s as Wt}from"../chunks/9RuGBeWD.js";import{p as At}from"../chunks/wFFmXPqF.js";import"../chunks/BAX94-W5.js";import{b as Ot,c as Tt}from"../chunks/VjqWeGTs.js";import{f as Vt}from"../chunks/BjO3HhBo.js";import{D as qt}from"../chunks/0lhZwTI1.js";import{G as Gt}from"../chunks/DW4Ik_WH.js";import{T as ne}from"../chunks/BtoSXKKz.js";import{E as Ht}from"../chunks/CJyvYL24.js";import{B as Ve}from"../chunks/9Bw9E4Yf.js";import{S as Xt}from"../chunks/BoK-DDlo.js";import{P as Yt}from"../chunks/C4_WGY8S.js";import{S as ke}from"../chunks/CkkUFZ96.js";import{X as Ft}from"../chunks/9jNi-Hzr.js";import{V as Rt}from"../chunks/BbkHPwf0.js";import{L as Jt}from"../chunks/BrFI5UBi.js";var Qt=u('<button class="self-center w-fit text-sm p-1.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl" type="button"><!></button>'),Zt=u('<!> <div class="flex items-center"> </div>',1),ea=u('<div slot="content"><!></div>');function ta(H,X){qe(X,!1);const r=()=>de(ce,"$i18n",ve),[ve,te]=Ye(),Y=_t(),ce=Ge("i18n");let fe=At(X,"onClose",8,()=>{}),z=y(!1);Xe(),qt(H,{align:"end",get show(){return e(z)},set show(w){i(z,w)},$$events:{change:w=>{w.detail===!1&&fe()()}},children:(w,ae)=>{{let L=q(()=>(r(),d(()=>r().t("More"))));ne(w,{get content(){return e(L)},children:(M,b)=>{var k=je(),p=G(k);Wt(p,X,"default",{},B=>{var g=Qt(),j=a(g);Ht(j,{className:"size-5"}),t(g),ie("click",g,K=>{K.stopPropagation(),i(z,!0)}),v(B,g)}),v(M,k)},$$slots:{default:!0}})}},$$slots:{default:!0,content:(w,ae)=>{var L=ea(),M=a(L);Ot(M,{class:"w-full max-w-[170px] rounded-2xl px-1 py-1 border border-gray-100  dark:border-gray-800 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",side:"bottom",align:"end",get transition(){return Vt},children:(b,k)=>{Tt(b,{class:"flex  gap-2  items-center px-3 py-1.5 text-sm   cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$events:{click:()=>{Y("delete")}},children:(p,B)=>{var g=Zt(),j=G(g);Gt(j,{});var K=n(j,2),ue=a(K,!0);t(K),I(re=>h(ue,re),[()=>(r(),d(()=>r().t("Delete")))]),v(p,g)},$$slots:{default:!0}})},$$slots:{default:!0}}),t(L),v(w,L)}},$$legacy:!0}),He(),te()}var aa=u('<div class="self-center pl-1.5 translate-y-[0.5px] rounded-l-xl bg-transparent"><button class="p-0.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-900 transition"><!></button></div>'),ra=u("<div><!></div>"),sa=u('<div class="flex items-center gap-2"><div class=" flex self-center"><!></div></div>'),oa=u('<div class=" flex items-center gap-2"><div class=" text-sm font-medium line-clamp-1 capitalize"> </div></div>'),la=u('<div class=" text-xs text-gray-500 line-clamp-1 hidden sm:block"> </div>'),ia=u('<button class=" flex space-x-4 cursor-pointer text-left w-full px-3 py-2.5 dark:hover:bg-gray-850/50 hover:bg-gray-50 transition rounded-2xl"><div class=" w-full"><div class=" self-center flex-1 justify-between"><div class="flex items-center justify-between -my-1 h-8"><div class=" flex gap-2 items-center justify-between w-full"><div><!></div> <!></div> <!></div> <div class=" flex items-center gap-1 justify-between px-1.5"><!> <div class="flex items-center gap-2 shrink-0"><!> <div class="text-xs text-gray-500 shrink-0"><!></div></div></div></div></div></button>'),da=u('<div class="w-full flex justify-center py-4 text-xs animate-pulse items-center gap-2"><!> <div class=" "> </div></div>'),na=u('<div class=" my-2 px-3 grid grid-cols-1 lg:grid-cols-2 gap-2"></div> <!>',1),va=u('<div class=" w-full h-full flex flex-col justify-center items-center my-16 mb-24"><div class="max-w-md text-center"><div class=" text-3xl mb-3">ðŸ˜•</div> <div class=" text-lg font-medium mb-1"> </div> <div class=" text-gray-500 text-center text-xs"> </div></div></div>'),ca=u('<div class="w-full h-full flex justify-center items-center py-10"><!></div>'),fa=u('<!> <div class="flex flex-col gap-1 px-1 mt-1.5 mb-3"><div class="flex justify-between items-center"><div class="flex items-center md:self-center text-xl font-medium px-0.5 gap-2 shrink-0"><div> </div> <div class="text-lg font-medium text-gray-500 dark:text-gray-500"> </div></div> <div class="flex w-full justify-end gap-1.5"><a class=" px-2 py-1.5 rounded-xl bg-black text-white dark:bg-white dark:text-black transition font-medium text-sm flex items-center" href="/workspace/knowledge/create"><!> <div class=" hidden md:block md:ml-1 text-xs"> </div></a></div></div></div> <div class="py-2 bg-white dark:bg-gray-900 rounded-3xl border border-gray-100/30 dark:border-gray-850/30"><div class=" flex w-full space-x-2 py-0.5 px-3.5 pb-2"><div class="flex flex-1"><div class=" self-center ml-1 mr-3"><!></div> <input class=" w-full text-sm py-1 rounded-r-xl outline-hidden bg-transparent"/> <!></div></div> <div class="px-3 flex w-full bg-transparent overflow-x-auto scrollbar-none -mx-1"><div class="flex gap-0.5 w-fit text-center text-sm rounded-full bg-transparent px-1.5 whitespace-nowrap"><!></div></div> <!></div> <div class=" text-gray-500 text-xs m-2"> </div>',1),ua=u('<div class="w-full h-full flex justify-center items-center"><!></div>');function ma(H,X){qe(X,!1);const r=()=>de(fe,"$i18n",Y),ve=()=>de(Mt,"$WEBUI_NAME",Y),te=()=>de(Bt,"$user",Y),[Y,ce]=Ye();ee.extend(It);const fe=Ge("i18n");let z=y(!1),w=y(!1),ae=y(),L=y(null),M=1,b=y(""),k=y(""),p=y(null),B=y(null),g=y(!1),j=y(!1);const K=()=>{M=1,i(p,null),i(B,null),i(g,!1),i(j,!1)},ue=async()=>{e(g)||(M+=1,await Ne())},re=async()=>{K(),await Ne()},Ne=async()=>{i(j,!0);const f=await Ct(localStorage.token,e(b),e(k),M).catch(()=>[]);if(f){i(B,f.total);const _=f.items;(_??[]).length===0?i(g,!0):i(g,!1),e(p)?i(p,[...e(p),..._]):i(p,_)}return i(j,!1),f},Fe=async f=>{await Dt(localStorage.token,f.id).catch(U=>{be.error(`${U}`)})&&(be.success(r().t("Knowledge deleted successfully.")),re())};xt(async()=>{i(k,(localStorage==null?void 0:localStorage.workspaceViewOption)||""),i(z,!0)}),$t(()=>(e(z),e(b),e(k)),()=>{e(z)&&e(b)!==void 0&&e(k)!==void 0&&re()}),wt(),Xe();var Pe=je();ht(f=>{I(_=>yt.title=`
		${_??""} â€¢ ${ve()??""}
	`,[()=>(r(),d(()=>r().t("Knowledge")))])});var Re=G(Pe);{var Je=f=>{var _=fa(),U=G(_);Ut(U,{get show(){return e(w)},set show(o){i(w,o)},$$events:{confirm:()=>{Fe(e(L))}},$$legacy:!0});var me=n(U,2),ze=a(me),pe=a(ze),ge=a(pe),Ze=a(ge,!0);t(ge);var Le=n(ge,2),et=a(Le,!0);t(Le),t(pe);var Se=n(pe,2),Ee=a(Se),Ie=a(Ee);Yt(Ie,{className:"size-3",strokeWidth:"2.5"});var Me=n(Ie,2),tt=a(Me,!0);t(Me),t(Ee),t(Se),t(ze),t(me);var _e=n(me,2),xe=a(_e),Be=a(xe),$e=a(Be),at=a($e);Xt(at,{className:"size-3.5"}),t($e);var se=n($e,2);zt(se);var rt=n(se,2);{var st=o=>{var $=aa(),N=a($),F=a(N);Ft(F,{className:"size-3",strokeWidth:"2"}),t(N),t($),ie("click",N,()=>{i(b,"")}),v(o,$)};D(rt,o=>{e(b)&&o(st)})}t(Be),t(xe);var oe=n(xe,2),we=a(oe),ot=a(we);Rt(ot,{onChange:async o=>{localStorage.workspaceViewOption=o,await bt()},get value(){return e(k)},set value(o){i(k,o)},$$legacy:!0}),t(we),Et(we,o=>i(ae,o),()=>e(ae)),t(oe);var lt=n(oe,2);{var it=o=>{var $=je(),N=G($);{var F=W=>{var A=na(),O=G(A);Nt(O,5,()=>e(p),Pt,(S,l)=>{var C=ia(),E=a(C),J=a(E),T=a(J),Q=a(T),Z=a(Q),ct=a(Z);{let c=q(()=>(r(),d(()=>r().t("Collection"))));Ve(ct,{type:"success",get content(){return e(c)}})}t(Z);var ft=n(Z,2);{var ut=c=>{var s=ra(),x=a(s);{let m=q(()=>(r(),d(()=>r().t("Read Only"))));Ve(x,{type:"muted",get content(){return e(m)}})}t(s),v(c,s)};D(ft,c=>{e(l),d(()=>{var s;return!((s=e(l))!=null&&s.write_access)})&&c(ut)})}t(Q);var mt=n(Q,2);{var pt=c=>{var s=sa(),x=a(s),m=a(x);ta(m,{$$events:{delete:()=>{i(L,e(l)),i(w,!0)}}}),t(x),t(s),v(c,s)};D(mt,c=>{e(l),te(),d(()=>{var s,x;return((s=e(l))==null?void 0:s.write_access)||((x=te())==null?void 0:x.role)==="admin"})&&c(pt)})}t(T);var De=n(T,2),Ke=a(De);{let c=q(()=>(e(l),d(()=>{var s;return((s=e(l))==null?void 0:s.description)??e(l).name})));ne(Ke,{get content(){return e(c)},children:(s,x)=>{var m=oa(),P=a(m),V=a(P,!0);t(P),t(m),I(()=>h(V,(e(l),d(()=>e(l).name)))),v(s,m)},$$slots:{default:!0}})}var Ue=n(Ke,2),We=a(Ue);{let c=q(()=>(ye(ee),e(l),d(()=>ee(e(l).updated_at*1e3).format("LLLL"))));ne(We,{get content(){return e(c)},children:(s,x)=>{var m=la(),P=a(m);t(m),I((V,le)=>h(P,`${V??""}
													${le??""}`),[()=>(r(),d(()=>r().t("Updated"))),()=>(ye(ee),e(l),d(()=>ee(e(l).updated_at*1e3).fromNow()))]),v(s,m)},$$slots:{default:!0}})}var Ae=n(We,2),gt=a(Ae);{let c=q(()=>(e(l),r(),d(()=>{var s,x;return((x=(s=e(l))==null?void 0:s.user)==null?void 0:x.email)??r().t("Deleted User")})));ne(gt,{get content(){return e(c)},className:"flex shrink-0",placement:"top-start",children:(s,x)=>{kt();var m=jt();I(P=>h(m,P),[()=>(r(),ye(Te),e(l),d(()=>{var P,V,le,Oe;return r().t("By {{name}}",{name:Te(((V=(P=e(l))==null?void 0:P.user)==null?void 0:V.name)??((Oe=(le=e(l))==null?void 0:le.user)==null?void 0:Oe.email)??r().t("Deleted User"))})}))]),v(s,m)},$$slots:{default:!0}})}t(Ae),t(Ue),t(De),t(J),t(E),t(C),ie("click",C,()=>{var c,s;(s=(c=e(l))==null?void 0:c.meta)!=null&&s.document?be.error(r().t("Only collections can be edited, create a new knowledge base to edit/add documents.")):Kt(`/workspace/knowledge/${e(l).id}`)}),v(S,C)}),t(O);var R=n(O,2);{var he=S=>{Jt(S,{$$events:{visible:l=>{e(j)||ue()}},children:(l,C)=>{var E=da(),J=a(E);ke(J,{className:" size-4"});var T=n(J,2),Q=a(T,!0);t(T),t(E),I(Z=>h(Q,Z),[()=>(r(),d(()=>r().t("Loading...")))]),v(l,E)},$$slots:{default:!0}})};D(R,S=>{e(g)||S(he)})}v(W,A)},vt=W=>{var A=va(),O=a(A),R=n(a(O),2),he=a(R,!0);t(R);var S=n(R,2),l=a(S,!0);t(S),t(O),t(A),I((C,E)=>{h(he,C),h(l,E)},[()=>(r(),d(()=>r().t("No knowledge found"))),()=>(r(),d(()=>r().t("Try adjusting your search or filter to find what you are looking for.")))]),v(W,A)};D(N,W=>{e(p),d(()=>(e(p)??[]).length!==0)?W(F):W(vt,!1)})}v(o,$)},dt=o=>{var $=ca(),N=a($);ke(N,{className:"size-4"}),t($),v(o,$)};D(lt,o=>{e(p)!==null&&e(B)!==null?o(it):o(dt,!1)})}t(_e);var Ce=n(_e,2),nt=a(Ce);t(Ce),I((o,$,N,F)=>{h(Ze,o),h(et,e(B)),h(tt,$),Lt(se,"placeholder",N),h(nt,`â“˜ ${F??""}`)},[()=>(r(),d(()=>r().t("Knowledge"))),()=>(r(),d(()=>r().t("New Knowledge"))),()=>(r(),d(()=>r().t("Search Knowledge"))),()=>(r(),d(()=>r().t("Use '#' in the prompt input to load and include your knowledge.")))]),St(se,()=>e(b),o=>i(b,o)),ie("wheel",oe,o=>{o.deltaY!==0&&(o.preventDefault(),o.currentTarget.scrollLeft+=o.deltaY)}),v(f,_)},Qe=f=>{var _=ua(),U=a(_);ke(U,{className:"size-5"}),t(_),v(f,_)};D(Re,f=>{e(z)?f(Je):f(Qe,!1)})}v(H,Pe),He(),ce()}function Ya(H){ma(H,{})}export{Ya as component};
//# sourceMappingURL=31.DcOCMwcd.js.map

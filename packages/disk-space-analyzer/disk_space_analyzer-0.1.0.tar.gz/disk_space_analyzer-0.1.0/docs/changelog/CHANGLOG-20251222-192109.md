# å˜æ›´æ—¥å¿— - pip åŒ…å®‰è£…æ”¯æŒ

**ç‰ˆæœ¬å·**: 0.1.0  
**å˜æ›´æ—¶é—´**: 2025-12-22 19:21:09  
**å˜æ›´ç±»å‹**: åŠŸèƒ½æ–°å¢ + é¡¹ç›®é‡æ„

---

## å˜æ›´æ¦‚è¦

å®ç°é¡¹ç›®çš„æ ‡å‡† Python åŒ…åŒ–ï¼Œæ”¯æŒé€šè¿‡ pip å®‰è£…å’Œå¤šç§ä½¿ç”¨æ–¹å¼ï¼Œéµå¾ª PEP æ ‡å‡†å’Œç°ä»£ Python é¡¹ç›®æœ€ä½³å®è·µã€‚

---

## å½±å“æ¨¡å—

### é¡¹ç›®ç»“æ„
- **æ–°å¢**: `disk_analyzer/` åŒ…ç›®å½•
- **æ–°å¢**: åŒ…é…ç½®æ–‡ä»¶ï¼ˆpyproject.tomlã€setup.pyã€MANIFEST.inã€LICENSEï¼‰
- **é‡æ„**: æ ¸å¿ƒä»£ç æ–‡ä»¶ç§»åŠ¨å’Œé‡å‘½å

### æ ¸å¿ƒæ¨¡å—
- **disk_analyzer/analyzer.py**: æ ¸å¿ƒåˆ†ææ¨¡å—ï¼ˆåŸ disk_analyzer.pyï¼‰
- **disk_analyzer/web_app.py**: Web åº”ç”¨æ¨¡å—ï¼ˆåŸ disk_web_tool.pyï¼‰
- **disk_analyzer/cli.py**: å‘½ä»¤è¡Œå…¥å£ï¼ˆæ–°å¢ï¼‰
- **disk_analyzer/__init__.py**: åŒ…åˆå§‹åŒ–ï¼ˆæ–°å¢ï¼‰
- **disk_analyzer/__main__.py**: æ¨¡å—è¿è¡Œå…¥å£ï¼ˆæ–°å¢ï¼‰

---

## å…³é”®å˜æ›´

### 1. æ–‡ä»¶ç»“æ„é‡ç»„

**æ–°å¢åŒ…ç›®å½•**ï¼š
```
disk_analyzer/
â”œâ”€â”€ __init__.py         # åŒ…åˆå§‹åŒ–ï¼Œå¯¼å‡ºå…¬å…± API
â”œâ”€â”€ __main__.py         # æ”¯æŒ python -m disk_analyzer è¿è¡Œ
â”œâ”€â”€ analyzer.py         # æ ¸å¿ƒåˆ†ææ¨¡å—ï¼ˆé‡å‘½åï¼‰
â”œâ”€â”€ web_app.py          # Web åº”ç”¨æ¨¡å—ï¼ˆé‡å‘½åï¼‰
â””â”€â”€ cli.py              # å‘½ä»¤è¡Œå…¥å£ï¼ˆæ–°å¢ï¼‰
```

**æ–‡ä»¶è¿ç§»**ï¼š
- `disk_analyzer.py` â†’ `disk_analyzer/analyzer.py`
- `disk_web_tool.py` â†’ `disk_analyzer/web_app.py`
- `start_disk_tool.py` â†’ ä¿ç•™ï¼ˆå‘åå…¼å®¹ï¼‰ + `disk_analyzer/cli.py`ï¼ˆæ–°å¢ï¼‰

### 2. åŒ…é…ç½®æ–‡ä»¶

**pyproject.toml**ï¼ˆç°ä»£åŒ–é…ç½®ï¼‰ï¼š
```toml
[project]
name = "disk-analyzer"
version = "0.1.0"
requires-python = ">=3.8"
dependencies = ["flask>=2.3.0", "flask-cors>=4.0.0"]

[project.scripts]
disk-analyzer = "disk_analyzer.cli:main"
```

**setup.py**ï¼ˆå‘åå…¼å®¹ï¼‰ï¼š
- ä¼ ç»Ÿå®‰è£…é…ç½®
- æ”¯æŒä¸å…¼å®¹ pyproject.toml çš„æ—§ç‰ˆæœ¬ pip

**MANIFEST.in**ï¼š
```
include README.md LICENSE CHANGELOG.md requirements.txt
recursive-include docs *.md
```

**LICENSE**ï¼š
- MIT License
- Copyright Â© 2025 Disk Analyzer Team

### 3. å‘½ä»¤è¡Œå·¥å…·

**æ–°å¢åŠŸèƒ½**ï¼š
- `disk-analyzer`ï¼šå…¨å±€å‘½ä»¤è¡Œå·¥å…·
- `--debug/-d`ï¼šè°ƒè¯•æ¨¡å¼
- `--host`ï¼šè‡ªå®šä¹‰ç›‘å¬åœ°å€ï¼ˆé»˜è®¤ 0.0.0.0ï¼‰
- `--port/-p`ï¼šè‡ªå®šä¹‰ç«¯å£ï¼ˆé»˜è®¤ 8080ï¼‰
- `--no-browser`ï¼šç¦ç”¨è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
- `--version/-v`ï¼šæ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```bash
disk-analyzer                    # æ ‡å‡†å¯åŠ¨
disk-analyzer --debug            # è°ƒè¯•æ¨¡å¼
disk-analyzer --port 9090        # è‡ªå®šä¹‰ç«¯å£
disk-analyzer --no-browser       # ä¸æ‰“å¼€æµè§ˆå™¨
disk-analyzer --version          # æ˜¾ç¤ºç‰ˆæœ¬
```

### 4. å¯¼å…¥è·¯å¾„è°ƒæ•´

**åŒ…åˆå§‹åŒ–ï¼ˆ__init__.pyï¼‰**ï¼š
```python
from disk_analyzer.analyzer import DiskAnalyzer, DiskUsage, build_tree_structure
from disk_analyzer.web_app import app

__version__ = "0.1.0"
__all__ = ['DiskAnalyzer', 'DiskUsage', 'build_tree_structure', 'app']
```

**web_app.py å¯¼å…¥ä¿®æ”¹**ï¼š
```python
# ä¿®æ”¹å‰
from disk_analyzer import DiskAnalyzer, build_tree_structure, DiskUsage

# ä¿®æ”¹å
from disk_analyzer.analyzer import DiskAnalyzer, build_tree_structure, DiskUsage
```

### 5. å¤šç§ä½¿ç”¨æ–¹å¼

**æ–¹å¼1ï¼šå‘½ä»¤è¡Œå·¥å…·**ï¼ˆpip å®‰è£…åï¼‰ï¼š
```bash
disk-analyzer
```

**æ–¹å¼2ï¼šPython æ¨¡å—è¿è¡Œ**ï¼š
```bash
python -m disk_analyzer
```

**æ–¹å¼3ï¼šä½œä¸ºåº“å¯¼å…¥**ï¼š
```python
from disk_analyzer import DiskAnalyzer

analyzer = DiskAnalyzer(max_depth=3)
results = analyzer.analyze_directory('/path/to/analyze')
```

**æ–¹å¼4ï¼šä¼ ç»Ÿè„šæœ¬**ï¼ˆå‘åå…¼å®¹ï¼‰ï¼š
```bash
python start_disk_tool.py
```

---

## æ–°å¢åŠŸèƒ½

### 1. pip å®‰è£…æ”¯æŒ

**æœ¬åœ°æºç å®‰è£…**ï¼š
```bash
pip install .              # å¸¸è§„å®‰è£…
pip install -e .           # å¼€å‘æ¨¡å¼å®‰è£…
pip install -e .[dev]      # å®‰è£…å¼€å‘ä¾èµ–
```

**PyPI å®‰è£…**ï¼ˆæœªæ¥å¯ç”¨ï¼‰ï¼š
```bash
pip install disk-analyzer
```

### 2. å‘½ä»¤è¡Œå·¥å…·å¢å¼º

**è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨**ï¼š
- å¯åŠ¨åè‡ªåŠ¨åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ http://localhost:8080
- ä½¿ç”¨ `--no-browser` å¯ç¦ç”¨

**æ›´å‹å¥½çš„è¾“å‡º**ï¼š
```
ğŸ”§ ç£ç›˜ç©ºé—´åˆ†æå·¥å…·å¯åŠ¨å™¨
========================================
ğŸš€ å¯åŠ¨ç£ç›˜åˆ†æWebæœåŠ¡...
   ç›‘å¬åœ°å€: 0.0.0.0:8080
   è°ƒè¯•æ¨¡å¼: å…³é—­
   æµè§ˆå™¨: http://localhost:8080
```

**é”™è¯¯å¤„ç†**ï¼š
- ä¾èµ–æ£€æŸ¥å¤±è´¥æ—¶çš„æ¸…æ™°æç¤º
- å¯åŠ¨å¤±è´¥æ—¶çš„è¯¦ç»†é”™è¯¯ä¿¡æ¯å’Œå †æ ˆè·Ÿè¸ª

### 3. å¼€å‘ä¾èµ–æ”¯æŒ

**å¯é€‰ä¾èµ–ç»„**ï¼š
```bash
pip install -e .[dev]
```

**åŒ…å«å·¥å…·**ï¼š
- pytestï¼šå•å…ƒæµ‹è¯•æ¡†æ¶
- pytest-covï¼šæµ‹è¯•è¦†ç›–ç‡
- blackï¼šä»£ç æ ¼å¼åŒ–
- flake8ï¼šä»£ç æ£€æŸ¥

---

## æ–‡æ¡£æ›´æ–°

### README.md

**æ–°å¢ç« èŠ‚**ï¼š
- **æ–¹å¼1ï¼šé€šè¿‡ pip å®‰è£…ï¼ˆæ¨èï¼‰**
  - ä»æœ¬åœ°æºç å®‰è£…
  - ä» PyPI å®‰è£…ï¼ˆæœªæ¥å¯ç”¨ï¼‰
- **å¤šç§å¯åŠ¨æ–¹å¼**
  - å‘½ä»¤è¡Œå·¥å…·
  - Python æ¨¡å—è¿è¡Œ
  - ä½œä¸ºåº“ä½¿ç”¨
  - ä¼ ç»Ÿè„šæœ¬ï¼ˆå‘åå…¼å®¹ï¼‰

**æ›´æ–°ç« èŠ‚**ï¼š
- **é¡¹ç›®ç»“æ„**ï¼šåæ˜ æ–°çš„åŒ…ç»“æ„
- **å¿«é€Ÿå¼€å§‹**ï¼šä¼˜å…ˆæ¨è pip å®‰è£…

### CHANGELOG.md

**åˆ›å»ºå…¨å±€å˜æ›´æ—¥å¿—**ï¼š
- é‡‡ç”¨ [Keep a Changelog](https://keepachangelog.com/) æ ¼å¼
- éµå¾ª [è¯­ä¹‰åŒ–ç‰ˆæœ¬](https://semver.org/) è§„èŒƒ
- è®°å½•ç‰ˆæœ¬ 0.1.0 çš„æ‰€æœ‰å˜æ›´

### è®¾è®¡æ–‡æ¡£

**æ–°å¢è®¾è®¡æ–‡æ¡£**ï¼š
- `.qoder/quests/project-pip-installation.md`
- è¯¦ç»†çš„åŒ…åŒ–è®¾è®¡å’Œå®æ–½æ–¹æ¡ˆ

---

## å‘åå…¼å®¹æ€§

### ä¿æŒå…¼å®¹

âœ… **åŸæœ‰è¿è¡Œæ–¹å¼ä»ç„¶å¯ç”¨**ï¼š
```bash
python start_disk_tool.py
python start_disk_tool.py --debug
```

âœ… **API æ¥å£ä¿æŒä¸å˜**ï¼š
- DiskAnalyzer ç±»çš„ä½¿ç”¨æ–¹å¼ä¸å˜
- Web API ç«¯ç‚¹ä¿æŒä¸å˜
- é…ç½®æ–‡ä»¶æ ¼å¼ä¸å˜

### è¿ç§»å»ºè®®

**æ¨èä½¿ç”¨æ–°æ–¹å¼**ï¼š
- ä½¿ç”¨ `pip install -e .` è¿›è¡Œå¼€å‘
- ä½¿ç”¨ `disk-analyzer` å‘½ä»¤å¯åŠ¨
- ä½œä¸ºåº“å¯¼å…¥æ—¶ä½¿ç”¨åŒ…åå¯¼å…¥

**ä¼ ç»Ÿæ–¹å¼**ï¼š
- `start_disk_tool.py` ä¿ç•™ç”¨äºå‘åå…¼å®¹
- æœªæ¥ç‰ˆæœ¬å¯èƒ½ä¼šæ ‡è®°ä¸ºåºŸå¼ƒ

---

## æµ‹è¯•éªŒè¯

### å®‰è£…æµ‹è¯•

âœ… **å¼€å‘æ¨¡å¼å®‰è£…æˆåŠŸ**ï¼š
```bash
$ pip install -e .
Successfully installed disk-analyzer-0.1.0
```

âœ… **å‘½ä»¤è¡Œå·¥å…·å¯ç”¨**ï¼š
```bash
$ which disk-analyzer
/home/swufe/miniconda3/bin/disk-analyzer

$ disk-analyzer --version
ğŸ”§ ç£ç›˜ç©ºé—´åˆ†æå·¥å…·å¯åŠ¨å™¨
========================================
Disk Analyzer v0.1.0
```

âœ… **æ¨¡å—å¯¼å…¥æˆåŠŸ**ï¼š
```python
>>> from disk_analyzer import DiskAnalyzer, DiskUsage, app
å¯¼å…¥æˆåŠŸï¼
DiskAnalyzer: <class 'disk_analyzer.analyzer.DiskAnalyzer'>
DiskUsage: <class 'disk_analyzer.analyzer.DiskUsage'>
app: <Flask 'disk_analyzer.web_app'>
```

### åŠŸèƒ½æµ‹è¯•

**å¾…æµ‹è¯•é¡¹**ï¼ˆéœ€è¦æ‰‹åŠ¨éªŒè¯ï¼‰ï¼š
- [ ] Web æœåŠ¡å¯åŠ¨æ­£å¸¸
- [ ] æ ¸å¿ƒåˆ†æåŠŸèƒ½æ­£å¸¸
- [ ] æ‰€æœ‰å‘½ä»¤è¡Œå‚æ•°å·¥ä½œæ­£å¸¸
- [ ] è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨åŠŸèƒ½
- [ ] ä¾èµ–æ£€æŸ¥æœºåˆ¶

---

## ä»£ç ç»Ÿè®¡

### æ–°å¢æ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | è¡Œæ•° | ç”¨é€” |
|---------|------|------|
| disk_analyzer/__init__.py | 15 | åŒ…åˆå§‹åŒ–å’Œ API å¯¼å‡º |
| disk_analyzer/__main__.py | 13 | æ¨¡å—è¿è¡Œå…¥å£ |
| disk_analyzer/cli.py | 122 | å‘½ä»¤è¡Œå…¥å£å’Œå‚æ•°è§£æ |
| pyproject.toml | 73 | ç°ä»£åŒ–é¡¹ç›®é…ç½® |
| setup.py | 58 | ä¼ ç»Ÿå®‰è£…é…ç½® |
| MANIFEST.in | 7 | éä»£ç æ–‡ä»¶æ¸…å• |
| LICENSE | 22 | MIT å¼€æºè®¸å¯è¯ |
| CHANGELOG.md | 39 | å…¨å±€å˜æ›´æ—¥å¿— |

**æ€»è®¡æ–°å¢**ï¼šçº¦ 349 è¡Œ

### ä¿®æ”¹æ–‡ä»¶

| æ–‡ä»¶è·¯å¾„ | å˜æ›´ | è¯´æ˜ |
|---------|------|------|
| disk_analyzer/web_app.py | 1 è¡Œ | å¯¼å…¥è·¯å¾„è°ƒæ•´ |
| README.md | +70 è¡Œ | æ·»åŠ  pip å®‰è£…è¯´æ˜ |

---

## æŠ€æœ¯è§„æ ¼

### Python ç‰ˆæœ¬è¦æ±‚

- **æœ€ä½ç‰ˆæœ¬**ï¼šPython 3.8
- **æ”¯æŒç‰ˆæœ¬**ï¼š3.8ã€3.9ã€3.10ã€3.11ã€3.12

### ä¾èµ–è¦æ±‚

**è¿è¡Œæ—¶ä¾èµ–**ï¼š
- flask >= 2.3.0
- flask-cors >= 4.0.0

**å¼€å‘ä¾èµ–**ï¼ˆå¯é€‰ï¼‰ï¼š
- pytest >= 7.0.0
- pytest-cov >= 4.0.0
- black >= 23.0.0
- flake8 >= 6.0.0

### æ“ä½œç³»ç»Ÿæ”¯æŒ

| ç³»ç»Ÿ | æ”¯æŒæƒ…å†µ | æµ‹è¯•çŠ¶æ€ |
|------|---------|---------|
| Linux | å®Œå…¨æ”¯æŒ | âœ… å·²æµ‹è¯•ï¼ˆUbuntu 22.04ï¼‰ |
| macOS | å®Œå…¨æ”¯æŒ | â³ å¾…æµ‹è¯• |
| Windows | åŸºæœ¬æ”¯æŒ | â³ å¾…æµ‹è¯• |

---

## å‘å¸ƒå‡†å¤‡

### PyPI å‘å¸ƒæµç¨‹

**å‡†å¤‡å·¥ä½œ**ï¼š
1. æ³¨å†Œ PyPI è´¦å·
2. å®‰è£…æ„å»ºå·¥å…·ï¼š`pip install build twine`

**å‘å¸ƒæ­¥éª¤**ï¼š
```bash
# æ¸…ç†æ—§æ„å»º
rm -rf dist/ build/ *.egg-info

# æ„å»ºåˆ†å‘åŒ…
python -m build

# æ£€æŸ¥åŒ…å®Œæ•´æ€§
twine check dist/*

# æµ‹è¯•å‘å¸ƒ
twine upload --repository testpypi dist/*

# æ­£å¼å‘å¸ƒ
twine upload dist/*
```

### ç‰ˆæœ¬ç®¡ç†

**ç‰ˆæœ¬å·åŒæ­¥ä½ç½®**ï¼š
- `disk_analyzer/__init__.py`ï¼š`__version__ = "0.1.0"`
- `pyproject.toml`ï¼š`version = "0.1.0"`
- `setup.py`ï¼š`version="0.1.0"`
- `CHANGELOG.md`ï¼š`[0.1.0] - 2025-12-22`

**Git æ ‡ç­¾**ï¼š
```bash
git tag v0.1.0
git push origin v0.1.0
```

---

## ä¸‹ä¸€æ­¥è®¡åˆ’

### çŸ­æœŸï¼ˆæœ¬å‘¨ï¼‰

- [ ] å®Œæ•´åŠŸèƒ½æµ‹è¯•ï¼ˆWeb æœåŠ¡ã€åˆ†æåŠŸèƒ½ï¼‰
- [ ] å¤šå¹³å°æµ‹è¯•ï¼ˆmacOSã€Windowsï¼‰
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•
- [ ] å®Œå–„ API æ–‡æ¡£

### ä¸­æœŸï¼ˆä¸‹å‘¨ï¼‰

- [ ] å‘å¸ƒåˆ° test.pypi.org æµ‹è¯•
- [ ] æ”¶é›†ç”¨æˆ·åé¦ˆ
- [ ] ä¿®å¤å‘ç°çš„é—®é¢˜
- [ ] å‡†å¤‡æ­£å¼å‘å¸ƒ

### é•¿æœŸï¼ˆæœªæ¥ç‰ˆæœ¬ï¼‰

- [ ] å‘å¸ƒåˆ° PyPI
- [ ] æŒç»­é›†æˆ/æŒç»­éƒ¨ç½²ï¼ˆCI/CDï¼‰
- [ ] æ–‡æ¡£ç½‘ç«™æ­å»º
- [ ] æ€§èƒ½ä¼˜åŒ–å’ŒåŠŸèƒ½å¢å¼º

---

## ç›¸å…³é“¾æ¥

- **è®¾è®¡æ–‡æ¡£**: `.qoder/quests/project-pip-installation.md`
- **å…¨å±€å˜æ›´æ—¥å¿—**: `CHANGELOG.md`
- **é¡¹ç›®è¯´æ˜**: `README.md`
- **è®¸å¯è¯**: `LICENSE`

---

## å‚è€ƒèµ„æº

- [Python æ‰“åŒ…ç”¨æˆ·æŒ‡å—](https://packaging.python.org/)
- [PEP 517 - pyproject.toml](https://peps.python.org/pep-0517/)
- [PEP 621 - é¡¹ç›®å…ƒæ•°æ®](https://peps.python.org/pep-0621/)
- [è¯­ä¹‰åŒ–ç‰ˆæœ¬](https://semver.org/lang/zh-CN/)
- [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)

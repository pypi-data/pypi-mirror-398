/* Custom theme variables and accessibility improvements for OptiFlowX
   - Provides a custom palette via the [data-md-color-scheme="custom"] selector
   - Adds improved nav hover/active states, search styling, and typography sizing
   - Imports Inter and JetBrains Mono from Google Fonts for consistent typography
*/

/* Import fonts (fallbacks included) */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono:wght@400;600&display=swap');

/* Base typography sizing variables */
:root {
  --md-text-font-size: 0.95rem;
  --md-code-font-size: 0.85rem;
}

/* Palette-specific variables
   The Material theme exposes the current color scheme via the
   `data-md-color-scheme` attribute on the html element. We provide
   accessible palettes for `default` (light), `slate` (dark) and `custom`.
*/

/* Light scheme — soft, low-contrast background with muted accents (sklearn-like) */
[data-md-color-scheme="default"] {
  --md-default-bg-color: #f5f7f8;    /* very light gray */
  --md-default-fg-color: #1f2933;    /* dark slate for body text */
  --md-primary-fg-color: #51627a;    /* muted indigo accent */
  --md-accent-fg-color: #6b7088;     /* soft secondary accent (muted gray-indigo) */
  --md-surface: #ffffff;             /* page/card background */
  --md-muted: #6b7280;               /* muted text */
}

/* Dark scheme — gentle dark surfaces, desaturated accents */
[data-md-color-scheme="slate"] {
  --md-default-bg-color: #0b0f12;    /* near-black background */
  --md-default-fg-color: #dbe7ee;    /* soft light for text */
  --md-primary-fg-color: #51627a;    /* muted indigo accent */
  --md-accent-fg-color: #6b7088;     /* soft secondary accent */
  --md-surface: #0f1416;             /* card background */
  --md-muted: #9aa3b2;               /* muted text */
}

/* Custom scheme — alternative neutral palette */
[data-md-color-scheme="custom"] {
  --md-default-bg-color: #f2f4f6;
  --md-default-fg-color: #1f2933;
  --md-primary-fg-color: #51627a;
  --md-accent-fg-color: #7a6fb3;
  --md-surface: #ffffff;
  --md-muted: #6b7280;
}

/* Improved nav hover and active states (works on dark and light palettes) */
.md-nav__link:hover {
  /* subtle hover tint that adapts to light/dark via fg color */
  background-color: color-mix(in srgb, var(--md-primary-fg-color) 6%, transparent 94%);
  transition: background-color 160ms ease, color 160ms ease;
}

.md-nav__link--active {
  background-color: color-mix(in srgb, var(--md-primary-fg-color) 10%, transparent 90%);
}

/* Improve search input visibility */
.md-search__input {
  border-radius: 6px;
  padding: 0.4rem 0.6rem;
  font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
}

/* Highlight active search result (use accent color) */
.md-search-result__item--active {
  background-color: color-mix(in srgb, var(--md-accent-fg-color) 18%, transparent 82%);
  color: var(--md-default-fg-color);
}

/* Code font sizing */
.md-typeset code, .md-typeset pre {
  font-family: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace;
  font-size: var(--md-code-font-size);
}

/* Global text font */
.md-typeset, .md-nav__title, .md-nav__link, .md-footer {
  font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  font-size: var(--md-text-font-size);
}

/* Ensure code block contrast — adjust background for accessibility if needed */
.md-typeset pre, pre[class*="language-"] {
  /* code block background adapts to the active scheme */
  background-color: color-mix(in srgb, var(--md-surface) 92%, black 8%);
  color: var(--md-default-fg-color);
  border-radius: 8px;
  border: 1px solid color-mix(in srgb, var(--md-default-fg-color) 6%, transparent 94%);
  padding: 1rem;
}

/* Code copy button (Material provides it, ensure contrast/placement) */
.md-typeset .md-clipboard {
  background: color-mix(in srgb, var(--md-muted) 6%, transparent 94%);
  color: var(--md-default-fg-color);
  border-radius: 6px;
  padding: 0.18rem 0.28rem;
}

/* Typography: improve readability for long sessions */
.md-typeset {
  line-height: 1.7;
  letter-spacing: 0.01em;
}
.md-typeset h1 { font-size: 2.2rem; margin-top: 0.2rem; margin-bottom: 0.6rem; }
.md-typeset h2 { font-size: 1.6rem; margin-top: 1.2rem; margin-bottom: 0.5rem; }
.md-typeset h3 { font-size: 1.25rem; margin-top: 1rem; margin-bottom: 0.45rem; }

/* Right-side table-of-contents: sticky and spaced for readability */
.md-nav--toc {
  position: sticky;
  top: 88px; /* account for header */
  max-height: calc(100vh - 120px);
  overflow: auto;
  padding-right: 0.5rem;
}

/* Figures and captions: centered and readable */
.md-typeset figure {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}
.md-typeset figcaption { color: var(--md-muted); font-size: 0.92rem; margin-top: 0.4rem; }

/* Example/exercise blocks: clear separation */
.example-block, .example { 
  border-left: 4px solid color-mix(in srgb, var(--md-primary-fg-color) 18%, transparent 82%);
  padding: 0.8rem 1rem;
  margin: 1rem 0;
  background: color-mix(in srgb, var(--md-surface) 98%, var(--md-primary-fg-color) 0%);
}

/* Limit content width for readability and center content */
.md-content {
  max-width: 1100px;
  margin-left: auto;
  margin-right: auto;
  padding-left: 1rem;
  padding-right: 1rem;
}

/* Admonition colors: map to semantic tokens */
.md-typeset .admonition.note { background-color: color-mix(in srgb, var(--md-accent-fg-color, #7a6fb3) 6%, transparent 94%); border-left: 4px solid color-mix(in srgb, var(--md-accent-fg-color, #7a6fb3) 28%, transparent 72%); }
.md-typeset .admonition.tip  { background-color: color-mix(in srgb, var(--md-primary-fg-color, #51627a) 6%, transparent 94%);  border-left: 4px solid color-mix(in srgb, var(--md-primary-fg-color, #51627a) 28%, transparent 72%); }
.md-typeset .admonition.warning { background-color: color-mix(in srgb, #f3c57a 6%, transparent 94%); border-left: 4px solid color-mix(in srgb, #f3c57a 28%, transparent 72%); }
.md-typeset .admonition.danger { background-color: color-mix(in srgb, #f2b8b8 6%, transparent 94%); border-left: 4px solid color-mix(in srgb, #f2b8b8 28%, transparent 72%); }

/* Improve tables readability */
.md-typeset table thead th { background-color: color-mix(in srgb, var(--md-primary-fg-color) 6%, transparent 94%); color: inherit; }
.md-typeset table tbody td { background-color: color-mix(in srgb, var(--md-primary-fg-color) 2%, transparent 98%); }

/* Mobile-friendly nav hover (ensure no layout break) */
@media (max-width: 900px) {
  .md-nav__link:hover { background-color: transparent; }
}

/* Minor helper: make sure images and embeds scale */
.md-typeset img, .md-typeset iframe { max-width: 100%; height: auto; }

/* Accessibility: ensure links have focus outline */
a:focus, .md-nav__link:focus {
  outline: 3px solid color-mix(in srgb, var(--md-primary-fg-color) 14%, transparent 86%);
  outline-offset: 3px;
}

/* Optional: small tweaks to ensure search box doesn't overflow on mobile */
@media (max-width: 600px) {
  .md-search__input { width: 100%; box-sizing: border-box; }
}

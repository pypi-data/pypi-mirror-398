(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3079],{2942:(e,t,s)=>{"use strict";var i=s(2418);s.o(i,"usePathname")&&s.d(t,{usePathname:function(){return i.usePathname}}),s.o(i,"useRouter")&&s.d(t,{useRouter:function(){return i.useRouter}}),s.o(i,"useSearchParams")&&s.d(t,{useSearchParams:function(){return i.useSearchParams}})},3120:(e,t,s)=>{"use strict";s.d(t,{_:()=>a});var i=s(704);function r(){let e=window.location.hostname,t=window.location.pathname,s=t.startsWith("/agent/");if("agents.ciris.ai"!==e&&!s)return{mode:"standalone",agentId:"default",apiBase:"/v1"};{let e="default";e=s?t.split("/")[2]||"default":localStorage.getItem("selectedAgentId")||"default";let i="/api/".concat(e,"/v1");return{mode:"managed",agentId:e,apiBase:i}}}var n=s(5950);class o{configure(e,t){let s,{mode:i}=r();if("managed"===i)s="".concat(window.location.origin,"/api/").concat(e);else{let t=localStorage.getItem("agent_".concat(e,"_api_url"));s=t||window.location.origin}t||(t=n.a.getAccessToken()||void 0);let o={baseURL:s,authToken:t,agentId:e,mode:i};return this.hasConfigChanged(o)&&this.applyConfiguration(o),o}configureForOAuthCallback(e,t){let s,{mode:i}=r(),n={baseURL:"managed"===i?"".concat(window.location.origin,"/api/").concat(e):window.location.origin,authToken:t,agentId:e,mode:i};return this.applyConfiguration(n),this.storeConfiguration(n),n}getCurrentConfig(){return this.currentConfig}isConfiguredFor(e){return!!this.currentConfig&&this.currentConfig.agentId===e&&!!this.currentConfig.authToken}clear(){this.currentConfig=null,localStorage.removeItem("sdk_config"),this.log("SDK configuration cleared")}applyConfiguration(e){this.log("Applying SDK configuration:",e),i.AQ.setConfig({baseURL:e.baseURL,authToken:e.authToken}),this.currentConfig=e,this.log("SDK configured successfully")}hasConfigChanged(e){return!this.currentConfig||this.currentConfig.baseURL!==e.baseURL||this.currentConfig.authToken!==e.authToken||this.currentConfig.agentId!==e.agentId||this.currentConfig.mode!==e.mode}storeConfiguration(e){let t={baseURL:e.baseURL,agentId:e.agentId,mode:e.mode};localStorage.setItem("sdk_config",JSON.stringify(t)),"standalone"===e.mode&&e.baseURL!==window.location.origin&&localStorage.setItem("agent_".concat(e.agentId,"_api_url"),e.baseURL)}restoreConfiguration(){let e=localStorage.getItem("sdk_config");if(!e)return null;try{let t=JSON.parse(e),s=n.a.getAccessToken()||void 0;return{...t,authToken:s}}catch(e){return null}}log(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];this.debugMode&&console.log("[SDKConfigManager]",...t)}constructor(){this.currentConfig=null,this.debugMode=!1}}let a=new o},5746:(e,t,s)=>{Promise.resolve().then(s.bind(s,7460))},6264:(e,t,s)=>{"use strict";s.d(t,{O:()=>a});var i=s(4568),r=s(7620),n=s(2942),o=s(9484);function a(e){let{children:t,requiredRole:s,requiredPermission:a}=e,{user:c,loading:d,hasRole:l,hasPermission:u}=(0,o.A)(),m=(0,n.useRouter)();return((0,r.useEffect)(()=>{if(!d){if(!c)return void m.push("/login");if(s&&!l(s)||a&&!u(a))return void m.push("/unauthorized")}},[c,d,s,a,l,u,m]),d)?(0,i.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,i.jsx)("div",{className:"text-lg",children:"Loading..."})}):c&&(!s||l(s))&&(!a||u(a))?(0,i.jsx)(i.Fragment,{children:t}):null}},7460:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var i=s(4568),r=s(7620),n=s(704),o=s(6264),a=s(3237),c=s(4893),d=s(8924),l=s(7192);function u(){let[e,t]=(0,r.useState)(null),[s,u]=(0,r.useState)(null),[m,g]=(0,r.useState)(!1),[p,h]=(0,r.useState)("agent"),[y,x]=(0,r.useState)({isOpen:!1,message:"",details:void 0}),v={agent:{title:"Agent Interaction",demos:[{title:"Get Agent Status",description:"Retrieve current agent status and cognitive state",endpoint:"GET /v1/agent/status",method:"GET",execute:()=>n.AQ.agent.getStatus()},{title:"Get Agent Identity",description:"Get agent identity, name, and capabilities",endpoint:"GET /v1/agent/identity",method:"GET",execute:()=>n.AQ.agent.getIdentity()},{title:"Send Message",description:"Interact with the agent via message",endpoint:"POST /v1/agent/interact",method:"POST",execute:()=>n.AQ.agent.interact("Hello from API demo!",{channel_id:"demo_channel"}),params:{message:"Hello from API demo!",channel_id:"demo_channel"}},{title:"Get Conversation History",description:"Retrieve recent conversation history",endpoint:"GET /v1/agent/history",method:"GET",execute:()=>n.AQ.agent.getHistory({channel_id:"demo_channel",limit:5})},{title:"Get Active Channels",description:"List all active communication channels",endpoint:"GET /v1/agent/channels",method:"GET",execute:()=>n.AQ.agent.getChannels()}]},memory:{title:"Memory Operations",demos:[{title:"Create Memory Node",description:"Store a new memory node in the graph",endpoint:"POST /v1/memory/store",method:"POST",execute:()=>n.AQ.memory.createNode({type:"OBSERVATION",scope:"LOCAL",attributes:{source:"api_demo",content:"Test memory from API demo",timestamp:new Date().toISOString()}}),params:{type:"OBSERVATION",scope:"LOCAL",attributes:{source:"api_demo",content:"Test memory"}}},{title:"Query Memory",description:"Search memory graph with filters",endpoint:"POST /v1/memory/query",method:"POST",execute:()=>n.AQ.memory.query("",{type:"OBSERVATION",limit:5}),params:{query:"",type:"OBSERVATION",limit:5}},{title:"Search Memory",description:"Full-text search across memories",endpoint:"GET /v1/memory/search",method:"GET",execute:()=>n.AQ.memory.search("test",{limit:5})},{title:"Memory Statistics",description:"Get memory graph statistics",endpoint:"GET /v1/memory/stats",method:"GET",execute:()=>n.AQ.memory.getStats()},{title:"Memory Timeline",description:"View memories in chronological order",endpoint:"GET /v1/memory/timeline",method:"GET",execute:()=>n.AQ.memory.getTimeline()},{title:"Visualize Memory Graph",description:"Generate interactive graph visualization of memories",endpoint:"GET /v1/memory/visualize/graph",method:"GET",execute:()=>n.AQ.memory.getVisualization({layout:"timeline",hours:24,limit:30}),params:{layout:"timeline",hours:24,limit:30}}]},system:{title:"System Management",demos:[{title:"System Health",description:"Overall system health status",endpoint:"GET /v1/system/health",method:"GET",execute:()=>n.AQ.system.getHealth()},{title:"Resource Usage",description:"Current CPU, memory, and disk usage",endpoint:"GET /v1/system/resources",method:"GET",execute:()=>n.AQ.system.getResources()},{title:"System Time",description:"Get system time and timezone info",endpoint:"GET /v1/system/time",method:"GET",execute:()=>n.AQ.system.getTime()},{title:"Service Status",description:"Status of all CIRIS services",endpoint:"GET /v1/system/services",method:"GET",execute:()=>n.AQ.system.getServices()},{title:"Processor States",description:"Get all 6 cognitive processor states",endpoint:"GET /v1/system/processors",method:"GET",execute:()=>n.AQ.system.getProcessorStates()},{title:"Runtime Status",description:"Current runtime control status",endpoint:"GET /v1/system/runtime/state",method:"GET",execute:()=>n.AQ.system.getRuntimeStatus()},{title:"Processing Queue",description:"View processing queue status",endpoint:"GET /v1/system/runtime/queue",method:"GET",execute:()=>n.AQ.system.getProcessingQueueStatus()},{title:"Service Health Details",description:"Detailed health info for all services",endpoint:"GET /v1/system/services/health",method:"GET",execute:()=>n.AQ.system.getServiceHealthDetails()},{title:"Adapter List",description:"List all registered adapters",endpoint:"GET /v1/system/adapters",method:"GET",execute:()=>n.AQ.system.getAdapters()},{title:"Register Adapter",description:"Register a new adapter (e.g., Discord, CLI)",endpoint:"POST /v1/system/adapters/{type}",method:"POST",execute:()=>n.AQ.system.registerAdapter("cli",{enabled:!0,priority:2}),params:{adapter_type:"cli",config:{enabled:!0,priority:2}}},{title:"Unregister Adapter",description:"Unregister an adapter",endpoint:"DELETE /v1/system/adapters/{id}",method:"DELETE",execute:()=>n.AQ.system.unregisterAdapter("cli_adapter"),params:{adapter_id:"cli_adapter"}},{title:"Service Priorities",description:"Update service provider priorities",endpoint:"PUT /v1/system/services/{provider}/priority",method:"PUT",execute:()=>n.AQ.system.updateServicePriority("memory_provider",{priority:"HIGH",priority_group:0}),params:{provider:"memory_provider",priority:"HIGH",priority_group:0}},{title:"Circuit Breakers",description:"Reset circuit breakers for services",endpoint:"POST /v1/system/services/circuit-breakers/reset",method:"POST",execute:()=>n.AQ.system.resetCircuitBreakers()},{title:"Selection Logic",description:"Explain service selection logic",endpoint:"GET /v1/system/services/selection-logic",method:"GET",execute:()=>n.AQ.system.getServiceSelectionExplanation()},{title:"Single Step Debug",description:"Execute single processing step for debugging",endpoint:"POST /v1/system/runtime/single-step",method:"POST",execute:()=>n.AQ.system.singleStepProcessor()},{title:"Available Tools",description:"Get list of all available tools from all tool providers",endpoint:"GET /v1/system/tools",method:"GET",execute:async()=>{let e=await n.AQ.system.getTools();return console.log("Tools API response:",e),e}}]},config:{title:"Configuration",demos:[{title:"Get All Config",description:"Retrieve all configuration values",endpoint:"GET /v1/config",method:"GET",execute:()=>n.AQ.config.getConfig()},{title:"Get Config Value",description:"Get specific configuration value",endpoint:"GET /v1/config/{key}",method:"GET",execute:()=>n.AQ.config.get("agent_name")},{title:"Set Config Value",description:"Update configuration value",endpoint:"PUT /v1/config/{key}",method:"PUT",execute:()=>n.AQ.config.set("demo_key","demo_value","Demo config value"),params:{key:"demo_key",value:"demo_value",description:"Demo config value"}}]},telemetry:{title:"Telemetry & Observability",demos:[{title:"Telemetry Overview",description:"System metrics summary",endpoint:"GET /v1/telemetry/overview",method:"GET",execute:()=>n.AQ.telemetry.getOverview()},{title:"All Metrics",description:"List all available metrics",endpoint:"GET /v1/telemetry/metrics",method:"GET",execute:()=>n.AQ.telemetry.getMetrics()},{title:"System Logs",description:"Recent system log entries",endpoint:"GET /v1/telemetry/logs",method:"GET",execute:()=>n.AQ.telemetry.getLogs({page_size:10})},{title:"Resource History",description:"Historical resource usage data",endpoint:"GET /v1/telemetry/resources/history",method:"GET",execute:()=>n.AQ.telemetry.getResourceHistory({start_time:new Date(Date.now()-36e5).toISOString(),end_time:new Date().toISOString()})},{title:"Distributed Traces",description:"Recent request traces",endpoint:"GET /v1/telemetry/traces",method:"GET",execute:()=>n.AQ.telemetry.getTraces({page_size:5})}]},audit:{title:"Audit Trail",demos:[{title:"Recent Audit Entries",description:"List recent audit trail entries",endpoint:"GET /v1/audit/entries",method:"GET",execute:()=>n.AQ.audit.getEntries({page_size:10})},{title:"Search Audit Trail",description:"Search audit entries by criteria",endpoint:"POST /v1/audit/search",method:"POST",execute:()=>n.AQ.audit.searchEntries({service:"api",page_size:5}),params:{service:"api",page_size:5}}]},wa:{title:"Wise Authority",demos:[{title:"WA Status",description:"Wise Authority system status",endpoint:"GET /v1/wa/status",method:"GET",execute:()=>n.AQ.wiseAuthority.getStatus()},{title:"WA Permissions",description:"List granted permissions",endpoint:"GET /v1/wa/permissions",method:"GET",execute:()=>n.AQ.wiseAuthority.getPermissions()},{title:"Pending Deferrals",description:"List pending decision deferrals",endpoint:"GET /v1/wa/deferrals",method:"GET",execute:()=>n.AQ.wiseAuthority.getDeferrals()},{title:"Request Guidance",description:"Request guidance on a decision",endpoint:"POST /v1/wa/guidance",method:"POST",execute:()=>n.AQ.wiseAuthority.requestGuidance({topic:"Demo guidance request from API explorer",context:{demo:!0,timestamp:new Date().toISOString()},urgency:"low"}),params:{topic:"Demo guidance request",context:{demo:!0},urgency:"low"}}]},auth:{title:"Authentication",demos:[{title:"Current User",description:"Get current authenticated user",endpoint:"GET /v1/auth/me",method:"GET",execute:()=>n.AQ.auth.getMe()},{title:"Refresh Token",description:"Refresh authentication token",endpoint:"POST /v1/auth/refresh",method:"POST",execute:()=>n.AQ.auth.refresh()}]},users:{title:"User Management",demos:[{title:"List Users",description:"List all users with filtering",endpoint:"GET /v1/users",method:"GET",execute:()=>n.AQ.users.list({page_size:10}),params:{page_size:10}},{title:"Get User Details",description:"Get detailed info about a user",endpoint:"GET /v1/users/{userId}",method:"GET",execute:()=>n.AQ.users.get("admin"),params:{userId:"admin"}},{title:"Create User",description:"Create a new user account",endpoint:"POST /v1/users",method:"POST",execute:()=>n.AQ.users.create({username:"demo_user",password:"demo_password123",api_role:"OBSERVER"}),params:{username:"demo_user",password:"demo_password123",api_role:"OBSERVER"}},{title:"Update User",description:"Update user role or status",endpoint:"PUT /v1/users/{userId}",method:"PUT",execute:()=>n.AQ.users.update("demo_user",{api_role:"ADMIN",is_active:!0}),params:{userId:"demo_user",api_role:"ADMIN",is_active:!0}},{title:"Change Password",description:"Change user password",endpoint:"PUT /v1/users/{userId}/password",method:"PUT",execute:()=>n.AQ.users.changePassword("admin",{current_password:"current_password",new_password:"new_password123"}),params:{userId:"admin",current_password:"current_password",new_password:"new_password123"}},{title:"List API Keys",description:"List API keys for a user",endpoint:"GET /v1/users/{userId}/api-keys",method:"GET",execute:()=>n.AQ.users.listAPIKeys("admin"),params:{userId:"admin"}},{title:"Mint Wise Authority",description:"Mint user as Wise Authority (requires ROOT)",endpoint:"POST /v1/users/{userId}/mint-wa",method:"POST",execute:()=>n.AQ.users.mintWiseAuthority("demo_user",{wa_role:"authority",signature:"ed25519_signature_here"}),params:{userId:"demo_user",wa_role:"authority",signature:"ed25519_signature_here"}}]},advanced:{title:"Advanced Operations",demos:[{title:"Emergency Shutdown",description:"Initiate emergency shutdown with Ed25519 signature",endpoint:"POST /emergency/shutdown",method:"POST",execute:()=>fetch("/emergency/shutdown",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:"Emergency shutdown test",signature:"ed25519_emergency_signature",public_key:"ed25519_public_key"})}).then(e=>e.json()),params:{reason:"Emergency shutdown test",signature:"ed25519_emergency_signature",public_key:"ed25519_public_key"}},{title:"Emergency Health Check",description:"Check system health without authentication",endpoint:"GET /emergency/health",method:"GET",execute:()=>fetch("/emergency/health").then(e=>e.json())},{title:"WebSocket Connection",description:"Real-time bidirectional communication",endpoint:"WS /v1/ws",method:"GET",execute:()=>Promise.resolve({message:"WebSocket connections must be established using a WebSocket client",example:'new WebSocket("ws://localhost:8080/v1/ws")',features:["Real-time agent messages","System events","Telemetry updates","Interactive chat"]})},{title:"OpenAPI Specification",description:"Complete API documentation in OpenAPI format",endpoint:"GET /openapi.json",method:"GET",execute:()=>fetch("/openapi.json").then(e=>e.json())}]}},f=async e=>{g(!0),u(null),t(e);try{let t=Date.now(),s=await e.execute(),i=Date.now()-t;u({success:!0,data:s,duration:i,timestamp:new Date().toISOString()}),a.Ay.success("".concat(e.title," completed in ").concat(i,"ms"))}catch(t){var s,i;let e=(0,l.PE)(t);x({isOpen:!0,message:e,details:(null==(s=t.response)?void 0:s.data)||t.details}),u({success:!1,error:e,details:(null==(i=t.response)?void 0:i.data)||t,timestamp:new Date().toISOString()})}finally{g(!1)}};return(0,i.jsxs)(o.O,{children:[(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"CIRIS API Explorer"}),(0,i.jsx)("p",{className:"mt-2 text-lg text-gray-600",children:"Interactive demonstration of all 150+ API endpoints across 12 modules"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,i.jsx)("div",{className:"lg:col-span-1",children:(0,i.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,i.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"API Categories"}),(0,i.jsx)("nav",{className:"space-y-1",children:Object.entries(v).map(e=>{let[t,s]=e;return(0,i.jsx)("button",{onClick:()=>h(t),className:"w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat(p===t?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-100"),children:(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("span",{children:s.title}),(0,i.jsxs)("span",{className:"text-xs text-gray-500",children:[s.demos.length," endpoints"]})]})},t)})})]})})}),(0,i.jsxs)("div",{className:"lg:col-span-2",children:[(0,i.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,i.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,i.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:[v[p].title," Endpoints"]}),(0,i.jsx)("div",{className:"space-y-3",children:v[p].demos.map((t,s)=>(0,i.jsxs)("div",{className:"border rounded-lg p-4 cursor-pointer transition-all ".concat(e===t?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"),onClick:()=>f(t),children:[(0,i.jsxs)("div",{className:"flex justify-between items-start",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("h4",{className:"text-sm font-semibold text-gray-900",children:t.title}),(0,i.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:t.description}),(0,i.jsxs)("div",{className:"mt-2 flex items-center space-x-2",children:[(0,i.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ".concat("GET"===t.method?"bg-blue-100 text-blue-800":"POST"===t.method?"bg-green-100 text-green-800":"PUT"===t.method?"bg-yellow-100 text-yellow-800":"DELETE"===t.method?"bg-red-100 text-red-800":"bg-purple-100 text-purple-800"),children:t.method}),(0,i.jsx)("code",{className:"text-xs text-gray-500 font-mono",children:t.endpoint})]})]}),(0,i.jsx)("button",{onClick:e=>{e.stopPropagation(),f(t)},disabled:m&&e===t,className:"ml-4 inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:m&&e===t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.Nl,{className:"mr-1",size:"sm"}),"Running..."]}):"Execute"})]}),t.params&&(0,i.jsxs)("div",{className:"mt-3 p-2 bg-gray-50 rounded text-xs",children:[(0,i.jsx)("span",{className:"font-medium text-gray-700",children:"Parameters:"}),(0,i.jsx)("pre",{className:"mt-1 text-gray-600 overflow-x-auto",children:JSON.stringify(t.params,null,2)})]})]},s))})]})}),s&&(0,i.jsx)("div",{className:"mt-6 bg-white shadow rounded-lg",children:(0,i.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Response"}),(0,i.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,i.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full font-medium ".concat(s.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:s.success?"Success":"Error"}),s.duration&&(0,i.jsxs)("span",{className:"text-gray-500",children:[s.duration,"ms"]}),(0,i.jsx)("span",{className:"text-gray-500",children:new Date(s.timestamp).toLocaleTimeString()})]})]}),s.success&&"string"==typeof s.data&&s.data.includes("<svg")?(0,i.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 overflow-x-auto",children:(0,i.jsx)("div",{dangerouslySetInnerHTML:{__html:s.data}})}):(0,i.jsx)("div",{className:"bg-gray-900 rounded-lg p-4 overflow-x-auto",children:(0,i.jsx)("pre",{className:"text-sm text-gray-100 font-mono",children:JSON.stringify(s.success?s.data:s,null,2)})})]})})]})]})]}),(0,i.jsx)(d.A,{isOpen:y.isOpen,onClose:()=>x({isOpen:!1,message:"",details:void 0}),title:"API Error",message:y.message,details:y.details})]})}},9484:(e,t,s)=>{"use strict";s.d(t,{A:()=>u,O:()=>l});var i=s(4568),r=s(7620),n=s(2942),o=s(3237),a=s(704),c=s(3120);let d=(0,r.createContext)(void 0);function l(e){let{children:t}=e,[s,l]=(0,r.useState)(null),[u,m]=(0,r.useState)(!0),[g,p]=(0,r.useState)(null),h=(0,n.useRouter)();(0,r.useEffect)(()=>{let e=window.location.pathname;"/login"===e||e.startsWith("/manager")?m(!1):y();let t=localStorage.getItem("manager_token");t&&p(t)},[]);let y=async()=>{try{if(a.AQ.isAuthenticated()){let e=await a.AQ.auth.getMe();l(e)}}catch(e){console.error("Auth check failed:",e)}finally{m(!1)}},x=(0,r.useCallback)(async(e,t)=>{try{let s=localStorage.getItem("selectedAgentId");if(!s)throw Error("No agent selected");c._.configure(s);let i=await a.AQ.login(e,t),r=a.AQ.auth.getAccessToken();r&&c._.configure(s,r),l(i),o.Ay.success("Welcome, ".concat(i.username||i.user_id,"!")),h.push("/")}catch(e){throw o.Ay.error(e.message||"Login failed"),e}},[h]),v=(0,r.useCallback)(async()=>{try{await a.AQ.logout(),l(null),o.Ay.success("Logged out successfully"),h.push("/login")}catch(e){console.error("Logout failed:",e),o.Ay.error("Logout failed")}},[h]),f=(0,r.useCallback)(e=>!!s&&(s.permissions.includes(e)||"SYSTEM_ADMIN"===s.role),[s]),T=(0,r.useCallback)(e=>{if(!s)return!1;let t=["OBSERVER","ADMIN","AUTHORITY","SYSTEM_ADMIN"];return t.indexOf(s.role)>=t.indexOf(e)},[s]),A=(0,r.useCallback)(e=>{a.AQ.setConfig({authToken:e})},[]),S=(0,r.useCallback)(()=>!!g,[g]);return(0,i.jsx)(d.Provider,{value:{user:s,loading:u,login:x,logout:v,hasPermission:f,hasRole:T,setUser:l,setToken:A,managerToken:g,setManagerToken:p,isManagerAuthenticated:S},children:t})}function u(){let e=(0,r.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[4534,704,4789,587,8315,7358],()=>t(5746)),_N_E=e.O()}]);
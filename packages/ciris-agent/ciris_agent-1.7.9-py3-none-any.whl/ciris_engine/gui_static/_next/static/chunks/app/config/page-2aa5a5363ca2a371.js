(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5653],{589:(e,t,s)=>{"use strict";s.d(t,{$:()=>o,s:()=>n});var a=s(494),i=s(6759),r=s(1279),n=class extends i.k{#e;#t;#s;constructor(e){super(),this.mutationId=e.mutationId,this.#t=e.mutationCache,this.#e=[],this.state=e.state||o(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#e.includes(e)||(this.#e.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#e=this.#e.filter(t=>t!==e),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#e.length||("pending"===this.state.status?this.scheduleGc():this.#t.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){let t=()=>{this.#a({type:"continue"})};this.#s=(0,r.II)({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(Error("No mutationFn found")),onFail:(e,t)=>{this.#a({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#a({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});let s="pending"===this.state.status,a=!this.#s.canStart();try{if(s)t();else{this.#a({type:"pending",variables:e,isPaused:a}),await this.#t.config.onMutate?.(e,this);let t=await this.options.onMutate?.(e);t!==this.state.context&&this.#a({type:"pending",context:t,variables:e,isPaused:a})}let i=await this.#s.start();return await this.#t.config.onSuccess?.(i,e,this.state.context,this),await this.options.onSuccess?.(i,e,this.state.context),await this.#t.config.onSettled?.(i,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(i,null,e,this.state.context),this.#a({type:"success",data:i}),i}catch(t){try{throw await this.#t.config.onError?.(t,e,this.state.context,this),await this.options.onError?.(t,e,this.state.context),await this.#t.config.onSettled?.(void 0,t,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,t,e,this.state.context),t}finally{this.#a({type:"error",error:t})}}finally{this.#t.runNext(this)}}#a(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),a.jG.batch(()=>{this.#e.forEach(t=>{t.onMutationUpdate(e)}),this.#t.notify({mutation:this,type:"updated",action:e})})}};function o(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}},2518:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var a=s(4568),i=s(7620),r=s(7606),n=s(3297),o=s(6258),l=s(704),c=s(6264),d=s(3237),u=s(4893);let h={adapters:{icon:u.RR,label:"Adapters",description:"Communication adapter configurations",color:"purple"},services:{icon:u.DP,label:"Services",description:"Service-specific settings",color:"blue"},security:{icon:u.lm,label:"Security",description:"Security and authentication settings",color:"red"},database:{icon:u.bN,label:"Database",description:"Database connection settings",color:"green"},limits:{icon:u.Pi,label:"Limits",description:"Rate limits and constraints",color:"yellow"},workflow:{icon:u.DP,label:"Workflow",description:"Task and workflow settings",color:"indigo"},telemetry:{icon:u.vK,label:"Telemetry",description:"Monitoring and telemetry",color:"orange"}};function m(){let[e,t]=(0,i.useState)({}),[s,m]=(0,i.useState)(new Set),[g,p]=(0,i.useState)(""),[f,x]=(0,i.useState)(!1),[v,y]=(0,i.useState)(null),b=(0,r.jE)(),{data:w,isLoading:j}=(0,n.I)({queryKey:["config-list"],queryFn:()=>l.AQ.config.getAll()}),{data:C}=(0,n.I)({queryKey:["adapters"],queryFn:()=>l.AQ.system.getAdapters()}),N=(0,o.n)({mutationFn:async e=>{let{key:t,value:s}=e;return l.AQ.config.set(t,s,"Updated via UI")},onSuccess:(s,a)=>{let{key:i}=a;d.Ay.success('Configuration "'.concat(i,'" updated successfully')),b.invalidateQueries({queryKey:["config-list"]}),delete e[i],t({...e})},onError:(e,t)=>{var s,a;let{key:i}=t;d.Ay.error((null==(a=e.response)||null==(s=a.data)?void 0:s.detail)||'Failed to update "'.concat(i,'"'))}}),k=(0,o.n)({mutationFn:async e=>l.AQ.config.delete(e),onSuccess:(e,t)=>{d.Ay.success('Configuration "'.concat(t,'" deleted')),b.invalidateQueries({queryKey:["config-list"]})},onError:(e,t)=>{var s,a;d.Ay.error((null==(a=e.response)||null==(s=a.data)?void 0:s.detail)||'Failed to delete "'.concat(t,'"'))}}),M=(0,i.useMemo)(()=>{if(!w)return{};let e={};w.configs.map(e=>({...e,value:e.value?(0,l.fz)(e.value):null})).filter(e=>{if(!g)return!0;let t=g.toLowerCase();return e.key.toLowerCase().includes(t)||JSON.stringify(e.value).toLowerCase().includes(t)}).forEach(t=>{let s=t.key.split("."),a=s[0]||"default",i=null;for(let[e,s]of Object.entries(h))if(t.key.startsWith(e)){i=e;break}if(t.key.startsWith("adapter.")&&s.length>=3){let e=s[1];a="adapter.".concat(e),i="adapters"}e[a]||(e[a]={name:a,items:[],category:null!=i?i:void 0}),e[a].items.push(t)}),C&&C.adapters&&C.adapters.forEach(t=>{let s="adapter.".concat(t.adapter_id);if(g){let e=g.toLowerCase();if(!t.adapter_id.toLowerCase().includes(e)&&!t.adapter_type.toLowerCase().includes(e)&&!JSON.stringify(t.config||{}).toLowerCase().includes(e))return}e[s]||(e[s]={name:s,items:[],category:"adapters"}),e[s].items.push({key:"".concat(t.adapter_id,".config"),value:t.config||{},updated_at:t.created_at||new Date().toISOString(),updated_by:"system",is_sensitive:!1}),e[s].items.push({key:"".concat(t.adapter_id,".status"),value:{type:t.adapter_type,is_running:t.is_running,last_activity:t.last_activity||"Never"},updated_at:new Date().toISOString(),updated_by:"system",is_sensitive:!1})});let t={};return Object.keys(e).sort().forEach(s=>{t[s]=e[s]}),t},[w,g,C]),R=(0,i.useMemo)(()=>{if(!v)return M;let e={};return Object.entries(M).forEach(t=>{let[s,a]=t;a.category===v&&(e[s]=a)}),e},[M,v]),S=e=>{let t=new Set(s);t.has(e)?t.delete(e):t.add(e),m(t)},A=(s,a)=>{t({...e,[s]:a})},O=(t,s)=>e.hasOwnProperty(t)?e[t]:s,L=t=>e.hasOwnProperty(t),z=async()=>{let t=Object.entries(e);if(0===t.length)return void(0,d.Ay)("No changes to save");for(let[e,s]of t)await N.mutateAsync({key:e,value:s})},_=e=>{let t=O(e.key,e.value),s=L(e.key);return"boolean"==typeof e.value?(0,a.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:t,onChange:t=>A(e.key,t.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:t?"Enabled":"Disabled"})]}):"number"==typeof e.value?(0,a.jsx)("input",{type:"number",value:t,onChange:t=>A(e.key,parseFloat(t.target.value)||0),className:"block w-full rounded-md shadow-sm sm:text-sm ".concat(s?"border-yellow-300 bg-yellow-50":"border-gray-300"," focus:ring-indigo-500 focus:border-indigo-500")}):"object"==typeof e.value&&null!==e.value?(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("textarea",{value:JSON.stringify(t,null,2),onChange:t=>{try{let s=JSON.parse(t.target.value);A(e.key,s)}catch(e){}},className:"block w-full rounded-md shadow-sm sm:text-sm font-mono ".concat(s?"border-yellow-300 bg-yellow-50":"border-gray-300"," focus:ring-indigo-500 focus:border-indigo-500"),rows:4})}):(0,a.jsx)("input",{type:e.is_sensitive?"password":"text",value:t||"",onChange:t=>A(e.key,t.target.value),className:"block w-full rounded-md shadow-sm sm:text-sm ".concat(s?"border-yellow-300 bg-yellow-50":"border-gray-300"," focus:ring-indigo-500 focus:border-indigo-500 ").concat(e.is_sensitive?"font-mono":""),placeholder:null===e.value?"Not set":""})};return(0,a.jsx)(c.O,{requiredRole:"ADMIN",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Configuration Management"}),(0,a.jsx)("p",{className:"mt-2 text-lg text-gray-600",children:"Manage system configuration with live updates and validation"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:"Categories"}),(0,a.jsxs)("nav",{className:"space-y-1",children:[(0,a.jsx)("button",{onClick:()=>y(null),className:"w-full text-left px-3 py-2 text-sm rounded-md transition-colors ".concat(null===v?"bg-indigo-100 text-indigo-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:"All Configurations"}),Object.entries(h).map(e=>{let[t,s]=e,i=s.icon;return(0,a.jsxs)("button",{onClick:()=>y(t),className:"w-full text-left px-3 py-2 text-sm rounded-md transition-colors flex items-center ".concat(v===t?"bg-".concat(s.color,"-100 text-").concat(s.color,"-700"):"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[(0,a.jsx)(i,{className:"mr-2",size:"sm"}),s.label]},t)})]}),C&&C.adapters.length>0&&(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Active Adapters"}),(0,a.jsx)("div",{className:"space-y-1 text-xs",children:C.adapters.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[(0,a.jsx)("span",{className:"font-medium",children:e.adapter_id}),(0,a.jsx)("span",{className:"text-gray-500",children:e.adapter_type})]},e.adapter_id))})]})]})}),(0,a.jsx)("div",{className:"lg:col-span-3",children:(0,a.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,a.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("div",{className:"flex-1 max-w-sm",children:(0,a.jsx)("input",{type:"text",placeholder:"Search configurations...",value:g,onChange:e=>p(e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 ml-4",children:[(0,a.jsx)("button",{onClick:()=>m(new Set(Object.keys(R))),className:"text-sm text-indigo-600 hover:text-indigo-900",children:"Expand All"}),(0,a.jsx)("button",{onClick:()=>m(new Set),className:"text-sm text-indigo-600 hover:text-indigo-900",children:"Collapse All"}),Object.keys(e).length>0&&(0,a.jsx)("button",{onClick:z,disabled:N.isPending,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:N.isPending?"Saving...":"Save ".concat(Object.keys(e).length," Changes")})]})]}),j?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(u.Nl,{className:"mx-auto text-indigo-600",size:"lg"}),(0,a.jsx)("p",{className:"mt-2 text-gray-500",children:"Loading configuration..."})]}):0===Object.keys(R).length?(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No configurations found matching your criteria."}):(0,a.jsx)("div",{className:"space-y-4",children:Object.entries(R).map(i=>{let[r,n]=i,o=s.has(r),l=n.category?h[n.category]:null;return(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,a.jsx)("button",{onClick:()=>S(r),className:"w-full px-4 py-3 bg-gray-50 hover:bg-gray-100 transition-colors flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(u.vK,{className:"mr-2 transition-transform ".concat(o?"rotate-90":""),size:"sm"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:r}),(0,a.jsxs)("span",{className:"ml-2 text-sm text-gray-500",children:["(",n.items.length," items)"]}),l&&(0,a.jsx)("span",{className:"ml-3 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-".concat(l.color,"-100 text-").concat(l.color,"-800"),children:l.label})]})}),o&&(0,a.jsx)("div",{className:"p-4 space-y-4",children:n.items.map(s=>(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center mb-1",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:s.key}),s.is_sensitive&&(0,a.jsx)(u.RY,{className:"ml-2 text-orange-500",size:"sm"}),L(s.key)&&(0,a.jsx)("span",{className:"ml-2 text-xs text-yellow-600",children:"â€¢ Modified"})]}),_(s),(0,a.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:["Last updated: ",new Date(s.updated_at).toLocaleString()," by ",s.updated_by]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[L(s.key)&&(0,a.jsx)("button",{onClick:()=>{delete e[s.key],t({...e})},className:"text-sm text-gray-600 hover:text-gray-900",children:"Reset"}),(0,a.jsx)("button",{onClick:()=>{confirm('Are you sure you want to delete "'.concat(s.key,'"?'))&&k.mutate(s.key)},className:"text-sm text-red-600 hover:text-red-900",children:"Delete"})]})]},s.key))})]},r)})})]})})})]})]})})}},2942:(e,t,s)=>{"use strict";var a=s(2418);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},3120:(e,t,s)=>{"use strict";s.d(t,{_:()=>o});var a=s(704);function i(){let e=window.location.hostname,t=window.location.pathname,s=t.startsWith("/agent/");if("agents.ciris.ai"!==e&&!s)return{mode:"standalone",agentId:"default",apiBase:"/v1"};{let e="default";e=s?t.split("/")[2]||"default":localStorage.getItem("selectedAgentId")||"default";let a="/api/".concat(e,"/v1");return{mode:"managed",agentId:e,apiBase:a}}}var r=s(5950);class n{configure(e,t){let s,{mode:a}=i();if("managed"===a)s="".concat(window.location.origin,"/api/").concat(e);else{let t=localStorage.getItem("agent_".concat(e,"_api_url"));s=t||window.location.origin}t||(t=r.a.getAccessToken()||void 0);let n={baseURL:s,authToken:t,agentId:e,mode:a};return this.hasConfigChanged(n)&&this.applyConfiguration(n),n}configureForOAuthCallback(e,t){let s,{mode:a}=i(),r={baseURL:"managed"===a?"".concat(window.location.origin,"/api/").concat(e):window.location.origin,authToken:t,agentId:e,mode:a};return this.applyConfiguration(r),this.storeConfiguration(r),r}getCurrentConfig(){return this.currentConfig}isConfiguredFor(e){return!!this.currentConfig&&this.currentConfig.agentId===e&&!!this.currentConfig.authToken}clear(){this.currentConfig=null,localStorage.removeItem("sdk_config"),this.log("SDK configuration cleared")}applyConfiguration(e){this.log("Applying SDK configuration:",e),a.AQ.setConfig({baseURL:e.baseURL,authToken:e.authToken}),this.currentConfig=e,this.log("SDK configured successfully")}hasConfigChanged(e){return!this.currentConfig||this.currentConfig.baseURL!==e.baseURL||this.currentConfig.authToken!==e.authToken||this.currentConfig.agentId!==e.agentId||this.currentConfig.mode!==e.mode}storeConfiguration(e){let t={baseURL:e.baseURL,agentId:e.agentId,mode:e.mode};localStorage.setItem("sdk_config",JSON.stringify(t)),"standalone"===e.mode&&e.baseURL!==window.location.origin&&localStorage.setItem("agent_".concat(e.agentId,"_api_url"),e.baseURL)}restoreConfiguration(){let e=localStorage.getItem("sdk_config");if(!e)return null;try{let t=JSON.parse(e),s=r.a.getAccessToken()||void 0;return{...t,authToken:s}}catch(e){return null}}log(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];this.debugMode&&console.log("[SDKConfigManager]",...t)}constructor(){this.currentConfig=null,this.debugMode=!1}}let o=new n},4893:(e,t,s)=>{"use strict";s.d(t,{DP:()=>x,HG:()=>u,Nl:()=>l,O4:()=>d,Pi:()=>n,RR:()=>g,RY:()=>m,Rv:()=>v,XR:()=>o,Zu:()=>b,bN:()=>p,c1:()=>j,fC:()=>C,fK:()=>y,lm:()=>f,md:()=>M,mo:()=>r,uc:()=>w,ui:()=>c,vK:()=>h,xZ:()=>N,xm:()=>k});var a=s(4568);s(7620);let i={xs:{width:12,height:12},sm:{width:16,height:16},md:{width:20,height:20},lg:{width:24,height:24}},r=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=i[s];return(0,a.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})},n=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=i[s];return(0,a.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})},o=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=i[s];return(0,a.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{d:"M11 17a1 1 0 001.447.894l4-2A1 1 0 0017 15V9.236a1 1 0 00-1.447-.894l-4 2a1 1 0 00-.553.894V17zM15.211 6.276a1 1 0 000-1.788l-4.764-2.382a1 1 0 00-.894 0L4.789 4.488a1 1 0 000 1.788l4.764 2.382a1 1 0 00.894 0l4.764-2.382zM4.447 8.342A1 1 0 003 9.236V15a1 1 0 00.553.894l4 2A1 1 0 009 17v-5.764a1 1 0 00-.553-.894l-4-2z"})})},l=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=i[s];return(0,a.jsxs)("svg",{className:"animate-spin ".concat(t),width:r,height:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},c=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=i[s];return(0,a.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})},d=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=i[s];return(0,a.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})},u=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=i[s];return(0,a.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})})},h=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=i[s];return(0,a.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})},m=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=i[s];return(0,a.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M18 8a6 6 0 01-7.743 5.743L10 14l-1 1-1 1H6v2H2v-4l4.257-4.257A6 6 0 1118 8zm-6-4a1 1 0 100 2 2 2 0 012 2 1 1 0 102 0 4 4 0 00-4-4z",clipRule:"evenodd"})})},g=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=i[s];return(0,a.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M2 5a2 2 0 012-2h12a2 2 0 012 2v2a2 2 0 01-2 2H4a2 2 0 01-2-2V5zm14 1a1 1 0 11-2 0 1 1 0 012 0zM2 13a2 2 0 012-2h12a2 2 0 012 2v2a2 2 0 01-2 2H4a2 2 0 01-2-2v-2zm14 1a1 1 0 11-2 0 1 1 0 012 0z",clipRule:"evenodd"})})},p=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=i[s];return(0,a.jsxs)("svg",{className:t,width:r,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:[(0,a.jsx)("path",{d:"M3 12v3c0 1.657 3.134 3 7 3s7-1.343 7-3v-3c0 1.657-3.134 3-7 3s-7-1.343-7-3z"}),(0,a.jsx)("path",{d:"M3 7v3c0 1.657 3.134 3 7 3s7-1.343 7-3V7c0 1.657-3.134 3-7 3S3 8.657 3 7z"}),(0,a.jsx)("path",{d:"M17 5c0 1.657-3.134 3-7 3S3 6.657 3 5s3.134-3 7-3 7 1.343 7 3z"})]})},f=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=i[s];return(0,a.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})},x=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=i[s];return(0,a.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})})},v=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=i[s];return(0,a.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{d:"M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"})})},y=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=i[s];return(0,a.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})},b=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=i[s];return(0,a.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})},w=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=i[s];return(0,a.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})},j=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=i[s];return(0,a.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})})},C=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=i[s];return(0,a.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},N=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=i[s];return(0,a.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})},k=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=i[s];return(0,a.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},M=e=>{let{status:t,className:s=""}=e;return(0,a.jsx)("span",{className:"w-3 h-3 rounded-full ".concat({green:"bg-green-500",yellow:"bg-yellow-500",red:"bg-red-500",gray:"bg-gray-500"}[t]," ").concat(s)})}},6258:(e,t,s)=>{"use strict";s.d(t,{n:()=>d});var a=s(7620),i=s(589),r=s(494),n=s(2327),o=s(7703),l=class extends n.Q{#i;#r=void 0;#n;#o;constructor(e,t){super(),this.#i=e,this.setOptions(t),this.bindMethods(),this.#l()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#i.defaultMutationOptions(e),(0,o.f8)(this.options,t)||this.#i.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,o.EN)(t.mutationKey)!==(0,o.EN)(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#l(),this.#c(e)}getCurrentResult(){return this.#r}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#l(),this.#c()}mutate(e,t){return this.#o=t,this.#n?.removeObserver(this),this.#n=this.#i.getMutationCache().build(this.#i,this.options),this.#n.addObserver(this),this.#n.execute(e)}#l(){let e=this.#n?.state??(0,i.$)();this.#r={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#c(e){r.jG.batch(()=>{if(this.#o&&this.hasListeners()){let t=this.#r.variables,s=this.#r.context;e?.type==="success"?(this.#o.onSuccess?.(e.data,t,s),this.#o.onSettled?.(e.data,null,t,s)):e?.type==="error"&&(this.#o.onError?.(e.error,t,s),this.#o.onSettled?.(void 0,e.error,t,s))}this.listeners.forEach(e=>{e(this.#r)})})}},c=s(7606);function d(e,t){let s=(0,c.jE)(t),[i]=a.useState(()=>new l(s,e));a.useEffect(()=>{i.setOptions(e)},[i,e]);let n=a.useSyncExternalStore(a.useCallback(e=>i.subscribe(r.jG.batchCalls(e)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),d=a.useCallback((e,t)=>{i.mutate(e,t).catch(o.lQ)},[i]);if(n.error&&(0,o.GU)(i.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:d,mutateAsync:n.mutate}}},6264:(e,t,s)=>{"use strict";s.d(t,{O:()=>o});var a=s(4568),i=s(7620),r=s(2942),n=s(9484);function o(e){let{children:t,requiredRole:s,requiredPermission:o}=e,{user:l,loading:c,hasRole:d,hasPermission:u}=(0,n.A)(),h=(0,r.useRouter)();return((0,i.useEffect)(()=>{if(!c){if(!l)return void h.push("/login");if(s&&!d(s)||o&&!u(o))return void h.push("/unauthorized")}},[l,c,s,o,d,u,h]),c)?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"text-lg",children:"Loading..."})}):l&&(!s||d(s))&&(!o||u(o))?(0,a.jsx)(a.Fragment,{children:t}):null}},9484:(e,t,s)=>{"use strict";s.d(t,{A:()=>u,O:()=>d});var a=s(4568),i=s(7620),r=s(2942),n=s(3237),o=s(704),l=s(3120);let c=(0,i.createContext)(void 0);function d(e){let{children:t}=e,[s,d]=(0,i.useState)(null),[u,h]=(0,i.useState)(!0),[m,g]=(0,i.useState)(null),p=(0,r.useRouter)();(0,i.useEffect)(()=>{let e=window.location.pathname;"/login"===e||e.startsWith("/manager")?h(!1):f();let t=localStorage.getItem("manager_token");t&&g(t)},[]);let f=async()=>{try{if(o.AQ.isAuthenticated()){let e=await o.AQ.auth.getMe();d(e)}}catch(e){console.error("Auth check failed:",e)}finally{h(!1)}},x=(0,i.useCallback)(async(e,t)=>{try{let s=localStorage.getItem("selectedAgentId");if(!s)throw Error("No agent selected");l._.configure(s);let a=await o.AQ.login(e,t),i=o.AQ.auth.getAccessToken();i&&l._.configure(s,i),d(a),n.Ay.success("Welcome, ".concat(a.username||a.user_id,"!")),p.push("/")}catch(e){throw n.Ay.error(e.message||"Login failed"),e}},[p]),v=(0,i.useCallback)(async()=>{try{await o.AQ.logout(),d(null),n.Ay.success("Logged out successfully"),p.push("/login")}catch(e){console.error("Logout failed:",e),n.Ay.error("Logout failed")}},[p]),y=(0,i.useCallback)(e=>!!s&&(s.permissions.includes(e)||"SYSTEM_ADMIN"===s.role),[s]),b=(0,i.useCallback)(e=>{if(!s)return!1;let t=["OBSERVER","ADMIN","AUTHORITY","SYSTEM_ADMIN"];return t.indexOf(s.role)>=t.indexOf(e)},[s]),w=(0,i.useCallback)(e=>{o.AQ.setConfig({authToken:e})},[]),j=(0,i.useCallback)(()=>!!m,[m]);return(0,a.jsx)(c.Provider,{value:{user:s,loading:u,login:x,logout:v,hasPermission:y,hasRole:b,setUser:d,setToken:w,managerToken:m,setManagerToken:g,isManagerAuthenticated:j},children:t})}function u(){let e=(0,i.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9816:(e,t,s)=>{Promise.resolve().then(s.bind(s,2518))}},e=>{var t=t=>e(e.s=t);e.O(0,[4534,8903,3297,704,587,8315,7358],()=>t(9816)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9040],{107:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(4568),i=s(7620),r=s(6264);function n(){let[e,t]=(0,i.useState)("overview"),s={overview:{title:"API Overview",description:"CIRIS provides a comprehensive REST API with 150+ endpoints across 12 modules for agent interaction, system management, and observability.",baseUrl:"http://localhost:8080",endpoints:[{method:"INFO",path:"/v1/*",description:"All API endpoints require authentication except /emergency/* endpoints",auth:"Bearer token from /v1/auth/login",response:{authentication:"JWT Bearer token",roles:["OBSERVER","ADMIN","AUTHORITY","SYSTEM_ADMIN"],"rate-limiting":"100 requests per minute",versioning:"v1 (stable)"}}]},agent:{title:"Agent Interaction",description:"Core endpoints for interacting with the CIRIS agent",baseUrl:"/v1/agent",endpoints:[{method:"POST",path:"/interact",description:"Send a message to the agent and receive a response",auth:"Required (OBSERVER+)",params:{message:"string - The message to send",channel_id:'string - Channel identifier (e.g., "api_user", "discord_123")',context:"object - Optional additional context"},response:{message_id:"string - Unique message identifier",state:"string - Current cognitive state",timestamp:"string - ISO timestamp"}},{method:"GET",path:"/status",description:"Get current agent status and cognitive state",auth:"Required (OBSERVER+)",response:{state:"WAKEUP | WORK | PLAY | SOLITUDE | DREAM | SHUTDOWN",health:"healthy | degraded | unhealthy",uptime_seconds:"number",active_tasks:"number"}},{method:"GET",path:"/identity",description:"Get agent identity and capabilities",auth:"Required (OBSERVER+)",response:{name:"string",version:"string",capabilities:["array of capabilities"],personality_traits:"object"}},{method:"GET",path:"/history",description:"Get conversation history",auth:"Required (OBSERVER+)",params:{channel_id:"string - Filter by channel",limit:"number - Max results (default: 20)",offset:"number - Pagination offset"}},{method:"GET",path:"/channels",description:"List all active communication channels",auth:"Required (OBSERVER+)"}]},system:{title:"System Management",description:"System control, health monitoring, and adapter management",baseUrl:"/v1/system",endpoints:[{method:"GET",path:"/health",description:"Overall system health status",auth:"Optional (degraded info without auth)",response:{status:"healthy | degraded | unhealthy",version:"string",uptime:"number",services:"object - Service health summary"}},{method:"GET",path:"/services",description:"Status of all CIRIS services",auth:"Required (OBSERVER+)",response:{services:[{name:"string",type:"graph | core | infrastructure | governance | special",healthy:"boolean",available:"boolean",uptime_seconds:"number",metrics:"object"}]}},{method:"GET",path:"/adapters",description:"List all registered adapters",auth:"Required (ADMIN+)"},{method:"POST",path:"/adapters/{type}",description:"Register a new adapter (discord, cli, api)",auth:"Required (ADMIN+)",params:{config:{enabled:"boolean",priority:"number"}}},{method:"DELETE",path:"/adapters/{id}",description:"Unregister an adapter",auth:"Required (ADMIN+)"},{method:"POST",path:"/runtime/{action}",description:"Runtime control (pause, resume, state)",auth:"Required (ADMIN+)",params:{action:"pause | resume | state",duration:"number - For pause action (seconds)"}},{method:"GET",path:"/runtime/queue",description:"Get processing queue status",auth:"Required (ADMIN+)"},{method:"POST",path:"/runtime/single-step",description:"Execute single processing step (debug)",auth:"Required (ADMIN+)"},{method:"GET",path:"/processors",description:"Get info about 6 cognitive processor states",auth:"Required (OBSERVER+)"}]},memory:{title:"Memory Operations",description:"Graph-based memory storage and retrieval",baseUrl:"/v1/memory",endpoints:[{method:"POST",path:"/store",description:"Create a new memory node",auth:"Required (OBSERVER+)",params:{type:"OBSERVATION | CONCEPT | RELATIONSHIP | EMOTION | PLAN",scope:"LOCAL | GLOBAL",attributes:"object - Node-specific attributes"}},{method:"POST",path:"/query",description:"Query memory graph with filters",auth:"Required (OBSERVER+)",params:{query:"string - Search query",type:"string - Filter by node type",scope:"string - Filter by scope",limit:"number"}},{method:"GET",path:"/search",description:"Full-text search across memories",auth:"Required (OBSERVER+)",params:{q:"string - Search query",limit:"number"}},{method:"GET",path:"/visualize/graph",description:"Generate interactive graph visualization",auth:"Required (OBSERVER+)",params:{layout:"timeline | force | hierarchical",hours:"number - Time window",limit:"number - Max nodes"},response:"SVG visualization"}]},users:{title:"User Management",description:"User accounts, roles, and Wise Authority management",baseUrl:"/v1/users",endpoints:[{method:"GET",path:"/",description:"List all users with filtering",auth:"Required (ADMIN+)",params:{page:"number",page_size:"number",search:"string",api_role:"OBSERVER | ADMIN | AUTHORITY | SYSTEM_ADMIN",wa_role:"ORACLE | STEWARD | HARBINGER | ROOT"}},{method:"POST",path:"/",description:"Create new user",auth:"Required (SYSTEM_ADMIN)",params:{username:"string",password:"string",api_role:"string"}},{method:"GET",path:"/{userId}",description:"Get user details",auth:"Required (self or ADMIN+)"},{method:"PUT",path:"/{userId}",description:"Update user role/status",auth:"Required (ADMIN+)",params:{api_role:"string",is_active:"boolean"}},{method:"POST",path:"/{userId}/mint-wa",description:"Mint user as Wise Authority",auth:"Required (ROOT WA)",params:{wa_role:"ORACLE | STEWARD | HARBINGER",signature:"string - Ed25519 signature"}}]},telemetry:{title:"Telemetry & Observability",description:"Metrics, logs, traces, and resource monitoring",baseUrl:"/v1/telemetry",endpoints:[{method:"GET",path:"/overview",description:"System metrics summary",auth:"Required (OBSERVER+)"},{method:"GET",path:"/metrics",description:"All available metrics",auth:"Required (OBSERVER+)"},{method:"GET",path:"/logs",description:"System log entries",auth:"Required (ADMIN+)",params:{level:"DEBUG | INFO | WARNING | ERROR",service:"string - Filter by service",page_size:"number"}},{method:"GET",path:"/traces",description:"Distributed request traces",auth:"Required (ADMIN+)"},{method:"GET",path:"/resources/history",description:"Historical resource usage",auth:"Required (OBSERVER+)",params:{start_time:"ISO timestamp",end_time:"ISO timestamp"}}]},config:{title:"Configuration Management",description:"Dynamic configuration management",baseUrl:"/v1/config",endpoints:[{method:"GET",path:"/",description:"Get all configuration values",auth:"Required (ADMIN+)"},{method:"GET",path:"/{key}",description:"Get specific config value",auth:"Required (OBSERVER+)"},{method:"PUT",path:"/{key}",description:"Set configuration value",auth:"Required (ADMIN+)",params:{value:"any",description:"string"}}]},audit:{title:"Audit Trail",description:"Comprehensive audit logging for compliance",baseUrl:"/v1/audit",endpoints:[{method:"GET",path:"/entries",description:"List audit entries",auth:"Required (ADMIN+)",params:{page:"number",page_size:"number",service:"string",action:"string"}},{method:"POST",path:"/search",description:"Search audit entries",auth:"Required (ADMIN+)",params:{service:"string",action:"string",date_from:"ISO timestamp",date_to:"ISO timestamp"}}]},wa:{title:"Wise Authority",description:"Moral guidance and decision deferral system",baseUrl:"/v1/wa",endpoints:[{method:"GET",path:"/status",description:"Wise Authority system status",auth:"Required (OBSERVER+)"},{method:"GET",path:"/permissions",description:"List granted permissions",auth:"Required (AUTHORITY+)"},{method:"GET",path:"/deferrals",description:"List pending deferrals",auth:"Required (AUTHORITY+)"},{method:"POST",path:"/guidance",description:"Request moral guidance",auth:"Required (OBSERVER+)",params:{topic:"string",context:"object",urgency:"low | medium | high | critical"}}]},auth:{title:"Authentication",description:"Authentication and authorization",baseUrl:"/v1/auth",endpoints:[{method:"POST",path:"/login",description:"Login with username/password",auth:"None",params:{username:"string",password:"string"},response:{access_token:"string - JWT token",token_type:"bearer",user:"object - User info"}},{method:"GET",path:"/me",description:"Get current user info",auth:"Required"},{method:"POST",path:"/refresh",description:"Refresh authentication token",auth:"Required"},{method:"POST",path:"/logout",description:"Logout and invalidate token",auth:"Required"}]},emergency:{title:"Emergency Operations",description:"Emergency endpoints that bypass normal authentication",baseUrl:"/emergency",endpoints:[{method:"GET",path:"/health",description:"Basic health check without auth",auth:"None",response:{status:"ok | error",timestamp:"ISO timestamp"}},{method:"POST",path:"/shutdown",description:"Emergency shutdown with Ed25519 signature",auth:"Ed25519 signature required",params:{reason:"string",signature:"string - Ed25519 signature",public_key:"string - Ed25519 public key"}}]},websocket:{title:"WebSocket",description:"Real-time bidirectional communication",baseUrl:"/v1/ws",endpoints:[{method:"WS",path:"/",description:"WebSocket connection for real-time updates",auth:"Token in query param or first message",params:{token:"string - Auth token (query param)",subscribe:"array - Event types to subscribe"},response:{events:["agent.message - Agent responses","system.status - System status changes","telemetry.metrics - Real-time metrics","memory.update - Memory graph updates"]}}]}},n=Object.keys(s),o=s[e]||s.overview;return(0,a.jsx)(r.O,{children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"CIRIS API Documentation"}),(0,a.jsx)("p",{className:"mt-2 text-lg text-gray-600",children:"Complete reference for all 150+ endpoints across 12 API modules"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsx)("div",{className:"bg-white shadow rounded-lg sticky top-4",children:(0,a.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"API Modules"}),(0,a.jsx)("nav",{className:"space-y-1",children:n.map(i=>(0,a.jsx)("button",{onClick:()=>t(i),className:"w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat(e===i?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-100"),children:s[i].title},i))})]})})}),(0,a.jsx)("div",{className:"lg:col-span-3",children:(0,a.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,a.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:o.title}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:o.description}),"http://localhost:8080"!==o.baseUrl&&(0,a.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Base URL: "}),(0,a.jsx)("code",{className:"text-sm font-mono text-gray-900",children:o.baseUrl})]}),(0,a.jsx)("div",{className:"space-y-6",children:o.endpoints.map((e,t)=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium ".concat("GET"===e.method?"bg-blue-100 text-blue-800":"POST"===e.method?"bg-green-100 text-green-800":"PUT"===e.method?"bg-yellow-100 text-yellow-800":"DELETE"===e.method?"bg-red-100 text-red-800":"WS"===e.method?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"),children:e.method}),(0,a.jsx)("code",{className:"text-sm font-mono text-gray-900",children:e.path})]}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:e.auth})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),e.params&&(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("h4",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wider mb-2",children:"Parameters"}),(0,a.jsx)("div",{className:"bg-gray-50 rounded p-3",children:(0,a.jsx)("pre",{className:"text-xs text-gray-600 whitespace-pre-wrap",children:"object"==typeof e.params?JSON.stringify(e.params,null,2):e.params})})]}),e.response&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-xs font-semibold text-gray-700 uppercase tracking-wider mb-2",children:"Response"}),(0,a.jsx)("div",{className:"bg-gray-50 rounded p-3",children:(0,a.jsx)("pre",{className:"text-xs text-gray-600 whitespace-pre-wrap",children:"object"==typeof e.response?JSON.stringify(e.response,null,2):e.response})})]})]},t))})]})})})]})]})})}},2942:(e,t,s)=>{"use strict";var a=s(2418);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},3120:(e,t,s)=>{"use strict";s.d(t,{_:()=>o});var a=s(704);function i(){let e=window.location.hostname,t=window.location.pathname,s=t.startsWith("/agent/");if("agents.ciris.ai"!==e&&!s)return{mode:"standalone",agentId:"default",apiBase:"/v1"};{let e="default";e=s?t.split("/")[2]||"default":localStorage.getItem("selectedAgentId")||"default";let a="/api/".concat(e,"/v1");return{mode:"managed",agentId:e,apiBase:a}}}var r=s(5950);class n{configure(e,t){let s,{mode:a}=i();if("managed"===a)s="".concat(window.location.origin,"/api/").concat(e);else{let t=localStorage.getItem("agent_".concat(e,"_api_url"));s=t||window.location.origin}t||(t=r.a.getAccessToken()||void 0);let n={baseURL:s,authToken:t,agentId:e,mode:a};return this.hasConfigChanged(n)&&this.applyConfiguration(n),n}configureForOAuthCallback(e,t){let s,{mode:a}=i(),r={baseURL:"managed"===a?"".concat(window.location.origin,"/api/").concat(e):window.location.origin,authToken:t,agentId:e,mode:a};return this.applyConfiguration(r),this.storeConfiguration(r),r}getCurrentConfig(){return this.currentConfig}isConfiguredFor(e){return!!this.currentConfig&&this.currentConfig.agentId===e&&!!this.currentConfig.authToken}clear(){this.currentConfig=null,localStorage.removeItem("sdk_config"),this.log("SDK configuration cleared")}applyConfiguration(e){this.log("Applying SDK configuration:",e),a.AQ.setConfig({baseURL:e.baseURL,authToken:e.authToken}),this.currentConfig=e,this.log("SDK configured successfully")}hasConfigChanged(e){return!this.currentConfig||this.currentConfig.baseURL!==e.baseURL||this.currentConfig.authToken!==e.authToken||this.currentConfig.agentId!==e.agentId||this.currentConfig.mode!==e.mode}storeConfiguration(e){let t={baseURL:e.baseURL,agentId:e.agentId,mode:e.mode};localStorage.setItem("sdk_config",JSON.stringify(t)),"standalone"===e.mode&&e.baseURL!==window.location.origin&&localStorage.setItem("agent_".concat(e.agentId,"_api_url"),e.baseURL)}restoreConfiguration(){let e=localStorage.getItem("sdk_config");if(!e)return null;try{let t=JSON.parse(e),s=r.a.getAccessToken()||void 0;return{...t,authToken:s}}catch(e){return null}}log(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];this.debugMode&&console.log("[SDKConfigManager]",...t)}constructor(){this.currentConfig=null,this.debugMode=!1}}let o=new n},5733:(e,t,s)=>{Promise.resolve().then(s.bind(s,107))},6264:(e,t,s)=>{"use strict";s.d(t,{O:()=>o});var a=s(4568),i=s(7620),r=s(2942),n=s(9484);function o(e){let{children:t,requiredRole:s,requiredPermission:o}=e,{user:d,loading:c,hasRole:u,hasPermission:l}=(0,n.A)(),h=(0,r.useRouter)();return((0,i.useEffect)(()=>{if(!c){if(!d)return void h.push("/login");if(s&&!u(s)||o&&!l(o))return void h.push("/unauthorized")}},[d,c,s,o,u,l,h]),c)?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"text-lg",children:"Loading..."})}):d&&(!s||u(s))&&(!o||l(o))?(0,a.jsx)(a.Fragment,{children:t}):null}},9484:(e,t,s)=>{"use strict";s.d(t,{A:()=>l,O:()=>u});var a=s(4568),i=s(7620),r=s(2942),n=s(3237),o=s(704),d=s(3120);let c=(0,i.createContext)(void 0);function u(e){let{children:t}=e,[s,u]=(0,i.useState)(null),[l,h]=(0,i.useState)(!0),[m,p]=(0,i.useState)(null),g=(0,r.useRouter)();(0,i.useEffect)(()=>{let e=window.location.pathname;"/login"===e||e.startsWith("/manager")?h(!1):f();let t=localStorage.getItem("manager_token");t&&p(t)},[]);let f=async()=>{try{if(o.AQ.isAuthenticated()){let e=await o.AQ.auth.getMe();u(e)}}catch(e){console.error("Auth check failed:",e)}finally{h(!1)}},y=(0,i.useCallback)(async(e,t)=>{try{let s=localStorage.getItem("selectedAgentId");if(!s)throw Error("No agent selected");d._.configure(s);let a=await o.AQ.login(e,t),i=o.AQ.auth.getAccessToken();i&&d._.configure(s,i),u(a),n.Ay.success("Welcome, ".concat(a.username||a.user_id,"!")),g.push("/")}catch(e){throw n.Ay.error(e.message||"Login failed"),e}},[g]),b=(0,i.useCallback)(async()=>{try{await o.AQ.logout(),u(null),n.Ay.success("Logged out successfully"),g.push("/login")}catch(e){console.error("Logout failed:",e),n.Ay.error("Logout failed")}},[g]),R=(0,i.useCallback)(e=>!!s&&(s.permissions.includes(e)||"SYSTEM_ADMIN"===s.role),[s]),x=(0,i.useCallback)(e=>{if(!s)return!1;let t=["OBSERVER","ADMIN","AUTHORITY","SYSTEM_ADMIN"];return t.indexOf(s.role)>=t.indexOf(e)},[s]),E=(0,i.useCallback)(e=>{o.AQ.setConfig({authToken:e})},[]),v=(0,i.useCallback)(()=>!!m,[m]);return(0,a.jsx)(c.Provider,{value:{user:s,loading:l,login:y,logout:b,hasPermission:R,hasRole:x,setUser:u,setToken:E,managerToken:m,setManagerToken:p,isManagerAuthenticated:v},children:t})}function l(){let e=(0,i.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[4534,704,587,8315,7358],()=>t(5733)),_N_E=e.O()}]);
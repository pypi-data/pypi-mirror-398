(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8898],{425:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var i=s(4568),a=s(7620),n=s(7606),r=s(3297),l=s(6258),o=s(704),d=s(9484),c=s(3237),h=s(4893);let u={WORK:{bg:"bg-blue-600",text:"text-blue-800",border:"border-blue-300",light:"bg-blue-50"},DREAM:{bg:"bg-purple-600",text:"text-purple-800",border:"border-purple-300",light:"bg-purple-50"},PLAY:{bg:"bg-amber-500",text:"text-amber-800",border:"border-amber-300",light:"bg-amber-50"},SOLITUDE:{bg:"bg-sky-500",text:"text-sky-800",border:"border-sky-300",light:"bg-sky-50"}},m={WORK:{title:"Work Mode",description:"Normal operational state for processing tasks and interactions.",icon:"\uD83D\uDCBC"},DREAM:{title:"Dream Session",description:"Deep introspection and memory consolidation. The agent reflects on past experiences and strengthens important memories.",icon:"\uD83C\uDF19"},PLAY:{title:"Play Session",description:"Creative exploration and experimentation. The agent explores novel ideas and approaches without strict task constraints.",icon:"\uD83C\uDFAE"},SOLITUDE:{title:"Solitude Session",description:"Quiet reflection and planning. The agent engages in self-directed contemplation and strategic thinking.",icon:"\uD83E\uDDD8"}};function x(){var e,t,s;let{hasRole:x}=(0,d.A)();(0,n.jE)();let[g,p]=(0,a.useState)(null),{data:v,isLoading:f,refetch:b}=(0,r.I)({queryKey:["processor-states"],queryFn:async()=>{let e=await o.AQ.system.getProcessorStates();return(null==e?void 0:e.data)||e},refetchInterval:3e3}),y=null==v?void 0:v.find(e=>e.is_active),j=(null==y?void 0:y.name)||"UNKNOWN",w=(0,l.n)({mutationFn:async e=>{if(!x("ADMIN"))throw Error("Admin privileges required to change cognitive state");return o.AQ.system.transitionState({target_state:e,reason:"Requested via Web UI Sessions page"})},onSuccess:e=>{e.success?(c.Ay.success("Transitioned to ".concat(e.current_state)),b()):c.Ay.error(e.message||"Transition not initiated")},onError:e=>{let t=e.message||"Failed to transition state";c.Ay.error(t)}}),N=e=>{let t=m[e],s="WORK"===e?"Return to Work":"Initiate ".concat((null==t?void 0:t.title)||e),i="WORK"===e?"Return to normal WORK state?":"Initiate a ".concat(e," session? ").concat((null==t?void 0:t.description)||"");p({isOpen:!0,targetState:e,title:s,message:i})},C=e=>u[e]||u.WORK,R="WORK"!==j&&"WAKEUP"!==j&&"SHUTDOWN"!==j;return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,i.jsx)("div",{className:"px-4 py-5 sm:px-6",children:(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Cognitive Sessions"}),(0,i.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage CIRIS cognitive states: Dream, Play, and Solitude sessions"})]}),(0,i.jsx)("button",{onClick:()=>b(),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Refresh"})]})})}),(0,i.jsx)("div",{className:"rounded-lg p-6 ".concat(C(j).light," border-2 ").concat(C(j).border),children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsx)("div",{className:"w-4 h-4 rounded-full ".concat(C(j).bg," animate-pulse")}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold ".concat(C(j).text),children:["Current State: ",j]}),(0,i.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:(null==(e=m[j])?void 0:e.description)||"Agent is in this cognitive state"})]})]}),(0,i.jsx)("span",{className:"text-4xl",children:(null==(t=m[j])?void 0:t.icon)||"\uD83E\uDD16"})]})}),!x("ADMIN")&&(0,i.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4",children:(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("div",{className:"flex-shrink-0",children:(0,i.jsx)("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,i.jsxs)("div",{className:"ml-3",children:[(0,i.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"Admin Access Required"}),(0,i.jsx)("p",{className:"text-sm text-yellow-700 mt-1",children:"Cognitive state transitions require Administrator privileges. You can view the current state but cannot initiate sessions."})]})]})}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden border-2 ".concat("DREAM"===j?"border-purple-500":"border-gray-200"),children:[(0,i.jsx)("div",{className:"bg-purple-50 px-4 py-3 border-b border-purple-100",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-purple-900 flex items-center gap-2",children:[(0,i.jsx)("span",{className:"text-2xl",children:"\uD83C\uDF19"})," Dream"]}),"DREAM"===j&&(0,i.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-purple-600 text-white",children:"ACTIVE"})]})}),(0,i.jsxs)("div",{className:"p-4",children:[(0,i.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Deep introspection and memory consolidation. Reflect on past experiences and strengthen important memories."}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)(h.md,{status:"DREAM"===j?"green":"gray",className:"mr-2"}),(0,i.jsx)("button",{onClick:()=>N("DREAM"),disabled:"WORK"!==j||w.isPending||!x("ADMIN"),className:"px-4 py-2 text-sm font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:w.isPending?"Initiating...":"Initiate Dream"})]})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden border-2 ".concat("PLAY"===j?"border-amber-500":"border-gray-200"),children:[(0,i.jsx)("div",{className:"bg-amber-50 px-4 py-3 border-b border-amber-100",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-amber-900 flex items-center gap-2",children:[(0,i.jsx)("span",{className:"text-2xl",children:"\uD83C\uDFAE"})," Play"]}),"PLAY"===j&&(0,i.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-amber-500 text-white",children:"ACTIVE"})]})}),(0,i.jsxs)("div",{className:"p-4",children:[(0,i.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Creative exploration and experimentation. Explore novel ideas and approaches without strict task constraints."}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)(h.md,{status:"PLAY"===j?"green":"gray",className:"mr-2"}),(0,i.jsx)("button",{onClick:()=>N("PLAY"),disabled:"WORK"!==j||w.isPending||!x("ADMIN"),className:"px-4 py-2 text-sm font-medium rounded-md text-white bg-amber-500 hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed",children:w.isPending?"Initiating...":"Initiate Play"})]})]})]}),(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden border-2 ".concat("SOLITUDE"===j?"border-sky-500":"border-gray-200"),children:[(0,i.jsx)("div",{className:"bg-sky-50 px-4 py-3 border-b border-sky-100",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("h3",{className:"text-lg font-semibold text-sky-900 flex items-center gap-2",children:[(0,i.jsx)("span",{className:"text-2xl",children:"\uD83E\uDDD8"})," Solitude"]}),"SOLITUDE"===j&&(0,i.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-sky-500 text-white",children:"ACTIVE"})]})}),(0,i.jsxs)("div",{className:"p-4",children:[(0,i.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Quiet reflection and planning. Engage in self-directed contemplation and strategic thinking."}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)(h.md,{status:"SOLITUDE"===j?"green":"gray",className:"mr-2"}),(0,i.jsx)("button",{onClick:()=>N("SOLITUDE"),disabled:"WORK"!==j||w.isPending||!x("ADMIN"),className:"px-4 py-2 text-sm font-medium rounded-md text-white bg-sky-500 hover:bg-sky-600 disabled:opacity-50 disabled:cursor-not-allowed",children:w.isPending?"Initiating...":"Initiate Solitude"})]})]})]})]}),R&&(0,i.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Return to Normal Operation"}),(0,i.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["End the current ",j," session and return to WORK state."]})]}),(0,i.jsx)("button",{onClick:()=>N("WORK"),disabled:w.isPending||!x("ADMIN"),className:"px-6 py-3 text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:w.isPending?"Returning...":"Return to Work"})]})}),(0,i.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,i.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"All Processor States"}),f?(0,i.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Loading states..."}):(0,i.jsx)("div",{className:"overflow-x-auto",children:(0,i.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,i.jsx)("thead",{className:"bg-gray-50",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"State"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,i.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Capabilities"})]})}),(0,i.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:null==v?void 0:v.map(e=>{var t,s,a;return(0,i.jsxs)("tr",{className:e.is_active?"bg-green-50":"",children:[(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("span",{className:"text-xl mr-2",children:(null==(t=m[e.name])?void 0:t.icon)||"⚙️"}),(0,i.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.name})]})}),(0,i.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.is_active?(0,i.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:"ACTIVE"}):(0,i.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-600",children:"INACTIVE"})}),(0,i.jsx)("td",{className:"px-6 py-4",children:(0,i.jsx)("p",{className:"text-sm text-gray-600 max-w-md",children:e.description})}),(0,i.jsx)("td",{className:"px-6 py-4",children:(0,i.jsxs)("div",{className:"flex flex-wrap gap-1",children:[null==(s=e.capabilities)?void 0:s.slice(0,3).map(e=>(0,i.jsx)("span",{className:"px-2 py-0.5 text-xs rounded bg-gray-100 text-gray-700",children:e},e)),(null==(a=e.capabilities)?void 0:a.length)>3&&(0,i.jsxs)("span",{className:"px-2 py-0.5 text-xs rounded bg-gray-100 text-gray-500",children:["+",e.capabilities.length-3," more"]})]})})]},e.name)})})]})})]})}),(0,i.jsx)("div",{className:"bg-blue-50 rounded-lg p-4",children:(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("div",{className:"flex-shrink-0",children:(0,i.jsx)("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,i.jsxs)("div",{className:"ml-3",children:[(0,i.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"About Cognitive Sessions"}),(0,i.jsx)("div",{className:"mt-2 text-sm text-blue-700",children:(0,i.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Dream"}),": Memory consolidation and introspection - agent reviews and strengthens learned patterns"]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Play"}),": Creative exploration - agent experiments with novel approaches and ideas"]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Solitude"}),": Strategic reflection - agent engages in self-directed planning and contemplation"]}),(0,i.jsx)("li",{children:"Sessions can only be initiated from the WORK state"}),(0,i.jsx)("li",{children:'Use "Return to Work" to end a session and resume normal operation'})]})})]})]})}),(null==g?void 0:g.isOpen)&&(0,i.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,i.jsxs)("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:[(0,i.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:()=>p(null)}),(0,i.jsxs)("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[(0,i.jsx)("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:(0,i.jsxs)("div",{className:"sm:flex sm:items-start",children:[(0,i.jsx)("div",{className:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10",children:(0,i.jsx)("span",{className:"text-xl",children:(null==(s=m[g.targetState])?void 0:s.icon)||"\uD83E\uDD16"})}),(0,i.jsxs)("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left",children:[(0,i.jsx)("h3",{className:"text-base font-semibold leading-6 text-gray-900",children:g.title}),(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)("p",{className:"text-sm text-gray-500",children:g.message})})]})]})}),(0,i.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[(0,i.jsx)("button",{type:"button",onClick:()=>{g&&(w.mutate(g.targetState),p(null))},disabled:w.isPending,className:"inline-flex w-full justify-center rounded-md px-3 py-2 text-sm font-semibold text-white shadow-sm sm:ml-3 sm:w-auto ".concat(C(g.targetState).bg," hover:opacity-90 disabled:opacity-50"),children:w.isPending?"Processing...":"Confirm"}),(0,i.jsx)("button",{type:"button",onClick:()=>p(null),className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"Cancel"})]})]})]})})]})}},589:(e,t,s)=>{"use strict";s.d(t,{$:()=>l,s:()=>r});var i=s(494),a=s(6759),n=s(1279),r=class extends a.k{#e;#t;#s;constructor(e){super(),this.mutationId=e.mutationId,this.#t=e.mutationCache,this.#e=[],this.state=e.state||l(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#e.includes(e)||(this.#e.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#e=this.#e.filter(t=>t!==e),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#e.length||("pending"===this.state.status?this.scheduleGc():this.#t.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){let t=()=>{this.#i({type:"continue"})};this.#s=(0,n.II)({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(Error("No mutationFn found")),onFail:(e,t)=>{this.#i({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#i({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});let s="pending"===this.state.status,i=!this.#s.canStart();try{if(s)t();else{this.#i({type:"pending",variables:e,isPaused:i}),await this.#t.config.onMutate?.(e,this);let t=await this.options.onMutate?.(e);t!==this.state.context&&this.#i({type:"pending",context:t,variables:e,isPaused:i})}let a=await this.#s.start();return await this.#t.config.onSuccess?.(a,e,this.state.context,this),await this.options.onSuccess?.(a,e,this.state.context),await this.#t.config.onSettled?.(a,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(a,null,e,this.state.context),this.#i({type:"success",data:a}),a}catch(t){try{throw await this.#t.config.onError?.(t,e,this.state.context,this),await this.options.onError?.(t,e,this.state.context),await this.#t.config.onSettled?.(void 0,t,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,t,e,this.state.context),t}finally{this.#i({type:"error",error:t})}}finally{this.#t.runNext(this)}}#i(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),i.jG.batch(()=>{this.#e.forEach(t=>{t.onMutationUpdate(e)}),this.#t.notify({mutation:this,type:"updated",action:e})})}};function l(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}},965:(e,t,s)=>{Promise.resolve().then(s.bind(s,425))},2942:(e,t,s)=>{"use strict";var i=s(2418);s.o(i,"usePathname")&&s.d(t,{usePathname:function(){return i.usePathname}}),s.o(i,"useRouter")&&s.d(t,{useRouter:function(){return i.useRouter}}),s.o(i,"useSearchParams")&&s.d(t,{useSearchParams:function(){return i.useSearchParams}})},3120:(e,t,s)=>{"use strict";s.d(t,{_:()=>l});var i=s(704);function a(){let e=window.location.hostname,t=window.location.pathname,s=t.startsWith("/agent/");if("agents.ciris.ai"!==e&&!s)return{mode:"standalone",agentId:"default",apiBase:"/v1"};{let e="default";e=s?t.split("/")[2]||"default":localStorage.getItem("selectedAgentId")||"default";let i="/api/".concat(e,"/v1");return{mode:"managed",agentId:e,apiBase:i}}}var n=s(5950);class r{configure(e,t){let s,{mode:i}=a();if("managed"===i)s="".concat(window.location.origin,"/api/").concat(e);else{let t=localStorage.getItem("agent_".concat(e,"_api_url"));s=t||window.location.origin}t||(t=n.a.getAccessToken()||void 0);let r={baseURL:s,authToken:t,agentId:e,mode:i};return this.hasConfigChanged(r)&&this.applyConfiguration(r),r}configureForOAuthCallback(e,t){let s,{mode:i}=a(),n={baseURL:"managed"===i?"".concat(window.location.origin,"/api/").concat(e):window.location.origin,authToken:t,agentId:e,mode:i};return this.applyConfiguration(n),this.storeConfiguration(n),n}getCurrentConfig(){return this.currentConfig}isConfiguredFor(e){return!!this.currentConfig&&this.currentConfig.agentId===e&&!!this.currentConfig.authToken}clear(){this.currentConfig=null,localStorage.removeItem("sdk_config"),this.log("SDK configuration cleared")}applyConfiguration(e){this.log("Applying SDK configuration:",e),i.AQ.setConfig({baseURL:e.baseURL,authToken:e.authToken}),this.currentConfig=e,this.log("SDK configured successfully")}hasConfigChanged(e){return!this.currentConfig||this.currentConfig.baseURL!==e.baseURL||this.currentConfig.authToken!==e.authToken||this.currentConfig.agentId!==e.agentId||this.currentConfig.mode!==e.mode}storeConfiguration(e){let t={baseURL:e.baseURL,agentId:e.agentId,mode:e.mode};localStorage.setItem("sdk_config",JSON.stringify(t)),"standalone"===e.mode&&e.baseURL!==window.location.origin&&localStorage.setItem("agent_".concat(e.agentId,"_api_url"),e.baseURL)}restoreConfiguration(){let e=localStorage.getItem("sdk_config");if(!e)return null;try{let t=JSON.parse(e),s=n.a.getAccessToken()||void 0;return{...t,authToken:s}}catch(e){return null}}log(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];this.debugMode&&console.log("[SDKConfigManager]",...t)}constructor(){this.currentConfig=null,this.debugMode=!1}}let l=new r},4893:(e,t,s)=>{"use strict";s.d(t,{DP:()=>v,HG:()=>h,Nl:()=>o,O4:()=>c,Pi:()=>r,RR:()=>x,RY:()=>m,Rv:()=>f,XR:()=>l,Zu:()=>y,bN:()=>g,c1:()=>w,fC:()=>N,fK:()=>b,lm:()=>p,md:()=>M,mo:()=>n,uc:()=>j,ui:()=>d,vK:()=>u,xZ:()=>C,xm:()=>R});var i=s(4568);s(7620);let a={xs:{width:12,height:12},sm:{width:16,height:16},md:{width:20,height:20},lg:{width:24,height:24}},n=e=>{let{className:t="",size:s="md"}=e,{width:n,height:r}=a[s];return(0,i.jsx)("svg",{className:t,width:n,height:r,viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})},r=e=>{let{className:t="",size:s="md"}=e,{width:n,height:r}=a[s];return(0,i.jsx)("svg",{className:t,width:n,height:r,viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})},l=e=>{let{className:t="",size:s="md"}=e,{width:n,height:r}=a[s];return(0,i.jsx)("svg",{className:t,width:n,height:r,viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{d:"M11 17a1 1 0 001.447.894l4-2A1 1 0 0017 15V9.236a1 1 0 00-1.447-.894l-4 2a1 1 0 00-.553.894V17zM15.211 6.276a1 1 0 000-1.788l-4.764-2.382a1 1 0 00-.894 0L4.789 4.488a1 1 0 000 1.788l4.764 2.382a1 1 0 00.894 0l4.764-2.382zM4.447 8.342A1 1 0 003 9.236V15a1 1 0 00.553.894l4 2A1 1 0 009 17v-5.764a1 1 0 00-.553-.894l-4-2z"})})},o=e=>{let{className:t="",size:s="md"}=e,{width:n,height:r}=a[s];return(0,i.jsxs)("svg",{className:"animate-spin ".concat(t),width:n,height:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,i.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},d=e=>{let{className:t="",size:s="md"}=e,{width:n,height:r}=a[s];return(0,i.jsx)("svg",{className:t,width:n,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})},c=e=>{let{className:t="",size:s="md"}=e,{width:n,height:r}=a[s];return(0,i.jsx)("svg",{className:t,width:n,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})},h=e=>{let{className:t="",size:s="md"}=e,{width:n,height:r}=a[s];return(0,i.jsx)("svg",{className:t,width:n,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})})},u=e=>{let{className:t="",size:s="md"}=e,{width:n,height:r}=a[s];return(0,i.jsx)("svg",{className:t,width:n,height:r,viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})},m=e=>{let{className:t="",size:s="md"}=e,{width:n,height:r}=a[s];return(0,i.jsx)("svg",{className:t,width:n,height:r,viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M18 8a6 6 0 01-7.743 5.743L10 14l-1 1-1 1H6v2H2v-4l4.257-4.257A6 6 0 1118 8zm-6-4a1 1 0 100 2 2 2 0 012 2 1 1 0 102 0 4 4 0 00-4-4z",clipRule:"evenodd"})})},x=e=>{let{className:t="",size:s="md"}=e,{width:n,height:r}=a[s];return(0,i.jsx)("svg",{className:t,width:n,height:r,viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M2 5a2 2 0 012-2h12a2 2 0 012 2v2a2 2 0 01-2 2H4a2 2 0 01-2-2V5zm14 1a1 1 0 11-2 0 1 1 0 012 0zM2 13a2 2 0 012-2h12a2 2 0 012 2v2a2 2 0 01-2 2H4a2 2 0 01-2-2v-2zm14 1a1 1 0 11-2 0 1 1 0 012 0z",clipRule:"evenodd"})})},g=e=>{let{className:t="",size:s="md"}=e,{width:n,height:r}=a[s];return(0,i.jsxs)("svg",{className:t,width:n,height:r,viewBox:"0 0 20 20",fill:"currentColor",children:[(0,i.jsx)("path",{d:"M3 12v3c0 1.657 3.134 3 7 3s7-1.343 7-3v-3c0 1.657-3.134 3-7 3s-7-1.343-7-3z"}),(0,i.jsx)("path",{d:"M3 7v3c0 1.657 3.134 3 7 3s7-1.343 7-3V7c0 1.657-3.134 3-7 3S3 8.657 3 7z"}),(0,i.jsx)("path",{d:"M17 5c0 1.657-3.134 3-7 3S3 6.657 3 5s3.134-3 7-3 7 1.343 7 3z"})]})},p=e=>{let{className:t="",size:s="md"}=e,{width:n,height:r}=a[s];return(0,i.jsx)("svg",{className:t,width:n,height:r,viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})},v=e=>{let{className:t="",size:s="md"}=e,{width:n,height:r}=a[s];return(0,i.jsx)("svg",{className:t,width:n,height:r,viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})})},f=e=>{let{className:t="",size:s="md"}=e,{width:n,height:r}=a[s];return(0,i.jsx)("svg",{className:t,width:n,height:r,viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{d:"M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"})})},b=e=>{let{className:t="",size:s="md"}=e,{width:n,height:r}=a[s];return(0,i.jsx)("svg",{className:t,width:n,height:r,viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})},y=e=>{let{className:t="",size:s="md"}=e,{width:n,height:r}=a[s];return(0,i.jsx)("svg",{className:t,width:n,height:r,viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})},j=e=>{let{className:t="",size:s="md"}=e,{width:n,height:r}=a[s];return(0,i.jsx)("svg",{className:t,width:n,height:r,viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})},w=e=>{let{className:t="",size:s="md"}=e,{width:n,height:r}=a[s];return(0,i.jsx)("svg",{className:t,width:n,height:r,viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})})},N=e=>{let{className:t="",size:s="md"}=e,{width:n,height:r}=a[s];return(0,i.jsx)("svg",{className:t,width:n,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},C=e=>{let{className:t="",size:s="md"}=e,{width:n,height:r}=a[s];return(0,i.jsx)("svg",{className:t,width:n,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})},R=e=>{let{className:t="",size:s="md"}=e,{width:n,height:r}=a[s];return(0,i.jsx)("svg",{className:t,width:n,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},M=e=>{let{status:t,className:s=""}=e;return(0,i.jsx)("span",{className:"w-3 h-3 rounded-full ".concat({green:"bg-green-500",yellow:"bg-yellow-500",red:"bg-red-500",gray:"bg-gray-500"}[t]," ").concat(s)})}},6258:(e,t,s)=>{"use strict";s.d(t,{n:()=>c});var i=s(7620),a=s(589),n=s(494),r=s(2327),l=s(7703),o=class extends r.Q{#a;#n=void 0;#r;#l;constructor(e,t){super(),this.#a=e,this.setOptions(t),this.bindMethods(),this.#o()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#a.defaultMutationOptions(e),(0,l.f8)(this.options,t)||this.#a.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,l.EN)(t.mutationKey)!==(0,l.EN)(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(e){this.#o(),this.#d(e)}getCurrentResult(){return this.#n}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#o(),this.#d()}mutate(e,t){return this.#l=t,this.#r?.removeObserver(this),this.#r=this.#a.getMutationCache().build(this.#a,this.options),this.#r.addObserver(this),this.#r.execute(e)}#o(){let e=this.#r?.state??(0,a.$)();this.#n={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#d(e){n.jG.batch(()=>{if(this.#l&&this.hasListeners()){let t=this.#n.variables,s=this.#n.context;e?.type==="success"?(this.#l.onSuccess?.(e.data,t,s),this.#l.onSettled?.(e.data,null,t,s)):e?.type==="error"&&(this.#l.onError?.(e.error,t,s),this.#l.onSettled?.(void 0,e.error,t,s))}this.listeners.forEach(e=>{e(this.#n)})})}},d=s(7606);function c(e,t){let s=(0,d.jE)(t),[a]=i.useState(()=>new o(s,e));i.useEffect(()=>{a.setOptions(e)},[a,e]);let r=i.useSyncExternalStore(i.useCallback(e=>a.subscribe(n.jG.batchCalls(e)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),c=i.useCallback((e,t)=>{a.mutate(e,t).catch(l.lQ)},[a]);if(r.error&&(0,l.GU)(a.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:c,mutateAsync:r.mutate}}},9484:(e,t,s)=>{"use strict";s.d(t,{A:()=>h,O:()=>c});var i=s(4568),a=s(7620),n=s(2942),r=s(3237),l=s(704),o=s(3120);let d=(0,a.createContext)(void 0);function c(e){let{children:t}=e,[s,c]=(0,a.useState)(null),[h,u]=(0,a.useState)(!0),[m,x]=(0,a.useState)(null),g=(0,n.useRouter)();(0,a.useEffect)(()=>{let e=window.location.pathname;"/login"===e||e.startsWith("/manager")?u(!1):p();let t=localStorage.getItem("manager_token");t&&x(t)},[]);let p=async()=>{try{if(l.AQ.isAuthenticated()){let e=await l.AQ.auth.getMe();c(e)}}catch(e){console.error("Auth check failed:",e)}finally{u(!1)}},v=(0,a.useCallback)(async(e,t)=>{try{let s=localStorage.getItem("selectedAgentId");if(!s)throw Error("No agent selected");o._.configure(s);let i=await l.AQ.login(e,t),a=l.AQ.auth.getAccessToken();a&&o._.configure(s,a),c(i),r.Ay.success("Welcome, ".concat(i.username||i.user_id,"!")),g.push("/")}catch(e){throw r.Ay.error(e.message||"Login failed"),e}},[g]),f=(0,a.useCallback)(async()=>{try{await l.AQ.logout(),c(null),r.Ay.success("Logged out successfully"),g.push("/login")}catch(e){console.error("Logout failed:",e),r.Ay.error("Logout failed")}},[g]),b=(0,a.useCallback)(e=>!!s&&(s.permissions.includes(e)||"SYSTEM_ADMIN"===s.role),[s]),y=(0,a.useCallback)(e=>{if(!s)return!1;let t=["OBSERVER","ADMIN","AUTHORITY","SYSTEM_ADMIN"];return t.indexOf(s.role)>=t.indexOf(e)},[s]),j=(0,a.useCallback)(e=>{l.AQ.setConfig({authToken:e})},[]),w=(0,a.useCallback)(()=>!!m,[m]);return(0,i.jsx)(d.Provider,{value:{user:s,loading:h,login:v,logout:f,hasPermission:b,hasRole:y,setUser:c,setToken:j,managerToken:m,setManagerToken:x,isManagerAuthenticated:w},children:t})}function h(){let e=(0,a.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[4534,8903,3297,704,587,8315,7358],()=>t(965)),_N_E=e.O()}]);
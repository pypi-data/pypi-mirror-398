(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1298],{589:(e,t,s)=>{"use strict";s.d(t,{$:()=>l,s:()=>n});var i=s(494),a=s(6759),r=s(1279),n=class extends a.k{#e;#t;#s;constructor(e){super(),this.mutationId=e.mutationId,this.#t=e.mutationCache,this.#e=[],this.state=e.state||l(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#e.includes(e)||(this.#e.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#e=this.#e.filter(t=>t!==e),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#e.length||("pending"===this.state.status?this.scheduleGc():this.#t.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){let t=()=>{this.#i({type:"continue"})};this.#s=(0,r.II)({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(Error("No mutationFn found")),onFail:(e,t)=>{this.#i({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#i({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});let s="pending"===this.state.status,i=!this.#s.canStart();try{if(s)t();else{this.#i({type:"pending",variables:e,isPaused:i}),await this.#t.config.onMutate?.(e,this);let t=await this.options.onMutate?.(e);t!==this.state.context&&this.#i({type:"pending",context:t,variables:e,isPaused:i})}let a=await this.#s.start();return await this.#t.config.onSuccess?.(a,e,this.state.context,this),await this.options.onSuccess?.(a,e,this.state.context),await this.#t.config.onSettled?.(a,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(a,null,e,this.state.context),this.#i({type:"success",data:a}),a}catch(t){try{throw await this.#t.config.onError?.(t,e,this.state.context,this),await this.options.onError?.(t,e,this.state.context),await this.#t.config.onSettled?.(void 0,t,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,t,e,this.state.context),t}finally{this.#i({type:"error",error:t})}}finally{this.#t.runNext(this)}}#i(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),i.jG.batch(()=>{this.#e.forEach(t=>{t.onMutationUpdate(e)}),this.#t.notify({mutation:this,type:"updated",action:e})})}};function l(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}},2639:(e,t,s)=>{Promise.resolve().then(s.bind(s,9667))},4893:(e,t,s)=>{"use strict";s.d(t,{DP:()=>v,HG:()=>u,Nl:()=>o,O4:()=>d,Pi:()=>n,RR:()=>x,RY:()=>m,Rv:()=>f,XR:()=>l,Zu:()=>y,bN:()=>g,c1:()=>N,fC:()=>w,fK:()=>j,lm:()=>p,md:()=>R,mo:()=>r,uc:()=>b,ui:()=>c,vK:()=>h,xZ:()=>M,xm:()=>C});var i=s(4568);s(7620);let a={xs:{width:12,height:12},sm:{width:16,height:16},md:{width:20,height:20},lg:{width:24,height:24}},r=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=a[s];return(0,i.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})},n=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=a[s];return(0,i.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})},l=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=a[s];return(0,i.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{d:"M11 17a1 1 0 001.447.894l4-2A1 1 0 0017 15V9.236a1 1 0 00-1.447-.894l-4 2a1 1 0 00-.553.894V17zM15.211 6.276a1 1 0 000-1.788l-4.764-2.382a1 1 0 00-.894 0L4.789 4.488a1 1 0 000 1.788l4.764 2.382a1 1 0 00.894 0l4.764-2.382zM4.447 8.342A1 1 0 003 9.236V15a1 1 0 00.553.894l4 2A1 1 0 009 17v-5.764a1 1 0 00-.553-.894l-4-2z"})})},o=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=a[s];return(0,i.jsxs)("svg",{className:"animate-spin ".concat(t),width:r,height:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,i.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},c=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=a[s];return(0,i.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})},d=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=a[s];return(0,i.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})},u=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=a[s];return(0,i.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})})},h=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=a[s];return(0,i.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})},m=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=a[s];return(0,i.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M18 8a6 6 0 01-7.743 5.743L10 14l-1 1-1 1H6v2H2v-4l4.257-4.257A6 6 0 1118 8zm-6-4a1 1 0 100 2 2 2 0 012 2 1 1 0 102 0 4 4 0 00-4-4z",clipRule:"evenodd"})})},x=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=a[s];return(0,i.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M2 5a2 2 0 012-2h12a2 2 0 012 2v2a2 2 0 01-2 2H4a2 2 0 01-2-2V5zm14 1a1 1 0 11-2 0 1 1 0 012 0zM2 13a2 2 0 012-2h12a2 2 0 012 2v2a2 2 0 01-2 2H4a2 2 0 01-2-2v-2zm14 1a1 1 0 11-2 0 1 1 0 012 0z",clipRule:"evenodd"})})},g=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=a[s];return(0,i.jsxs)("svg",{className:t,width:r,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:[(0,i.jsx)("path",{d:"M3 12v3c0 1.657 3.134 3 7 3s7-1.343 7-3v-3c0 1.657-3.134 3-7 3s-7-1.343-7-3z"}),(0,i.jsx)("path",{d:"M3 7v3c0 1.657 3.134 3 7 3s7-1.343 7-3V7c0 1.657-3.134 3-7 3S3 8.657 3 7z"}),(0,i.jsx)("path",{d:"M17 5c0 1.657-3.134 3-7 3S3 6.657 3 5s3.134-3 7-3 7 1.343 7 3z"})]})},p=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=a[s];return(0,i.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})},v=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=a[s];return(0,i.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})})},f=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=a[s];return(0,i.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{d:"M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"})})},j=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=a[s];return(0,i.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})},y=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=a[s];return(0,i.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})},b=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=a[s];return(0,i.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})},N=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=a[s];return(0,i.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})})},w=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=a[s];return(0,i.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},M=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=a[s];return(0,i.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})},C=e=>{let{className:t="",size:s="md"}=e,{width:r,height:n}=a[s];return(0,i.jsx)("svg",{className:t,width:r,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},R=e=>{let{status:t,className:s=""}=e;return(0,i.jsx)("span",{className:"w-3 h-3 rounded-full ".concat({green:"bg-green-500",yellow:"bg-yellow-500",red:"bg-red-500",gray:"bg-gray-500"}[t]," ").concat(s)})}},6258:(e,t,s)=>{"use strict";s.d(t,{n:()=>d});var i=s(7620),a=s(589),r=s(494),n=s(2327),l=s(7703),o=class extends n.Q{#a;#r=void 0;#n;#l;constructor(e,t){super(),this.#a=e,this.setOptions(t),this.bindMethods(),this.#o()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#a.defaultMutationOptions(e),(0,l.f8)(this.options,t)||this.#a.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,l.EN)(t.mutationKey)!==(0,l.EN)(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#o(),this.#c(e)}getCurrentResult(){return this.#r}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#o(),this.#c()}mutate(e,t){return this.#l=t,this.#n?.removeObserver(this),this.#n=this.#a.getMutationCache().build(this.#a,this.options),this.#n.addObserver(this),this.#n.execute(e)}#o(){let e=this.#n?.state??(0,a.$)();this.#r={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#c(e){r.jG.batch(()=>{if(this.#l&&this.hasListeners()){let t=this.#r.variables,s=this.#r.context;e?.type==="success"?(this.#l.onSuccess?.(e.data,t,s),this.#l.onSettled?.(e.data,null,t,s)):e?.type==="error"&&(this.#l.onError?.(e.error,t,s),this.#l.onSettled?.(void 0,e.error,t,s))}this.listeners.forEach(e=>{e(this.#r)})})}},c=s(7606);function d(e,t){let s=(0,c.jE)(t),[a]=i.useState(()=>new o(s,e));i.useEffect(()=>{a.setOptions(e)},[a,e]);let n=i.useSyncExternalStore(i.useCallback(e=>a.subscribe(r.jG.batchCalls(e)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),d=i.useCallback((e,t)=>{a.mutate(e,t).catch(l.lQ)},[a]);if(n.error&&(0,l.GU)(a.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:d,mutateAsync:n.mutate}}},6264:(e,t,s)=>{"use strict";s.d(t,{O:()=>l});var i=s(4568),a=s(7620),r=s(2942),n=s(9484);function l(e){let{children:t,requiredRole:s,requiredPermission:l}=e,{user:o,loading:c,hasRole:d,hasPermission:u}=(0,n.A)(),h=(0,r.useRouter)();return((0,a.useEffect)(()=>{if(!c){if(!o)return void h.push("/login");if(s&&!d(s)||l&&!u(l))return void h.push("/unauthorized")}},[o,c,s,l,d,u,h]),c)?(0,i.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,i.jsx)("div",{className:"text-lg",children:"Loading..."})}):o&&(!s||d(s))&&(!l||u(l))?(0,i.jsx)(i.Fragment,{children:t}):null}},9667:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var i=s(4568),a=s(7620),r=s(7606),n=s(3297),l=s(6258),o=s(2942),c=s(704),d=s(9484),u=s(3835),h=s(6264),m=s(4893),x=s(7261),g=s.n(x),p=s(3237),v=s(4338);function f(){let e=(0,o.useSearchParams)(),t=(0,r.jE)();return(0,a.useEffect)(()=>{let s=e.get("linked"),i=e.get("success"),a=e.get("error"),r=e.get("description");if(s&&"true"===i)p.Ay.success("Successfully linked your ".concat(s," account!")),t.invalidateQueries({queryKey:["user-details"]});else if(a){let t=e.get("provider");p.Ay.error("Failed to link ".concat(t||"OAuth"," account: ").concat(r||a))}},[e,t]),null}function j(){let{user:e,logout:t}=(0,d.A)(),{currentAgent:s}=(0,u.f)(),o=(0,r.jE)(),{data:h,isLoading:x}=(0,n.I)({queryKey:["user-info"],queryFn:()=>c.AQ.auth.getMe(),enabled:!!s}),{data:j}=(0,n.I)({queryKey:["user-details",null==h?void 0:h.user_id],queryFn:()=>c.AQ.users.get(h.user_id),enabled:!!(null==h?void 0:h.user_id)}),y=[{id:"google",name:"Google",icon:(0,i.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[(0,i.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,i.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,i.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,i.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),color:"bg-white border-gray-300 hover:bg-gray-50"},{id:"discord",name:"Discord",icon:(0,i.jsx)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"#5865F2",children:(0,i.jsx)("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"})}),color:"bg-indigo-600 hover:bg-indigo-700 text-white"}],b=()=>{var e;return(null==j||null==(e=j.linked_oauth_accounts)?void 0:e.map(e=>e.provider))||[]},N=async e=>{try{let i,a;if(localStorage.setItem("oauthIntention","link"),localStorage.setItem("oauthProvider",e),localStorage.setItem("oauthReturnUrl","/account"),s){var t;if(a=encodeURIComponent("".concat(window.location.origin,"/oauth/").concat(s.agent_id,"/").concat(e,"/callback")),window.location.hostname.includes("agents.ciris.ai")||(null==(t=s.api_endpoint)?void 0:t.includes("/api/")))i="".concat(window.location.origin,"/api/").concat(s.agent_id,"/v1/auth/oauth/").concat(e,"/login");else{let t=v.env.NEXT_PUBLIC_API_BASE_URL||window.location.origin;i="".concat(t,"/v1/auth/oauth/").concat(e,"/login")}window.location.href="".concat(i,"?redirect_uri=").concat(a)}else p.Ay.error("No agent selected")}catch(e){console.error("OAuth link error:",e),p.Ay.error("Failed to initiate OAuth linking")}},w=(0,l.n)({mutationFn:async e=>{if(!(null==h?void 0:h.user_id))throw Error("No user ID");return c.AQ.users.unlinkOAuthAccount(h.user_id,e.provider,e.external_id)},onSuccess:()=>{p.Ay.success("OAuth account unlinked successfully"),o.invalidateQueries({queryKey:["user-details"]})},onError:e=>{p.Ay.error(e.message||"Failed to unlink OAuth account")}}),M=async()=>{try{await t(),p.Ay.success("Logged out successfully")}catch(e){p.Ay.error("Logout failed")}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.Suspense,{fallback:null,children:(0,i.jsx)(f,{})}),(0,i.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Account"}),(0,i.jsx)("p",{className:"mt-2 text-lg text-gray-600",children:"Manage your account settings, privacy, and linked accounts"})]}),(0,i.jsx)("div",{className:"mb-8",children:(0,i.jsxs)("nav",{className:"flex space-x-8",children:[(0,i.jsx)("span",{className:"border-b-2 border-indigo-500 pb-2 px-1 text-sm font-medium text-indigo-600",children:"Details"}),(0,i.jsx)(g(),{href:"/account/consent",className:"border-b-2 border-transparent pb-2 px-1 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300",children:"Consent"}),(0,i.jsx)(g(),{href:"/account/privacy",className:"border-b-2 border-transparent pb-2 px-1 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300",children:"Privacy & Data"})]})}),(0,i.jsx)("div",{className:"bg-white shadow rounded-lg mb-6",children:(0,i.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,i.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Profile Information"}),(0,i.jsx)(m.md,{status:e?"green":"red",className:"h-3 w-3"})]}),x?(0,i.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,i.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),(0,i.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),(0,i.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}):h?(0,i.jsxs)("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"User ID"}),(0,i.jsx)("dd",{className:"mt-1 text-sm text-gray-900 font-mono",children:h.user_id})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Username"}),(0,i.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:h.username||"Not set"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Role"}),(0,i.jsx)("dd",{className:"mt-1",children:(0,i.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("SYSTEM_ADMIN"===h.role?"bg-red-100 text-red-800":"AUTHORITY"===h.role?"bg-purple-100 text-purple-800":"ADMIN"===h.role?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:h.role})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"API Role"}),(0,i.jsx)("dd",{className:"mt-1",children:(0,i.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("SYSTEM_ADMIN"===h.api_role?"bg-red-100 text-red-800":"AUTHORITY"===h.api_role?"bg-purple-100 text-purple-800":"ADMIN"===h.api_role?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:h.api_role})})]}),h.wa_role&&(0,i.jsxs)("div",{children:[(0,i.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"WA Role"}),(0,i.jsx)("dd",{className:"mt-1",children:(0,i.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("root"===h.wa_role?"bg-red-100 text-red-800":"authority"===h.wa_role?"bg-purple-100 text-purple-800":"admin"===h.wa_role?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:h.wa_role})})]}),h.created_at&&(0,i.jsxs)("div",{children:[(0,i.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Account Created"}),(0,i.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:new Date(h.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),h.last_login&&(0,i.jsxs)("div",{children:[(0,i.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Last Login"}),(0,i.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:new Date(h.last_login).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),h.permissions&&h.permissions.length>0&&(0,i.jsxs)("div",{className:"sm:col-span-2",children:[(0,i.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Permissions"}),(0,i.jsx)("dd",{className:"mt-1",children:(0,i.jsx)("div",{className:"flex flex-wrap gap-2",children:h.permissions.map(e=>(0,i.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:e},e))})})]})]}):(0,i.jsx)("div",{className:"text-center py-6",children:(0,i.jsx)("p",{className:"text-gray-500",children:"Unable to load user information"})})]})}),s&&(0,i.jsx)("div",{className:"bg-white shadow rounded-lg mb-6",children:(0,i.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,i.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Current Agent"}),(0,i.jsxs)("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Agent Name"}),(0,i.jsx)("dd",{className:"mt-1 text-sm text-gray-900",children:s.agent_name})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Agent ID"}),(0,i.jsx)("dd",{className:"mt-1 text-sm text-gray-900 font-mono",children:s.agent_id})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Status"}),(0,i.jsx)("dd",{className:"mt-1",children:(0,i.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("running"===s.status?"bg-green-100 text-green-800":"stopped"===s.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:s.status})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Health"}),(0,i.jsx)("dd",{className:"mt-1",children:(0,i.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("healthy"===s.health?"bg-green-100 text-green-800":"unhealthy"===s.health?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:s.health||"Unknown"})})]})]})]})}),(0,i.jsx)("div",{className:"bg-white shadow rounded-lg mb-6",children:(0,i.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,i.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-6",children:"Connected Accounts"}),(0,i.jsx)("div",{className:"space-y-4 mb-6",children:y.map(e=>{var t;let s=b().includes(e.id),a=null==j||null==(t=j.linked_oauth_accounts)?void 0:t.find(t=>t.provider===e.id);return(0,i.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"flex-shrink-0",children:e.icon}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.name}),s&&a?(0,i.jsxs)("div",{children:[(0,i.jsxs)("p",{className:"text-sm text-gray-500",children:["Connected as ",a.account_name||a.external_id]}),a.linked_at&&(0,i.jsxs)("p",{className:"text-xs text-gray-400",children:["Linked ",new Date(a.linked_at).toLocaleDateString()]})]}):(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Not connected"})]})]}),s&&a?(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Connected"}),!a.is_primary&&(0,i.jsx)("button",{onClick:()=>w.mutate({provider:a.provider,external_id:a.external_id}),disabled:w.isPending,className:"text-sm text-red-600 hover:text-red-800 disabled:opacity-50",children:"Disconnect"})]}):(0,i.jsxs)("button",{onClick:()=>N(e.id),className:"inline-flex items-center px-4 py-2 border text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ".concat(e.color),children:["Connect ",e.name]})]},e.id)})}),(0,i.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("div",{className:"flex-shrink-0",children:(0,i.jsx)("svg",{className:"h-5 w-5 text-blue-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,i.jsx)("div",{className:"ml-3",children:(0,i.jsxs)("p",{className:"text-sm text-blue-700",children:[(0,i.jsx)("strong",{children:"Connect your accounts"})," to use them for authentication and access control. You can safely connect multiple accounts and disconnect them at any time."]})})]})})]})}),(0,i.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,i.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,i.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Account Actions"}),(0,i.jsx)("div",{className:"space-y-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Sign Out"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Sign out of your account and return to the login page"})]}),(0,i.jsx)("button",{onClick:M,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Sign Out"})]})})]})})]})]})}function y(){return(0,i.jsx)(h.O,{children:(0,i.jsx)(j,{})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[4534,8903,3297,8072,704,3835,587,8315,7358],()=>t(2639)),_N_E=e.O()}]);
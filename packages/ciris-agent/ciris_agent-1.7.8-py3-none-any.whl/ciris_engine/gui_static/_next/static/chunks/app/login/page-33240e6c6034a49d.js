(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4520],{249:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var n=a(4568),s=a(7620),r=a(2942),o=a(9484),i=a(704),l=a(9664),c=a(653),u=a(4338);function d(){var e;let t=(0,r.useRouter)(),[a,d]=(0,s.useState)(!1),[g,C]=(0,s.useState)(!0),[L,h]=(0,s.useState)(null),[m,f]=(0,s.useState)(""),[p,x]=(0,s.useState)(""),{login:b}=(0,o.A)(),y=(0,s.useRef)(!1);(0,s.useEffect)(()=>{y.current||(y.current=!0,(async()=>{let e=u.env.NEXT_PUBLIC_API_BASE_URL||window.location.origin;i.AQ.setConfig({baseURL:e});try{if((await i.AQ.setup.getStatus()).setup_required){window.location.href="/setup";return}localStorage.setItem("selectedAgentId","datum"),localStorage.setItem("selectedAgentName","CIRIS Agent"),console.log("Standalone login initialized with API:",e)}catch(e){console.error("Failed to check setup status:",e)}finally{C(!1)}})())},[t]);let w=async e=>{e.preventDefault(),d(!0),h(null);try{await b(m,p)}catch(e){console.error("Login failed:",e),h(e)}finally{d(!1)}};return g?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(c.A,{className:"mx-auto h-12 w-auto text-brand-primary fill-brand-primary animate-pulse"}),(0,n.jsx)("p",{className:"mt-4 text-gray-600",children:"Checking setup status..."})]})}):(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,n.jsxs)("div",{className:"max-w-md w-full space-y-8 p-8",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(c.A,{className:"mx-auto h-12 w-auto text-brand-primary fill-brand-primary"}),(0,n.jsx)("h2",{className:"mt-6 text-center text-3xl text-brand-primary font-extrabold",children:"Sign in to CIRIS"}),(0,n.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Standalone Mode"}),L&&(0,n.jsx)("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-md",children:(0,n.jsx)("p",{className:"text-sm text-red-600",children:L.message})})]}),(0,n.jsxs)("form",{onSubmit:w,className:"mt-8 space-y-6",children:[(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),(0,n.jsx)("input",{id:"username",name:"username",type:"text",required:!0,value:m,onChange:e=>f(e.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Enter username",disabled:a})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,n.jsx)("input",{id:"password",name:"password",type:"password",required:!0,value:p,onChange:e=>x(e.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Enter password",disabled:a}),(0,n.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:["Default credentials: ",(0,n.jsx)("span",{className:"font-mono font-medium",children:"admin"})," /"," ",(0,n.jsx)("span",{className:"font-mono font-medium",children:"ciris_admin_password"})]})]})]}),(0,n.jsx)("button",{type:"submit",disabled:a||!m||!p,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:a?"Signing in...":"Sign in"})]}),(0,n.jsxs)("div",{className:"mt-4 text-center text-xs text-gray-400",children:["v",l.MF.version," â€¢ ",(null==(e=l.MF.gitHash)?void 0:e.substring(0,7))||"dev"]})]})})}},653:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var n=a(4568);a(7620);let s=e=>(0,n.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 61 60",className:"dark:fill-neutral-50 fill-neutral-700 hover:fill-brand-primary",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,n.jsx)("path",{d:"M32.336 12.0436C32.4286 11.5339 32.9043 11.1903 33.4123 11.2561L33.4614 11.264L33.7724 11.3231C36.8714 11.9397 39.6944 13.3109 42.0437 15.239L42.2768 15.4338L42.3141 15.4668C42.6876 15.8173 42.7242 16.4031 42.3892 16.7983C42.0542 17.1933 41.4703 17.253 41.0634 16.942L41.0247 16.9106L40.8151 16.7359C38.706 15.0049 36.1737 13.7751 33.3944 13.2222L33.1157 13.169L33.0668 13.159C32.5681 13.0421 32.2435 12.5532 32.336 12.0436Z"}),(0,n.jsx)("path",{d:"M43.1071 17.5197C43.502 17.1844 44.0878 17.2208 44.4386 17.594L44.4718 17.631L44.6669 17.8644C46.5977 20.2139 47.9717 23.0395 48.5885 26.139L48.6476 26.4496L48.6552 26.4991C48.721 27.007 48.3777 27.4827 47.868 27.5753C47.3584 27.6678 46.8696 27.3432 46.7526 26.8446L46.7424 26.7957L46.6894 26.5169C46.1364 23.7377 44.9043 21.2031 43.1709 19.0938L42.9958 18.8844L42.9645 18.8455C42.6532 18.4388 42.7123 17.855 43.1071 17.5197Z"}),(0,n.jsx)("path",{d:"M26.7225 11.2561C27.2304 11.1903 27.7062 11.5339 27.7987 12.0436C27.8942 12.5696 27.5451 13.0734 27.0191 13.1689L26.7403 13.2222C23.8684 13.7935 21.2604 15.0877 19.1106 16.913C18.703 17.2591 18.0919 17.2091 17.7458 16.8015C17.3998 16.3939 17.4495 15.7828 17.8571 15.4367C20.3293 13.3377 23.348 11.8677 26.673 11.2639L26.7225 11.2561Z"}),(0,n.jsx)("path",{d:"M15.657 17.6345C16.0028 17.2267 16.6137 17.1764 17.0215 17.5221C17.4293 17.8679 17.4797 18.479 17.1339 18.8869C15.2518 21.1066 13.9309 23.8171 13.3895 26.7959L13.3795 26.8448C13.2625 27.3435 12.7735 27.6682 12.2639 27.5755C11.7378 27.4799 11.3889 26.9759 11.4845 26.4499L11.5437 26.1392C12.181 22.939 13.6268 20.029 15.657 17.6345Z"}),(0,n.jsx)("path",{d:"M46.7426 32.8925C46.8381 32.3664 47.3421 32.0174 47.8682 32.1129C48.3943 32.2085 48.7433 32.7123 48.6479 33.2383C48.0441 36.5631 46.574 39.5845 44.4748 42.0569L44.4415 42.0942C44.0907 42.4674 43.5049 42.5038 43.11 42.1685C42.7025 41.8224 42.6527 41.2114 42.9987 40.8038L43.1738 40.5944C44.9645 38.4152 46.218 35.7814 46.7426 32.8925Z"}),(0,n.jsx)("path",{d:"M41.0274 42.7752C41.4352 42.4294 42.0461 42.4795 42.3919 42.8873C42.7377 43.2951 42.6875 43.906 42.2798 44.2518C39.8051 46.3505 36.7866 47.8208 33.4614 48.4246C32.9354 48.5201 32.4316 48.171 32.3361 47.645C32.2405 47.1189 32.5896 46.6149 33.1157 46.5193C36.0975 45.9779 38.8052 44.6599 41.0274 42.7752Z"}),(0,n.jsx)("path",{d:"M17.7399 42.8864C18.0752 42.4916 18.659 42.4325 19.0657 42.7438L19.1046 42.7751L19.314 42.9502C21.4233 44.6836 23.958 45.9157 26.7371 46.4687L27.0159 46.5216L27.0648 46.5319C27.5634 46.6489 27.888 47.1377 27.7955 47.6473C27.7029 48.1569 27.2272 48.5003 26.7193 48.4345L26.6698 48.4269L26.3592 48.3678C23.2597 47.751 20.4341 46.377 18.0846 44.4462L17.8512 44.2511L17.8142 44.2179C17.441 43.8671 17.4046 43.2813 17.7399 42.8864Z"}),(0,n.jsx)("path",{d:"M12.267 32.1129C12.7767 32.0203 13.2657 32.3449 13.3826 32.8437L13.3926 32.8923L13.4459 33.1708C13.9988 35.9477 15.2284 38.4803 16.9598 40.5923L17.1346 40.8019L17.1659 40.8408C17.4767 41.2479 17.4167 41.8319 17.0214 42.1666C16.6261 42.5013 16.0405 42.4641 15.6901 42.0905L15.6569 42.0534L15.4624 41.8198C13.5348 39.4684 12.1634 36.6458 11.5468 33.5493L11.4876 33.2386L11.4798 33.1894C11.4138 32.6815 11.7573 32.2056 12.267 32.1129Z"}),(0,n.jsx)("path",{d:"M31.9221 30.8439C31.853 30.8439 31.7838 30.8439 31.7147 30.8439L29.1172 30.7941L29.0674 28.1967C28.9927 24.3267 31.0397 20.7417 34.4089 18.8386L34.4394 18.822L47.1418 12.244C47.482 12.0669 47.8472 12.4321 47.6701 12.7723L41.0755 25.5051C39.2055 28.8163 35.7146 30.8494 31.9221 30.8494V30.8439ZM31.0148 28.891L31.7506 28.9048C34.9013 28.9684 37.8224 27.3032 39.377 24.5619L43.7117 16.1941L35.3439 20.5287C32.6026 22.0833 30.9401 25.0045 31.001 28.1552L31.0148 28.891Z"}),(0,n.jsx)("path",{d:"M12.9896 47.4444C12.6493 47.6214 12.2842 47.2562 12.4612 46.916L19.0559 34.1832C20.9258 30.872 24.4168 28.8389 28.2092 28.8389C28.2784 28.8389 28.3475 28.8389 28.4167 28.8389L31.0142 28.8887L31.064 31.4861C31.1387 35.356 29.0917 38.941 25.7224 40.8442L25.692 40.8608L12.9896 47.4388V47.4444ZM20.7488 35.1237L16.4141 43.4914L24.7819 39.1568C27.5232 37.6022 29.1857 34.6811 29.1249 31.5304L29.111 30.7946L28.3752 30.7807C25.2383 30.7171 22.3034 32.3824 20.7488 35.1237Z"}),(0,n.jsx)("path",{d:"M47.6672 46.9155C47.8442 47.2558 47.4791 47.6209 47.1388 47.4439L34.406 40.8492C31.0368 38.9461 28.9898 35.3583 29.0645 31.4912L29.1143 28.8937L31.7117 28.8439C35.5789 28.7665 39.1694 30.8162 41.0726 34.1855L41.0892 34.2159L47.6672 46.9183V46.9155ZM35.3438 39.1563L43.7115 43.491L39.3769 35.1232C37.8223 32.3819 34.8956 30.7194 31.7505 30.7803L31.0147 30.7941L31.0008 31.5299C30.94 34.6806 32.6025 37.6017 35.3438 39.1563Z"}),(0,n.jsx)("path",{d:"M28.2073 30.8441C24.4176 30.8441 20.9239 28.8109 19.0539 25.4998L19.0373 25.4693L12.4593 12.7669C12.2823 12.4267 12.6474 12.0616 12.9876 12.2386L25.7205 18.8332C29.0897 20.7364 31.1367 24.3241 31.062 28.1913L31.0122 30.7887L28.4148 30.8385C28.3456 30.8385 28.2764 30.8385 28.2073 30.8385V30.8441ZM20.7496 24.562C22.3042 27.3033 25.2226 28.9769 28.376 28.905L29.1118 28.8911L29.1257 28.1553C29.1865 25.0046 27.524 22.0835 24.7827 20.5289L16.415 16.1943L20.7496 24.562Z"}),(0,n.jsx)("path",{d:"M34.7623 18.6488C35.0452 18.5252 35.3718 18.5436 35.6402 18.7012C35.9265 18.8694 36.1067 19.1725 36.1176 19.5044C36.2342 23.0677 34.8579 26.5765 32.2192 29.1134V29.1137L30.7364 30.5381C30.4591 30.8046 30.0503 30.8817 29.6951 30.7345C29.3398 30.5873 29.1052 30.2437 29.0975 29.8593L29.0646 28.1914V28.1912C28.9884 24.3248 31.0389 20.7323 34.4054 18.8312L34.4381 18.8136L34.7064 18.6753L34.7623 18.6488ZM34.0869 21.394C32.2478 22.9245 31.1191 25.1684 31.0079 27.5882C32.7132 25.8919 33.7709 23.7061 34.0869 21.394Z"}),(0,n.jsx)("path",{d:"M24.4942 18.7035C24.7805 18.5354 25.133 18.5259 25.4281 18.6781L25.6909 18.8134L25.7236 18.8312C29.0343 20.7025 31.0761 24.2151 31.0664 28.01L31.0642 28.1909L31.0323 29.7858C31.0469 30.0482 30.9554 30.3154 30.7571 30.5176C30.3852 30.8968 29.7772 30.9057 29.3945 30.5374L27.915 29.1132L27.7923 28.9935C25.2338 26.4668 23.9018 23.0147 24.0166 19.5068L24.0207 19.445C24.0504 19.1376 24.2257 18.8611 24.4942 18.7035ZM26.0475 21.3997C26.3637 23.7071 27.4192 25.8877 29.1203 27.5823C29.0074 25.1696 27.8804 22.9294 26.0475 21.3997Z"}),(0,n.jsx)("path",{d:"M30.4418 59.6377C30.3256 60.0028 29.8111 60.0028 29.6949 59.6377L24.4696 43.1843C23.211 38.6616 24.5304 33.8318 27.9135 30.5787L30.0684 28.5068L32.2233 30.5787C35.6063 33.8318 36.9258 38.6643 35.6672 43.1843L35.6561 43.2175L30.4391 59.6377H30.4418ZM26.3285 42.6477L30.0684 54.4179L33.8083 42.6477C34.8677 38.8165 33.7474 34.728 30.8816 31.9729L30.0684 31.1928L29.2551 31.9729C26.3893 34.728 25.269 38.8192 26.3285 42.6477Z"}),(0,n.jsx)("path",{d:"M20.1518 35.9118C19.0121 35.9118 17.8586 35.7597 16.7272 35.4444L16.694 35.4333L0.273854 30.2162C-0.0912847 30.1001 -0.0912847 29.5855 0.273854 29.4694L16.7272 24.244C21.25 22.9854 26.0798 24.3049 29.3328 27.6879L31.4047 29.8428L29.3328 31.9977C26.893 34.5343 23.568 35.9118 20.149 35.9118H20.1518ZM17.2639 33.5827C21.0951 34.6422 25.1835 33.5218 27.9387 30.6561L28.7215 29.8428L27.9387 29.0295C25.1835 26.1637 21.0923 25.0434 17.2639 26.1029L5.49368 29.8428L17.2639 33.5827Z"}),(0,n.jsx)("path",{d:"M40.0106 35.9118C36.5915 35.9118 33.2666 34.5343 30.8268 31.9977L28.7549 29.8428L30.8268 27.6879C34.0798 24.3049 38.9124 22.9854 43.4324 24.244L43.4655 24.2551L59.8857 29.4721C60.2509 29.5883 60.2509 30.1028 59.8857 30.219L43.4324 35.4444C42.301 35.7597 41.1502 35.9118 40.0078 35.9118H40.0106ZM32.2237 30.6561C34.9788 33.5218 39.0673 34.6422 42.8985 33.5827L54.6687 29.8428L42.8985 26.1029C39.0673 25.0434 34.9788 26.1637 32.2237 29.0295L31.4409 29.8428L32.2237 30.6561Z"}),(0,n.jsx)("path",{d:"M24.749 16.4571L29.6977 0.869557C29.8139 0.504418 30.3284 0.504418 30.4446 0.869557L35.3933 16.4516C35.504 16.7974 35.1278 17.0933 34.818 16.9052L30.0324 14.0256L25.3243 16.9108C25.0145 17.1016 24.6356 16.8029 24.7462 16.4571H24.749Z"})]})},2942:(e,t,a)=>{"use strict";var n=a(2418);a.o(n,"usePathname")&&a.d(t,{usePathname:function(){return n.usePathname}}),a.o(n,"useRouter")&&a.d(t,{useRouter:function(){return n.useRouter}}),a.o(n,"useSearchParams")&&a.d(t,{useSearchParams:function(){return n.useSearchParams}})},3120:(e,t,a)=>{"use strict";a.d(t,{_:()=>i});var n=a(704);function s(){let e=window.location.hostname,t=window.location.pathname,a=t.startsWith("/agent/");if("agents.ciris.ai"!==e&&!a)return{mode:"standalone",agentId:"default",apiBase:"/v1"};{let e="default";e=a?t.split("/")[2]||"default":localStorage.getItem("selectedAgentId")||"default";let n="/api/".concat(e,"/v1");return{mode:"managed",agentId:e,apiBase:n}}}var r=a(5950);class o{configure(e,t){let a,{mode:n}=s();if("managed"===n)a="".concat(window.location.origin,"/api/").concat(e);else{let t=localStorage.getItem("agent_".concat(e,"_api_url"));a=t||window.location.origin}t||(t=r.a.getAccessToken()||void 0);let o={baseURL:a,authToken:t,agentId:e,mode:n};return this.hasConfigChanged(o)&&this.applyConfiguration(o),o}configureForOAuthCallback(e,t){let a,{mode:n}=s(),r={baseURL:"managed"===n?"".concat(window.location.origin,"/api/").concat(e):window.location.origin,authToken:t,agentId:e,mode:n};return this.applyConfiguration(r),this.storeConfiguration(r),r}getCurrentConfig(){return this.currentConfig}isConfiguredFor(e){return!!this.currentConfig&&this.currentConfig.agentId===e&&!!this.currentConfig.authToken}clear(){this.currentConfig=null,localStorage.removeItem("sdk_config"),this.log("SDK configuration cleared")}applyConfiguration(e){this.log("Applying SDK configuration:",e),n.AQ.setConfig({baseURL:e.baseURL,authToken:e.authToken}),this.currentConfig=e,this.log("SDK configured successfully")}hasConfigChanged(e){return!this.currentConfig||this.currentConfig.baseURL!==e.baseURL||this.currentConfig.authToken!==e.authToken||this.currentConfig.agentId!==e.agentId||this.currentConfig.mode!==e.mode}storeConfiguration(e){let t={baseURL:e.baseURL,agentId:e.agentId,mode:e.mode};localStorage.setItem("sdk_config",JSON.stringify(t)),"standalone"===e.mode&&e.baseURL!==window.location.origin&&localStorage.setItem("agent_".concat(e.agentId,"_api_url"),e.baseURL)}restoreConfiguration(){let e=localStorage.getItem("sdk_config");if(!e)return null;try{let t=JSON.parse(e),a=r.a.getAccessToken()||void 0;return{...t,authToken:a}}catch(e){return null}}log(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];this.debugMode&&console.log("[SDKConfigManager]",...t)}constructor(){this.currentConfig=null,this.debugMode=!1}}let i=new o},6855:(e,t,a)=>{Promise.resolve().then(a.bind(a,249))},9484:(e,t,a)=>{"use strict";a.d(t,{A:()=>d,O:()=>u});var n=a(4568),s=a(7620),r=a(2942),o=a(3237),i=a(704),l=a(3120);let c=(0,s.createContext)(void 0);function u(e){let{children:t}=e,[a,u]=(0,s.useState)(null),[d,g]=(0,s.useState)(!0),[C,L]=(0,s.useState)(null),h=(0,r.useRouter)();(0,s.useEffect)(()=>{let e=window.location.pathname;"/login"===e||e.startsWith("/manager")?g(!1):m();let t=localStorage.getItem("manager_token");t&&L(t)},[]);let m=async()=>{try{if(i.AQ.isAuthenticated()){let e=await i.AQ.auth.getMe();u(e)}}catch(e){console.error("Auth check failed:",e)}finally{g(!1)}},f=(0,s.useCallback)(async(e,t)=>{try{let a=localStorage.getItem("selectedAgentId");if(!a)throw Error("No agent selected");l._.configure(a);let n=await i.AQ.login(e,t),s=i.AQ.auth.getAccessToken();s&&l._.configure(a,s),u(n),o.Ay.success("Welcome, ".concat(n.username||n.user_id,"!")),h.push("/")}catch(e){throw o.Ay.error(e.message||"Login failed"),e}},[h]),p=(0,s.useCallback)(async()=>{try{await i.AQ.logout(),u(null),o.Ay.success("Logged out successfully"),h.push("/login")}catch(e){console.error("Logout failed:",e),o.Ay.error("Logout failed")}},[h]),x=(0,s.useCallback)(e=>!!a&&(a.permissions.includes(e)||"SYSTEM_ADMIN"===a.role),[a]),b=(0,s.useCallback)(e=>{if(!a)return!1;let t=["OBSERVER","ADMIN","AUTHORITY","SYSTEM_ADMIN"];return t.indexOf(a.role)>=t.indexOf(e)},[a]),y=(0,s.useCallback)(e=>{i.AQ.setConfig({authToken:e})},[]),w=(0,s.useCallback)(()=>!!C,[C]);return(0,n.jsx)(c.Provider,{value:{user:a,loading:d,login:f,logout:p,hasPermission:x,hasRole:b,setUser:u,setToken:y,managerToken:C,setManagerToken:L,isManagerAuthenticated:w},children:t})}function d(){let e=(0,s.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[4534,704,587,8315,7358],()=>t(6855)),_N_E=e.O()}]);
#:schema https://www.schemastore.org/pyproject.json
[build-system]
requires = ["scikit-build-core>=0.10"]
build-backend = "scikit_build_core.build"

[project]
name = "sshp-bin"
dynamic = ["scripts"]
version = "v1.1.3" # Match with sshp/src/sshp.c PROG_VERSION
description = "Parallel SSH Executor"
readme = "sshp/README.md"
requires-python = ">=3.8"
license-files = ["LICENSE", "sshp/LICENSE"]
keywords = ["ssh", "parallel", "executor", "sshp", "ysap"]
classifiers = [
  "Development Status :: 5 - Production/Stable",
  "Environment :: Console",
  "Intended Audience :: Developers",
  "Operating System :: OS Independent",
  "Programming Language :: Python",
  "Programming Language :: Python :: 3.8",
  "Programming Language :: Python :: 3.9",
  "Programming Language :: Python :: 3.10",
  "Programming Language :: Python :: 3.11",
  "Programming Language :: Python :: 3.12",
  "Programming Language :: Python :: 3.13",
  "Programming Language :: Python :: 3.14",
  "Programming Language :: Python :: 3.15",
  "Programming Language :: Python :: 3 :: Only",
  "Topic :: Software Development :: Quality Assurance",
  "Topic :: Software Development :: Testing",
  "Topic :: Software Development :: Libraries",
]
authors = [
  { name = "Dave Eddy", email = "dave@daveeddy.com" },
  { name = "Flavio Amurrio", email = "25621374+FlavioAmurrioCS@users.noreply.github.com" },
]
dependencies = []

[dependency-groups]
dev = [
  { include-group = "test" },
  { include-group = "types" },
]
test = [
  "pytest",
]
types_packages = [
  { include-group = "test" },
  "typing-extensions",
]
types = [
  { include-group = "types_packages" },
  "mypy",
]

[tool.scikit-build]
wheel.py-api = "py3"
wheel.build-tag = "0" # Can increase this if making changes to packaging only

[project.urls]
Documentation = "https://github.com/bahamas10/sshp#readme"
Issues = "https://github.com/bahamas10/sshp/issues"
Source = "https://github.com/bahamas10/sshp"
Packaging = "https://github.com/FlavioAmurrioCS/sshp-bin"

[tool.uv]
cache-keys = [{ file = "pyproject.toml" }, { file = "sshp/src/**/*.{h,c,hpp,cpp}" }, { file = "CMakeLists.txt" }]

###############################################################################
# region: cibuildwheel
###############################################################################
[tool.cibuildwheel]
# This project produces a single platform wheel per OS/arch (Tag: py3-none-...).
# So we only need one "builder" Python per OS.
build = "cp312-*"
###############################################################################
# endregion: cibuildwheel
###############################################################################

###############################################################################
# region: pyright
###############################################################################
[tool.pyright]
pythonVersion = "3.10"
###############################################################################
# endregion: pyright
###############################################################################

###############################################################################
# region: mypy
###############################################################################
[tool.mypy]
python_version = "3.10"
check_untyped_defs = true
disallow_any_generics = true
disallow_incomplete_defs = true
disallow_untyped_defs = true
no_implicit_optional = true
warn_redundant_casts = true
warn_unused_ignores = true
###############################################################################
# endregion: mypy
###############################################################################

###############################################################################
# region: ruff
###############################################################################
[tool.hatch.envs.hatch-static-analysis]
config-path = "none"

[tool.ruff.lint.isort]
force-single-line = true

[tool.ruff]
line-length = 100

[tool.ruff.lint]
select = [
  "ALL",
]
ignore = [
  "COM812",  # missing-trailing-comma
  "D",       # pydocstyle
  "ERA001",  # commented-out-code
  "EXE003",  # shebang-missing-python
  "ISC001",  # single-line-implicit-string-concatenation
  "PTH",     # flake8-use-pathlib
  "T20",     # flake8-print
  "PLC0415", # import-outside-top-level
]

[tool.ruff.format]
docstring-code-format = true
docstring-code-line-length = 100

[tool.ruff.lint.per-file-ignores]
"tests/**/*.py" = [
  "S101",
]
###############################################################################
# endregion: ruff
###############################################################################

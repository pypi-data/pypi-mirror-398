[project]
name = "pybitfsm"
version = "0.0.1"
description = "Superoptimizer for tiny finite state machines over bit inputs"
authors = [
  {name = "Brendan MacDonell", email = "brendan@macdonell.net"},
]
classifiers = [
  "Development Status :: 5 - Production/Stable",
  "Intended Audience :: Developers",
  "License :: OSI Approved :: ISC License (ISCL)",
  "Programming Language :: Python :: 3",
  "Programming Language :: Python :: 3.9",
  "Programming Language :: Python :: 3.10",
  "Programming Language :: Python :: 3.11",
  "Programming Language :: Python :: 3.12",
  "Programming Language :: Python :: 3.13",
  "Programming Language :: Python :: 3.14",
  "Topic :: Software Development",
]
# TODO: Uncomment when scikit-build-core==0.10.8 is released.
#license = "ISC AND BSD-2-Clause AND CC0-1.0 AND MIT AND Unlicense"
license-files = [
  "LICENSE.txt",
  "third_party/**/LICENSE.txt",
]
readme = "README.md"
requires-python = ">= 3.9"

[project.urls]
homepage = "https://github.com/bremac/bitfsm/"
repository = "https://github.com/bremac/bitfsm.git"

[build-system]
requires = ["scikit-build-core>=0.10.7"]
build-backend = "scikit_build_core.build"

[tool.scikit-build]
minimum-version = "build-system.requires"
sdist.exclude = [
  "buildtools/",
  "examples/",
  "lib/",
  "*_test.cc",
  "*_test.py",
]
cmake.version = ">=3.26"
wheel.packages = []  # Files are copied in CMakeLists.txt
wheel.py-api = "py3"  # No Python ABI dependency
install.components = ["pybitfsm"]

# NOTE: For a native build, use python -m build '--config-settings=cmake.define.CMAKE_CXX_FLAGS=-march=native;-DBITFSM_OPT_USE_AVX2'

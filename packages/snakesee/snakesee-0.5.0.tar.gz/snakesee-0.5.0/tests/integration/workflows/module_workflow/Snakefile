# Test workflow using modules (modern replacement for subworkflows)
# Tests: module import, rule inclusion from external files

SAMPLES = ["sample1", "sample2"]

# Include rules from module
include: "rules/processing.smk"

rule all:
    input:
        expand("output/analyzed/{sample}.txt", sample=SAMPLES),
        expand("output/final/{sample}.done", sample=SAMPLES)

rule create_input:
    """Create initial input files."""
    output: "input/{sample}.txt"
    shell: "echo 'data for {wildcards.sample}' > {output}"

rule finalize:
    """Final step after module processing."""
    input: "output/analyzed/{sample}.txt"
    output: "output/final/{sample}.done"
    shell: "cat {input} && echo 'done' > {output}"

# Test workflow with localrules (parser must match "localrule X:")
# Tests: RULE_START_PATTERN matching "localrule" prefix

localrules: all, local_step

rule all:
    input: "output/final.txt"

rule local_step:
    """A localrule that just creates a file."""
    output: "output/local.txt"
    shell: "echo 'local' > {output}"

rule remote_step:
    """A regular rule that depends on the localrule."""
    input: "output/local.txt"
    output: "output/processed.txt"
    shell: "cat {input} | tr 'a-z' 'A-Z' > {output}"

rule finalize:
    input: "output/processed.txt"
    output: "output/final.txt"
    shell: "cat {input} > {output}"

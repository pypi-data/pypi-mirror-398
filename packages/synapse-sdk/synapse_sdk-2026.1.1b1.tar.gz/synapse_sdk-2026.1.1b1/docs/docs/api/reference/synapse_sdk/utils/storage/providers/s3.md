---
sidebar_label: s3
title: synapse_sdk.utils.storage.providers.s3
---

S3-compatible storage provider (AWS S3, MinIO).

## S3Storage Objects

```python
class S3Storage(_BaseStorageMixin)
```

Storage provider for S3-compatible services (AWS S3, MinIO).

Requires: universal-pathlib[s3] (pip install universal-pathlib[s3])

**Arguments**:

- `config` - Configuration dict with S3 credentials.
  

**Example**:

  >>> storage = S3Storage(\{
  ...     'bucket_name': 'my-bucket',
  ...     'access_key': 'AKIAIOSFODNN7EXAMPLE',
  ...     'secret_key': 'wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY',
  ...     'region_name': 'us-east-1',
  ... \})
  >>> storage.upload(Path('/tmp/file.txt'), 'data/file.txt')
  's3://my-bucket/data/file.txt'

#### upload

```python
def upload(source: Path, target: str) -> str
```

Upload a file to S3.

**Arguments**:

- `source` - Local file path to upload.
- `target` - Target path in S3 bucket.
  

**Returns**:

  s3:// URL of uploaded file.

#### exists

```python
def exists(target: str) -> bool
```

Check if file exists in S3.

**Arguments**:

- `target` - Path to check.
  

**Returns**:

  True if exists, False otherwise.

#### get\_url

```python
def get_url(target: str) -> str
```

Get s3:// URL for target.

**Arguments**:

- `target` - Target path.
  

**Returns**:

  s3:// URL string.

#### get\_pathlib

```python
def get_pathlib(path: str) -> UPath
```

Get UPath object for path.

**Arguments**:

- `path` - Path relative to bucket root.
  

**Returns**:

  UPath object.

#### get\_path\_file\_count

```python
def get_path_file_count(pathlib_obj: UPath) -> int
```

Count files in S3 path.

**Arguments**:

- `pathlib_obj` - UPath object from get_pathlib().
  

**Returns**:

  Number of files.

#### get\_path\_total\_size

```python
def get_path_total_size(pathlib_obj: UPath) -> int
```

Calculate total size of files in S3 path.

**Arguments**:

- `pathlib_obj` - UPath object from get_pathlib().
  

**Returns**:

  Total size in bytes.

#### glob

```python
def glob(pattern: str) -> list[UPath]
```

Glob pattern matching in S3.

**Arguments**:

- `pattern` - Glob pattern.
  

**Returns**:

  List of matching UPath objects.


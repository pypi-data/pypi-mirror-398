"""NiceGUI Material Icons 图标库页面."""

from __future__ import annotations

from nicegui import ui

from pycmd2.web.components.app import BaseApp

# 常用的 Material Icons
# 这不是一个详尽的列表, 但涵盖了许多常用图标
MATERIAL_ICONS = [
    # 操作
    "account_circle",
    "add",
    "add_circle",
    "add_shopping_cart",
    "alarm",
    "android",
    "announcement",
    "aspect_ratio",
    "assignment",
    "autorenew",
    "backup",
    "book",
    "bookmark",
    "build",
    # 警告
    "error",
    "warning",
    "info",
    "help",
    "cancel",
    "check_circle",
    "highlight_off",
    # 音频/视频
    "album",
    "av_timer",
    "closed_caption",
    "equalizer",
    "explicit",
    "fast_forward",
    "fast_rewind",
    "games",
    "hearing",
    "high_quality",
    "loop",
    "mic",
    "mic_none",
    "mic_off",
    "movie",
    "playlist_add",
    "queue_music",
    "radio",
    "recent_actors",
    "repeat",
    "replay",
    "shuffle",
    "skip_next",
    "skip_previous",
    "snooze",
    "stop",
    "videocam",
    "volume_down",
    "volume_mute",
    "volume_off",
    "volume_up",
    # 通信
    "business",
    "call",
    "call_end",
    "call_made",
    "call_merge",
    "call_missed",
    "call_received",
    "call_split",
    "chat",
    "clear_all",
    "comment",
    "contacts",
    "dialer_sip",
    "dialpad",
    "email",
    "forum",
    "import_export",
    "invert_colors_off",
    "live_help",
    "location_off",
    "location_on",
    "message",
    "messenger",
    "no_sim",
    "phone",
    "portable_wifi_off",
    "quick_contacts_dialer",
    "ring_volume",
    "speaker_phone",
    "stay_current_landscape",
    "stay_current_portrait",
    "swap_calls",
    "textsms",
    "voicemail",
    "vpn_key",
    # 内容
    "add_box",
    "add_circle_outline",
    "archive",
    "backspace",
    "block",
    "clear",
    "content_copy",
    "content_cut",
    "content_paste",
    "create",
    "drafts",
    "filter_list",
    "flag",
    "forward",
    "gesture",
    "inbox",
    "link",
    "mail",
    "markunread",
    "move_to_inbox",
    "next_week",
    "redo",
    "remove",
    "remove_circle",
    "remove_circle_outline",
    "reply",
    "reply_all",
    "report",
    "save",
    "select_all",
    "send",
    "sort",
    "text_format",
    "unarchive",
    "undo",
    "weekend",
    # 设备
    "access_alarm",
    "access_alarms",
    "access_time",
    "add_alarm",
    "airplanemode_off",
    "airplanemode_on",
    "battery_alert",
    "battery_charging_full",
    "battery_full",
    "battery_std",
    "battery_unknown",
    "bluetooth",
    "bluetooth_connected",
    "bluetooth_disabled",
    "bluetooth_searching",
    "brightness_auto",
    "brightness_high",
    "brightness_low",
    "brightness_medium",
    "data_usage",
    "developer_mode",
    "devices",
    "dvr",
    "gps_fixed",
    "gps_not_fixed",
    "gps_off",
    "location_disabled",
    "location_searching",
    "mobile_friendly",
    "mobile_off",
    "network_cell",
    "network_wifi",
    "nfc",
    "screen_lock_landscape",
    "screen_lock_portrait",
    "screen_lock_rotation",
    "screen_rotation",
    "sd_storage",
    "settings_system_daydream",
    "signal_cellular_4_bar",
    "signal_cellular_connected_no_internet_4_bar",
    "signal_cellular_no_sim",
    "signal_cellular_null",
    "signal_cellular_off",
    "signal_wifi_4_bar",
    "signal_wifi_4_bar_lock",
    "signal_wifi_off",
    "storage",
    "usb",
    "wifi",
    "wifi_lock",
    "wifi_tethering",
    # 编辑器
    "attach_file",
    "attach_money",
    "border_all",
    "border_bottom",
    "border_clear",
    "border_color",
    "border_horizontal",
    "border_inner",
    "border_left",
    "border_outer",
    "border_right",
    "border_style",
    "border_top",
    "border_vertical",
    "format_align_center",
    "format_align_justify",
    "format_align_left",
    "format_align_right",
    "format_bold",
    "format_clear",
    "format_color_fill",
    "format_color_reset",
    "format_color_text",
    "format_indent_decrease",
    "format_indent_increase",
    "format_italic",
    "format_line_spacing",
    "format_list_bulleted",
    "format_list_numbered",
    "format_paint",
    "format_quote",
    "format_size",
    "format_strikethrough",
    "format_textdirection_l_to_r",
    "format_textdirection_r_to_l",
    "format_underlined",
    "functions",
    "insert_chart",
    "insert_comment",
    "insert_drive_file",
    "insert_emoticon",
    "insert_invitation",
    "insert_link",
    "insert_photo",
    "merge_type",
    "mode_comment",
    "mode_edit",
    "money_off",
    "publish",
    "short_text",
    "space_bar",
    "strikethrough_s",
    "text_fields",
    "vertical_align_bottom",
    "vertical_align_center",
    "vertical_align_top",
    "wrap_text",
    # 文件
    "attachment",
    "cloud",
    "cloud_circle",
    "cloud_done",
    "cloud_download",
    "cloud_off",
    "cloud_queue",
    "cloud_upload",
    "file_download",
    "file_upload",
    "folder",
    "folder_open",
    "folder_shared",
    # 硬件
    "cast",
    "cast_connected",
    "computer",
    "desktop_mac",
    "desktop_windows",
    "developer_board",
    "device_hub",
    "devices_other",
    "dock",
    "gamepad",
    "headset",
    "headset_mic",
    "keyboard",
    "keyboard_arrow_down",
    "keyboard_arrow_left",
    "keyboard_arrow_right",
    "keyboard_arrow_up",
    "keyboard_backspace",
    "keyboard_capslock",
    "keyboard_hide",
    "keyboard_return",
    "keyboard_tab",
    "keyboard_voice",
    "laptop",
    "laptop_chromebook",
    "laptop_mac",
    "laptop_windows",
    "memory",
    "mouse",
    "phone_android",
    "phone_iphone",
    "phonelink",
    "phonelink_off",
    "power_input",
    "router",
    "scanner",
    "security",
    "sim_card",
    "smartphone",
    "speaker",
    "speaker_group",
    "tablet",
    "tablet_android",
    "tablet_mac",
    "toys",
    "tv",
    "watch",
    # 图像
    "add_a_photo",
    "add_to_photos",
    "adjust",
    "assistant",
    "assistant_photo",
    "audiotrack",
    "blur_circular",
    "blur_linear",
    "blur_off",
    "blur_on",
    "brightness_1",
    "brightness_2",
    "brightness_3",
    "brightness_4",
    "brightness_5",
    "brightness_6",
    "brightness_7",
    "broken_image",
    "brush",
    "burst_mode",
    "camera",
    "camera_alt",
    "camera_front",
    "camera_rear",
    "camera_roll",
    "center_focus_strong",
    "center_focus_weak",
    "collections",
    "color_lens",
    "colorize",
    "compare",
    "control_point",
    "control_point_duplicate",
    "crop",
    "crop_16_9",
    "crop_3_2",
    "crop_5_4",
    "crop_7_5",
    "crop_din",
    "crop_free",
    "crop_landscape",
    "crop_original",
    "crop_portrait",
    "crop_rotate",
    "crop_square",
    "dehaze",
    "details",
    "edit",
    "exposure",
    "exposure_neg_1",
    "exposure_neg_2",
    "exposure_plus_1",
    "exposure_plus_2",
    "exposure_zero",
    "filter",
    "filter_1",
    "filter_2",
    "filter_3",
    "filter_4",
    "filter_5",
    "filter_6",
    "filter_7",
    "filter_8",
    "filter_9",
    "filter_9_plus",
    "filter_b_and_w",
    "filter_center_focus",
    "filter_drama",
    "filter_frames",
    "filter_hdr",
    "filter_none",
    "filter_tilt_shift",
    "filter_vintage",
    "flare",
    "flash_auto",
    "flash_off",
    "flash_on",
    "flip",
    "gradient",
    "grain",
    "grid_off",
    "grid_on",
    "hdr_off",
    "hdr_on",
    "hdr_strong",
    "hdr_weak",
    "healing",
    "image",
    "image_aspect_ratio",
    "iso",
    "landscape",
    "leak_add",
    "leak_remove",
    "lens",
    "looks",
    "looks_3",
    "looks_4",
    "looks_5",
    "looks_6",
    "looks_one",
    "looks_two",
    "loupe",
    "monochrome_photos",
    "movie_creation",
    "music_note",
    "nature",
    "nature_people",
    "navigate_before",
    "navigate_next",
    "palette",
    "panorama",
    "panorama_fish_eye",
    "panorama_horizontal",
    "panorama_vertical",
    "panorama_wide_angle",
    "photo",
    "photo_album",
    "photo_camera",
    "photo_library",
    "photo_size_select_actual",
    "photo_size_select_large",
    "photo_size_select_small",
    "picture_as_pdf",
    "portrait",
    "remove_red_eye",
    "rotate_90_degrees_ccw",
    "rotate_left",
    "rotate_right",
    "slideshow",
    "straighten",
    "style",
    "switch_camera",
    "switch_video",
    "tag_faces",
    "texture",
    "timelapse",
    "timer",
    "timer_10",
    "timer_3",
    "timer_off",
    "tonality",
    "transform",
    "tune",
    "view_comfy",
    "view_compact",
    "vignette",
    "wb_auto",
    "wb_cloudy",
    "wb_incandescent",
    "wb_iridescent",
    "wb_sunny",
    # 地图
    "add_location",
    "beenhere",
    "directions",
    "directions_bike",
    "directions_boat",
    "directions_bus",
    "directions_car",
    "directions_railway",
    "directions_run",
    "directions_subway",
    "directions_transit",
    "directions_walk",
    "edit_location",
    "ev_station",
    "flight",
    "hotel",
    "layers",
    "layers_clear",
    "local_activity",
    "local_airport",
    "local_atm",
    "local_bar",
    "local_cafe",
    "local_car_wash",
    "local_convenience_store",
    "local_dining",
    "local_drink",
    "local_florist",
    "local_gas_station",
    "local_grocery_store",
    "local_hospital",
    "local_hotel",
    "local_laundry_service",
    "local_library",
    "local_mall",
    "local_movies",
    "local_offer",
    "local_parking",
    "local_pharmacy",
    "local_phone",
    "local_pizza",
    "local_play",
    "local_post_office",
    "local_printshop",
    "local_see",
    "local_shipping",
    "local_taxi",
    "map",
    "my_location",
    "navigation",
    "near_me",
    "person_pin",
    "person_pin_circle",
    "pin_drop",
    "place",
    "rate_review",
    "restaurant",
    "restaurant_menu",
    "satellite",
    "store_mall_directory",
    "streetview",
    "subway",
    "terrain",
    "traffic",
    "train",
    "tram",
    "transfer_within_a_station",
    "zoom_out_map",
    # 导航
    "apps",
    "arrow_back",
    "arrow_downward",
    "arrow_drop_down",
    "arrow_drop_down_circle",
    "arrow_drop_up",
    "arrow_forward",
    "arrow_upward",
    "cancel",
    "check",
    "chevron_left",
    "chevron_right",
    "close",
    "expand_less",
    "expand_more",
    "first_page",
    "fullscreen",
    "fullscreen_exit",
    "last_page",
    "menu",
    "more_horiz",
    "more_vert",
    "refresh",
    "subdirectory_arrow_left",
    "subdirectory_arrow_right",
    # 通知
    "adb",
    "airline_seat_flat",
    "airline_seat_flat_angled",
    "airline_seat_individual_suite",
    "airline_seat_legroom_extra",
    "airline_seat_legroom_normal",
    "airline_seat_legroom_reduced",
    "airline_seat_recline_extra",
    "airline_seat_recline_normal",
    "bluetooth_audio",
    "confirmation_number",
    "disc_full",
    "do_not_disturb",
    "do_not_disturb_alt",
    "drive_eta",
    "enhanced_encryption",
    "event_available",
    "event_busy",
    "event_note",
    "folder_special",
    "live_tv",
    "mms",
    "more",
    "network_check",
    "network_locked",
    "no_encryption",
    "ondemand_video",
    "personal_video",
    "phone_bluetooth_speaker",
    "phone_forwarded",
    "phone_in_talk",
    "phone_locked",
    "phone_missed",
    "phone_paused",
    "power",
    "priority_high",
    "rv_hookup",
    "sd_card",
    "sim_card_alert",
    "sms",
    "sms_failed",
    "sync",
    "sync_disabled",
    "sync_problem",
    "system_update",
    "tap_and_play",
    "time_to_leave",
    "vibration",
    "voice_chat",
    "vpn_lock",
    "wc",
    "wifi",
    # 地点
    "ac_unit",
    "airport_shuttle",
    "all_inclusive",
    "beach_access",
    "business_center",
    "casino",
    "child_care",
    "child_friendly",
    "fitness_center",
    "free_breakfast",
    "golf_course",
    "hot_tub",
    "kitchen",
    "pool",
    "room_service",
    "rv_hookup",
    "smoke_free",
    "smoking_rooms",
    "spa",
    # 社交
    "cake",
    "domain",
    "group",
    "group_add",
    "location_city",
    "mood",
    "mood_bad",
    "notifications",
    "notifications_active",
    "notifications_none",
    "notifications_off",
    "notifications_paused",
    "pages",
    "party_mode",
    "people",
    "people_outline",
    "person",
    "person_add",
    "person_outline",
    "plus_one",
    "poll",
    "public",
    "school",
    "sentiment_dissatisfied",
    "sentiment_neutral",
    "sentiment_satisfied",
    "sentiment_very_dissatisfied",
    "sentiment_very_satisfied",
    "share",
    "whatshot",
    # 切换
    "check_box",
    "check_box_outline_blank",
    "indeterminate_check_box",
    "radio_button_checked",
    "radio_button_unchecked",
    "star",
    "star_border",
    "star_half",
]


class IconsHelpApp(BaseApp):
    """图标帮助应用程序."""

    ROUTER = "/help/icons"

    def __init__(self) -> None:
        super().__init__()

        self.icon_cards: list[tuple[ui.card, str]] = []

    def render(self) -> None:
        """设置图标帮助应用程序."""
        ui.add_head_html("""
        <style>
            .icon-card {
                transition: all 0.2s ease;
                border-radius: 8px;
            }
            .icon-card:hover {
                transform: translateY(-3px);
                box-shadow: 0 6px 12px rgba(0,0,0,0.1);
            }
            .icon-item {
                display: flex;
                flex-direction: column;
                align-items: center;
                padding: 0;
                cursor: pointer;
            }
            .icon-label {
                font-size: 0.75rem;
                margin-top: 0.2rem;
                text-align: center;
                word-break: break-all;
            }
        </style>
        """)

        # 主要内容
        with ui.column().classes("w-full max-w-6xl mx-auto p-4 gap-4"):
            ui.label("Material Icons 图标库").classes("text-h4 font-bold self-center")
            ui.markdown(
                "本页面展示了NiceGUI中常用的Material Icons, "
                "点击任意图标可将其名称复制到剪贴板.",
            ).classes("self-center text-center")

            # 搜索输入框
            ui.input(
                placeholder="搜索图标...",
                on_change=lambda e: self.on_filter_icons(e.value),
            ).classes("w-full md:w-1/2 self-center").props("outlined rounded")

            # 图标网格
            with ui.grid(columns=6).classes("w-full gap-4"):
                self.icon_cards.clear()
                for icon_name in MATERIAL_ICONS:
                    with ui.card().classes("icon-card") as card:
                        with ui.column().classes(
                            "w-full mx-auto gap-0 flex flex-col items-center",
                        ):
                            ui.icon(icon_name).classes("text-2xl")
                            ui.label(icon_name).classes("icon-label")
                        card.on("click", lambda n=icon_name: self.on_icon_click(str(n)))
                        self.icon_cards.append((card, icon_name))

            ui.separator()

            ui.markdown("""
            ### 使用方法

            要在您的NiceGUI应用程序中使用这些图标:

            ```python
            from nicegui import ui

            ui.icon('icon_name').classes('text-2xl')
            ```

            例如:
            ```python
            ui.icon('home')
            ui.icon('favorite')
            ui.icon('settings')
            ```
            """).classes("w-full")

    # 过滤函数
    def on_filter_icons(self, query: str) -> None:
        """根据搜索查询过滤图标."""
        query = query.lower().strip()

        # 如果查询为空则显示所有图标
        if not query:
            for card, _ in self.icon_cards:
                card.classes(remove="hidden")
            return

        # 根据图标名称过滤
        for card, icon_name in self.icon_cards:
            if query in icon_name.lower():
                card.classes(remove="hidden")
            else:
                card.classes(add="hidden")

    def on_icon_click(self, icon_name: str) -> None:
        """处理图标点击事件."""
        ui.clipboard.write(icon_name)
        ui.notify(f"已复制 '{icon_name}' 到剪贴板", type="positive")


@ui.page(IconsHelpApp.ROUTER)
def icons_page() -> None:
    """显示 Material Icons 图标库."""
    IconsHelpApp().build()

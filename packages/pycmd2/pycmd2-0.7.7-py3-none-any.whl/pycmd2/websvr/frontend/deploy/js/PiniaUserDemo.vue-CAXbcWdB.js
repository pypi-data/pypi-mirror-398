import{u as I}from"./user-DC6J-RGZ.js";import{b7 as Y,aY as S,bO as h,aZ as E,bg as Z,bi as P,b9 as T,bj as l,a_ as i,bk as t,bA as G,bl as a,cq as s,bC as c,bD as y,dm as H,dp as K,dq as Q,dr as W,ba as _}from"./vendor-p_a8ePKq.js";import{a as p}from"./ui-vendor-CYJCTWKH.js";import{_ as X}from"../assets/index-CozMeroQ.js";import"./vue-vendor-CVtHwYAS.js";import"./charts-vendor-ZJQ0DAqP.js";import"./utils-vendor-qrLihgeT.js";const ee={class:"pinia-user-demo"},le={key:1,class:"user-info-section"},oe={class:"user-profile"},te={class:"user-details"},ae={class:"preferences-section"},se={class:"preference-item"},ne={class:"preference-item"},ie={class:"preference-item"},re={class:"profile-edit"},ue={class:"action-section"},de=Y({__name:"PiniaUserDemo",setup(me){const o=I(),g=S(),u=h({email:"demo@example.com",password:"password"}),q={email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度至少为6位",trigger:"blur"}]},r=h({name:"",email:""}),k=E({get:()=>o.isDarkTheme,set:()=>{}}),x=E({get:()=>o.notificationsEnabled,set:()=>{}}),d=S("zh-CN");Z(()=>{o.user&&(r.name=o.user.name,r.email=o.user.email,d.value=o.user.preferences.language)});const z=async()=>{g.value&&await g.value.validate(async C=>{C&&await o.login(u.email,u.password)&&(o.user&&(r.name=o.user.name,r.email=o.user.email,d.value=o.user.preferences.language),p.success("登录成功"))})},B=()=>{o.logout(),p.success("已退出登录")},F=()=>{o.toggleTheme(),p.success(`主题已切换为${o.isDarkTheme?"深色":"浅色"}模式`)},L=()=>{o.toggleNotifications(),p.success(`通知已${o.notificationsEnabled?"开启":"关闭"}`)},$=()=>{o.updatePreferences({language:d.value}),p.success(`语言已更新为 ${d.value}`)},j=()=>{o.updateProfile({name:r.name,email:r.email}),p.success("个人资料已更新")};return(C,e)=>{const f=s("el-input"),m=s("el-form-item"),v=s("el-button"),U=s("el-form"),A=s("el-alert"),b=s("el-divider"),V=s("el-card"),J=s("el-avatar"),N=s("el-icon"),D=s("el-switch"),w=s("el-option"),M=s("el-select"),O=s("el-collapse-item"),R=s("el-collapse");return _(),P("div",ee,[i(o).isAuthenticated?(_(),P("div",le,[l(V,{header:"用户信息",class:"user-card"},{default:t(()=>[a("div",oe,[l(J,{size:80,src:i(o).user?.avatar,class:"avatar"},null,8,["src"]),a("div",te,[a("h2",null,y(i(o).fullName),1),a("p",null,[l(N,null,{default:t(()=>[l(i(H))]),_:1}),c(" "+y(i(o).user?.email),1)])])]),l(b),a("div",ae,[e[14]||(e[14]=a("h3",null,"用户偏好设置",-1)),a("div",se,[e[11]||(e[11]=a("label",null,"主题模式:",-1)),l(D,{modelValue:k.value,"onUpdate:modelValue":e[2]||(e[2]=n=>k.value=n),onChange:F,"active-text":"深色","inactive-text":"浅色","active-icon":i(Q),"inactive-icon":i(K)},null,8,["modelValue","active-icon","inactive-icon"])]),a("div",ne,[e[12]||(e[12]=a("label",null,"语言设置:",-1)),l(M,{modelValue:d.value,"onUpdate:modelValue":e[3]||(e[3]=n=>d.value=n),onChange:$,placeholder:"选择语言"},{default:t(()=>[l(w,{label:"中文",value:"zh-CN"}),l(w,{label:"English",value:"en-US"}),l(w,{label:"日本語",value:"ja-JP"})]),_:1},8,["modelValue"])]),a("div",ie,[e[13]||(e[13]=a("label",null,"通知设置:",-1)),l(D,{modelValue:x.value,"onUpdate:modelValue":e[4]||(e[4]=n=>x.value=n),onChange:L,"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue"])])]),l(b),a("div",re,[e[16]||(e[16]=a("h3",null,"编辑个人资料",-1)),l(U,{model:r,"label-width":"80px"},{default:t(()=>[l(m,{label:"用户名"},{default:t(()=>[l(f,{modelValue:r.name,"onUpdate:modelValue":e[5]||(e[5]=n=>r.name=n)},null,8,["modelValue"])]),_:1}),l(m,{label:"邮箱"},{default:t(()=>[l(f,{modelValue:r.email,"onUpdate:modelValue":e[6]||(e[6]=n=>r.email=n)},null,8,["modelValue"])]),_:1}),l(m,null,{default:t(()=>[l(v,{type:"primary",onClick:j},{default:t(()=>[...e[15]||(e[15]=[c("更新资料",-1)])]),_:1})]),_:1})]),_:1},8,["model"])])]),_:1}),a("div",ue,[l(v,{type:"danger",onClick:B,size:"large"},{default:t(()=>[l(N,null,{default:t(()=>[l(i(W))]),_:1}),e[17]||(e[17]=c(" 退出登录 ",-1))]),_:1})])])):(_(),T(V,{key:0,header:"用户认证示例 - User Store",class:"auth-card"},{default:t(()=>[l(U,{model:u,rules:q,ref_key:"loginFormRef",ref:g,"label-width":"80px"},{default:t(()=>[l(m,{label:"邮箱",prop:"email"},{default:t(()=>[l(f,{modelValue:u.email,"onUpdate:modelValue":e[0]||(e[0]=n=>u.email=n),placeholder:"demo@example.com"},null,8,["modelValue"])]),_:1}),l(m,{label:"密码",prop:"password"},{default:t(()=>[l(f,{modelValue:u.password,"onUpdate:modelValue":e[1]||(e[1]=n=>u.password=n),type:"password",placeholder:"password","show-password":""},null,8,["modelValue"])]),_:1}),l(m,null,{default:t(()=>[l(v,{type:"primary",onClick:z,loading:i(o).loading,class:"login-button"},{default:t(()=>[...e[7]||(e[7]=[c(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),i(o).error?(_(),T(A,{key:0,title:i(o).error,type:"error",closable:!1,class:"error-alert"},null,8,["title"])):G("",!0),l(b,null,{default:t(()=>[...e[8]||(e[8]=[c("提示",-1)])]),_:1}),e[9]||(e[9]=a("p",null,"测试账号: demo@example.com",-1)),e[10]||(e[10]=a("p",null,"测试密码: password",-1))]),_:1})),l(V,{header:"Store 状态查看",class:"state-view"},{default:t(()=>[l(R,null,{default:t(()=>[l(O,{title:"完整状态",name:"state"},{default:t(()=>[a("pre",null,y(JSON.stringify(i(o).$state,null,2)),1)]),_:1})]),_:1})]),_:1})])}}}),Ve=X(de,[["__scopeId","data-v-2d7f5842"]]);export{Ve as default};

import{u as R}from"./user-DC6J-RGZ.js";import{u as W}from"./counter-CebqBB_f.js";import{u as X}from"./todos-CQbxZGhu.js";import{b7 as ee,aY as S,bO as te,aZ as D,bg as oe,bi as x,bj as e,bk as t,bl as r,cq as a,a_ as l,bD as w,bC as d,ds as le,dt as se,bA as ae,dn as ne,du as re,dv as ie,ba as V}from"./vendor-p_a8ePKq.js";import{a as c}from"./ui-vendor-CYJCTWKH.js";import{_ as ue}from"../assets/index-CozMeroQ.js";import"./vue-vendor-CVtHwYAS.js";import"./charts-vendor-ZJQ0DAqP.js";import"./utils-vendor-qrLihgeT.js";const de={class:"pinia-composition-demo"},ce={class:"composition-section"},pe={class:"card-header"},me={key:0,class:"user-info"},_e={class:"user-details"},fe={key:1,class:"login-prompt"},ve={class:"card-header"},ge={class:"counter-display"},ye={class:"counter-actions"},be={class:"card-header"},we={class:"stats-container"},Ce={class:"card-header"},ke={class:"quick-actions"},he={key:0,class:"operation-result"},Se=ee({__name:"PiniaCompositionDemo",setup(xe){const s=R(),i=W(),u=X(),T=S(!1),C=S(""),k=S(!1),p=S(!1),v=te({email:"demo@example.com",password:"password"}),M=D(()=>Math.abs(i.count*2+u.totalCount)),P=D(()=>{let n=0;return s.isAuthenticated&&(n+=30),n+=Math.min(i.count*1.5,30),n+=u.completionPercentage*.4,Math.round(n)}),O=D(()=>{const n=P.value;return n===100?"success":n>=60?"warning":"exception"}),U=()=>{k.value=!0},z=async()=>{await s.login(v.email,v.password)?(k.value=!1,c.success("登录成功"),await u.fetchTodos()):c.error("登录失败，请检查邮箱和密码")},q=async()=>{if(p.value){c.warning("操作正在进行中，请稍候...");return}T.value=!0,p.value=!0,C.value="";try{await new Promise(n=>setTimeout(n,1e3)),i.increment(10),s.isAuthenticated?u.addTodo(`由 ${s.user?.name} 创建的任务`):u.addTodo("执行了组合操作"),s.isAuthenticated&&s.updatePreferences({theme:s.isDarkTheme?"light":"dark"}),C.value="组合操作执行成功！已更新多个 Store 的状态",c.success("操作完成")}catch(n){c.error("操作失败"),console.error("Complex operation failed:",n)}finally{T.value=!1,p.value=!1}},L=async()=>{if(p.value){c.warning("操作正在进行中，请稍候...");return}if(!s.isAuthenticated){c.warning("请先登录");return}p.value=!0;try{await new Promise(o=>setTimeout(o,800)),i.reset();const n=s.user?.name.charCodeAt(0)||0;i.increment(n%10),u.addTodo(`${s.user?.name} 的待办事项`),c.success("数据同步成功")}catch(n){c.error("同步失败"),console.error("Data sync failed:",n)}finally{p.value=!1}},B=()=>{i.reset(),u.clearCompleted(),C.value="",p.value=!1,c.success("所有 Store 状态已重置")};return oe(async()=>{try{s.isAuthenticated&&await u.fetchTodos()}catch(n){c.error("初始化数据失败"),console.error("Initialization failed:",n)}}),(n,o)=>{const g=a("el-icon"),I=a("el-avatar"),J=a("el-tag"),m=a("el-button"),E=a("el-empty"),y=a("el-card"),f=a("el-col"),j=a("Counter"),b=a("el-statistic"),F=a("el-button-group"),h=a("el-row"),Y=a("el-progress"),Z=a("Magic"),G=a("el-alert"),$=a("el-input"),N=a("el-form-item"),H=a("el-form"),K=a("el-dialog"),A=a("el-tab-pane"),Q=a("el-tabs");return V(),x("div",de,[e(y,{header:"Store 组合示例 - 多 Store 协同工作"},{default:t(()=>[r("div",ce,[e(h,{gutter:20},{default:t(()=>[e(f,{span:24,md:12},{default:t(()=>[e(y,{shadow:"hover",class:"section-card"},{header:t(()=>[r("div",pe,[e(g,null,{default:t(()=>[e(l(le))]),_:1}),o[7]||(o[7]=r("span",null,"用户信息",-1))])]),default:t(()=>[l(s).isAuthenticated?(V(),x("div",me,[e(I,{size:50,src:l(s).user?.avatar},null,8,["src"]),r("div",_e,[r("h3",null,w(l(s).fullName),1),r("p",null,w(l(s).user?.email),1),e(J,{type:l(s).isDarkTheme?"info":"primary"},{default:t(()=>[d(w(l(s).isDarkTheme?"深色主题":"浅色主题"),1)]),_:1},8,["type"])]),e(m,{type:"danger",size:"small",onClick:l(s).logout,style:{"margin-top":"15px"}},{default:t(()=>[...o[8]||(o[8]=[d(" 退出登录 ",-1)])]),_:1},8,["onClick"])])):(V(),x("div",fe,[e(E,{description:"请先登录","image-size":80}),e(m,{type:"primary",onClick:U},{default:t(()=>[...o[9]||(o[9]=[d("登录",-1)])]),_:1})]))]),_:1})]),_:1}),e(f,{span:24,md:12},{default:t(()=>[e(y,{shadow:"hover",class:"section-card"},{header:t(()=>[r("div",ve,[e(g,null,{default:t(()=>[e(j)]),_:1}),o[10]||(o[10]=r("span",null,"计数器",-1))])]),default:t(()=>[r("div",ge,[e(b,{title:"当前计数",value:l(i).count},null,8,["value"]),e(b,{title:"双倍计数",value:l(i).doubleCount},null,8,["value"])]),r("div",ye,[e(F,null,{default:t(()=>[e(m,{onClick:o[0]||(o[0]=_=>l(i).decrement())},{default:t(()=>[...o[11]||(o[11]=[d("-",-1)])]),_:1}),e(m,{type:"primary",onClick:o[1]||(o[1]=_=>l(i).increment())},{default:t(()=>[...o[12]||(o[12]=[d("+",-1)])]),_:1})]),_:1}),e(m,{type:"warning",size:"small",onClick:o[2]||(o[2]=_=>l(i).reset())},{default:t(()=>[...o[13]||(o[13]=[d(" 重置 ",-1)])]),_:1})])]),_:1})]),_:1})]),_:1}),e(h,{gutter:20,style:{"margin-top":"20px"}},{default:t(()=>[e(f,{span:24},{default:t(()=>[e(y,{shadow:"hover",class:"section-card"},{header:t(()=>[r("div",be,[e(g,null,{default:t(()=>[e(l(se))]),_:1}),o[14]||(o[14]=r("span",null,"用户活动统计",-1))])]),default:t(()=>[r("div",we,[e(h,{gutter:20},{default:t(()=>[e(f,{span:6},{default:t(()=>[e(b,{title:"用户状态",value:l(s).isAuthenticated?"已登录":"未登录"},null,8,["value"])]),_:1}),e(f,{span:6},{default:t(()=>[e(b,{title:"计数操作",value:M.value},null,8,["value"])]),_:1}),e(f,{span:6},{default:t(()=>[e(b,{title:"待办事项",value:l(u).totalCount},null,8,["value"])]),_:1}),e(f,{span:6},{default:t(()=>[e(b,{title:"完成率",value:l(u).completionPercentage,suffix:"%"},null,8,["value"])]),_:1})]),_:1}),e(Y,{percentage:P.value,status:O.value,style:{"margin-top":"20px"}},null,8,["percentage","status"])])]),_:1})]),_:1})]),_:1}),e(h,{style:{"margin-top":"20px"}},{default:t(()=>[e(f,{span:24},{default:t(()=>[e(y,{shadow:"hover",class:"section-card"},{header:t(()=>[r("div",Ce,[e(g,null,{default:t(()=>[e(l(ie))]),_:1}),o[15]||(o[15]=r("span",null,"快速操作",-1))])]),default:t(()=>[r("div",ke,[e(m,{type:"primary",onClick:q,loading:T.value||p.value},{default:t(()=>[e(g,null,{default:t(()=>[e(Z)]),_:1}),o[16]||(o[16]=d(" 执行组合操作 ",-1))]),_:1},8,["loading"]),e(m,{type:"success",onClick:L,disabled:!l(s).isAuthenticated||p.value},{default:t(()=>[e(g,null,{default:t(()=>[e(l(ne))]),_:1}),o[17]||(o[17]=d(" 同步数据 ",-1))]),_:1},8,["disabled"]),e(m,{type:"warning",onClick:B,disabled:p.value},{default:t(()=>[e(g,null,{default:t(()=>[e(l(re))]),_:1}),o[18]||(o[18]=d(" 重置所有状态 ",-1))]),_:1},8,["disabled"])]),C.value?(V(),x("div",he,[e(G,{title:C.value,type:"success",closable:!1},null,8,["title"])])):ae("",!0)]),_:1})]),_:1})]),_:1})])]),_:1}),e(K,{modelValue:k.value,"onUpdate:modelValue":o[6]||(o[6]=_=>k.value=_),title:"快速登录",width:"400px"},{footer:t(()=>[e(m,{onClick:o[5]||(o[5]=_=>k.value=!1)},{default:t(()=>[...o[19]||(o[19]=[d("取消",-1)])]),_:1}),e(m,{type:"primary",onClick:z},{default:t(()=>[...o[20]||(o[20]=[d("登录",-1)])]),_:1})]),default:t(()=>[e(H,{model:v,"label-width":"80px"},{default:t(()=>[e(N,{label:"邮箱"},{default:t(()=>[e($,{modelValue:v.email,"onUpdate:modelValue":o[3]||(o[3]=_=>v.email=_),placeholder:"demo@example.com"},null,8,["modelValue"])]),_:1}),e(N,{label:"密码"},{default:t(()=>[e($,{modelValue:v.password,"onUpdate:modelValue":o[4]||(o[4]=_=>v.password=_),type:"password",placeholder:"password"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(y,{header:"Store 状态查看",class:"state-view"},{default:t(()=>[e(Q,null,{default:t(()=>[e(A,{label:"User Store",name:"user"},{default:t(()=>[r("pre",null,w(JSON.stringify(l(s).$state,null,2)),1)]),_:1}),e(A,{label:"Counter Store",name:"counter"},{default:t(()=>[r("pre",null,w(JSON.stringify(l(i).$state,null,2)),1)]),_:1}),e(A,{label:"Todos Store",name:"todos"},{default:t(()=>[r("pre",null,w(JSON.stringify(l(u).$state,null,2)),1)]),_:1})]),_:1})]),_:1})])}}}),Ue=ue(Se,[["__scopeId","data-v-9d3ac869"]]);export{Ue as default};

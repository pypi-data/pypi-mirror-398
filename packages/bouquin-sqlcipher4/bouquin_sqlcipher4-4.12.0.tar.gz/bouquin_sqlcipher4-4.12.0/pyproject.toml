[tool.poetry]
name = "bouquin-sqlcipher4"
version = "4.12.0"
description = "DB-API 2.0 interface for SQLCipher 4.x, for use with Bouquin"
authors = [
  "Miguel Jacq <mig@mig5.net>",
  "laggykiller <chaudominic2@gmail.com>",
  "Charles Leifer <coleifer@gmail.com>",
]
license = "MIT"  # Poetry expects SPDX-ish strings; "MIT" is the usual one.
readme = "README.md"

# If your package dir is at repo root:
packages = [{ include = "sqlcipher4" }]

homepage = "https://git.mig5.net/mig5/bouquin-sqlcipher4"
repository = "https://git.mig5.net/mig5/bouquin-sqlcipher4"

# IMPORTANT: include native build outputs in wheel, and C sources/headers in sdist
include = [
  { path = "sqlcipher4/**/*.so",  format = "wheel" },
  { path = "sqlcipher4/**/*.pyd", format = "wheel" },

  { path = "src/**/*.c",  format = "sdist" },
  { path = "src/**/*.h",  format = "sdist" },
  { path = "src/sqlcipher/sqlite3.c", format = "sdist" },
  { path = "src/sqlcipher/sqlite3.h", format = "sdist" },
]

[tool.poetry.dependencies]
python = "^3.10"

[tool.poetry.group.dev.dependencies]
pytest = "^8"
pytest-cov = "^5"

[tool.poetry.build]
script = "scripts/build-extension.py"

[build-system]
requires = [
  "poetry-core>=1.0.0",
  "setuptools>=45",
  "wheel",
  "conan>=2.0",
  "lipomerge>=0.1.1",
  "urllib3<2.0",
]
build-backend = "poetry.core.masonry.api"


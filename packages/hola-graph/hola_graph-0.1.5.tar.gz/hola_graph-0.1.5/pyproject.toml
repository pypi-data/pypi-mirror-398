[project]
name = "hola-graph"
version = "0.1.5"
description = "A pybind11 wrapper to adaptagrams HOLA: Human-like Orthogonal Layout Algorithm."
readme = "README.md"
authors = [
    { name = "Shakeeb Alireza", email = "me@example.org" }
]
requires-python = ">=3.9"
license = "MIT"
keywords = ["graph", "layout", "hola", "orthogonal", "diagram", "visualization"]
classifiers = [
    "Development Status :: 4 - Beta",
    "Intended Audience :: Developers",
    "Intended Audience :: Science/Research",
    "Operating System :: MacOS",
    "Operating System :: POSIX :: Linux",
    "Programming Language :: C++",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.9",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: Python :: 3.13",
    "Topic :: Scientific/Engineering :: Visualization",
]
dependencies = []

[dependency-groups]
dev = [
    "matplotlib>=3.5.3",
    "mypy>=1.4.1",
    "networkx>=2.6.3",
    "pytest>=7.4.4",
    "ruff>=0.1.0",
    "twine>=6.2.0",
]

[project.optional-dependencies]
networkx = ["networkx>=2.6"]
plot = ["matplotlib>=3.5"]
all = ["networkx>=2.6", "matplotlib>=3.5"]

[project.urls]
Homepage = "https://github.com/shakfu/hola-graph"
Repository = "https://github.com/shakfu/hola-graph"
Issues = "https://github.com/shakfu/hola-graph/issues"

[build-system]
requires = ["scikit-build-core>=0.11", "pybind11>=2.10"]
build-backend = "scikit_build_core.build"

[tool.scikit-build]
minimum-version = "build-system.requires"
wheel.install-dir = "hola_graph"
wheel.packages = ["src/hola_graph"]
sdist.include = ["scripts/*"]

[tool.cibuildwheel]
build = "cp39-* cp310-* cp311-* cp312-* cp313-*"
# Windows disabled: adaptagrams uses deprecated C++ features removed in C++17
skip = "*-win* *-manylinux_i686 *-musllinux_* pp*"
test-extras = "all"
test-command = "pytest {project}/tests -v --ignore={project}/tests/test_examples.py -o pythonpath="
test-skip = "*-macosx_arm64 *-macosx_universal2:arm64"

[tool.cibuildwheel.macos]
archs = ["x86_64", "arm64"]

[tool.cibuildwheel.linux]
archs = ["x86_64"]

[tool.pytest.ini_options]
pythonpath = ["src", "build"]
testpaths = ["tests"]

[tool.mypy]
python_version = "3.9"
warn_return_any = true
warn_unused_configs = true
ignore_missing_imports = true

[tool.ruff]
target-version = "py39"

[tool.ruff.lint]
extend-select = [
  "B",   # flake8-bugbear
  "I",   # isort
  "PGH", # pygrep-hooks
  "RUF", # Ruff-specific
  "UP",  # pyupgrade
]

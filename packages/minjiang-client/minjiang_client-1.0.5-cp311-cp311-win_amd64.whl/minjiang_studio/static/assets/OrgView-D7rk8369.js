import{d as L,e as q,f as V,h as y,d8 as X,b as B,c as be,C as T,o as j,i as t,B as A,w as o,t as m,l as e,N as oe,a9 as N,s as C,O as ee,ao as ye,d9 as Re,r as b,a8 as G,W as ne,V as Q,v as ae,k as se,m as le,n as we,p as W,U as H,da as Oe,d5 as $e,ag as Ve,aa as Ee,aw as re,db as Ie,dc as te,I as E,c_ as xe,a3 as ie,E as J,dd as Le,H as qe,de as Ae,df as ce,A as ue,a7 as Ce,dg as ke,dh as Se,di as pe,dj as De,dk as Pe,dl as me,as as Me,ar as ze,K as Be,S as Ge,dm as Te,dn as Ne,dp as je,a as He,at as ge,ap as Fe,aQ as fe,d2 as Ke,d1 as Ze,aq as Qe,j as We}from"./index-BwlMlHGj.js";import{C as Je}from"./ChevronBack-4qMPmFT6.js";import{U as Ue}from"./UserMultiple-CIqr3hhG.js";import{A as ve}from"./Add-CvJqOuqG.js";import{_ as de}from"./Popconfirm-GYskt_Un.js";import{_ as Y}from"./DataTable-CfoqEf8t.js";import{N as _e}from"./Switch-B5yYo9Bh.js";import{i as Xe}from"./json-editor-vue-CSlvxqm5.js";import{_ as Ye}from"./PaginationView.vue_vue_type_script_setup_true_lang-IR55gl3R.js";import"./Checkbox-UFZekRDE.js";import"./RadioGroup-BB1a5vev.js";import"./Pagination-Do-f8cxW.js";import"./download-C2161hUv.js";const et={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},tt=L({name:"Devices",render:function(i,n){return V(),q("svg",et,n[0]||(n[0]=[y("path",{d:"M10 30H4a2 2 0 0 1-2-2V16a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2zM4 16v12h6V16z",fill:"currentColor"},null,-1),y("path",{d:"M28 4H6a2 2 0 0 0-2 2v6h2V6h22v14H14v2h2v4h-2v2h9v-2h-5v-4h10a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z",fill:"currentColor"},null,-1)]))}}),ot={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},he=L({name:"Settings",render:function(i,n){return V(),q("svg",ot,n[0]||(n[0]=[y("path",{d:"M27 16.76V16v-.77l1.92-1.68A2 2 0 0 0 29.3 11l-2.36-4a2 2 0 0 0-1.73-1a2 2 0 0 0-.64.1l-2.43.82a11.35 11.35 0 0 0-1.31-.75l-.51-2.52a2 2 0 0 0-2-1.61h-4.68a2 2 0 0 0-2 1.61l-.51 2.52a11.48 11.48 0 0 0-1.32.75l-2.38-.86A2 2 0 0 0 6.79 6a2 2 0 0 0-1.73 1L2.7 11a2 2 0 0 0 .41 2.51L5 15.24v1.53l-1.89 1.68A2 2 0 0 0 2.7 21l2.36 4a2 2 0 0 0 1.73 1a2 2 0 0 0 .64-.1l2.43-.82a11.35 11.35 0 0 0 1.31.75l.51 2.52a2 2 0 0 0 2 1.61h4.72a2 2 0 0 0 2-1.61l.51-2.52a11.48 11.48 0 0 0 1.32-.75l2.42.82a2 2 0 0 0 .64.1a2 2 0 0 0 1.73-1l2.28-4a2 2 0 0 0-.41-2.51zM25.21 24l-3.43-1.16a8.86 8.86 0 0 1-2.71 1.57L18.36 28h-4.72l-.71-3.55a9.36 9.36 0 0 1-2.7-1.57L6.79 24l-2.36-4l2.72-2.4a8.9 8.9 0 0 1 0-3.13L4.43 12l2.36-4l3.43 1.16a8.86 8.86 0 0 1 2.71-1.57L13.64 4h4.72l.71 3.55a9.36 9.36 0 0 1 2.7 1.57L25.21 8l2.36 4l-2.72 2.4a8.9 8.9 0 0 1 0 3.13L27.57 20z",fill:"currentColor"},null,-1),y("path",{d:"M16 22a6 6 0 1 1 6-6a5.94 5.94 0 0 1-6 6zm0-10a3.91 3.91 0 0 0-4 4a3.91 3.91 0 0 0 4 4a3.91 3.91 0 0 0 4-4a3.91 3.91 0 0 0-4-4z",fill:"currentColor"},null,-1)]))}}),nt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},at=L({name:"TwoFactorAuthentication",render:function(i,n){return V(),q("svg",nt,n[0]||(n[0]=[y("path",{d:"M11 23.18l-2-2.001l-1.411 1.41L11 26l6-6l-1.41-1.41L11 23.18z",fill:"currentColor"},null,-1),y("path",{d:"M28 30h-4v-2h4V16h-4V8a4.005 4.005 0 0 0-4-4V2a6.007 6.007 0 0 1 6 6v6h2a2.002 2.002 0 0 1 2 2v12a2.002 2.002 0 0 1-2 2z",fill:"currentColor"},null,-1),y("path",{d:"M20 14h-2V8A6 6 0 0 0 6 8v6H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V16a2 2 0 0 0-2-2zM8 8a4 4 0 0 1 8 0v6H8zm12 20H4V16h16z",fill:"currentColor"},null,-1)]))}}),st={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},lt=L({name:"UserSettings",render:function(i,n){return V(),q("svg",st,n[0]||(n[0]=[y("path",{d:"M30 10V8h-2.101a4.968 4.968 0 0 0-.732-1.753l1.49-1.49l-1.414-1.414l-1.49 1.49A4.968 4.968 0 0 0 24 4.101V2h-2v2.101a4.968 4.968 0 0 0-1.753.732l-1.49-1.49l-1.414 1.414l1.49 1.49A4.968 4.968 0 0 0 18.101 8H16v2h2.101a4.968 4.968 0 0 0 .732 1.753l-1.49 1.49l1.414 1.414l1.49-1.49a4.968 4.968 0 0 0 1.753.732V16h2v-2.101a4.968 4.968 0 0 0 1.753-.732l1.49 1.49l1.414-1.414l-1.49-1.49A4.968 4.968 0 0 0 27.899 10zm-7 2a3 3 0 1 1 3-3a3.003 3.003 0 0 1-3 3z",fill:"currentColor"},null,-1),y("path",{d:"M16 30h-2v-5a3.003 3.003 0 0 0-3-3H7a3.003 3.003 0 0 0-3 3v5H2v-5a5.006 5.006 0 0 1 5-5h4a5.006 5.006 0 0 1 5 5z",fill:"currentColor"},null,-1),y("path",{d:"M9 10a3 3 0 1 1-3 3a3 3 0 0 1 3-3m0-2a5 5 0 1 0 5 5a5 5 0 0 0-5-5z",fill:"currentColor"},null,-1)]))}}),rt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},it=L({name:"AppFolder24Filled",render:function(i,n){return V(),q("svg",rt,n[0]||(n[0]=[y("g",{fill:"none"},[y("path",{d:"M18.25 3A2.75 2.75 0 0 1 21 5.75v12.5A2.75 2.75 0 0 1 18.25 21H5.75A2.75 2.75 0 0 1 3 18.25V5.75A2.75 2.75 0 0 1 5.75 3h12.5zm0 1.5H5.75c-.69 0-1.25.56-1.25 1.25v12.5c0 .69.56 1.25 1.25 1.25h12.5c.69 0 1.25-.56 1.25-1.25V5.75c0-.69-.56-1.25-1.25-1.25zm-8.498 8c.966 0 1.75.784 1.75 1.75v2A1.75 1.75 0 0 1 9.752 18h-2a1.75 1.75 0 0 1-1.75-1.75v-2c0-.966.783-1.75 1.75-1.75h2zm6.497 0c.967 0 1.75.784 1.75 1.75v2A1.75 1.75 0 0 1 16.25 18h-2a1.75 1.75 0 0 1-1.75-1.75v-2c0-.966.784-1.75 1.75-1.75h2zM9.751 6c.966 0 1.75.784 1.75 1.75v2a1.75 1.75 0 0 1-1.75 1.75h-2A1.75 1.75 0 0 1 6 9.75v-2C6 6.784 6.784 6 7.75 6h2zm6.497 0c.967 0 1.75.784 1.75 1.75v2a1.75 1.75 0 0 1-1.75 1.75h-2a1.75 1.75 0 0 1-1.75-1.75v-2c0-.966.784-1.75 1.75-1.75h2z",fill:"currentColor"})],-1)]))}}),ct={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 12 12"},ut=L({name:"Checkmark12Regular",render:function(i,n){return V(),q("svg",ct,n[0]||(n[0]=[y("g",{fill:"none"},[y("path",{d:"M9.854 3.146a.5.5 0 0 1 0 .708l-4.5 4.5a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L5 7.293l4.146-4.147a.5.5 0 0 1 .708 0z",fill:"currentColor"})],-1)]))}}),dt={class:"flex items-center justify-start gap-2"},_t={class:"flex flex-1 justify-center items-center gap-5"},pt={class:"text-2xl flex items-center justify-center gap-1"},mt={key:0,class:"flex items-center gap-1"},gt={class:"flex items-center gap-1"},ft={class:"flex items-center gap-1"},vt=L({__name:"OrgInfo",setup(I){const i=X(),{t:n}=B(),g=be(),l=T(),r=async()=>{const k=l.query.id;if(!k)return;const[f,w]=await Re({org_id:+k});!f&&(w==null?void 0:w.status)===0&&i.$patch({info:w.data})},z=()=>{g.push({name:"orgList"})};return j(()=>{r()}),(k,f)=>{var v;const w=oe,R=A,_=ye;return V(),q("div",dt,[t(R,{onClick:z,quaternary:""},{icon:o(()=>[t(w,{size:"26"},{default:o(()=>[t(e(Je))]),_:1})]),default:o(()=>[y("span",null,m(e(n)("org.backOrgList")),1)]),_:1}),y("div",_t,[y("div",pt,[t(w,{component:e(ee)},null,8,["component"]),C(" "+m((v=e(i).info)==null?void 0:v.organization_name),1)]),e(i).info?(V(),q("div",mt,[t(_,{bordered:!1,size:"small",type:"success"},{default:o(()=>[C(" ID "+m(+e(l).query.id),1)]),_:1}),t(_,{bordered:!1,type:"warning",size:"small"},{default:o(()=>{var U;return[y("div",gt,[t(w,{component:e(Ue)},null,8,["component"]),C(" "+m((U=e(i).info)==null?void 0:U.member_count)+" "+m(e(n)("org.cmember")),1)])]}),_:1}),t(_,{bordered:!1,type:"info",size:"small"},{default:o(()=>{var U;return[y("div",ft,[t(w,{component:e(ee)},null,8,["component"]),C(" "+m((U=e(i).info)==null?void 0:U.device_count)+" "+m(e(n)("org.cdevice")),1)])]}),_:1})])):N("",!0)])])}}}),ht={class:"flex justify-end"},bt=L({__name:"InsertMember",props:{type:{}},emits:["success"],setup(I,{expose:i,emit:n}){const g=X(),l=b(),{t:r}=B(),z=T(),k=n,f=[{label:r("org.admin"),value:"ORG_ADMIN"},{label:r("org.member"),value:"ORG_MEMBER"}],w=b(!1),R=b(!1),_=()=>{R.value=!1,$.value={user_name:void 0,org_role:void 0}},v=()=>{R.value=!0},U=b({user_name:{required:!0,message:r("common.required")},org_role:{required:!0,message:r("common.required")}}),M=b(null),$=b({user_name:void 0,org_role:void 0}),d=()=>{var u;(u=M.value)==null||u.validate(async s=>{if(s)return;const[p,c]=await Oe({...$.value,org_id:+z.query.id});!p&&(c==null?void 0:c.status)===0&&(k("success"),_())})},x=async()=>{var p;const[u,s]=await $e();!u&&(s==null?void 0:s.status)===0&&(l.value=(p=s.data)==null?void 0:p.map(c=>({...c,label:c.user_name,value:c.user_id})))};return j(()=>{x()}),i({open:v,close:_}),(u,s)=>{const p=le,c=we,a=W,h=se,O=A,P=H,F=ae,K=ne;return V(),G(K,{show:e(R),"onUpdate:show":s[2]||(s[2]=S=>Q(R)?R.value=S:null),"mask-closable":!1,"close-on-esc":!1},{default:o(()=>[t(F,{bordered:!1,"content-class":"!px-5",style:{width:"700px"}},{default:o(()=>[t(h,{ref_key:"formRef",ref:M,model:e($),rules:e(U),size:"small"},{default:o(()=>[t(p,{label:e(r)("org.orgName"),path:"name"},{default:o(()=>{var S;return[C(m((S=e(g).info)==null?void 0:S.organization_name),1)]}),_:1},8,["label"]),t(p,{label:e(r)("org.username"),path:"user_name"},{default:o(()=>[t(c,{value:e($).user_name,"onUpdate:value":s[0]||(s[0]=S=>e($).user_name=S)},null,8,["value"])]),_:1},8,["label"]),t(p,{label:e(r)("org.omtab.role"),path:"org_role"},{default:o(()=>[t(a,{value:e($).org_role,"onUpdate:value":s[1]||(s[1]=S=>e($).org_role=S),options:f},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model","rules"]),y("div",ht,[t(P,null,{default:o(()=>[t(O,{onClick:_,loading:e(w)},{default:o(()=>[C(m(e(r)("common.cancel")),1)]),_:1},8,["loading"]),t(O,{type:"primary",onClick:d,loading:e(w)},{default:o(()=>[C(m(e(r)("org.omtab.invite")),1)]),_:1},8,["loading"])]),_:1})])]),_:1})]),_:1},8,["show"])}}}),yt={class:"flex justify-end"},wt={class:"my-10 text-center"},xt={class:"flex justify-end"},Ct=L({__name:"InsertUser",props:{type:{}},emits:["success"],setup(I,{expose:i,emit:n}){const g=X(),{t:l}=B(),r=T(),z=n,k=[{label:l("org.admin"),value:"ORG_ADMIN"},{label:l("org.member"),value:"ORG_MEMBER"}],f=b(!1),w=b(!1),R=()=>{w.value=!1,M.value={user_name:void 0,org_role:void 0}},_=()=>{w.value=!0},v=b({user_name:{required:!0,message:l("common.required")},org_role:{required:!0,message:l("common.required")}}),U=b(null),M=b({user_name:void 0,org_role:void 0}),$=b(""),d=b(!1),x=()=>{d.value=!1,$.value=""},u=()=>{var s;(s=U.value)==null||s.validate(async p=>{var h;if(p)return;const[c,a]=await Ie({...M.value,org_id:+r.query.id});!c&&(a==null?void 0:a.status)===0&&(d.value=!0,$.value=(h=a.data)==null?void 0:h.token,z("success"),R())})};return Ve(()=>{$.value=""}),i({open:_,close:R}),(s,p)=>{const c=le,a=we,h=W,O=se,P=H,F=ae,K=ne,S=re;return V(),q(Ee,null,[t(K,{show:e(w),"onUpdate:show":p[2]||(p[2]=D=>Q(w)?w.value=D:null),"mask-closable":!1,"close-on-esc":!1},{default:o(()=>[t(F,{bordered:!1,"content-class":"!px-5",style:{width:"700px"}},{default:o(()=>[t(O,{ref_key:"formRef",ref:U,model:e(M),rules:e(v),size:"small"},{default:o(()=>[t(c,{label:e(l)("org.orgName"),path:"name"},{default:o(()=>{var D;return[C(m((D=e(g).info)==null?void 0:D.organization_name),1)]}),_:1},8,["label"]),t(c,{label:e(l)("org.omtab.user"),path:"user_name"},{default:o(()=>[t(a,{value:e(M).user_name,"onUpdate:value":p[0]||(p[0]=D=>e(M).user_name=D)},null,8,["value"])]),_:1},8,["label"]),t(c,{label:e(l)("org.omtab.role"),path:"org_role"},{default:o(()=>[t(h,{value:e(M).org_role,"onUpdate:value":p[1]||(p[1]=D=>e(M).org_role=D),options:k},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model","rules"]),y("div",yt,[t(P,null,{default:o(()=>[t(e(A),{onClick:R,loading:e(f)},{default:o(()=>[C(m(e(l)("common.cancel")),1)]),_:1},8,["loading"]),t(e(A),{type:"primary",onClick:u,loading:e(f)},{default:o(()=>[C(m(e(l)("common.OK")),1)]),_:1},8,["loading"])]),_:1})])]),_:1})]),_:1},8,["show"]),t(K,{show:e(d),"onUpdate:show":p[3]||(p[3]=D=>Q(d)?d.value=D:null),"mask-closable":!1,"close-on-esc":!1},{default:o(()=>[t(F,{bordered:!1,"content-class":"!px-5",style:{width:"500px"}},{default:o(()=>[t(S,{type:"info"},{default:o(()=>[C(m(e(l)("org.omtab.tokenTips")),1)]),_:1}),y("div",wt,m(e($)),1),y("div",xt,[t(P,null,{default:o(()=>[t(e(A),{type:"primary",onClick:x,loading:e(f)},{default:o(()=>[C(m(e(l)("common.OK")),1)]),_:1},8,["loading"])]),_:1})])]),_:1})]),_:1},8,["show"])],64)}}}),kt="data:image/svg+xml,%3csvg%20viewBox='0%200%2042%2042'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='42.000000'%20height='42.000000'%20fill='none'%20clip-path='url(%23clipPath_0)'%20customFrame='url(%23clipPath_0)'%3e%3cdefs%3e%3cclipPath%20id='clipPath_0'%3e%3crect%20width='42.000000'%20height='42.000000'%20x='0.000000'%20y='0.000000'%20rx='5.000000'%20fill='rgb(255,255,255)'%20/%3e%3c/clipPath%3e%3cclipPath%20id='clipPath_1'%3e%3crect%20width='30.000000'%20height='30.000000'%20x='6.000000'%20y='6.000000'%20fill='rgb(255,255,255)'%20/%3e%3c/clipPath%3e%3c/defs%3e%3crect%20id='容器%2049'%20width='42.000000'%20height='42.000000'%20x='0.000000'%20y='0.000000'%20rx='5.000000'%20fill='rgb(51,49,64)'%20fill-opacity='0.5'%20/%3e%3cg%20id='Stroke%202/edit-write-alt'%20clip-path='url(%23clipPath_1)'%20customFrame='url(%23clipPath_1)'%3e%3crect%20id='Stroke%202/edit-write-alt'%20width='30.000000'%20height='30.000000'%20x='6.000000'%20y='6.000000'%20fill='rgb(255,255,255)'%20fill-opacity='0'%20/%3e%3cpath%20id='Vector'%20d='M9.75%2032.25L32.25%2032.25'%20stroke='rgb(108,92,231)'%20stroke-width='2'%20/%3e%3cpath%20id='Vector'%20d='M24.125%2010.375C25.1605%209.3395%2026.8395%209.3395%2027.875%2010.375C28.9105%2011.4106%2028.9105%2013.0895%2027.875%2014.125L15.375%2026.625L10.375%2027.875L11.625%2022.875L24.125%2010.375Z'%20fill-rule='evenodd'%20stroke='rgb(108,92,231)'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='2'%20/%3e%3c/g%3e%3c/svg%3e",Mt="data:image/svg+xml,%3csvg%20viewBox='0%200%2042%2042'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='42.000000'%20height='42.000000'%20fill='none'%20clip-path='url(%23clipPath_2)'%20customFrame='url(%23clipPath_2)'%3e%3cdefs%3e%3cclipPath%20id='clipPath_2'%3e%3crect%20width='42.000000'%20height='42.000000'%20x='0.000000'%20y='0.000000'%20rx='5.000000'%20fill='rgb(255,255,255)'%20/%3e%3c/clipPath%3e%3cclipPath%20id='clipPath_3'%3e%3crect%20width='30.000000'%20height='30.000000'%20x='6.000000'%20y='6.000000'%20fill='rgb(255,255,255)'%20/%3e%3c/clipPath%3e%3c/defs%3e%3crect%20id='容器%2048'%20width='42.000000'%20height='42.000000'%20x='0.000000'%20y='0.000000'%20rx='5.000000'%20fill='rgb(255,0,0)'%20fill-opacity='0.25'%20/%3e%3cg%20id='Icon%20/%20delete%20user%2024%20Outline'%20clip-path='url(%23clipPath_3)'%20customFrame='url(%23clipPath_3)'%3e%3crect%20id='Icon%20/%20delete%20user%2024%20Outline'%20width='30.000000'%20height='30.000000'%20x='6.000000'%20y='6.000000'%20/%3e%3cpath%20id='Vector'%20d='M22.625%2021.275C23.292%2020.6977%2023.8269%2019.9836%2024.1936%2019.1813C24.5602%2018.379%2024.75%2017.5071%2024.75%2016.625C24.75%2014.9674%2024.0915%2013.3777%2022.9194%2012.2056C21.7473%2011.0335%2020.1576%2010.375%2018.5%2010.375C16.8424%2010.375%2015.2527%2011.0335%2014.0806%2012.2056C12.9085%2013.3777%2012.25%2014.9674%2012.25%2016.625C12.25%2017.5071%2012.4398%2018.379%2012.8064%2019.1813C13.1731%2019.9836%2013.708%2020.6977%2014.375%2021.275C12.6252%2022.0674%2011.1406%2023.3469%2010.0987%2024.9607C9.05687%2026.5745%208.50184%2028.4541%208.5%2030.375C8.5%2030.7065%208.6317%2031.0245%208.86612%2031.2589C9.10054%2031.4933%209.41848%2031.625%209.75%2031.625C10.0815%2031.625%2010.3995%2031.4933%2010.6339%2031.2589C10.8683%2031.0245%2011%2030.7065%2011%2030.375C11%2028.3859%2011.7902%2026.4782%2013.1967%2025.0717C14.6032%2023.6652%2016.5109%2022.875%2018.5%2022.875C20.4891%2022.875%2022.3968%2023.6652%2023.8033%2025.0717C25.2098%2026.4782%2026%2028.3859%2026%2030.375C26%2030.7065%2026.1317%2031.0245%2026.3661%2031.2589C26.6005%2031.4933%2026.9185%2031.625%2027.25%2031.625C27.5815%2031.625%2027.8995%2031.4933%2028.1339%2031.2589C28.3683%2031.0245%2028.5%2030.7065%2028.5%2030.375C28.4982%2028.4541%2027.9431%2026.5745%2026.9013%2024.9607C25.8594%2023.3469%2024.3748%2022.0674%2022.625%2021.275ZM18.5%2020.375C17.7583%2020.375%2017.0333%2020.1551%2016.4166%2019.743C15.7999%2019.331%2015.3193%2018.7453%2015.0355%2018.0601C14.7516%2017.3748%2014.6774%2016.6208%2014.8221%2015.8934C14.9667%2015.166%2015.3239%2014.4978%2015.8483%2013.9734C16.3728%2013.4489%2017.041%2013.0918%2017.7684%2012.9471C18.4958%2012.8024%2019.2498%2012.8766%2019.9351%2013.1605C20.6203%2013.4443%2021.206%2013.9249%2021.618%2014.5416C22.0301%2015.1583%2022.25%2015.8833%2022.25%2016.625C22.25%2017.6196%2021.8549%2018.5734%2021.1516%2019.2767C20.4484%2019.9799%2019.4946%2020.375%2018.5%2020.375ZM32.1375%2021L33.1375%2020.0125C33.254%2019.896%2033.3465%2019.7576%2033.4096%2019.6053C33.4726%2019.453%2033.5051%2019.2898%2033.5051%2019.125C33.5051%2018.9602%2033.4726%2018.797%2033.4096%2018.6447C33.3465%2018.4924%2033.254%2018.354%2033.1375%2018.2375C33.0209%2018.121%2032.8826%2018.0285%2032.7303%2017.9654C32.578%2017.9024%2032.4148%2017.8699%2032.25%2017.8699C32.0852%2017.8699%2031.922%2017.9024%2031.7697%2017.9654C31.6174%2018.0285%2031.479%2018.121%2031.3625%2018.2375L30.375%2019.2375L29.3875%2018.2375C29.2709%2018.121%2029.1326%2018.0285%2028.9803%2017.9654C28.828%2017.9024%2028.6648%2017.8699%2028.5%2017.8699C28.1671%2017.8699%2027.8479%2018.0021%2027.6125%2018.2375C27.4959%2018.354%2027.4035%2018.4924%2027.3404%2018.6447C27.2773%2018.797%2027.2449%2018.9602%2027.2449%2019.125C27.2449%2019.4579%2027.3771%2019.7771%2027.6125%2020.0125L28.6125%2021L27.6125%2021.9875C27.4953%2022.1037%2027.4023%2022.242%2027.3389%2022.3943C27.2754%2022.5466%2027.2427%2022.71%2027.2427%2022.875C27.2427%2023.04%2027.2754%2023.2034%2027.3389%2023.3557C27.4023%2023.508%2027.4953%2023.6463%2027.6125%2023.7625C27.7287%2023.8797%2027.867%2023.9727%2028.0193%2024.0361C28.1716%2024.0996%2028.335%2024.1323%2028.5%2024.1323C28.665%2024.1323%2028.8284%2024.0996%2028.9807%2024.0361C29.133%2023.9727%2029.2713%2023.8797%2029.3875%2023.7625L30.375%2022.7625L31.3625%2023.7625C31.4787%2023.8797%2031.6169%2023.9727%2031.7693%2024.0361C31.9216%2024.0996%2032.085%2024.1323%2032.25%2024.1323C32.415%2024.1323%2032.5784%2024.0996%2032.7307%2024.0361C32.883%2023.9727%2033.0213%2023.8797%2033.1375%2023.7625C33.2547%2023.6463%2033.3476%2023.508%2033.4111%2023.3557C33.4746%2023.2034%2033.5072%2023.04%2033.5072%2022.875C33.5072%2022.71%2033.4746%2022.5466%2033.4111%2022.3943C33.3476%2022.242%2033.2547%2022.1037%2033.1375%2021.9875L32.1375%2021Z'%20fill='rgb(214,48,49)'%20fill-rule='nonzero'%20/%3e%3c/g%3e%3c/svg%3e",zt=L({__name:"OMember",setup(I){const i=b(!1),{t:n}=B(),g=T(),l=te("insertMemberRef"),r=te("insertUserRef"),z=b(!1),k=b(!1),f=()=>{z.value=!0,J(()=>{var a;(a=l.value)==null||a.open()})},w=()=>{k.value=!0,J(()=>{var a;(a=r.value)==null||a.open()})},R=()=>{c()},_=()=>{c()},v=b(),U=async a=>{const[h,O]=await Le({user_id:a,org_id:+g.query.id});!h&&(O==null?void 0:O.status)===0&&c()},M=b(),$=[{label:n("org.admin"),value:"ORG_ADMIN"},{label:n("org.member"),value:"ORG_MEMBER"}],d=a=>{const h=qe[a.value].color;return E("div",{class:"px-1 rounded-full border text-xs inline-block w-[80px] inline-flex items-center justify-center",style:{color:h,borderColor:h}},a.label)},x=(a,h)=>{M.value={userId:a,value:h}},u=a=>{M.value={...M.value,value:a}},s=async()=>{var O,P;const[a,h]=await Ae({org_id:+g.query.id,user_id:(O=M.value)==null?void 0:O.userId,org_role:(P=M.value)==null?void 0:P.value});!a&&(h==null?void 0:h.status)===0&&(M.value={userId:void 0,value:void 0},c())},p=[{title:"ID",key:"user_id",width:"20%"},{title:n("org.omtab.name"),key:"user_name",width:"25%"},{title:n("org.omtab.role"),key:"org_role",width:"30%",render(a){var h;return((h=M.value)==null?void 0:h.userId)===a.user_id?E("div",{class:"flex items-center gap-2"},[E(W,{options:$,renderLabel:d,defaultValue:M.value.value,onUpdateValue:u,style:{width:"200px"}}),E(A,{size:"small",onClick:()=>M.value={userId:void 0,value:void 0}},{default:()=>"x"}),E(A,{size:"small",onClick:s},{icon:()=>E(ut)})]):E(xe,{role:a.org_role,classes:"w-[80px] inline-flex items-center justify-center"})}},{title:n("org.omtab.options"),key:"options",width:"25%",render(a){return E("div",{class:"flex items-center gap-2"},[E("img",{src:kt,class:"w-[30px] cursor-pointer",onClick:()=>x(a.user_id,a.org_role)}),E(de,{onPositiveClick:()=>U(a.user_id)},{default:()=>n("groupDetail.parameterManager.removeConfirm"),trigger:()=>E("img",{src:Mt,class:"w-[30px] cursor-pointer"})})])}}],c=async()=>{if(i.value)return;i.value=!0;const a=+g.query.id;if(!a){i.value=!1;return}const[h,O]=await ce({organization_id:a});i.value=!1,!h&&(O==null?void 0:O.status)===0&&(v.value=O.data)};return ie(()=>+g.query.id,a=>{a&&c()}),j(()=>{c()}),(a,h)=>{const O=H,P=Y;return V(),q("div",null,[t(O,null,{default:o(()=>[t(e(A),{type:"primary",onClick:f},{icon:o(()=>[t(e(ve))]),default:o(()=>[C(" "+m(e(n)("org.omtab.insertMember")),1)]),_:1}),t(e(A),{type:"primary",onClick:w},{icon:o(()=>[t(e(ve))]),default:o(()=>[C(" "+m(e(n)("org.omtab.insertUser")),1)]),_:1})]),_:1}),e(z)?(V(),G(bt,{key:0,ref_key:"insertMemberRef",ref:l,type:"insert",onSuccess:R},null,512)):N("",!0),e(k)?(V(),G(Ct,{key:1,ref_key:"insertUserRef",ref:r,type:"insert",onSuccess:_},null,512)):N("",!0),t(P,{lading:e(i),class:"mt-5",columns:p,data:e(v)},null,8,["lading","data"])])}}}),Ut={class:"flex items-center my-4"},Rt={class:"flex items-center gap-2 mr-4"},Ot=L({__name:"AuthByMember",setup(I){const i=ue(),{t:n}=B(),g=T(),l=b(!1),r=b(),z=d=>{r.value=d},k=async(d,x)=>{if(l.value)return;l.value=!0;const[u,s]=await ke({org_id:+g.query.id,user_id:r.value,device_group_id:x,permission:d?"EDIT":"READ"});!u&&(s==null?void 0:s.status)===0?v():l.value=!1},f=[{title:n("org.oatab.device"),key:"device",render(d){return E("div",{class:""},[E("div",{class:"text-lg"},d.device_group_name),E("div",{class:""},`${n("org.deviceGroup")}: ${d.device_group_id}`)])}},{title:n("org.oatab.auth"),key:"auth",render(d){return E(_e,{railStyle:({checked:x})=>{const u={};return x?u.background="#638EE2":u.background="#7964E3",u},value:d.permission==="EDIT",onUpdateValue:x=>k(x,d.device_group_id)},{checked:()=>"EDIT",unchecked:()=>"READ"})}}],w=b(),R=async()=>{const[d,x]=await ce({organization_id:+g.query.id});!d&&(x==null?void 0:x.status)===0&&x.data&&(w.value=x.data.map(u=>({...u,label:u.user_name,value:u.user_id})))},_=b(),v=async()=>{l.value=!0;const[d,x]=await Se({organization_id:+g.query.id,user_id:r.value});l.value=!1,!d&&x&&x.status===0&&(_.value=x.data.device_group_list)},U=async()=>{if(l.value)return;l.value=!0;const[d,x]=await pe({org_id:+g.query.id,user_id:r.value,permission:"EDIT"});!d&&(x==null?void 0:x.status)===0?v():l.value=!1},M=async()=>{if(l.value)return;l.value=!0;const[d,x]=await pe({org_id:+g.query.id,user_id:r.value,permission:"READ"});!d&&(x==null?void 0:x.status)===0?v():l.value=!1},$=()=>{};return j(()=>{R()}),ie(r,d=>{d&&v()}),(d,x)=>{const u=re,s=W,p=A,c=de,a=H,h=Y;return V(),q("div",null,[t(u,{type:"info",class:"my-4"},{default:o(()=>[C(m(e(n)("org.oatab.tips")),1)]),_:1}),y("div",Ut,[y("div",Rt,[y("div",{style:Ce({color:e(i).primaryColor})},m(e(n)("org.oatab.selectUser"))+": ",5),t(s,{style:{width:"200px"},onUpdateValue:z,options:e(w)},null,8,["options"])]),t(a,null,{default:o(()=>[t(c,{onPositiveClick:U,onNegativeClick:$,disabled:!e(r)},{trigger:o(()=>[t(p,{class:"!bg-[#638EE2] text-white",disabled:!e(r)},{default:o(()=>[C(m(e(n)("org.oatab.allDeviceEdit")),1)]),_:1},8,["disabled"])]),default:o(()=>[C(" "+m(e(n)("org.oatab.confirmDeviceEdit")),1)]),_:1},8,["disabled"]),t(c,{onPositiveClick:M,onNegativeClick:$,disabled:!e(r)},{trigger:o(()=>[t(p,{class:"!bg-[#7964E3] text-white",disabled:!e(r)},{default:o(()=>[C(m(e(n)("org.oatab.allDeviceRead")),1)]),_:1},8,["disabled"])]),default:o(()=>[C(" "+m(e(n)("org.oatab.confirmDeviceRead")),1)]),_:1},8,["disabled"])]),_:1})]),t(h,{loading:e(l),columns:f,data:e(_)},null,8,["loading","data"])])}}}),$t={class:"flex items-center my-2"},Vt={class:"flex items-center gap-2 mr-4"},Et=L({__name:"AuthByDevice",setup(I){const i=ue(),{t:n}=B(),g=b(!1),l=T(),r=b(),z=u=>{r.value=u},k=b(),f=async(u,s)=>{if(g.value)return;g.value=!0;const[p,c]=await ke({org_id:+l.query.id,user_id:s,device_group_id:r.value,permission:u?"EDIT":"READ"});!p&&(c==null?void 0:c.status)===0?U():g.value=!1},w=[{title:n("org.oatab.member"),key:"user_name"},{title:n("org.oatab.role"),key:"role",render(u){return E(xe,{role:u.org_role,classes:"w-[80px] inline-flex items-center justify-center"})}},{title:n("org.oatab.auth"),key:"auth",render(u){return E(_e,{railStyle:({checked:s})=>{const p={};return s?p.background="#638EE2":p.background="#7964E3",p},value:u.permission==="EDIT",onUpdateValue:s=>f(s,u.user_id)},{checked:()=>"EDIT",unchecked:()=>"READ"})}}],R=b(),_=async()=>{const[u,s]=await De({organization_id:+l.query.id});!u&&(s==null?void 0:s.status)===0&&s.data&&(R.value=s.data.map(p=>({...p,label:p.device_group_name,value:p.device_group_id})))},v=b(),U=async()=>{g.value=!0;const[u,s]=await Pe({organization_id:+l.query.id,device_group_id:r.value});g.value=!1,!u&&s&&s.status===0&&(v.value=s.data.user_list.map(p=>{var c,a;return{...p,org_role:(a=(c=k.value)==null?void 0:c.find(h=>h.user_id===p.user_id))==null?void 0:a.org_role}}))},M=async()=>{if(g.value)return;g.value=!0;const[u,s]=await me({org_id:+l.query.id,device_group_id:r.value,permission:"EDIT"});!u&&(s==null?void 0:s.status)===0?U():g.value=!1},$=async()=>{if(g.value)return;g.value=!0;const[u,s]=await me({org_id:+l.query.id,device_group_id:r.value,permission:"READ"});!u&&(s==null?void 0:s.status)===0?U():g.value=!1},d=()=>{},x=async()=>{const[u,s]=await ce({organization_id:+l.query.id});!u&&(s==null?void 0:s.status)===0&&(k.value=s.data)};return j(()=>{_(),x()}),ie(r,u=>{u&&U()}),(u,s)=>{const p=W,c=A,a=de,h=H,O=Y;return V(),q("div",null,[y("div",$t,[y("div",Vt,[y("div",{style:Ce({color:e(i).primaryColor})},m(e(n)("org.oatab.selectDevice"))+": ",5),t(p,{style:{width:"200px"},onUpdateValue:z,options:e(R)},null,8,["options"])]),t(h,null,{default:o(()=>[t(a,{onPositiveClick:M,onNegativeClick:d,disabled:!e(r)},{trigger:o(()=>[t(c,{class:"!bg-[#638EE2] text-white",disabled:!e(r)},{default:o(()=>[C(m(e(n)("org.oatab.allUserEdit")),1)]),_:1},8,["disabled"])]),default:o(()=>[C(" "+m(e(n)("org.oatab.confirmMemberRead")),1)]),_:1},8,["disabled"]),t(a,{onPositiveClick:$,onNegativeClick:d,disabled:!e(r)},{trigger:o(()=>[t(c,{class:"!bg-[#7964E3] text-white",disabled:!e(r)},{default:o(()=>[C(m(e(n)("org.oatab.allUserRead")),1)]),_:1},8,["disabled"])]),default:o(()=>[C(" "+m(e(n)("org.oatab.confirmMemberEdit")),1)]),_:1},8,["disabled"])]),_:1})]),t(O,{loading:e(g),columns:w,data:e(v)},null,8,["loading","data"])])}}}),It={class:"flex items-center gap-1"},Lt={class:"flex items-center gap-1"},qt=L({__name:"OAuth",setup(I){const{t:i}=B();return(n,g)=>{const l=oe,r=ze,z=Me;return V(),q("div",null,[t(z,{type:"card","pane-class":"!pl-0"},{default:o(()=>[t(r,{name:"byuser"},{tab:o(()=>[y("div",It,[t(l,{component:e(lt)},null,8,["component"]),C(" "+m(e(i)("org.oatab.tab1")),1)])]),default:o(()=>[t(Ot)]),_:1}),t(r,{name:"bydevice"},{tab:o(()=>[y("div",Lt,[t(l,{component:e(tt)},null,8,["component"]),C(" "+m(e(i)("org.oatab.tab2")),1)])]),default:o(()=>[t(Et)]),_:1})]),_:1})])}}}),At={class:"w-full"},St={class:"flex justify-end"},Dt=L({__name:"OSSModal",props:{isGlobal:{type:Boolean}},emits:["close"],setup(I,{expose:i,emit:n}){const g=I,l=n,r=ue(),z=Be(),k=X(),{t:f}=B(),w=T(),R=b(!1),_=b(!1),v=()=>{_.value=!1,J(()=>{setTimeout(()=>{d.value={if_global:void 0,disabled:void 0,organization_id:void 0,auth_text:void 0}},200)}),l("close")},U=()=>{_.value=!0},M=b({user_id:{required:!0,message:f("common.required")},org_role:{required:!0,message:f("common.required")}}),$=b(null),d=b({if_global:void 0,disabled:void 0,organization_id:void 0,auth_text:void 0}),x=()=>{var c;(c=$.value)==null||c.validate(async a=>{if(a)return;const[h,O]=await Te({...d.value,if_global:g.isGlobal,organization_id:+w.query.id});!h&&(O==null?void 0:O.status)===0&&(z.success(f("org.ootab.successfully")),v())})},u=c=>{c||v()},s=async()=>{const[c,a]=await Ne({organization_id:+w.query.id});if(!c&&(a==null?void 0:a.status)===0){const h=a.data.auth_text;d.value={...d.value,auth_text:h}}},p=async()=>{const[c,a]=await je();if(!c&&(a==null?void 0:a.status)===0){const h=a.data.auth_text;d.value={...d.value,if_global:!0,auth_text:h}}};return j(()=>{g.isGlobal?p():s()}),i({open:U,close:v}),(c,a)=>{const h=le,O=re,P=se,F=A,K=H,S=ae,D=ne;return V(),G(D,{show:e(_),"onUpdate:show":a[1]||(a[1]=Z=>Q(_)?_.value=Z:null),"close-on-esc":!1,onUpdateShow:u},{default:o(()=>[t(S,{bordered:!1,"content-class":"!px-5",style:{width:"700px"}},{default:o(()=>[t(P,{ref_key:"formRef",ref:$,model:e(d),rules:e(M),size:"small"},{default:o(()=>[e(d).if_global?N("",!0):(V(),G(h,{key:0,label:e(f)("org.orgName"),path:"name"},{default:o(()=>{var Z;return[C(m((Z=e(k).info)==null?void 0:Z.organization_name),1)]}),_:1},8,["label"])),t(h,{label:e(f)(`org.ootab.${c.isGlobal?"globalCfg":"orgCfg"}`),path:"auth_text"},{default:o(()=>[y("div",At,[t(O,{type:"info",title:e(f)("org.ootab.osstips"),class:"whitespace-pre-line w-full"},{default:o(()=>a[2]||(a[2]=[C(m(`{
                    "host": "oss.example.com",
                    "bucket": "minjiang",
                    "access_key": "AK",
                    "secret_key": "SK",
                    "secure": true,
                    "region": "cn-shanghai"
                }`))])),_:1},8,["title"]),t(e(Xe),{class:Ge(["!w-full mt-5",[e(r).baseColor==="#000"?"jse-theme-dark":""]]),style:{height:"300px"},modelValue:e(d).auth_text,"onUpdate:modelValue":a[0]||(a[0]=Z=>e(d).auth_text=Z),mode:"text"},null,8,["class","modelValue"])])]),_:1},8,["label"])]),_:1},8,["model","rules"]),y("div",St,[t(K,null,{default:o(()=>[t(F,{type:"primary",onClick:x,loading:e(R)},{default:o(()=>[C(m(e(f)("common.OK")),1)]),_:1},8,["loading"])]),_:1})])]),_:1})]),_:1},8,["show"])}}}),Pt=L({__name:"OOrg",setup(I){const i=He(),n=te("ossRef"),{t:g}=B(),l=b(!1),r=b(!1),z=(k=!1)=>{l.value=!0,r.value=k,J(()=>{setTimeout(()=>{var f;(f=n.value)==null||f.open()},100)})};return(k,f)=>{const w=A,R=H;return V(),q("div",null,[t(R,null,{default:o(()=>{var _;return[t(w,{type:"primary",onClick:f[0]||(f[0]=()=>z())},{icon:o(()=>[t(e(he))]),default:o(()=>[C(" "+m(e(g)("org.ootab.setOss")),1)]),_:1}),(_=e(i).info)!=null&&_.is_sys_admin?(V(),G(w,{key:0,type:"primary",onClick:f[1]||(f[1]=()=>z(!0))},{icon:o(()=>[t(e(he))]),default:o(()=>[C(" "+m(e(g)("org.ootab.setGlobalOss")),1)]),_:1})):N("",!0)]}),_:1}),e(l)?(V(),G(Dt,{key:0,ref_key:"ossRef",ref:n,"is-global":e(r),onClose:f[2]||(f[2]=_=>l.value=!1)},null,8,["is-global"])):N("",!0)])}}}),Bt=L({__name:"OGroup",setup(I){const{t:i}=B(),n=be(),g=T(),l=async(_,v)=>{const[U,M]=await Ke({device_id:v,hidden:!_});!U&&(M==null?void 0:M.status)===0&&R()},r=[{title:i("deviceGroup.groupId"),key:"device_group_id"},{title:i("deviceGroup.groupName"),key:"device_group_name"},{title:i("deviceGroup.description"),key:"description"},{title:i("deviceGroup.createTime"),key:"create_time"},{title:i("createuser"),key:"user_name"},{title:i("deviceGroup.status"),key:"status",render:_=>{var v;if(_.status)return E(ye,{type:((v=ge[_.status])==null?void 0:v.type)||"default",bordered:!1},{default:()=>{var U;return i((U=ge[_.status])==null?void 0:U.text)}})}},{title:i("deviceGroup.show2desktop"),key:"status",render:_=>{if(_.status)return E("div",{onClick:v=>v.stopPropagation()},E(_e,{value:!_.hidden,onUpdateValue:v=>l(v,_.device_group_id)}))}}],z=b(),k=Fe({page:1,per_page:fe,total:0}),f=b(!1),w=({device_group_name:_})=>({class:"cursor-pointer",onClick:()=>{n.push({name:"taskList",query:{device_group_name:_}})}}),R=async()=>{f.value=!0,z.value=void 0;const[_,v]=await Ze({...Qe(k),org_id:+(g.query.id||"")});f.value=!1,!_&&v&&v.status===0&&(z.value=v.data.list,k.total=v.data.total)};return j(()=>{R()}),(_,v)=>{const U=Y,M=Ye;return V(),q("div",null,[t(U,{columns:r,data:e(z),pagination:!1,loading:e(f),"row-props":w},null,8,["data","loading"]),e(k).total>e(fe)?(V(),G(M,{key:0,"page-info":e(k),"onUpdate:pageInfo":v[0]||(v[0]=$=>Q(k)?k.value=$:null),onUpdateList:R},null,8,["page-info"])):N("",!0)])}}}),Gt={class:"flex items-center gap-1"},Tt={class:"flex items-center gap-1"},Nt={class:"flex items-center gap-1"},jt={class:"flex items-center gap-1"},a0=L({__name:"OrgView",setup(I){const{t:i}=B(),n=b("group");return(g,l)=>{const r=We,z=oe,k=ze,f=Me;return V(),q("div",null,[t(vt),t(r),t(f,{type:"line",value:e(n),"onUpdate:value":l[0]||(l[0]=w=>Q(n)?n.value=w:null),placement:"left","pane-class":"!pl-5"},{default:o(()=>[t(k,{name:"group"},{tab:o(()=>[y("div",Gt,[t(z,{component:e(it)},null,8,["component"]),C(" "+m(e(i)("org.group")),1)])]),default:o(()=>[t(Bt)]),_:1}),t(k,{name:"member"},{tab:o(()=>[y("div",Tt,[t(z,{component:e(Ue)},null,8,["component"]),C(" "+m(e(i)("org.omember")),1)])]),default:o(()=>[t(zt)]),_:1}),t(k,{name:"auth"},{tab:o(()=>[y("div",Nt,[t(z,{component:e(at)},null,8,["component"]),C(" "+m(e(i)("org.oauth")),1)])]),default:o(()=>[t(qt)]),_:1}),t(k,{name:"organization"},{tab:o(()=>[y("div",jt,[t(z,{component:e(ee)},null,8,["component"]),C(" "+m(e(i)("org.oorganization")),1)])]),default:o(()=>[t(Pt)]),_:1})]),_:1},8,["value"])])}}});export{a0 as default};

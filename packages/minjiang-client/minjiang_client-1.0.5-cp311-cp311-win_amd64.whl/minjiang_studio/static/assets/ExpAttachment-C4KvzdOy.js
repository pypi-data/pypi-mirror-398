import{d as c,e as i,f as h,h as l,aT as y,A as R,C as E,r as g,o as T,i as v,w as V,l as w,am as $,a7 as N,V as D,al as F,a0 as I,I as o,N as x,E as S}from"./index-BwlMlHGj.js";import{B as j,C as P}from"./exp-BFwh7v1l.js";import{V as U}from"./index-DZrTvuvX.js";import{F as O}from"./FileTrayFullOutline-DTRI1hXG.js";import{_ as q}from"./Tree-BOaYkUf-.js";import"./Checkbox-UFZekRDE.js";const J={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},C=c({name:"DocumentUnknown",render:function(s,e){return h(),i("svg",J,e[0]||(e[0]=[l("circle",{cx:"9",cy:"28.5",r:"1.5",fill:"currentColor"},null,-1),l("path",{d:"M10 25H8v-4h2a2 2 0 0 0 0-4H8a2.002 2.002 0 0 0-2 2v.5H4V19a4.005 4.005 0 0 1 4-4h2a4 4 0 0 1 0 8z",fill:"currentColor"},null,-1),l("path",{d:"M27.7 9.3l-7-7A.908.908 0 0 0 20 2H10a2.006 2.006 0 0 0-2 2v8h2V4h8v6a2.006 2.006 0 0 0 2 2h6v16H14v2h12a2.006 2.006 0 0 0 2-2V10a.91.91 0 0 0-.3-.7zM20 10V4.4l5.6 5.6z",fill:"currentColor"},null,-1)]))}}),Z={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},K=c({name:"JsonReference",render:function(s,e){return h(),i("svg",Z,e[0]||(e[0]=[y('<path d="M4 20v2h4.586L2 28.586L3.414 30L10 23.414V28h2v-8H4z" fill="currentColor"></path><path d="M29 12l-2-6h-2v10h2v-6l2 6h2V6h-2v6z" fill="currentColor"></path><path d="M21.334 6h-2.667A1.668 1.668 0 0 0 17 7.667v6.667A1.668 1.668 0 0 0 18.666 16h2.667A1.668 1.668 0 0 0 23 14.334V7.667A1.668 1.668 0 0 0 21.334 6zM21 14h-2V8h2z" fill="currentColor"></path><path d="M9 7.667V10a2.002 2.002 0 0 0 2 2h2v2H9v2h4.333A1.668 1.668 0 0 0 15 14.334V12a2.002 2.002 0 0 0-2-2h-2V8h4V6h-4.334A1.668 1.668 0 0 0 9 7.667z" fill="currentColor"></path><path d="M5 14H3v-2H1v2.333A1.668 1.668 0 0 0 2.667 16h2.667A1.668 1.668 0 0 0 7 14.334V6H5z" fill="currentColor"></path>',5)]))}}),W={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},G=c({name:"LogoPython",render:function(s,e){return h(),i("svg",W,e[0]||(e[0]=[l("defs",null,null,-1),l("path",{id:"compound_path",d:"M23.488 9.14v2.966a4.284 4.284 0 0 1-4.173 4.236h-6.672a3.408 3.408 0 0 0-3.34 3.394v6.36c0 1.81 1.574 2.876 3.34 3.395a11.176 11.176 0 0 0 6.672 0c1.682-.487 3.34-1.467 3.34-3.394V23.55h-6.672v-.849h10.012c1.941 0 2.665-1.354 3.34-3.386a11.464 11.464 0 0 0 0-6.79c-.48-1.932-1.396-3.386-3.34-3.386zm-3.752 16.108a1.273 1.273 0 1 1-1.254 1.269a1.26 1.26 0 0 1 1.254-1.27z",fill:"currentColor"},null,-1),l("path",{id:"compound_path-2",d:"M15.835 2a19.072 19.072 0 0 0-3.192.273c-2.827.499-3.34 1.544-3.34 3.472V8.29h6.68v.849H6.796a4.17 4.17 0 0 0-4.173 3.387a12.486 12.486 0 0 0 0 6.789c.475 1.977 1.609 3.386 3.55 3.386H8.47V19.65a4.245 4.245 0 0 1 4.173-4.15h6.672a3.365 3.365 0 0 0 3.34-3.394V5.745a3.729 3.729 0 0 0-3.34-3.472A20.838 20.838 0 0 0 15.835 2zm-3.612 2.048a1.273 1.273 0 1 1-1.254 1.277a1.268 1.268 0 0 1 1.254-1.277z",fill:"currentColor"},null,-1)]))}}),Q={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},X=c({name:"TextAlignLeft",render:function(s,e){return h(),i("svg",Q,e[0]||(e[0]=[y('<path d="M12 6h14v2H12z" fill="currentColor"></path><path d="M12 12h10v2H12z" fill="currentColor"></path><path d="M12 18h14v2H12z" fill="currentColor"></path><path d="M12 24h10v2H12z" fill="currentColor"></path><path d="M6 4h2v24H6z" fill="currentColor"></path>',5)]))}}),Y={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},e0=c({name:"ArrowTrendingSettings20Regular",render:function(s,e){return h(),i("svg",Y,e[0]||(e[0]=[l("g",{fill:"none"},[l("path",{d:"M16.5 3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V4.707l-4.647 4.647a.5.5 0 0 1-.707 0L9 7.707l-5.146 5.147a.5.5 0 0 1-.708-.708l5.5-5.5a.5.5 0 0 1 .708 0L11 8.293L15.293 4H12.5a.5.5 0 0 1 0-1h4zm-4.435 8.442a2 2 0 0 1-1.43 2.478l-.461.118a4.735 4.735 0 0 0 .01 1.016l.35.083a2 2 0 0 1 1.455 2.519l-.126.423c.257.203.537.377.835.517l.325-.344a2 2 0 0 1 2.909.002l.337.358c.293-.135.568-.302.822-.498l-.156-.556a2 2 0 0 1 1.43-2.478l.461-.118a4.731 4.731 0 0 0-.01-1.017l-.349-.082a2 2 0 0 1-1.456-2.52l.126-.421a4.318 4.318 0 0 0-.835-.519l-.324.344a2 2 0 0 1-2.91-.001l-.337-.358a4.316 4.316 0 0 0-.822.497l.156.557zM14.5 15.5a1 1 0 1 1 0-2a1 1 0 0 1 0 2z",fill:"currentColor"})],-1)]))}}),n0={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},k=c({name:"DrawImage24Regular",render:function(s,e){return h(),i("svg",n0,e[0]||(e[0]=[l("g",{fill:"none"},[l("path",{d:"M21 6.25A3.25 3.25 0 0 0 17.75 3H6.25A3.25 3.25 0 0 0 3 6.25v12.283c0 1.303 1.57 1.962 2.5 1.048l4.03-3.96a.634.634 0 0 0 .02-.021l1.925-1.885l.083-.071a.75.75 0 0 1 .966.07l2.08 2.037l1.06-1.06l-2.09-2.048l-.129-.116a2.25 2.25 0 0 0-3.02.116l-4.452 4.36h.01L4.5 18.46V6.25c0-.966.784-1.75 1.75-1.75h11.5c.967 0 1.75.784 1.75 1.75v4.982c.48-.19.994-.263 1.5-.22V6.25zm-3.496 2.502a2.252 2.252 0 1 0-4.505 0a2.252 2.252 0 0 0 4.505 0zm-3.005 0a.752.752 0 1 1 1.505 0a.752.752 0 0 1-1.505 0zm-1.302 9.82l5.902-5.902a2.285 2.285 0 1 1 3.233 3.232l-5.903 5.902a2.684 2.684 0 0 1-1.247.707l-1.83.457c-.05.013-.1.022-.15.027c-.59.204-2.979.574-3.827-.088c-.574-.448-.46-1.334-.218-1.818c.04-.078-.02-.18-.105-.166c-.66.103-1.243.45-1.827.799c-.783.468-1.57.936-2.549.815c-.979-.122-1.468-.726-1.71-1.255c-.099-.216.18-.401.388-.287c.469.255 1.106.496 1.631.38c.375-.084.904-.458 1.496-.877c1.066-.753 2.337-1.653 3.292-1.268c.84.337 1.46 1.15 1.03 2.113c-.052.118 0 .264.127.293c.423.097.778.066 1.133-.105l.428-1.712c.118-.472.362-.903.706-1.247z",fill:"currentColor"})],-1)]))}}),t0={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},M=c({name:"FolderZip24Regular",render:function(s,e){return h(),i("svg",t0,e[0]||(e[0]=[l("g",{fill:"none"},[l("path",{d:"M9.49 4.402A2.25 2.25 0 0 0 8.208 4H4.25l-.154.005A2.25 2.25 0 0 0 2 6.25v11.5l.005.154A2.25 2.25 0 0 0 4.25 20h15.5l.154-.005A2.25 2.25 0 0 0 22 17.75v-9l-.005-.154l-.017-.158A2.25 2.25 0 0 0 19.75 6.5h-7.728L9.647 4.521l-.156-.119zM13.498 8v2.245c0 .414.335.75.75.75h.75v1.003h-.25a.75.75 0 0 0 0 1.5h.25v1.5h-.25a.75.75 0 0 0 0 1.5h.25V18.5H4.25l-.102-.007a.75.75 0 0 1-.648-.743v-7.251l4.707.001l.196-.009a2.25 2.25 0 0 0 1.244-.512L12.021 8h1.476zm3 10h.25a.75.75 0 0 0 0-1.5h-.25V15h.25a.75.75 0 0 0 0-1.5h-.25v-2.505h.75a.75.75 0 0 0 .75-.75V8h1.753l.102.007a.75.75 0 0 1 .648.743v9l-.007.102a.75.75 0 0 1-.743.648h-3.253V18zm0-10v1.495h-1.5V8h1.5zM4.25 5.5h3.957l.104.007a.75.75 0 0 1 .376.167l1.891 1.575l-1.89 1.577l-.086.061A.75.75 0 0 1 8.207 9L3.5 8.999V6.25l.007-.102A.75.75 0 0 1 4.25 5.5z",fill:"currentColor"})],-1)]))}}),l0={class:"flex"},h0=c({__name:"ExpAttachment",setup(p){const s=R(),e=E(),A=g(),m=g(!1),_=g(!1),z={txt:X,json:K,zip:M,ini:e0,png:k,jepg:k,jpg:k,py:G},H=async()=>{if(m.value)return;m.value=!0;const[r,a]=await j({device_group_name:e.query.device_group_name,exp_id:e.query.exp_id});if(m.value=!1,!r&&(a==null?void 0:a.status)===0){const n=[];I(a.data,(t,d)=>{t.format==="zip"?n.push({key:d,label:d,...t,prefix:()=>o(x,null,{default:()=>o(M)}),children:t.zip_content?Object.keys(t.zip_content).map(u=>({key:u,label:u,...t.zip_content?t.zip_content[u]:{},prefix:()=>o(x,null,{default:()=>o(t.zip_content&&t.zip_content[u]&&z[t.zip_content[u].format]||C)})})):void 0}):n.push({key:d,label:d,...t,prefix:()=>o(x,null,{default:()=>o(O)})})}),A.value=n}};T(()=>{H()});const f=g(),L=async r=>{if(_.value)return;_.value=!0;const[a,n]=await P({absolute_path:r.absolute_path,in_zip_path:r.in_zip_path});_.value=!1,!a&&(n==null?void 0:n.status)===0&&(f.value=n.data||"")},b=({option:r})=>({onClick(){r.children||(f.value="",S(()=>{L(r)}))}}),B=(r,a,n)=>{if(n.node)switch(n.action){case"expand":n.node.prefix=()=>o(x,null,{default:()=>o(z.zip)});break;case"collapse":n.node.prefix=()=>o(x,null,{default:()=>o(z.zip)});break}};return(r,a)=>{const n=q,t=$,d=F;return h(),i("div",l0,[l("div",{class:"border-r h-full pr-5 mr-5 min-w-72",style:N({borderColor:w(s).dividerColor,height:"calc(100vh - 250px)"})},[v(t,{show:w(m),class:"!min-h-80"},{default:V(()=>[v(n,{data:w(A),"block-line":"","show-line":"","expand-on-click":"","default-expand-all":"","node-props":b,onUpdateExpandedKeys:B},null,8,["data"])]),_:1},8,["show"])],4),v(d,{style:{"max-height":"calc(100vh - 250px)"}},{default:V(()=>[v(t,{show:w(_),class:"!min-h-80"},{default:V(()=>[v(w(U),{height:"calc(100vh - 250px)",theme:"vs-dark",value:w(f),"onUpdate:value":a[0]||(a[0]=u=>D(f)?f.value=u:null),language:"python",classNam:"py-5",options:{readOnly:!0}},null,8,["value"])]),_:1},8,["show"])]),_:1})])}}});export{h0 as default};

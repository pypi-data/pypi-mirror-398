import{d as Ye,e as Ce,f as oe,h as G,aZ as Je,a_ as Bt,J as ha,C as _t,A as mt,b as gt,r as g,a3 as $e,E as Ae,L as ft,I as We,aa as dt,i as l,a8 as Ze,a9 as Kt,as as vt,l as r,V as se,w as d,ah as jt,t as ie,aA as ya,B as ht,s as xe,am as wa,a2 as Xt,ap as ba,W as Jt,v as Wt,j as xa,k as Sa,m as Ia,n as Zt,ar as Yt,aS as Aa,al as Ca,S as Ta,aV as Nt,F as zt,b4 as Ma,T as Oa,b5 as Pa,N as La,b6 as Ea,p as Ra,b7 as Ht,b8 as $a,ax as Da}from"./index-BwlMlHGj.js";import{d as Ua}from"./exp-BFwh7v1l.js";import{u as Fa}from"./groupDetail-Bjf-6Lmm.js";import{R as Na,_ as za,g as Ha,a as Va,b as qa,s as Ga,c as Ba,i as Ka,d as ja,e as Xa,A as Ja,f as Wa,F as Za}from"./FileSaver.min-BuWbKVnN.js";import{_ as Ya}from"./DataTable-CfoqEf8t.js";import{_ as Qa}from"./DynamicForm.vue_vue_type_script_setup_true_lang-DoGDCFcf.js";import{i as ka}from"./json-editor-vue-CSlvxqm5.js";import{_ as er}from"./BackToOverview.vue_vue_type_script_setup_true_lang-B3HE7W32.js";import{A as tr}from"./Add-CvJqOuqG.js";import"./index-C1C63wPC.js";import"./HandRight24Filled-COWVKNGi.js";import"./Popconfirm-GYskt_Un.js";import"./PaginationView.vue_vue_type_script_setup_true_lang-IR55gl3R.js";import"./Pagination-Do-f8cxW.js";import"./Switch-B5yYo9Bh.js";import"./Checkbox-UFZekRDE.js";import"./RadioGroup-BB1a5vev.js";import"./download-C2161hUv.js";import"./InputNumber-RrJJyZaR.js";import"./ExitOutline-BKfO8kvq.js";const nr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},ar=Ye({name:"FormNew24Regular",render:function(B,O){return oe(),Ce("svg",nr,O[0]||(O[0]=[G("g",{fill:"none"},[G("path",{d:"M5.75 3A2.75 2.75 0 0 0 3 5.75v12.5A2.75 2.75 0 0 0 5.75 21h6.272a6.471 6.471 0 0 1-.709-1.5H5.75c-.69 0-1.25-.56-1.25-1.25V5.75c0-.69.56-1.25 1.25-1.25h12.5c.69 0 1.25.56 1.25 1.25v5.563a6.471 6.471 0 0 1 1.5.709V5.75A2.75 2.75 0 0 0 18.25 3H5.75zm12.207 8.016a.749.749 0 0 0-.703-1.014H12.25a.75.75 0 0 0 0 1.5h2.742a6.48 6.48 0 0 1 2.965-.486zM8.25 8.502a2.25 2.25 0 1 0 0 4.5a2.25 2.25 0 0 0 0-4.5zm-.75 2.25a.75.75 0 1 1 1.5 0a.75.75 0 0 1-1.5 0zM6 16.25a2.25 2.25 0 1 1 4.5 0a2.25 2.25 0 0 1-4.5 0zm2.25-.75a.75.75 0 1 0 0 1.5a.75.75 0 0 0 0-1.5zm9.004-8h-10.5a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5zM23 17.5a5.5 5.5 0 1 0-11 0a5.5 5.5 0 0 0 11 0zm-4.999 3.003a.5.5 0 1 1-1 0V18h-2.505a.5.5 0 1 1 0-1H17v-2.5a.5.5 0 1 1 1 0V17h2.503a.5.5 0 1 1 0 1h-2.502v2.503z",fill:"currentColor"})],-1)]))}});var Re={exports:{}};Re.exports;var Vt;function rr(){return Vt||(Vt=1,function(ee,B){var O=200,L="Expected a function",K="__lodash_hash_undefined__",D=1,S=2,f=9007199254740991,U="[object Arguments]",E="[object Array]",I="[object Boolean]",te="[object Date]",j="[object Error]",W="[object Function]",V="[object GeneratorFunction]",F="[object Map]",Z="[object Number]",R="[object Object]",N="[object Promise]",Y="[object RegExp]",$="[object Set]",ne="[object String]",p="[object Symbol]",v="[object WeakMap]",s="[object ArrayBuffer]",o="[object DataView]",m="[object Float32Array]",x="[object Float64Array]",C="[object Int8Array]",h="[object Int16Array]",P="[object Int32Array]",Q="[object Uint8Array]",Te="[object Uint8ClampedArray]",b="[object Uint16Array]",_="[object Uint32Array]",w=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,k=/^\w*$/,z=/^\./,le=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Me=/[\\^$.*+?()[\]{}|]/g,Oe=/\\(\\)?/g,Pe=/^\[object .+?Constructor\]$/,Qe=/^(?:0|[1-9]\d*)$/,y={};y[m]=y[x]=y[C]=y[h]=y[P]=y[Q]=y[Te]=y[b]=y[_]=!0,y[U]=y[E]=y[s]=y[I]=y[o]=y[te]=y[j]=y[W]=y[F]=y[Z]=y[R]=y[Y]=y[$]=y[ne]=y[v]=!1;var De=typeof Je=="object"&&Je&&Je.Object===Object&&Je,ke=typeof self=="object"&&self&&self.Object===Object&&self,T=De||ke||Function("return this")(),ue=B&&!B.nodeType&&B,me=ue&&!0&&ee&&!ee.nodeType&&ee,Qt=me&&me.exports===ue,yt=Qt&&De.process,wt=function(){try{return yt&&yt.binding("util")}catch{}}(),bt=wt&&wt.isTypedArray;function kt(e,t){for(var n=-1,a=e?e.length:0;++n<a;)if(t(e[n],n,e))return!0;return!1}function en(e){return function(t){return t==null?void 0:t[e]}}function tn(e,t){for(var n=-1,a=Array(e);++n<e;)a[n]=t(n);return a}function nn(e){return function(t){return e(t)}}function an(e,t){return e==null?void 0:e[t]}function et(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function rn(e){var t=-1,n=Array(e.size);return e.forEach(function(a,u){n[++t]=[u,a]}),n}function sn(e,t){return function(n){return e(t(n))}}function on(e){var t=-1,n=Array(e.size);return e.forEach(function(a){n[++t]=a}),n}var ln=Array.prototype,un=Function.prototype,Ue=Object.prototype,tt=T["__core-js_shared__"],xt=function(){var e=/[^.]+$/.exec(tt&&tt.keys&&tt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),St=un.toString,ce=Ue.hasOwnProperty,Se=Ue.toString,cn=RegExp("^"+St.call(ce).replace(Me,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),It=T.Symbol,At=T.Uint8Array,fn=Ue.propertyIsEnumerable,pn=ln.splice,dn=sn(Object.keys,Object),nt=Ie(T,"DataView"),Le=Ie(T,"Map"),at=Ie(T,"Promise"),rt=Ie(T,"Set"),st=Ie(T,"WeakMap"),Ee=Ie(Object,"create"),_n=ye(nt),mn=ye(Le),gn=ye(at),vn=ye(rt),hn=ye(st),Fe=It?It.prototype:void 0,it=Fe?Fe.valueOf:void 0,Ct=Fe?Fe.toString:void 0;function he(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}function yn(){this.__data__=Ee?Ee(null):{}}function wn(e){return this.has(e)&&delete this.__data__[e]}function bn(e){var t=this.__data__;if(Ee){var n=t[e];return n===K?void 0:n}return ce.call(t,e)?t[e]:void 0}function xn(e){var t=this.__data__;return Ee?t[e]!==void 0:ce.call(t,e)}function Sn(e,t){var n=this.__data__;return n[e]=Ee&&t===void 0?K:t,this}he.prototype.clear=yn,he.prototype.delete=wn,he.prototype.get=bn,he.prototype.has=xn,he.prototype.set=Sn;function fe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}function In(){this.__data__=[]}function An(e){var t=this.__data__,n=ze(t,e);if(n<0)return!1;var a=t.length-1;return n==a?t.pop():pn.call(t,n,1),!0}function Cn(e){var t=this.__data__,n=ze(t,e);return n<0?void 0:t[n][1]}function Tn(e){return ze(this.__data__,e)>-1}function Mn(e,t){var n=this.__data__,a=ze(n,e);return a<0?n.push([e,t]):n[a][1]=t,this}fe.prototype.clear=In,fe.prototype.delete=An,fe.prototype.get=Cn,fe.prototype.has=Tn,fe.prototype.set=Mn;function pe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}function On(){this.__data__={hash:new he,map:new(Le||fe),string:new he}}function Pn(e){return He(this,e).delete(e)}function Ln(e){return He(this,e).get(e)}function En(e){return He(this,e).has(e)}function Rn(e,t){return He(this,e).set(e,t),this}pe.prototype.clear=On,pe.prototype.delete=Pn,pe.prototype.get=Ln,pe.prototype.has=En,pe.prototype.set=Rn;function Ne(e){var t=-1,n=e?e.length:0;for(this.__data__=new pe;++t<n;)this.add(e[t])}function $n(e){return this.__data__.set(e,K),this}function Dn(e){return this.__data__.has(e)}Ne.prototype.add=Ne.prototype.push=$n,Ne.prototype.has=Dn;function de(e){this.__data__=new fe(e)}function Un(){this.__data__=new fe}function Fn(e){return this.__data__.delete(e)}function Nn(e){return this.__data__.get(e)}function zn(e){return this.__data__.has(e)}function Hn(e,t){var n=this.__data__;if(n instanceof fe){var a=n.__data__;if(!Le||a.length<O-1)return a.push([e,t]),this;n=this.__data__=new pe(a)}return n.set(e,t),this}de.prototype.clear=Un,de.prototype.delete=Fn,de.prototype.get=Nn,de.prototype.has=zn,de.prototype.set=Hn;function Vn(e,t){var n=we(e)||$t(e)?tn(e.length,String):[],a=n.length,u=!!a;for(var i in e)ce.call(e,i)&&!(u&&(i=="length"||Pt(i,a)))&&n.push(i);return n}function ze(e,t){for(var n=e.length;n--;)if(Rt(e[n][0],t))return n;return-1}function qn(e,t,n){for(var a=-1,u=e.length;++a<u;){var i=e[a],c=t(i);if(c!=null&&(M===void 0?c===c&&!Ke(c):n(c,M)))var M=c,A=i}return A}function Tt(e,t){t=Ve(t,e)?[t]:Mt(t);for(var n=0,a=t.length;e!=null&&n<a;)e=e[qe(t[n++])];return n&&n==a?e:void 0}function Gn(e){return Se.call(e)}function Bn(e,t){return e>t}function Kn(e,t){return e!=null&&t in Object(e)}function ot(e,t,n,a,u){return e===t?!0:e==null||t==null||!Ge(e)&&!Be(t)?e!==e&&t!==t:jn(e,t,ot,n,a,u)}function jn(e,t,n,a,u,i){var c=we(e),M=we(t),A=E,H=E;c||(A=ge(e),A=A==U?R:A),M||(H=ge(t),H=H==U?R:H);var X=A==R&&!et(e),J=H==R&&!et(t),q=A==H;if(q&&!X)return i||(i=new de),c||fa(e)?Ot(e,t,n,a,u,i):na(e,t,A,n,a,u,i);if(!(u&S)){var ae=X&&ce.call(e,"__wrapped__"),re=J&&ce.call(t,"__wrapped__");if(ae||re){var ve=ae?e.value():e,_e=re?t.value():t;return i||(i=new de),n(ve,_e,a,u,i)}}return q?(i||(i=new de),aa(e,t,n,a,u,i)):!1}function Xn(e,t,n,a){var u=n.length,i=u;if(e==null)return!i;for(e=Object(e);u--;){var c=n[u];if(c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++u<i;){c=n[u];var M=c[0],A=e[M],H=c[1];if(c[2]){if(A===void 0&&!(M in e))return!1}else{var X=new de,J;if(!(J===void 0?ot(H,A,a,D|S,X):J))return!1}}return!0}function Jn(e){if(!Ge(e)||oa(e))return!1;var t=Ut(e)||et(e)?cn:Pe;return t.test(ye(e))}function Wn(e){return Be(e)&&ut(e.length)&&!!y[Se.call(e)]}function Zn(e){return typeof e=="function"?e:e==null?ma:typeof e=="object"?we(e)?kn(e[0],e[1]):Qn(e):ga(e)}function Yn(e){if(!la(e))return dn(e);var t=[];for(var n in Object(e))ce.call(e,n)&&n!="constructor"&&t.push(n);return t}function Qn(e){var t=ra(e);return t.length==1&&t[0][2]?Et(t[0][0],t[0][1]):function(n){return n===e||Xn(n,e,t)}}function kn(e,t){return Ve(e)&&Lt(t)?Et(qe(e),t):function(n){var a=da(n,e);return a===void 0&&a===t?_a(n,e):ot(t,a,void 0,D|S)}}function ea(e){return function(t){return Tt(t,e)}}function ta(e){if(typeof e=="string")return e;if(Ke(e))return Ct?Ct.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Mt(e){return we(e)?e:ua(e)}function Ot(e,t,n,a,u,i){var c=u&S,M=e.length,A=t.length;if(M!=A&&!(c&&A>M))return!1;var H=i.get(e);if(H&&i.get(t))return H==t;var X=-1,J=!0,q=u&D?new Ne:void 0;for(i.set(e,t),i.set(t,e);++X<M;){var ae=e[X],re=t[X];if(a)var ve=c?a(re,ae,X,t,e,i):a(ae,re,X,e,t,i);if(ve!==void 0){if(ve)continue;J=!1;break}if(q){if(!kt(t,function(_e,be){if(!q.has(be)&&(ae===_e||n(ae,_e,a,u,i)))return q.add(be)})){J=!1;break}}else if(!(ae===re||n(ae,re,a,u,i))){J=!1;break}}return i.delete(e),i.delete(t),J}function na(e,t,n,a,u,i,c){switch(n){case o:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case s:return!(e.byteLength!=t.byteLength||!a(new At(e),new At(t)));case I:case te:case Z:return Rt(+e,+t);case j:return e.name==t.name&&e.message==t.message;case Y:case ne:return e==t+"";case F:var M=rn;case $:var A=i&S;if(M||(M=on),e.size!=t.size&&!A)return!1;var H=c.get(e);if(H)return H==t;i|=D,c.set(e,t);var X=Ot(M(e),M(t),a,u,i,c);return c.delete(e),X;case p:if(it)return it.call(e)==it.call(t)}return!1}function aa(e,t,n,a,u,i){var c=u&S,M=ct(e),A=M.length,H=ct(t),X=H.length;if(A!=X&&!c)return!1;for(var J=A;J--;){var q=M[J];if(!(c?q in t:ce.call(t,q)))return!1}var ae=i.get(e);if(ae&&i.get(t))return ae==t;var re=!0;i.set(e,t),i.set(t,e);for(var ve=c;++J<A;){q=M[J];var _e=e[q],be=t[q];if(a)var Ft=c?a(be,_e,q,t,e,i):a(_e,be,q,e,t,i);if(!(Ft===void 0?_e===be||n(_e,be,a,u,i):Ft)){re=!1;break}ve||(ve=q=="constructor")}if(re&&!ve){var je=e.constructor,Xe=t.constructor;je!=Xe&&"constructor"in e&&"constructor"in t&&!(typeof je=="function"&&je instanceof je&&typeof Xe=="function"&&Xe instanceof Xe)&&(re=!1)}return i.delete(e),i.delete(t),re}function He(e,t){var n=e.__data__;return ia(t)?n[typeof t=="string"?"string":"hash"]:n.map}function ra(e){for(var t=ct(e),n=t.length;n--;){var a=t[n],u=e[a];t[n]=[a,u,Lt(u)]}return t}function Ie(e,t){var n=an(e,t);return Jn(n)?n:void 0}var ge=Gn;(nt&&ge(new nt(new ArrayBuffer(1)))!=o||Le&&ge(new Le)!=F||at&&ge(at.resolve())!=N||rt&&ge(new rt)!=$||st&&ge(new st)!=v)&&(ge=function(e){var t=Se.call(e),n=t==R?e.constructor:void 0,a=n?ye(n):void 0;if(a)switch(a){case _n:return o;case mn:return F;case gn:return N;case vn:return $;case hn:return v}return t});function sa(e,t,n){t=Ve(t,e)?[t]:Mt(t);for(var a,u=-1,c=t.length;++u<c;){var i=qe(t[u]);if(!(a=e!=null&&n(e,i)))break;e=e[i]}if(a)return a;var c=e?e.length:0;return!!c&&ut(c)&&Pt(i,c)&&(we(e)||$t(e))}function Pt(e,t){return t=t??f,!!t&&(typeof e=="number"||Qe.test(e))&&e>-1&&e%1==0&&e<t}function Ve(e,t){if(we(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||Ke(e)?!0:k.test(e)||!w.test(e)||t!=null&&e in Object(t)}function ia(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function oa(e){return!!xt&&xt in e}function la(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Ue;return e===n}function Lt(e){return e===e&&!Ge(e)}function Et(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var ua=lt(function(e){e=pa(e);var t=[];return z.test(e)&&t.push(""),e.replace(le,function(n,a,u,i){t.push(u?i.replace(Oe,"$1"):a||n)}),t});function qe(e){if(typeof e=="string"||Ke(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function ye(e){if(e!=null){try{return St.call(e)}catch{}try{return e+""}catch{}}return""}function lt(e,t){if(typeof e!="function"||t&&typeof t!="function")throw new TypeError(L);var n=function(){var a=arguments,u=t?t.apply(this,a):a[0],i=n.cache;if(i.has(u))return i.get(u);var c=e.apply(this,a);return n.cache=i.set(u,c),c};return n.cache=new(lt.Cache||pe),n}lt.Cache=pe;function Rt(e,t){return e===t||e!==e&&t!==t}function $t(e){return ca(e)&&ce.call(e,"callee")&&(!fn.call(e,"callee")||Se.call(e)==U)}var we=Array.isArray;function Dt(e){return e!=null&&ut(e.length)&&!Ut(e)}function ca(e){return Be(e)&&Dt(e)}function Ut(e){var t=Ge(e)?Se.call(e):"";return t==W||t==V}function ut(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=f}function Ge(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Be(e){return!!e&&typeof e=="object"}function Ke(e){return typeof e=="symbol"||Be(e)&&Se.call(e)==p}var fa=bt?nn(bt):Wn;function pa(e){return e==null?"":ta(e)}function da(e,t,n){var a=e==null?void 0:Tt(e,t);return a===void 0?n:a}function _a(e,t){return e!=null&&sa(e,t,Kn)}function ct(e){return Dt(e)?Vn(e):Yn(e)}function ma(e){return e}function ga(e){return Ve(e)?en(qe(e)):ea(e)}function va(e,t){return e&&e.length?qn(e,Zn(t),Bn):void 0}ee.exports=va}(Re,Re.exports)),Re.exports}var sr=rr();const ir=Bt(sr);var pt,qt;function or(){if(qt)return pt;qt=1;function ee(L,K){for(var D,S=-1,f=L.length;++S<f;){var U=K(L[S]);U!==void 0&&(D=D===void 0?U:D+U)}return D}function B(L){return L}function O(L){return L&&L.length?ee(L,B):0}return pt=O,pt}var lr=or();const ur=Bt(lr),cr={class:"flex justify-end w-full"},fr={class:"flex gap-2 items-center"},pr=Ye({__name:"ParamsOverview",props:{spaceId:{}},setup(ee,{expose:B}){ha(p=>({"01924740":r(K).primaryColor}));const O=ee,L=_t(),K=mt(),{t:D}=gt(),S=g(!1),f=g(),U=()=>{},E=g(!1),I=g(),te=async p=>{if(S.value)return;S.value=!0;const[v,s]=await Ha({device_group_name:L.query.device_group_name,space_id:O.spaceId,entity_type:f.value});S.value=!1,!v&&(s==null?void 0:s.status)===0&&(I.value=s.data,f.value||(E.value=!0,f.value=s.data.entity_types[0]),p&&Ae(()=>{setTimeout(()=>{$.value&&Z($.value[V.value.rowIdx],V.value.key)},300)}))};$e(()=>O.spaceId,p=>{p&&te()},{immediate:!0}),$e(f,p=>{if(E.value){E.value=!1;return}p&&Ae(()=>{te()})});const j=g(),W=g(),V=g(),F=p=>{const v=p.lastIndexOf("/");return v<0?p:p.slice(v+1)},Z=(p,v)=>{var x,C,h;const s=(x=I.value)==null?void 0:x.key_map[v].replace(/\%entity\%/g,p.entities);(C=j.value)==null||C.open();const o=p[v];let m="";typeof o=="number"?m=Number.isInteger(o)?"int":"float":typeof o=="boolean"&&(m="bool"),(h=j.value)==null||h.setFormValue({types:m,keys:F(s),values:String(p[v])}),W.value={full_key:s,type:"edit"}},R=(p,v,s)=>{V.value={row:p,key:v,rowIdx:s},Ae(()=>{Z(V.value.row,V.value.key)})},N=ft(()=>{var v,s;const p=((s=(v=I.value)==null?void 0:v.titles)==null?void 0:s.map((o,m)=>{var C;const x=ir(Object.keys(((C=I.value)==null?void 0:C.data)||{}).map(h=>{var P;return(P=I.value)==null?void 0:P.data[h][m]}).concat(o),h=>String(h).length);return{title:o,key:o,width:String(x).length*9+35,render(h,P){const Q=h[o];return typeof Q=="number"?We("div",{onClick:()=>R(h,o,P),class:"cursor-pointer"},Q):String(Q)}}}))||[];return p&&p.unshift({title:"Entities",key:"entities",width:100,fixed:"left"}),p}),Y=ft(()=>ur(N.value.map(p=>p.width))),$=ft(()=>{const{entities:p,titles:v=[],data:s={}}=I.value||{};return p==null?void 0:p.map(o=>{var x;const m={entities:o};return(x=s[o])==null||x.forEach((C,h)=>{const P=v[h];P&&(m[P]=C)}),m})}),ne=()=>{te()};return B({refresh:te}),(p,v)=>{const s=ht,o=ya,m=vt,x=Ya,C=wa;return oe(),Ce(dt,null,[l(m,{onUpdateValue:U,value:r(f),"onUpdate:value":v[1]||(v[1]=h=>se(f)?f.value=h:null),class:"!h-full",disabled:r(S)},{suffix:d(()=>[G("div",cr,[l(s,{type:"primary",onClick:v[0]||(v[0]=()=>te())},{icon:d(()=>[l(r(Na))]),default:d(()=>[xe(" "+ie(r(D)("groupDetail.parameterManager.refresh")),1)]),_:1})])]),default:d(()=>{var h;return[(oe(!0),Ce(dt,null,jt((h=r(I))==null?void 0:h.entity_types,P=>(oe(),Ze(o,{name:P,key:P},{default:d(()=>[G("div",fr,ie(P),1)]),_:2},1032,["name"]))),128))]}),_:1},8,["value","disabled"]),l(C,{show:r(S)},{default:d(()=>[l(x,{bordered:"","max-height":"calc(100vh - 400px)","scroll-x":r(Y),"single-line":!1,columns:r(N),data:r($),class:"mt-5"},null,8,["scroll-x","columns","data"])]),_:1},8,["show"]),p.spaceId?(oe(),Ze(za,{key:0,info:r(W),"space-id":p.spaceId,"show-history-entry":"",ref_key:"actionInfoRef",ref:j,"onUpdate:success":ne},null,8,["info","space-id"])):Kt("",!0)],64)}}}),dr=Xt(pr,[["__scopeId","data-v-359d0487"]]),_r={class:"text-xl text-center"},mr={class:"flex justify-end mt-5"},gr={class:"text-xl text-center pb-2"},vr={class:"flex justify-end pt-3 pr-5"},hr={class:"flex justify-end mt-5"},yr=Ye({__name:"SpaceModal",props:{spaceId:{}},emits:["success"],setup(ee,{expose:B,emit:O}){const L=ba({}),K=ee,D=mt(),S=_t(),{t:f}=gt(),U=O,E=g(),I=g({space_name:void 0,description:void 0}),te=g({space_name:{required:!0,message:f("common.required")},description:{required:!0,message:f("common.required")}}),j=g(!1),W=g(!1),V=g(!1),F=g(),Z=g(),R=g(),N=g(),Y=g(!1),$=g(!1),ne=g(!1),p=()=>{ne.value=!1,I.value={space_name:void 0,description:void 0}},v=()=>{$.value=!1,Y.value=!1,R.value=void 0,Z.value=void 0},s=b=>{b||p()},o=b=>{b||v()},m=b=>{b||(Y.value=!1,R.value=void 0)},x=async()=>{const[b,_]=await Va();!b&&(_==null?void 0:_.status)===0&&(F.value=_.data,N.value=Object.keys(_.data||{})[0],Ae(()=>{C(N.value)}))},C=async b=>{const[_,w]=await qa({initializer_name:b});!_&&(w==null?void 0:w.status)===0&&(Z.value=w.data)},h=b=>{C(b)},P=async b=>{var le;if(j.value)return;j.value=!0;const _=await((le=L[b])==null?void 0:le.submit()),w=Nt(_);if(zt(w)){j.value=!1;return}Y.value=!0;const[k,z]=await Ga({device_group_name:S.query.device_group_name,space_id:K.spaceId,initializer_name:N.value,setting:w});j.value=!1,!k&&(z==null?void 0:z.status)===0&&(R.value=z.data)},Q=async b=>{var le;if(W.value)return;W.value=!0;const _=await((le=L[b])==null?void 0:le.submit()),w=Nt(_);if(zt(w)){W.value=!1;return}const[k,z]=await Ba({device_group_name:S.query.device_group_name,space_id:K.spaceId,initializer_name:N.value,setting:w});W.value=!1,!k&&(z==null?void 0:z.status)===0&&v()},Te=async()=>{var b;V.value||(V.value=!0,(b=E.value)==null||b.validate(async _=>{var z;if(_){V.value=!1;return}const[w,k]=await Ka({device_group_name:S.query.device_group_name,...I.value});V.value=!1,!w&&(k==null?void 0:k.status)===0&&(p(),U("success",(z=k.data)==null?void 0:z.space_id))}))};return $e($,b=>{b&&x()},{immediate:!0}),B({openInitialLizerModal:()=>$.value=!0,openAddModal:()=>ne.value=!0}),(b,_)=>{const w=xa,k=Zt,z=Ia,le=Sa,Me=ht,Oe=Wt,Pe=Jt,Qe=Ca,y=Aa,De=Yt,ke=vt;return oe(),Ce("div",null,[l(Pe,{show:r(ne),"onUpdate:show":_[2]||(_[2]=T=>se(ne)?ne.value=T:null),onUpdateShow:s},{default:d(()=>[l(Oe,{style:{width:"700px",height:"320px","padding-top":"0"}},{default:d(()=>[G("div",_r,ie(r(f)("groupDetail.parameterManager.createSpace")),1),l(w,{class:"!my-3"}),l(le,{ref_key:"addFormRef",ref:E,model:r(I),rules:r(te)},{default:d(()=>[l(z,{label:r(f)("groupDetail.parameterManager.spaceName"),path:"space_name"},{default:d(()=>[l(k,{value:r(I).space_name,"onUpdate:value":_[0]||(_[0]=T=>r(I).space_name=T)},null,8,["value"])]),_:1},8,["label"]),l(z,{label:r(f)("groupDetail.parameterManager.description"),path:"description"},{default:d(()=>[l(k,{value:r(I).description,"onUpdate:value":_[1]||(_[1]=T=>r(I).description=T)},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model","rules"]),G("div",mr,[l(Me,{type:"primary",loading:r(V),onClick:Te},{default:d(()=>[xe(ie(r(f)("common.OK")),1)]),_:1},8,["loading"])])]),_:1})]),_:1},8,["show"]),l(Pe,{show:r($),"onUpdate:show":_[6]||(_[6]=T=>se($)?$.value=T:null),"onOnUpdate:show":o},{default:d(()=>[l(Oe,{style:{width:"800px","min-height":"600px",height:"80vh","padding-top":"0"}},{default:d(()=>[G("div",gr,ie(r(f)("groupDetail.parameterManager.paramsTpl")),1),l(ke,{type:"card",placement:"left",value:r(N),"onUpdate:value":_[5]||(_[5]=T=>se(N)?N.value=T:null),onUpdateValue:h},{default:d(()=>[(oe(!0),Ce(dt,null,jt(r(F),(T,ue)=>(oe(),Ze(De,{key:ue,tab:T.title,name:ue},{default:d(()=>[l(y,{class:"pt-3 pl-4 pb-4"},{default:d(()=>[l(Qe,{style:{"max-height":"calc(80vh - 140px)","padding-right":"20px"}},{default:d(()=>[r(Z)?(oe(),Ze(Qa,{ref_for:!0,ref:me=>r(L)[ue]=me,cfgs:r(Z),key:ue},null,8,["cfgs"])):Kt("",!0)]),_:2},1024),G("div",vr,[l(Me,{type:"primary",loading:r(j),onClick:()=>P(ue)},{default:d(()=>[xe(ie(r(f)("common.OK")),1)]),_:2},1032,["loading","onClick"])]),l(Pe,{show:r(Y),"onUpdate:show":_[4]||(_[4]=me=>se(Y)?Y.value=me:null),"onOnUpdate:show":m},{default:d(()=>[l(Oe,{style:{width:"700px"}},{default:d(()=>[_[7]||(_[7]=G("div",{class:"mb-5 text-xl text-center"},"Preview",-1)),l(r(ka),{class:Ta(["w-full overflow-auto",[r(D).baseColor==="#000"?"jse-theme-dark":""]]),style:{height:"calc(80vh - 100px)"},disabled:"",modelValue:r(R),"onUpdate:modelValue":_[3]||(_[3]=me=>se(R)?R.value=me:null),mode:"text"},null,8,["class","modelValue"]),G("div",hr,[l(Me,{type:"primary",loading:r(W),onClick:()=>Q(ue)},{default:d(()=>[xe(ie(r(f)("common.submit")),1)]),_:2},1032,["loading","onClick"])])]),_:2},1024)]),_:2},1032,["show"])]),_:2},1024)]),_:2},1032,["tab","name"]))),128))]),_:1},8,["value"])]),_:1})]),_:1},8,["show"])])}}}),wr={class:"flex flex-1 items-center justify-between gap-2"},br={class:"flex gap-2 items-center"},xr={class:"relative"},Sr={class:"flex items-center gap-2"},Gt="spid",Ir=Ye({__name:"ParamManager",setup(ee){const B=_t(),{t:O}=gt(),L=mt(),K=Fa(),D=g(),S=g(!1),f=g(),U=g(!1),E=g(!1);$e(()=>K.spaceList,s=>{if(!s||E.value)return;const o=(h,P)=>s==null?void 0:s.find(Q=>Q[P]==h),m=Ma(Gt),{space_name:x,space_id:C}=B.query;if(S.value&&o(m,"space_id"))f.value=m,E.value=!0;else if(C&&o(C,"space_id"))f.value=+C,E.value=!0;else if(x&&o(x,"space_name")){const h=o(x,"space_name");f.value=h?+h.space_id:void 0,E.value=!0}else m&&o(m,"space_id")?(f.value=+m,E.value=!0):s[0]&&(f.value=+s[0].space_id,E.value=!0)},{immediate:!0});const I=g(),te=()=>{},j=s=>We("div",{class:"flex gap-3 items-baseline"},[We("div",{class:"text-base"},`${s.space_name||""}`),We("div",{class:"text-xs opacity-50"},s.create_time?`[${new Date(s.create_time).toLocaleString()}] ${s.description||""}`:"")]),W=()=>{var s;(s=D.value)==null||s.openAddModal()},V=()=>{var s;(s=D.value)==null||s.openInitialLizerModal()},F=g(),Z=()=>{var s;(s=F.value)!=null&&s.trim()&&(U.value=!0)},R=g(),N=g(),Y=g(),$=()=>{var s,o,m;(s=R.value)==null||s.refresh(),(o=N.value)==null||o.refresh(),(m=Y.value)==null||m.refresh()},ne=async()=>{var m;const[s,o]=await Ua({group_name:B.query.device_group_name,space_id:f.value});!s&&(o==null?void 0:o.status)===0&&Za.saveAs(`${Ht(location.origin)}/${Ht((m=o==null?void 0:o.data)==null?void 0:m.filename)}`,$a(o.data.filename))},p=async()=>{const[s,o]=await Da({device_group_name:B.query.device_group_name});if(!s&&(o==null?void 0:o.status)===0){const{space_list:m}=o.data;E.value=!1,K.spaceList=m.map(x=>({...x,label:x.space_name,value:x.space_id})),Ae(()=>{$()})}},v=s=>{f.value=s,Ae(()=>{S.value=!0,p()})};return $e(f,s=>{s&&localStorage.setItem(Gt,s)}),(s,o)=>{const m=ht,x=Oa,C=Zt,h=La,P=Ra,Q=Yt,Te=vt,b=Wt,_=Jt;return oe(),Ce("div",null,[l(Te,{type:"card",animated:"",onUpdateValue:te,value:r(I),"onUpdate:value":o[2]||(o[2]=w=>se(I)?I.value=w:null),class:"!h-full"},{prefix:d(()=>[l(er)]),suffix:d(()=>[G("div",wr,[G("div",br,[l(x,{trigger:"hover"},{trigger:d(()=>[l(m,{type:"primary",class:"!ml-1",onClick:ne},{icon:d(()=>[l(r(Ja))]),_:1})]),default:d(()=>[xe(" "+ie(r(O)("expInfo.downloadSpaceParams")),1)]),_:1}),G("div",xr,[l(C,{style:{width:"310px","padding-right":"20px"},value:r(F),"onUpdate:value":o[0]||(o[0]=w=>se(F)?F.value=w:null),valueModifiers:{trim:!0},onKeyup:Pa(Z,["enter"]),placeholder:r(O)("groupDetail.parameterManager.searchPlaceholder")},null,8,["value","placeholder"]),G("div",{class:"absolute -right-4 top-1/2 -translate-1/2 h-full w-8 flex items-center justify-center cursor-pointer",onClick:Z},[l(h,{color:r(L).primaryColor,component:r(Ea)},null,8,["color","component"])])])]),G("div",Sr,[l(P,{options:r(K).spaceList,"render-label":j,value:r(f),"onUpdate:value":o[1]||(o[1]=w=>se(f)?f.value=w:null)},null,8,["options","value"]),l(m,{size:"small",type:"primary",class:"!h-[34px]",onClick:V},{icon:d(()=>[l(r(ar))]),default:d(()=>[xe(" "+ie(r(O)("groupDetail.parameterManager.initSpaceParams")),1)]),_:1}),l(m,{size:"small",type:"primary",class:"!h-[34px]",onClick:W},{icon:d(()=>[l(r(tr))]),default:d(()=>[xe(" "+ie(r(O)("groupDetail.parameterManager.createSpace")),1)]),_:1})])])]),default:d(()=>[l(Q,{name:"overview","tab-type":"overview",tab:r(O)("groupDetail.parameterManager.overview")},{default:d(()=>[l(dr,{"space-id":r(f)},null,8,["space-id"])]),_:1},8,["tab"]),l(Q,{name:"globalLatest","tab-type":"latest",tab:r(O)("groupDetail.parameterManager.globalLatest")},{default:d(()=>[l(ja,{"space-id":r(f),ref_key:"paramsLatestRef",ref:R},null,8,["space-id"])]),_:1},8,["tab"]),l(Q,{name:"globalHistory",tab:r(O)("groupDetail.parameterManager.globalHistory")},{default:d(()=>[l(Xa,{"space-id":r(f),ref_key:"paramsHistoryRef",ref:N},null,8,["space-id"])]),_:1},8,["tab"])]),_:1},8,["value"]),l(yr,{ref_key:"spaceModalRef",ref:D,"space-id":r(f),onSuccess:v},null,8,["space-id"]),l(_,{show:r(U),"onUpdate:show":o[4]||(o[4]=w=>se(U)?U.value=w:null),size:"huge"},{default:d(()=>[l(b,{style:{"min-height":"400px",overflow:"auto",width:"1300px","max-width":"95vw","min-width":"500px"}},{default:d(()=>[l(Wa,{search:"","space-id":r(f),"hide-history-option":"",modelValue:r(F),"onUpdate:modelValue":o[3]||(o[3]=w=>se(F)?F.value=w:null),onRefresh:$},null,8,["space-id","modelValue"])]),_:1})]),_:1},8,["show"])])}}}),Kr=Xt(Ir,[["__scopeId","data-v-20570c5a"]]);export{Kr as default};

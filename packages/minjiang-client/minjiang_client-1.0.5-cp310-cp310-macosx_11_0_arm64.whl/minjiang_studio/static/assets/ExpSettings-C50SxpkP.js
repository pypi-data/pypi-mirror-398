import{u as B}from"./exp-CUij9ySc.js";import{d as w,A as P,e as k,f as t,ah as $,i as u,w as m,a8 as r,a9 as i,l as a,c3 as s,aw as D,s as O,t as j,p as R,c4 as J,S as L,n as N,m as C,aa as z,b0 as A,b as M,L as U,aW as W,v as G,k as H,al as K,h as Q,V as X,am as Y}from"./index-BwlMlHGj.js";import{i as Z}from"./json-editor-vue-CSlvxqm5.js";import{N as g}from"./InputNumber-RrJJyZaR.js";import{N as ee}from"./Switch-B5yYo9Bh.js";import{_ as ae}from"./Cascader-FOPrVODN.js";import"./index.browser-OxPLOBIU.js";import"./Checkbox-UFZekRDE.js";const le=w({__name:"DynamicFormItem",props:{paramsCfg:{},formValue:{},pathPrefix:{},disabled:{type:Boolean}},setup(S){const _=P();return(l,d)=>{const V=D,f=R,n=N,c=g,h=ee,p=C;return t(!0),k(z,null,$(l.paramsCfg,(e,y)=>(t(),k("div",{key:y},[u(p,{label:e.dtype===a(s).text?"":e.title,path:`${l.pathPrefix?l.pathPrefix+".":""}${e.field}`},{default:m(()=>[e.dtype===a(s).text?(t(),r(V,{key:0,class:"w-full",type:"info","show-icon":!1},{default:m(()=>[O(j(e==null?void 0:e.title),1)]),_:2},1024)):i("",!0),e.dtype===a(s).enum&&e.options?(t(),r(f,{key:1,value:l.formValue[e.field],"onUpdate:value":o=>l.formValue[e.field]=o,options:a(J)(e.options),clearable:"",filterable:"",multiple:e.multi_choose},null,8,["value","onUpdate:value","options","multiple"])):i("",!0),e.dtype===a(s).dict||e.dtype===a(s).list?(t(),r(a(Z),{key:2,class:L(["w-full",[a(_).baseColor==="#000"?"jse-theme-dark":""]]),modelValue:l.formValue[e.field],"onUpdate:modelValue":o=>l.formValue[e.field]=o,mode:"text"},null,8,["class","modelValue","onUpdate:modelValue"])):i("",!0),e.dtype===a(s).str&&e.multi_line?(t(),r(n,{key:3,value:l.formValue[e.field],"onUpdate:value":o=>l.formValue[e.field]=o,clearable:"",maxlength:e.max_length,type:"textarea"},null,8,["value","onUpdate:value","maxlength"])):e.dtype===a(s).str?(t(),r(n,{key:4,value:l.formValue[e.field],"onUpdate:value":o=>l.formValue[e.field]=o,clearable:"",maxlength:e.max_length},null,8,["value","onUpdate:value","maxlength"])):i("",!0),e.dtype===a(s).int?(t(),r(c,{key:5,min:e.min,max:e.max,precision:0,class:"w-full",value:l.formValue[e.field],"onUpdate:value":o=>l.formValue[e.field]=o},null,8,["min","max","value","onUpdate:value"])):i("",!0),e.dtype===a(s).float?(t(),r(c,{key:6,min:e.min,max:e.max,value:l.formValue[e.field],"onUpdate:value":o=>l.formValue[e.field]=o,class:"w-full"},null,8,["min","max","value","onUpdate:value"])):i("",!0),e.dtype===a(s).bool?(t(),r(h,{key:7,value:l.formValue[e.field],"onUpdate:value":o=>l.formValue[e.field]=o},null,8,["value","onUpdate:value"])):i("",!0)]),_:2},1032,["label","path"])]))),128)}}}),ie=w({__name:"ExpSettings",setup(S){const _=B(),{expOptions:l,running:d,showPlotParamsModal:V,expFolderId:f}=A(_),{t:n}=M(),c=U(()=>{const p={title:{required:!0,message:n("common.required")},desc:{required:!0,message:n("common.required")},options:{required:!0,message:n("common.required")}};return Object.keys(l.value||[]).forEach(e=>{p[e]={required:!0,message:n("common.required")}}),p}),h=U(()=>{const p=JSON.parse(JSON.stringify(_.expFolderTree||[]));return W(p),p});return(p,e)=>{const y=N,o=C,q=ae,I=K,E=H,F=G,T=Y;return t(),r(T,{show:a(V)},{default:m(()=>[u(F,{style:{width:"800px"},"content-class":"!p-2"},{default:m(()=>{var x,b;return[u(E,{model:a(d).formValue,rules:a(c),ref:"formRef",class:"min-w-[340px]",disabled:!!((b=(x=a(_))==null?void 0:x.expInfo)!=null&&b.exp_id)},{default:m(()=>[u(I,{style:{"max-height":"calc(100vh - 255px)","padding-right":"12px"}},{default:m(()=>[Q("div",null,[u(o,{label:a(n)("expInfo.expTitle"),path:"title"},{default:m(()=>[u(y,{value:a(d).formValue.title,"onUpdate:value":e[0]||(e[0]=v=>a(d).formValue.title=v)},null,8,["value"])]),_:1},8,["label"]),u(o,{label:a(n)("expInfo.expDesc"),path:"desc"},{default:m(()=>[u(y,{type:"textarea",value:a(d).formValue.desc,"onUpdate:value":e[1]||(e[1]=v=>a(d).formValue.desc=v)},null,8,["value"])]),_:1},8,["label"]),u(o,{label:a(n)("expInfo.expFolder")},{default:m(()=>[u(q,{value:a(f),"onUpdate:value":e[2]||(e[2]=v=>X(f)?f.value=v:null),options:a(h),"value-field":"key","check-strategy":"child",cascade:!1},null,8,["value","options"])]),_:1},8,["label"])]),a(l)?(t(),r(le,{key:0,paramsCfg:a(l),"form-value":a(d).formValue},null,8,["paramsCfg","form-value"])):i("",!0)]),_:1})]),_:1},8,["model","rules","disabled"])]}),_:1})]),_:1},8,["show"])}}});export{ie as default};

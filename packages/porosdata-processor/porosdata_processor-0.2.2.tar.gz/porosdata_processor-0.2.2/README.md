# PorosData-Processor

[![Python 3.8+](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org/downloads/) 	[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

**PorosData-Processor** æ˜¯ä¸€æ¬¾ä¸“ä¸º **AI for Science** åœºæ™¯æ‰“é€ çš„æ·±åº¦æ–‡æœ¬æ¸…æ´—ç®¡çº¿ï¼Œç°é˜¶æ®µä¸“æ³¨äºå¯¹æ–‡æ¡£è§£æå™¨ï¼ˆ**MinerU**ï¼‰è¾“å‡ºçš„ç»“æ„åŒ– JSON æ•°æ®è¿›è¡Œç²¾ç»†åŒ–å¤„ç†ï¼Œè§£å†³ç§‘ç ”æ–‡çŒ®åœ¨è½¬åŒ–ä¸ºå¤§æ¨¡å‹å¯è¯»æ ¼å¼æ—¶çš„å„ç§â€œç¡¬ä¼¤â€ï¼Œä»¥æœŸç¡®ä¿å­¦æœ¯æ–‡æ¡£åœ¨è¾“å…¥å¤§æ¨¡å‹ï¼ˆLLMï¼‰å‰è¾¾åˆ°æ ¼å¼æ ‡å‡†åŒ–ã€Token æœ€å°åŒ–å’Œé€»è¾‘å®Œæ•´åŒ–ï¼Œ

## ğŸ“– é¡¹ç›®åˆè¡· (Motivation)

åœ¨ AI for Science é¢†åŸŸï¼Œé«˜è´¨é‡çš„æ•°æ®é¢„å¤„ç†æ˜¯æ¨¡å‹ç†è§£å­¦æœ¯æ–‡çŒ®çš„åŸºç¡€ã€‚è™½ç„¶ MinerU æä¾›äº†å¼ºå¤§çš„ PDF è§£æèƒ½åŠ›ï¼Œä½†å…¶åŸå§‹è¾“å‡ºä»é¢ä¸´ä»¥ä¸‹æŒ‘æˆ˜ï¼š

* **å…¬å¼æŸæ¯** ï¼šæ ‡å‡†çš„æ–‡æœ¬æ¸…æ´—è§„åˆ™å¸¸è¯¯è§¦ LaTeX å…¬å¼ï¼Œå¯¼è‡´ç§‘å­¦å«ä¹‰ä¸¢å¤±ã€‚
* **ç»“æ„ç¢ç‰‡åŒ–** ï¼šæ·±å±‚åµŒå¥—çš„ JSON å’Œéæ ‡å‡†å¼•ç”¨æ ‡è®°å¹²æ‰°äº† RAGç³»ç»Ÿçš„ç´¢å¼•è´¨é‡ã€‚
* **Token æµªè´¹** ï¼šå­¦æœ¯æ–‡æ¡£ä¸­å¤§é‡çš„å†—ä½™ç©ºæ ¼å’Œä¸è§„èŒƒå­—ç¬¦å¢åŠ äº† LLM çš„æ¨ç†å¼€é”€ã€‚

## ğŸŒŸæ ¸å¿ƒäº®ç‚¹

PorosData-Processorçš„å‡ºç°ï¼Œæ­£æ˜¯ä¸ºäº†åœ¨â€œæ¸…æ´—â€ä¸â€œä¿æŠ¤â€ä¹‹é—´å»ºç«‹å®Œç¾çš„å¹³è¡¡ã€‚

* **LaTeX å…¬å¼ä¿æŠ¤** ï¼šè‡ªåŠ¨è¯†åˆ«å¹¶é”å®šè¡Œå†… `$ ... $` å’Œè¡Œé—´ `$$...$$` å…¬å¼ï¼Œé¿å…æ¸…æ´—æ–‡æœ¬æ—¶ç ´åå…³é”®ä¿¡æ¯ã€‚
* **ä»£ç å—ä¿ç•™** ï¼šä¿æŠ¤ Markdown ä»£ç å—åŠè¡Œå†…ä»£ç ã€‚
* **å ä½ç¬¦æœºåˆ¶** ï¼šé‡‡ç”¨å›ºå®šå®½åº¦çš„æ™ºèƒ½å ä½ç¬¦ï¼Œé˜²æ­¢ç©ºæ ¼å‹ç¼©å½±å“å¸ƒå±€ã€‚
* **å­¦æœ¯è§„èŒƒåŒ–** ï¼šè‡ªåŠ¨ä¿®å¤å¸Œè…Šå­—æ¯ï¼ˆ**$\alpha, \beta$**ï¼‰ã€ç½—é©¬æ•°å­—åŠç« èŠ‚ç¼–å·ã€‚
* **å‚è€ƒæ–‡çŒ®å‡€åŒ–** ï¼šå°†å¤šæ ·åŒ–çš„å¼•ç”¨æ ¼å¼ï¼ˆå¦‚ `ã€ 1 ã€‘`ï¼‰ç»Ÿä¸€è§„èŒƒä¸º `[1]`ã€‚
* **Token ä¼˜åŒ–** ï¼šæ¸…ç† LaTeX å…¬å¼ä¸­çš„å†—ä½™ç©ºæ ¼ï¼Œé™ä½ LLM æ¶ˆè€—ã€‚

### ğŸ›¡ï¸ æ™ºèƒ½ Shield ä¿æŠ¤æœºåˆ¶

é’ˆå¯¹å­¦æœ¯æ–‡æ¡£ä¸­çš„æ•æ„Ÿå†…å®¹ï¼Œå¼€å‘äº†â€œé¢„å¤„ç†-æ¸…æ´—-æ¢å¤â€ä¸‰æ®µå¼ä¿æŠ¤æµç¨‹ï¼Œç¡®ä¿æ ¸å¿ƒä¿¡æ¯â€œé›¶æŸæ¯â€ï¼Œç¡®ä¿æ•æ„Ÿæ•°æ®åœ¨æ¸…æ´—è¿‡ç¨‹ä¸­çš„ç»å¯¹å®‰å…¨ï¼šï¼š

* **é¢„å±è”½ (Pre-Shield)** ï¼šåˆ©ç”¨æ­£åˆ™å¼•æ“é”å®š LaTeX å…¬å¼ã€ä»£ç å—ç­‰åŒºåŸŸï¼Œæ˜ å°„è‡³å›ºå®šå®½åº¦çš„å ä½ç¬¦ï¼ˆå¦‚ `__CLEANLIT_SHIELD_001__`ï¼‰ã€‚
* **å®‰å…¨æ¸…æ´— (Safe Cleaning)** ï¼šå¯¹å ä½ç¬¦ä¹‹å¤–çš„â€œçº¯æ–‡æœ¬åŒºåŸŸâ€æ‰§è¡Œé«˜å¼ºåº¦çš„ç« èŠ‚è§„èŒƒå’Œç©ºç™½å‹ç¼©ã€‚
* **ç²¾å‡†æ¢å¤ (Post-Shield)** ï¼šæ¸…æ´—å®Œæˆåï¼Œå°†å ä½ç¬¦é€†å‘è¿˜åŸä¸ºåŸå§‹çš„æ–‡çŒ®å†…å®¹ã€‚

### ğŸ”Œ æ¨¡å—åŒ–æ‰©å±•æ’ä»¶

åŸºäº **Plugin Registry** æ¶æ„ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡è£…é¥°å™¨è½»æ¾æ‰©å±•ä¸šåŠ¡é€»è¾‘ã€‚è¿™ç§è®¾è®¡å®ç°äº†æ¸…æ´—è§„åˆ™ä¸æ ¸å¿ƒç®¡çº¿çš„å®Œå…¨è§£è€¦ï¼Œæ”¯æŒç”¨æˆ·æ ¹æ®ä¸åŒçš„è¯­æ–™åº“åŠ¨æ€ï¼ŒåŠå…¶ç§‘ç ”éœ€è¦ç»„åˆè‡ªå·±çš„ Pipelineã€‚

```
@PluginRegistry.register("custom_academic_rule")
def my_rule(text: str) -> str:
    # é’ˆå¯¹ç‰¹å®šé¢†åŸŸï¼ˆå¦‚ç‰©ç†ã€ç”Ÿç‰©ï¼‰çš„è‡ªå®šä¹‰æ¸…æ´—é€»è¾‘
    return processed_text
```

## ğŸ“Š æ ¸å¿ƒåŠŸèƒ½çŸ©é˜µ

| **åŠŸèƒ½æ¨¡å—**       | **è§£å†³çš„é—®é¢˜**                | **ç¤ºä¾‹ (è¾“å…¥ -> è¾“å‡º)**               |
| ------------------------ | ----------------------------------- | ------------------------------------------- |
| **ä¸­è‹±æ–‡æ ‡ç‚¹ä¿®å¤** | ä¿®å¤æ ‡ç‚¹æ··ç”¨ä¸å¤šä½™ç©ºæ ¼              | `"Helloï¼Œworld"`-> æ ‡å‡†åŒ–è¾“å‡º             |
| **å‚è€ƒæ–‡çŒ®è§„èŒƒåŒ–** | ç»Ÿä¸€ `ã€1ã€‘`ã€`[ 2 ]`ç­‰å¼•ç”¨æ ‡è®° | `ã€1ã€‘`->`[1]`                          |
| **ç½—é©¬æ•°å­—è½¬æ¢**   | ç»Ÿä¸€æ•°å­—è¡¨ç¤ºï¼ˆå¦‚ `II`,`III`ï¼‰   | `Chapter II`->`Chapter 2`               |
| **ç« èŠ‚ç¼–å·æ ‡å‡†åŒ–** | ä¿®å¤æ–‡æ¡£ç»“æ„ç¼–å·æ··ä¹±                | `ç¬¬1ç«  1.1èŠ‚`->`Chapter 1, Section 1.1` |
| **å¸Œè…Šå­—æ¯è½¬æ¢**   | å°†å¸Œè…Šå­—ç¬¦è½¬ä¸º LaTeX å­¦æœ¯ç¬¦å·       | `Î± + Î²`->`\alpha + \beta`             |
| **ç©ºç™½å­—ç¬¦ä¼˜åŒ–**   | æ¸…é™¤å¤šä½™ç©ºæ ¼ä¸éæ³•æ¢è¡Œ              | `Text   with spaces`-> è§„èŒƒé—´è·           |
| **LaTeX å…¬å¼å‹ç¼©** | é¢„å¤„ç†å…¬å¼å†…ç©ºæ ¼ï¼Œä¼˜åŒ– Token æ¶ˆè€—   | `$ \alpha + \beta $`->`$\alpha+\beta$`  |

## âš™ï¸å®‰è£…ä¸å‘½åè§„èŒƒ

### **âš ï¸ é‡è¦è¯´æ˜** ï¼š

* **PyPI å®‰è£…å** ï¼š`PorosData-Processor` (ä½¿ç”¨è¿å­—ç¬¦ `-`)
* **Python å¯¼å…¥å** ï¼š`import porosdata_processor` (ä½¿ç”¨ä¸‹åˆ’çº¿ `_`)
* **å‘½ä»¤è¡Œå·¥å…·** ï¼š`porosdata-processor`

```bash
pip install porosdata-processor
```

> **Notice**: è™½ç„¶ PyPI å®‰è£…åŒ…åä¸º `PorosData-Processor`ï¼ˆå¸¦è¿å­—ç¬¦ - ï¼‰ï¼Œä½†åœ¨ä»£ç ä¸­å¼•ç”¨æ—¶å¿…é¡»ä½¿ç”¨ä¸‹åˆ’çº¿ï¼š`import porosdata_processor`

```bash
python -c "import porosdata_processor; print('porosdata_processor å¯¼å…¥æˆåŠŸ')"
```

## ğŸš€ å¿«é€Ÿä¸Šæ‰‹ (Quick Start)

```python
from porosdata_processor import TextCleaner

# æ–¹å¼ 1ï¼šä½¿ç”¨é»˜è®¤ç®¡çº¿ï¼ˆæ¨èï¼‰
cleaner = TextCleaner()

# æ–¹å¼ 2ï¼šè‡ªå®šä¹‰æ’ä»¶ç»„åˆ
cleaner = TextCleaner(pipeline=["patterns_cleaning", "greek_to_latex"])

# æ‰§è¡Œæ¸…æ´—
raw_text = "è¯†åˆ« Î± ç²’å­åœ¨æ–‡çŒ® ã€1ã€‘ ä¸­çš„æè¿°ã€‚"
cleaned_text = cleaner.clean(raw_text)
```

```
# å¯ç”¨é«˜çº§é€‰é¡¹ï¼šæ¸…ç†å…¬å¼å†…éƒ¨å¤šä½™ç©ºæ ¼
cleaner = TextCleaner(clean_options={"clean_latex_math_spaces": True})

# ä»…å¯ç”¨ç‰¹å®šæ’ä»¶
custom_cleaner = TextCleaner(pipeline=["citation_rules", "greek_to_latex"])
```

## âœ… å¯é æ€§ä¿è¯

æœ¬é¡¹ç›®é‡‡ç”¨ä¸¥æ ¼çš„å•å…ƒæµ‹è¯•æ¡†æ¶ï¼Œè¦†ç›–äº†ä»¥ä¸‹æ ¸å¿ƒç»´åº¦ï¼š

* **æ ¸å¿ƒæ³¨å†Œç³»ç»Ÿè¦†ç›–ç‡** ï¼š100%
* **ç¼–ç å…¼å®¹æ€§éªŒè¯** ï¼šæ”¯æŒ Windows/Linux/MacOS å…¨å¹³å° UTF-8 å…ç–«å¤„ç†

## ğŸ—ºï¸ å‘å±•è·¯çº¿ (Roadmap)

* [ ] **é¢†åŸŸç‰¹å®šä¼˜åŒ–** ï¼šé’ˆå¯¹ arXiv è®ºæ–‡ã€ç¼–ç¨‹è¯­è¨€ç‰¹å®šæ ¼å¼çš„æ·±åº¦æ¸…æ´—ã€‚
* [ ] **AI æ¨¡å‹é›†æˆ** ï¼šå¼•å…¥è½»é‡çº§ LLM è¾…åŠ©è¯†åˆ«æ¸…æ´—è´¨é‡ã€‚

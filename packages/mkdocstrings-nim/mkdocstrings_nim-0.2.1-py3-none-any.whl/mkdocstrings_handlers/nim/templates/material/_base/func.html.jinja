{#- Template for Nim procs/funcs/iterators/etc.

Context:
  entry (NimEntry): The entry to render.
  root (bool): Whether this is the root object.
  heading_level (int): The HTML heading level to use.
  config (dict): The configuration options.
-#}

<div class="doc doc-object doc-{{ entry.kind }}">
  {% set html_id = entry.name %}

  {% if root or config.show_root_heading %}
    {% filter heading(heading_level, id=html_id, class="doc doc-heading", toc_label=entry.name) %}
      {% if config.show_symbol_type_heading %}
        <code class="doc-symbol doc-symbol-heading doc-symbol-{{ entry.kind }}"></code>
      {% endif %}
      <span class="doc doc-object-name doc-{{ entry.kind }}-name">{{ entry.name }}</span>
      {% if entry.pragmas %}
        {% for pragma in entry.pragmas %}
          <span class="doc-label" data-label="{{ pragma }}">{{ pragma }}</span>
        {% endfor %}
      {% endif %}
    {% endfilter %}
  {% endif %}

  {% if config.show_signature %}
    <div class="doc-signature highlight">
      <pre><code class="language-nim highlight">{{ entry.signature | highlight_nim }}</code></pre>
    </div>
  {% endif %}

  <div class="doc doc-contents {% if root %}first{% endif %}">
    {% if entry.doc %}
      <div class="doc-description">
        {{ entry.doc | convert_markdown(heading_level, html_id) }}
      </div>
    {% endif %}

    {% if entry.params %}
      <div class="doc-section doc-section-parameters">
        <h{{ heading_level + 1 }}>Parameters</h{{ heading_level + 1 }}>
        <ul>
          {% for param in entry.params %}
            <li>
              <code>{{ param.name }}</code>
              (<code>{{ param.type }}</code>)
              {% if param.description %} – {{ param.description }}{% endif %}
            </li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}

    {% if entry.returns %}
      <div class="doc-section doc-section-returns">
        <h{{ heading_level + 1 }}>Returns</h{{ heading_level + 1 }}>
        <p><code>{{ entry.returns }}</code>{% if entry.returns_doc %} – {{ entry.returns_doc }}{% endif %}</p>
      </div>
    {% endif %}

    {% if entry.raises %}
      <div class="doc-section doc-section-raises">
        <h{{ heading_level + 1 }}>Raises</h{{ heading_level + 1 }}>
        <ul>
          {% for exc in entry.raises %}
            <li><code>{{ exc }}</code></li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}

    {% if config.show_source and entry.line %}
      <div class="doc-source">
        <span class="doc-source-label">Source:</span>
        {% if config.source_url %}
          <a href="{{ config.source_url }}/blob/{{ config.source_ref }}/{{ module.file }}#L{{ entry.line }}" target="_blank" rel="noopener">
            {{ module.file }}:{{ entry.line }}
          </a>
        {% else %}
          <code>{{ module.file }}:{{ entry.line }}</code>
        {% endif %}
      </div>
    {% endif %}
  </div>
</div>

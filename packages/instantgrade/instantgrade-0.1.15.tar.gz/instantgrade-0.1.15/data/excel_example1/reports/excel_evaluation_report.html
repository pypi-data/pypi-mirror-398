<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Evaluator Report</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
    :root {
        --bg: #ffffff;
        --text: #222222;
        --muted: #666666;
        --panel: #f8f9fb;
        --accent: #2b6cb0;
        --pass: #e6ffe6;
        --fail: #fff1f0;
        --error-bg: #fff7f6;
    }
    body.dark {
        --bg: #111216;
        --text: #e6eef8;
        --muted: #9aa7b2;
        --panel: #0f1114;
        --accent: #4aa3ff;
        --pass: #0b2b0b;
        --fail: #3a0f0f;
        --error-bg: #2a0b0b;
    }
    body { background: var(--bg); color: var(--text); font-family: Inter, Arial, sans-serif; margin: 18px; }
    h1, h2, h3, h4 { margin: 6px 0; }
    .controls { display:flex; flex-wrap:wrap; gap:8px; align-items:center; margin-bottom:12px; }
    select, button, input[type="search"] { padding: 8px; font-size:14px; border-radius:6px; border:1px solid #ccc; }
    .controls .spacer { flex:1 1 auto; }
    .panel { background: var(--panel); padding: 12px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.04); margin-bottom: 12px; }
    .student-block { margin-bottom: 12px; padding: 12px; border-radius: 8px; border: 1px solid rgba(0,0,0,0.06); }
    .student-meta { display:flex; gap:12px; flex-wrap:wrap; align-items:center; margin-bottom:8px; }
    .summary-pill { background: #fff; padding:6px 10px; border-radius:999px; font-weight:600; box-shadow:0 1px 4px rgba(0,0,0,0.05); }
    .question-block { margin-top:10px; border-radius:6px; padding:8px; border:1px solid rgba(0,0,0,0.04); background: linear-gradient(90deg, rgba(0,0,0,0.01), transparent); }
    .question-header { display:flex; justify-content:space-between; align-items:center; cursor:pointer; }
    .question-header h4 { margin:0; font-size:15px; }
    .question-details { margin-top:8px; display:none; }
    table { border-collapse: collapse; width:100%; margin-top:8px; }
    th, td { padding: 8px 6px; border-bottom: 1px solid rgba(0,0,0,0.06); text-align:left; font-size:13px; }
    tr.passed td { background: var(--pass); }
    tr.failed td { background: var(--fail); }
    .error-box {
        white-space: normal;
        background: var(--error-bg);
        padding: 8px;
        border-radius: 6px;
        font-family: "Courier New", monospace;
        font-size: 13px;
        line-height: 1.35;
        border: 1px solid rgba(0,0,0,0.06);
    }
    .summary-modal {
        display:none;
        position:fixed;
        left:50%;
        top:10%;
        transform:translateX(-50%);
        width: 80%;
        max-width: 1100px;
        max-height: 78vh;
        overflow:auto;
        background: var(--panel);
        border-radius:10px;
        padding:18px;
        z-index:1002;
        box-shadow: 0 12px 40px rgba(0,0,0,0.3);
    }
    #overlay {
        display:none;
        position:fixed; left:0; top:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1001;
    }
    .btn { background: var(--accent); color: white; border: none; padding:8px 12px; border-radius:6px; cursor:pointer; }
    .btn.ghost { background: transparent; color:var(--text); border:1px solid rgba(0,0,0,0.08); }
    .toggle { display:inline-flex; align-items:center; gap:8px; }
    .muted { color: var(--muted); font-size:13px; }
    .collapse-indicator { font-size:12px; margin-left:8px; color:var(--muted); }
    @media (max-width: 800px) {
        .controls { flex-direction:column; align-items:stretch; }
    }
</style>

<script>
    function toggleDarkMode() {
        document.body.classList.toggle('dark');
        try { localStorage.setItem('dark', document.body.classList.contains('dark')?'1':'0'); } catch(e){}
    }
    function initDarkModeFromStorage() {
        try {
            if(localStorage.getItem('dark') === '1') document.body.classList.add('dark');
        } catch(e){}
    }
    function filterReports() {
        const studentVal = document.getElementById("studentSelect").value;
        const rollVal = document.getElementById("rollSelect").value;
        const fileVal = document.getElementById("fileSelect").value;
        const searchVal = document.getElementById("searchInput").value.toLowerCase();

        document.querySelectorAll(".student-block").forEach(div => {
            const name = div.dataset.name || "";
            const roll = div.dataset.roll || "";
            const file = div.dataset.file || "";
            const txt = div.innerText.toLowerCase();
            const matches = (
                (studentVal === "" || name === studentVal) &&
                (rollVal === "" || roll === rollVal) &&
                (fileVal === "" || file === fileVal) &&
                (searchVal === "" || txt.indexOf(searchVal) !== -1)
            );
            div.style.display = matches ? "block" : "none";
        });
    }
    function sortStudents() {
        const sortType = document.getElementById("sortSelect").value;
        const container = document.getElementById("reportContainer");
        const blocks = Array.from(container.getElementsByClassName("student-block"));
        blocks.sort((a, b) => {
            const scoreA = parseFloat(a.dataset.total) || 0;
            const scoreB = parseFloat(b.dataset.total) || 0;
            const nameA = (a.dataset.name || "").toLowerCase();
            const nameB = (b.dataset.name || "").toLowerCase();
            const rollA = (a.dataset.roll || "").toLowerCase();
            const rollB = (b.dataset.roll || "").toLowerCase();
            const fileA = (a.dataset.file || "").toLowerCase();
            const fileB = (b.dataset.file || "").toLowerCase();
            switch(sortType) {
                case "marks": return scoreB - scoreA;
                case "name": return nameA.localeCompare(nameB);
                case "roll": return rollA.localeCompare(rollB);
                case "file": return fileA.localeCompare(fileB);
                default: return 0;
            }
        });
        blocks.forEach(b => container.appendChild(b));
    }
    function showSummary() {
        document.getElementById("overlay").style.display = "block";
        document.getElementById("summaryModal").style.display = "block";
    }
    function closeSummary() {
        document.getElementById("overlay").style.display = "none";
        document.getElementById("summaryModal").style.display = "none";
    }
    function toggleDetails(evt, qid) {
        const details = document.getElementById(qid);
        if(!details) return;
        if(details.style.display === "block") {
            details.style.display = "none";
            evt.currentTarget.querySelector(".collapse-indicator").innerText = "+";
        } else {
            details.style.display = "block";
            evt.currentTarget.querySelector(".collapse-indicator").innerText = "−";
        }
    }
    window.addEventListener('DOMContentLoaded', (event) => {
        initDarkModeFromStorage();
        document.querySelectorAll('.question-header').forEach((hdr) => {
            hdr.addEventListener('click', function(e) {
                const qid = this.getAttribute('data-qid');
                toggleDetails({ currentTarget: this }, qid);
            });
        });
    });
</script>
</head>
<body>
<h1>Evaluator Report</h1>

<div class="controls panel">
    <label for="sortSelect">Sort by:</label>
    <select id="sortSelect" onchange="sortStudents()">
        <option value="marks">Total Marks (High → Low)</option>
        <option value="name">Student Name (A → Z)</option>
        <option value="roll">Roll Number (A → Z)</option>
        <option value="file">File Name (A → Z)</option>
    </select>

    <label for="studentSelect">Student:</label>
    <select id="studentSelect" onchange="filterReports()">
        <option value="">-- All Students --</option>
<option value='Assignment 1'>Assignment 1</option><option value='Assignment_1 name roll no'>Assignment_1 name roll no</option></select>
    <label for="rollSelect">Roll:</label>
    <select id="rollSelect" onchange="filterReports()">
        <option value="">-- All Rolls --</option>
<option value='N/A'>N/A</option></select>
    <label for="fileSelect">File:</label>
    <select id="fileSelect" onchange="filterReports()">
        <option value="">-- All Files --</option>
<option value='Assignment 1.xlsx'>Assignment 1.xlsx</option><option value='Assignment_1 name roll no.xlsx'>Assignment_1 name roll no.xlsx</option></select>
    <input id="searchInput" type="search" placeholder="Search inside reports..." oninput="filterReports()" style="min-width:200px;">
    <div class="spacer"></div>
    <div class="toggle">
        <button class="btn" onclick="showSummary()">Show Summary</button>
        <button class="btn ghost" onclick="sortStudents()">Refresh Sort</button>
        <button class="btn ghost" onclick="filterReports()">Apply Filters</button>
    </div>
    <div style="width:12px;"></div>
    <div style="display:flex; gap:8px; align-items:center;">
        <label class="muted">Dark</label>
        <button class="btn ghost" onclick="toggleDarkMode()">Toggle Dark</button>
    </div>
</div>
<div id="reportContainer">
<div class="student-block panel" data-name="Assignment 1" data-roll="N/A" data-file="Assignment 1.xlsx" data-total="18.0"><div class='student-meta'><div><h3>Assignment 1</h3><div class='muted'>Roll: N/A</div></div><div style='margin-left:auto; display:flex; gap:8px; align-items:center;'><div class='summary-pill'>File: Assignment 1.xlsx</div><div class='summary-pill'>Total: 18.0/20 (90.0%)</div></div></div><div class='question-block'><div class='question-header' data-qid='q_5425332096714352135'><h4>Question: B10</h4><div class='collapse-indicator'>+</div></div><div class='question-details' id='q_5425332096714352135'><div class='muted' style='margin-bottom:8px;'>Description: Value match</div><table><thead><tr><th style='width:55%'>Assertion</th><th style='width:10%'>Status</th><th style='width:8%'>Score</th><th>Error</th></tr></thead><tbody><tr class='passed'><td>value</td><td>passed</td><td>1.0</td><td></td></tr><tr class='passed'><td>formula</td><td>passed</td><td>1.0</td><td></td></tr></tbody></table></div></div><div class='question-block'><div class='question-header' data-qid='q_5531267854640251336'><h4>Question: B11</h4><div class='collapse-indicator'>+</div></div><div class='question-details' id='q_5531267854640251336'><div class='muted' style='margin-bottom:8px;'>Description: Value match</div><table><thead><tr><th style='width:55%'>Assertion</th><th style='width:10%'>Status</th><th style='width:8%'>Score</th><th>Error</th></tr></thead><tbody><tr class='passed'><td>value</td><td>passed</td><td>1.0</td><td></td></tr><tr class='passed'><td>formula</td><td>passed</td><td>1.0</td><td></td></tr></tbody></table></div></div><div class='question-block'><div class='question-header' data-qid='q_6603430407327840075'><h4>Question: B12</h4><div class='collapse-indicator'>+</div></div><div class='question-details' id='q_6603430407327840075'><div class='muted' style='margin-bottom:8px;'>Description: Value match</div><table><thead><tr><th style='width:55%'>Assertion</th><th style='width:10%'>Status</th><th style='width:8%'>Score</th><th>Error</th></tr></thead><tbody><tr class='passed'><td>value</td><td>passed</td><td>1.0</td><td></td></tr><tr class='passed'><td>formula</td><td>passed</td><td>1.0</td><td></td></tr></tbody></table></div></div><div class='question-block'><div class='question-header' data-qid='q_1127735089663482767'><h4>Question: B13</h4><div class='collapse-indicator'>+</div></div><div class='question-details' id='q_1127735089663482767'><div class='muted' style='margin-bottom:8px;'>Description: Value match</div><table><thead><tr><th style='width:55%'>Assertion</th><th style='width:10%'>Status</th><th style='width:8%'>Score</th><th>Error</th></tr></thead><tbody><tr class='failed'><td>value</td><td>failed</td><td>0.0</td><td></td></tr><tr class='passed'><td>formula</td><td>passed</td><td>1.0</td><td></td></tr></tbody></table></div></div><div class='question-block'><div class='question-header' data-qid='q_6117765905769546373'><h4>Question: B14</h4><div class='collapse-indicator'>+</div></div><div class='question-details' id='q_6117765905769546373'><div class='muted' style='margin-bottom:8px;'>Description: Value match</div><table><thead><tr><th style='width:55%'>Assertion</th><th style='width:10%'>Status</th><th style='width:8%'>Score</th><th>Error</th></tr></thead><tbody><tr class='failed'><td>value</td><td>failed</td><td>0.0</td><td></td></tr><tr class='passed'><td>formula</td><td>passed</td><td>1.0</td><td></td></tr></tbody></table></div></div><div class='question-block'><div class='question-header' data-qid='q_4826285926275522163'><h4>Question: B5</h4><div class='collapse-indicator'>+</div></div><div class='question-details' id='q_4826285926275522163'><div class='muted' style='margin-bottom:8px;'>Description: Value match</div><table><thead><tr><th style='width:55%'>Assertion</th><th style='width:10%'>Status</th><th style='width:8%'>Score</th><th>Error</th></tr></thead><tbody><tr class='passed'><td>value</td><td>passed</td><td>1.0</td><td></td></tr><tr class='passed'><td>formula</td><td>passed</td><td>1.0</td><td></td></tr></tbody></table></div></div><div class='question-block'><div class='question-header' data-qid='q_3198580060027109473'><h4>Question: B6</h4><div class='collapse-indicator'>+</div></div><div class='question-details' id='q_3198580060027109473'><div class='muted' style='margin-bottom:8px;'>Description: Value match</div><table><thead><tr><th style='width:55%'>Assertion</th><th style='width:10%'>Status</th><th style='width:8%'>Score</th><th>Error</th></tr></thead><tbody><tr class='passed'><td>value</td><td>passed</td><td>1.0</td><td></td></tr><tr class='passed'><td>formula</td><td>passed</td><td>1.0</td><td></td></tr></tbody></table></div></div><div class='question-block'><div class='question-header' data-qid='q_6069050735457335375'><h4>Question: B7</h4><div class='collapse-indicator'>+</div></div><div class='question-details' id='q_6069050735457335375'><div class='muted' style='margin-bottom:8px;'>Description: Value match</div><table><thead><tr><th style='width:55%'>Assertion</th><th style='width:10%'>Status</th><th style='width:8%'>Score</th><th>Error</th></tr></thead><tbody><tr class='passed'><td>value</td><td>passed</td><td>1.0</td><td></td></tr><tr class='passed'><td>formula</td><td>passed</td><td>1.0</td><td></td></tr></tbody></table></div></div><div class='question-block'><div class='question-header' data-qid='q_4490150294442059982'><h4>Question: B8</h4><div class='collapse-indicator'>+</div></div><div class='question-details' id='q_4490150294442059982'><div class='muted' style='margin-bottom:8px;'>Description: Value match</div><table><thead><tr><th style='width:55%'>Assertion</th><th style='width:10%'>Status</th><th style='width:8%'>Score</th><th>Error</th></tr></thead><tbody><tr class='passed'><td>value</td><td>passed</td><td>1.0</td><td></td></tr><tr class='passed'><td>formula</td><td>passed</td><td>1.0</td><td></td></tr></tbody></table></div></div><div class='question-block'><div class='question-header' data-qid='q_4304164045324434000'><h4>Question: B9</h4><div class='collapse-indicator'>+</div></div><div class='question-details' id='q_4304164045324434000'><div class='muted' style='margin-bottom:8px;'>Description: Value match</div><table><thead><tr><th style='width:55%'>Assertion</th><th style='width:10%'>Status</th><th style='width:8%'>Score</th><th>Error</th></tr></thead><tbody><tr class='passed'><td>value</td><td>passed</td><td>1.0</td><td></td></tr><tr class='passed'><td>formula</td><td>passed</td><td>1.0</td><td></td></tr></tbody></table></div></div></div><div class="student-block panel" data-name="Assignment_1 name roll no" data-roll="N/A" data-file="Assignment_1 name roll no.xlsx" data-total="0.0"><div class='student-meta'><div><h3>Assignment_1 name roll no</h3><div class='muted'>Roll: N/A</div></div><div style='margin-left:auto; display:flex; gap:8px; align-items:center;'><div class='summary-pill'>File: Assignment_1 name roll no.xlsx</div><div class='summary-pill'>Total: 0.0/20 (0.0%)</div></div></div><div class='question-block'><div class='question-header' data-qid='q_3338281292521542167'><h4>Question: B10</h4><div class='collapse-indicator'>+</div></div><div class='question-details' id='q_3338281292521542167'><div class='muted' style='margin-bottom:8px;'>Description: Value match</div><table><thead><tr><th style='width:55%'>Assertion</th><th style='width:10%'>Status</th><th style='width:8%'>Score</th><th>Error</th></tr></thead><tbody><tr class='failed'><td>value</td><td>failed</td><td>0.0</td><td></td></tr><tr class='failed'><td>formula</td><td>failed</td><td>0.0</td><td></td></tr></tbody></table></div></div><div class='question-block'><div class='question-header' data-qid='q_954140332536926760'><h4>Question: B11</h4><div class='collapse-indicator'>+</div></div><div class='question-details' id='q_954140332536926760'><div class='muted' style='margin-bottom:8px;'>Description: Value match</div><table><thead><tr><th style='width:55%'>Assertion</th><th style='width:10%'>Status</th><th style='width:8%'>Score</th><th>Error</th></tr></thead><tbody><tr class='failed'><td>value</td><td>failed</td><td>0.0</td><td></td></tr><tr class='failed'><td>formula</td><td>failed</td><td>0.0</td><td></td></tr></tbody></table></div></div><div class='question-block'><div class='question-header' data-qid='q_6928007068484194846'><h4>Question: B12</h4><div class='collapse-indicator'>+</div></div><div class='question-details' id='q_6928007068484194846'><div class='muted' style='margin-bottom:8px;'>Description: Value match</div><table><thead><tr><th style='width:55%'>Assertion</th><th style='width:10%'>Status</th><th style='width:8%'>Score</th><th>Error</th></tr></thead><tbody><tr class='failed'><td>value</td><td>failed</td><td>0.0</td><td></td></tr><tr class='failed'><td>formula</td><td>failed</td><td>0.0</td><td></td></tr></tbody></table></div></div><div class='question-block'><div class='question-header' data-qid='q_5357673097513695329'><h4>Question: B13</h4><div class='collapse-indicator'>+</div></div><div class='question-details' id='q_5357673097513695329'><div class='muted' style='margin-bottom:8px;'>Description: Value match</div><table><thead><tr><th style='width:55%'>Assertion</th><th style='width:10%'>Status</th><th style='width:8%'>Score</th><th>Error</th></tr></thead><tbody><tr class='failed'><td>value</td><td>failed</td><td>0.0</td><td></td></tr><tr class='failed'><td>formula</td><td>failed</td><td>0.0</td><td></td></tr></tbody></table></div></div><div class='question-block'><div class='question-header' data-qid='q_1202459307872029678'><h4>Question: B14</h4><div class='collapse-indicator'>+</div></div><div class='question-details' id='q_1202459307872029678'><div class='muted' style='margin-bottom:8px;'>Description: Value match</div><table><thead><tr><th style='width:55%'>Assertion</th><th style='width:10%'>Status</th><th style='width:8%'>Score</th><th>Error</th></tr></thead><tbody><tr class='failed'><td>value</td><td>failed</td><td>0.0</td><td></td></tr><tr class='failed'><td>formula</td><td>failed</td><td>0.0</td><td></td></tr></tbody></table></div></div><div class='question-block'><div class='question-header' data-qid='q_1659122260901655933'><h4>Question: B5</h4><div class='collapse-indicator'>+</div></div><div class='question-details' id='q_1659122260901655933'><div class='muted' style='margin-bottom:8px;'>Description: Value match</div><table><thead><tr><th style='width:55%'>Assertion</th><th style='width:10%'>Status</th><th style='width:8%'>Score</th><th>Error</th></tr></thead><tbody><tr class='failed'><td>value</td><td>failed</td><td>0.0</td><td></td></tr><tr class='failed'><td>formula</td><td>failed</td><td>0.0</td><td></td></tr></tbody></table></div></div><div class='question-block'><div class='question-header' data-qid='q_1716726537870407222'><h4>Question: B6</h4><div class='collapse-indicator'>+</div></div><div class='question-details' id='q_1716726537870407222'><div class='muted' style='margin-bottom:8px;'>Description: Value match</div><table><thead><tr><th style='width:55%'>Assertion</th><th style='width:10%'>Status</th><th style='width:8%'>Score</th><th>Error</th></tr></thead><tbody><tr class='failed'><td>value</td><td>failed</td><td>0.0</td><td></td></tr><tr class='failed'><td>formula</td><td>failed</td><td>0.0</td><td></td></tr></tbody></table></div></div><div class='question-block'><div class='question-header' data-qid='q_1153744137559818680'><h4>Question: B7</h4><div class='collapse-indicator'>+</div></div><div class='question-details' id='q_1153744137559818680'><div class='muted' style='margin-bottom:8px;'>Description: Value match</div><table><thead><tr><th style='width:55%'>Assertion</th><th style='width:10%'>Status</th><th style='width:8%'>Score</th><th>Error</th></tr></thead><tbody><tr class='failed'><td>value</td><td>failed</td><td>0.0</td><td></td></tr><tr class='failed'><td>formula</td><td>failed</td><td>0.0</td><td></td></tr></tbody></table></div></div><div class='question-block'><div class='question-header' data-qid='q_1995257892735118114'><h4>Question: B8</h4><div class='collapse-indicator'>+</div></div><div class='question-details' id='q_1995257892735118114'><div class='muted' style='margin-bottom:8px;'>Description: Value match</div><table><thead><tr><th style='width:55%'>Assertion</th><th style='width:10%'>Status</th><th style='width:8%'>Score</th><th>Error</th></tr></thead><tbody><tr class='failed'><td>value</td><td>failed</td><td>0.0</td><td></td></tr><tr class='failed'><td>formula</td><td>failed</td><td>0.0</td><td></td></tr></tbody></table></div></div><div class='question-block'><div class='question-header' data-qid='q_7657171841207939520'><h4>Question: B9</h4><div class='collapse-indicator'>+</div></div><div class='question-details' id='q_7657171841207939520'><div class='muted' style='margin-bottom:8px;'>Description: Value match</div><table><thead><tr><th style='width:55%'>Assertion</th><th style='width:10%'>Status</th><th style='width:8%'>Score</th><th>Error</th></tr></thead><tbody><tr class='failed'><td>value</td><td>failed</td><td>0.0</td><td></td></tr><tr class='failed'><td>formula</td><td>failed</td><td>0.0</td><td></td></tr></tbody></table></div></div></div>
</div> <!-- reportContainer -->
<div id="overlay" onclick="closeSummary()"></div>
<div id="summaryModal" class="summary-modal">
    <div style="display:flex; justify-content:space-between; align-items:center;">
        <h2>Student Summary</h2>
        <div><button class="btn ghost" onclick="closeSummary()">Close</button></div>
    </div>
    <div style="margin-top:12px;">
        <table style="width:100%;">
<thead><tr><th>Student</th><th>Roll Number</th><th>Marks Obtained</th><th>Out of</th></tr></thead><tbody><tr><td>Assignment 1</td><td>N/A</td><td>18.0</td><td>20</td></tr><tr><td>Assignment_1 name roll no</td><td>N/A</td><td>0.0</td><td>20</td></tr>
            </tbody>
        </table>
    </div>
</div>

<script>
    // small helper to expand all question details if needed
    function expandAll() {
        document.querySelectorAll('.question-details').forEach(d => d.style.display = 'block');
        document.querySelectorAll('.collapse-indicator').forEach(i => i.innerText = '−');
    }
    function collapseAll() {
        document.querySelectorAll('.question-details').forEach(d => d.style.display = 'none');
        document.querySelectorAll('.collapse-indicator').forEach(i => i.innerText = '+');
    }
</script>

</body>
</html>

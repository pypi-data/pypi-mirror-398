[build-system]
requires = ["setuptools >= 61.0", "wheel", "setuptools-scm >= 8.0"]
build-backend = "setuptools.build_meta"

[[tool.uv.index]]
url = "https://download.pytorch.org/whl/cpu"
name = "pytorch-cpu"
explicit = true

[tool.uv.sources]
torch = { index = "pytorch-cpu" }
torchvision = { index = "pytorch-cpu" }

[project]
name = "pumaguard"
dynamic = ["version"]
description = ""
readme = "README.md"
requires-python = ">= 3.10, < 4.0"
authors = [
    {name = "Nicolas Bock", email = "nicolasbock@gmail.com"}
]
dependencies = [
    "flask ~= 3.1",
    "flask-cors ~= 6.0",
    "matplotlib ~= 3.10",
    "packaging ~= 25.0",
    "pillow ~= 11.1",
    "pyyaml ~= 6.0",
    "tensorflow-cpu >= 2.18, < 2.21; platform_machine != 'aarch64' and platform_machine != 'arm64'",
    "tensorflow >= 2.18, < 2.21; platform_machine == 'aarch64' or platform_machine == 'arm64'",
    "tf-keras >= 2.18, < 2.21",
    "torch ~= 2.9",
    "ultralytics ~= 8.3",
    "requests ~= 2.32",
    "zeroconf ~= 0.136",
]

[project.optional-dependencies]
dev = [
    "ansible-lint ~= 25.2; platform_system != 'Windows'",
    "ansible ~= 10.7",
    "bashate ~= 2.1",
    "black ~= 25.9",
    "build ~= 1.3",
    "esbonio ~= 1.0",
    "isort ~= 6.0",
    "mypy ~= 1.18",
    "passlib ~= 1.7",
    "pip ~= 24.3",
    "pylint ~= 3.3",
    "pytest-cov ~= 7.0",
    "pytest ~= 8.3",
]
extra-dev = [
    "ipykernel ~= 6.29",
    "plotly ~= 6.0",
]
docs = [
    "cloud-sptheme",
    "matplotlib ~= 3.10",
    "pandas ~= 2.3",
    "pillow ~= 11.1",
    "playsound3",
    "sphinx-book-theme",
    "sphinx-copybutton",
    "sphinx-new-tab-link",
    "sphinxcontrib-mermaid",
    "tensorflow >= 2.18, < 2.21",
    "ultralytics ~= 8.3",
]
# and-cuda = ["tensorflow-and-cuda ~= 2.19; platform_system != 'Windows'"]

[project.urls]
Homepage = "http://pumaguard.rtfd.io/"
Repository = "https://github.com/PEEC-Nature-Youth-Group/pumaguard"

[project.scripts]
pumaguard = 'pumaguard.main:main'
playsound = 'pumaguard.sound:main'
pumaguard-models = 'pumaguard.model_cli:main'

[tool.setuptools.packages.find]
include = ["pumaguard*"]

[tool.setuptools]
include-package-data = true

[tool.setuptools.package-data]
pumaguard = ["pumaguard-ui/**/*"]

[tool.isort]
ensure_newline_before_comments = true
force_grid_wrap = true
include_trailing_comma = true
multi_line_output = "VERTICAL_HANGING_INDENT"
py_version = 310
split_on_trailing_comma = true
# profile = "black"

[tool.black]
line-length = 79

[tool.ruff]
line-length = 79

[tool.mypy]
exclude = [
    "^pumaguard-ui/",
]

[tool.basedpyright]
reportUnusedCallResult = "hint"

[tool.setuptools_scm]
version_scheme = "post-release"
local_scheme = "no-local-version"

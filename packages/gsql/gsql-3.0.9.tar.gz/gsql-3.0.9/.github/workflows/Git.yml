name: ğŸ·ï¸ GitHub Release

on:
  push:
    branches: main

jobs:
  release:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    
    steps:
      - name: ğŸ“¥ Checkout
        uses: actions/checkout@v4
      
      - name: ğŸ·ï¸ Lire version du tag
        id: version
        run: |
          VERSION="${GITHUB_REF#refs/tags/v}"
          echo "VERSION=$VERSION" >> $GITHUB_ENV
          echo "ğŸ·ï¸ Version Release: $VERSION"
      
      - name: ğŸ·ï¸ CrÃ©er GitHub Release
        uses: softprops/action-gh-release@v1
        with:
          tag_name: ${{ github.ref }}
          name: Release v${{ env.VERSION }}
          body: |
            ## ğŸš€ GSQL v${{ env.VERSION }}
            
            ### ğŸ“¦ Installation
            
            **ğŸ³ Docker:**
            ```bash
            docker pull ceoseshell/gsql:${{ env.VERSION }}
            ```
            
            **ğŸ PyPI:**
            ```bash
            pip install gsql==${{ env.VERSION }}
            ```
            
            **ğŸ“¦ Anaconda:**
            ```bash
            conda install -c ceoseshell gsql=${{ env.VERSION }}
            ```
            
            ### ğŸ”— Liens
            - [Documentation](https://github.com/${{ github.repository }}/wiki)
            - [Code source](https://github.com/${{ github.repository }}/tree/${{ github.ref }})
            
            *Publication automatisÃ©e*
          draft: false
          prerelease: false
          generate_release_notes: true

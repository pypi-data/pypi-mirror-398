"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9173],{47778:function(n,e,t){t.d(e,{Z:function(){return k}});var r=t(90228),a=t.n(r),i=t(87999),u=t.n(i),o=t(26068),c=t.n(o),l=t(15558),s=t.n(l),d=t(48305),f=t.n(d),v=t(93203),p=t(7147),g=t(83386),h=t(69547),m=t(48075),x=t(32699),y=t.n(x),P=t(83861),E=t(75271),b=t(75658);function k(n){var e=n.fetchAPI,t=n.deleteAPI,r=n.contentForDelete,i=n.API,o=n.polling,l=void 0!==o&&o,d=n.watch,x=n.defaultData,k=void 0===x?[]:x,w=n.events,S=void 0===w?["UPDATE","DELETE"]:w,L=n.defaultQueryParams,T=void 0===L?{}:L,D=n.isInfiniteScroll,R=void 0!==D&&D,C=(0,E.useRef)(null),I=(0,E.useRef)(null),A=(0,E.useRef)(null),Z=(0,g.Z)(),j=(0,b.W)(),_=j.sortOrder,O=j.handleMultiSortChange,F=(0,E.useState)({firstLoad:!0}),q=f()(F,2),K=q[0],M=q[1],W=(0,E.useState)({dataList:s()(k),loading:!1,loadend:!1,total:0,totalPage:0}),N=f()(W,2),B=N[0],U=N[1],Q=(0,E.useState)(c()({page:1,perPage:10,search:"",sort_by:""},T)),z=f()(Q,2),G=z[0],H=z[1],J=(0,p.ZP)().setChunkRequest,V=(0,h.Z)({events:S,dataList:B.dataList,setDataList:function(n,e){U((function(t){return{total:t.total,totalPage:t.totalPage,loading:!1,loadend:!0,dataList:n,deletedIds:(null==e?void 0:e.deletedIds)||[]}}))}}),X=V.updateChunkedList,Y=V.cacheDataListRef,$=y().debounce(M,3e3),nn=function(n){y().each(n,(function(n){X(n)}))},en=function(){var n=u()(a()().mark((function n(e){var t,r,u;return a()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i&&d){n.next=2;break}return n.abrupt("return");case 2:null===(t=I.current)||void 0===t||null===(t=t.current)||void 0===t||null===(r=t.cancel)||void 0===r||r.call(t);try{u=y().omit(e||G,["page","perPage"]),I.current=J({url:"".concat(i,"?").concat(P.Z.stringify(y().pickBy(u,(function(n){return!!n})))),handler:nn})}catch(n){}case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),tn=function(){var n=u()(a()().mark((function n(t){var r,i,u,o,l,d,f,v=arguments;return a()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v.length>1&&void 0!==v[1]&&v[1]||U((function(n){return n.loading=!0,c()({},n)})),i=(r=t||{}).query,u=r.loadmore,n.prev=3,o=c()({},y().pickBy(i||G,(function(n){return!!n}))),n.next=7,e(o);case 7:if(l=n.sent,B.loadend){n.next=11;break}return n.next=11,new Promise((function(n){setTimeout(n,200)}));case 11:if(!(!l.items.length&&o.page>l.pagination.totalPage&&l.pagination.totalPage>0)){n.next=19;break}return d=c()(c()({},o),{},{page:l.pagination.totalPage}),n.next=15,e(d);case 15:return f=n.sent,U({dataList:u?[].concat(s()(B.dataList),s()(f.items||[])):f.items||[],loading:!1,loadend:!0,total:f.pagination.total,totalPage:f.pagination.totalPage}),R&&H(d),n.abrupt("return");case 19:U({dataList:u?[].concat(s()(B.dataList),s()(l.items||[])):l.items||[],loading:!1,loadend:!0,total:l.pagination.total,totalPage:l.pagination.totalPage}),R&&null!=i&&i.page&&H(c()(c()({},G),i)),n.next=27;break;case 23:n.prev=23,n.t0=n.catch(3),U({dataList:[],loading:!1,loadend:!0,total:B.total,totalPage:B.totalPage});case 27:return n.prev=27,$({firstLoad:!1}),n.finish(27);case 30:case"end":return n.stop()}}),n,null,[[3,23,27,30]])})));return function(e){return n.apply(this,arguments)}}(),rn=function(){var n=u()(a()().mark((function n(t){return a()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(l&&!d&&e){n.next=2;break}return n.abrupt("return");case 2:C.current&&clearInterval(C.current),C.current=setInterval(u()(a()().mark((function n(){return a()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:tn({query:t},!0);case 1:case"end":return n.stop()}}),n)}))),5e3);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),an=function(n){H(c()(c()({},G),n)),tn({query:c()(c()({},G),n)})},un=y().debounce((function(n){an({page:1,search:n.target.value}),en(c()(c()({},G),{},{search:n.target.value}))}),350);return(0,E.useEffect)((function(){return B.loadend&&rn(G),function(){C.current&&clearInterval(C.current)}}),[B.loadend,G]),(0,E.useEffect)((function(){var n=function(){var n=u()(a()().mark((function n(){return a()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,tn();case 2:setTimeout((function(){en()}),200);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return n(),function(){var n,e;null===(n=I.current)||void 0===n||null===(e=n.cancel)||void 0===e||e.call(n),Y.current=[]}}),[]),{dataSource:B,rowSelection:Z,sortOrder:_,queryParams:G,modalRef:A,extraStatus:K,TABLE_SORT_DIRECTIONS:v.gM,setQueryParams:H,handleDelete:function(n,e){var i;null===(i=A.current)||void 0===i||i.show(c()(c()({content:r,operation:"common.delete.single.confirm",name:n.name},e),{},{onOk:function(){return u()(a()().mark((function e(){var r;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,null==t?void 0:t(n.id,c()({},null===(r=A.current)||void 0===r?void 0:r.configuration));case 3:tn();case 4:case"end":return e.stop()}}),e)})))()}}))},handleDeleteBatch:function(){var n,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};null===(n=A.current)||void 0===n||n.show(c()(c()({content:r,operation:"common.delete.confirm",selection:!0},e),{},{onOk:function(){return u()(a()().mark((function n(){var e,r;return a()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:return e=[],n.next=5,(0,m.D6)(Z.selectedRowKeys,function(){var n=u()(a()().mark((function n(r){var i;return a()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t(r,c()({},null===(i=A.current)||void 0===i?void 0:i.configuration));case 2:e.push(r);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());case 5:return r=n.sent,Z.removeSelectedKeys(e),tn(),n.abrupt("return",r);case 9:case"end":return n.stop()}}),n)})))()}}))},fetchData:tn,handlePageChange:function(n,e){an({page:n,perPage:e||10})},handleTableChange:function(n,e,t,r){if("sort"===r.action){var a=O(t);H((function(n){return c()(c()({},n),{},{page:1,sort_by:a.join(",")})})),tn({query:c()(c()({},G),{},{page:1,sort_by:a.join(",")})})}},handleSearch:function(){tn()},handleQueryChange:an,handleNameChange:un}}},83386:function(n,e,t){t.d(e,{Z:function(){return u}});var r=t(48305),a=t.n(r),i=t(75271);function u(){var n=(0,i.useState)([]),e=a()(n,2),t=e[0],r=e[1],u=(0,i.useState)([]),o=a()(u,2),c=o[0],l=o[1],s={selectedRowKeys:t,selectedRows:c,enableSelection:!0,getCheckboxProps:function(n){return{disabled:n.disabled}},clearSelections:function(){r([]),l([])},onChange:function(n,e){r(n),l(e)},removeSelectedKeys:function(n){var e=t.filter((function(e){return!n.includes(e)}));return r(e),l((function(e){return e.filter((function(e){return!n.includes(e.id)}))})),e},removeSelectedKey:function(n){if(Array.isArray(n)){var e=t.filter((function(e){return!n.includes(e)}));return r(e),l((function(e){return e.filter((function(e){return!n.includes(e.id)}))})),e}var a=t.filter((function(e){return e!==n}));return r(a),l((function(e){return e.filter((function(e){return e.id!==n}))})),a}};return s}},75658:function(n,e,t){t.d(e,{W:function(){return u}});var r=t(48305),a=t.n(r),i=t(75271);function u(){var n=(0,i.useState)([]),e=a()(n,2),t=e[0],r=e[1];return{sortOrder:t,handleMultiSortChange:function(n){var e=Array.isArray(n)?n:[n],t=[];return e.forEach((function(n){var e=n.columnKey||n.field;e&&t.push("descend"===n.order?"-".concat(e):e)})),r(t),t}}}},69547:function(n,e,t){var r=t(26068),a=t.n(r),i=t(15558),u=t.n(i),o=t(91315),c=t(75271);e.Z=function(n){var e=n.events,t=void 0===e?["CREATE","DELETE","UPDATE","INSERT"]:e,r=(0,c.useRef)(new Set),i=(0,c.useRef)(n.dataList||[]),l=(0,c.useRef)(null),s=n.limit||10;return(0,c.useEffect)((function(){i.current=u()(n.dataList||[])}),[n.dataList]),{updateChunkedList:function(e){var c,d,f,v=(null==e?void 0:e.collection)||[];null!=n&&n.computedID&&(v=null===(c=v)||void 0===c?void 0:c.map((function(e){var t;return e.id=null==n||null===(t=n.computedID)||void 0===t?void 0:t.call(n,e),e})));null!=n&&n.filterFun&&(v=null==e||null===(d=e.collection)||void 0===d?void 0:d.filter(null==n?void 0:n.filterFun));null!=n&&n.mapFun&&(v=null==e||null===(f=e.collection)||void 0===f?void 0:f.map(null==n?void 0:n.mapFun));var p,g,h,m=(null==e?void 0:e.ids)||[];if((null==e?void 0:e.type)===o._W.CREATE&&t.includes("CREATE")){var x,y=v.reduce((function(n,e){var t,r=null===(t=i.current)||void 0===t?void 0:t.findIndex((function(n){return n.id===e.id})),u=a()({},e);return-1===r?n.push(u):i.current[r]=u,n}),[]);i.current=[].concat(u()(y),u()(i.current)).slice(0,s),null===(x=n.onCreate)||void 0===x||x.call(n,y)}(null==e?void 0:e.type)===o._W.DELETE&&t.includes("DELETE")&&(i.current=null===(p=i.current)||void 0===p?void 0:p.filter((function(n){return!(null!=m&&m.includes(n.id))})),function(n){r.current=new Set([].concat(u()(r.current),u()(n)))}(m),null===(g=n.setDataList)||void 0===g||g.call(n,u()(i.current),{deletedIds:u()(r.current)}));(null==e?void 0:e.type)===o._W.UPDATE&&t.includes("UPDATE")&&(null===(h=v)||void 0===h||h.forEach((function(e){var r,o=null===(r=i.current)||void 0===r?void 0:r.findIndex((function(n){return n.id===e.id})),c=a()({},e);if(o>-1)i.current[o]=c;else if(-1===o&&t.includes("INSERT")){var l;i.current=[c].concat(u()(i.current.slice(0,s-1))),null===(l=n.onCreate)||void 0===l||l.call(n,[c])}})));clearTimeout(l.current),l.current=setTimeout((function(){var e;null===(e=n.setDataList)||void 0===e||e.call(n,u()(i.current))}),200),null!=n&&n.callback&&(null==n||n.callback(i.current))},cacheDataListRef:i,deletedIdsRef:r}}},93699:function(n,e,t){var r,a,i,u,o=t(53649),c=t.n(o),l=t(65050),s=t(79635),d=t(25466),f=t(32699),v=t.n(f),p=t(75271),g=t(67585),h=t(52676),m=(0,g.ZP)(l.Z)(r||(r=c()(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin-block: 60px 32px;\n  .ant-empty-image {\n    margin-bottom: 0;\n    height: auto;\n    line-height: 1;\n    font-size: 42px;\n    .anticon {\n      color: var(--ant-color-primary);\n    }\n  }\n  .ant-empty-footer {\n    display: flex;\n  }\n"]))),x=g.ZP.div(a||(a=c()(["\n  margin-bottom: 16px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),y=g.ZP.div(i||(i=c()(["\n  margin-bottom: 8px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),P=g.ZP.div(u||(u=c()(["\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  justify-content: center;\n  align-items: center;\n"])));e.Z=function(n){var e=n.filters,t=n.noFoundText,r=n.loadend,a=n.loading,i=n.dataSource,u=n.buttonText,o=n.onClick,c=(0,p.useMemo)((function(){var n=v().omit(e,["page","perPage"]);return Object.values(n||{}).some((function(n){return Array.isArray(n)?n.length>0:!!n}))}),[e]);return(0,h.jsx)(h.Fragment,{children:a||!r||null!=i&&i.length?(0,h.jsx)("span",{}):(0,h.jsx)(m,{image:c?(0,h.jsx)(y,{children:l.Z.PRESENTED_IMAGE_SIMPLE}):(0,h.jsx)(x,{children:n.image}),description:(0,h.jsxs)(P,{children:[!c&&(0,h.jsx)(d.Z.Text,{style:{fontSize:"16px",fontWeight:500},children:n.title}),(0,h.jsx)(d.Z.Text,{type:"secondary",children:c?t:n.subTitle})]}),children:!c&&(u&&o?(0,h.jsx)(s.ZP,{color:"primary",variant:"filled",onClick:o,children:u}):null)})})}}}]);
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8394],{92002:function(e,n,t){t.d(n,{Yo:function(){return a},gn:function(){return u}});var r=t(15292),a=(0,r.cn)(new Map),u=function(e,n){var t=(0,r.K7)(),u=t.get(a);u.set(e,n),t.set(a,u)}},73963:function(e,n,t){var r=t(26068),a=t.n(r),u=t(27722),o=t(25466),i=t(75271),c=t(52676),l=function(e){var n=e.message,t=e.type,r=e.rows,i=void 0===r?1:r,l=e.ellipsis,s=e.style;return(0,c.jsx)(c.Fragment,{children:n?(0,c.jsxs)(o.Z.Paragraph,{type:t,ellipsis:void 0!==l?l:{rows:i,tooltip:n},style:a()({fontWeight:400,whiteSpace:"pre-line",textAlign:"center",padding:"2px 5px",borderRadius:"var(--border-radius-base)",margin:0,backgroundColor:"var(--ant-color-error-bg)"},s),children:[(0,c.jsx)(u.Z,{className:"m-r-8"}),n]}):null})};n.Z=i.memo(l)},96096:function(e,n){n.Z={"/playground/text-to-image":"/playground/text-to-image","/playground/speech":"/playground/speech"}},55625:function(e,n,t){t.d(n,{Uq:function(){return o},ZP:function(){return u}});var r=t(88467),a=t(75271);function u(){return r.Z.CancelToken.source}function o(){var e=r.Z.CancelToken.source,n=(0,a.useRef)(null),t=function(){n.current&&n.current.cancel()};return(0,a.useEffect)((function(){return function(){n.current&&n.current.cancel()}}),[]),{updateCancelToken:function(){t(),n.current=e()},cancelRequest:t,getCanceltToken:function(){return n.current.token},source:e}}},43626:function(e,n,t){t.r(n),t.d(n,{default:function(){return De}});var r=t(90228),a=t.n(r),u=t(87999),o=t.n(u),i=t(48305),c=t.n(i),l=t(92829),s=t(91962),d=t(71920),f=t(4144),p=t(37952),v=t(67996),m=t(34447),h=t(53231),x=t(3861),g=t(43458),y=t(48872),b=t(81967),w=t(82187),j=t.n(w),k=t(32699),C=t.n(k),R=t(75271),M=t(7388),Z=t(94213),S=t(13507),A=t(26068),N=t.n(A),_=t(92002),P=t(73963),T=function(e){var n=(0,R.useState)({width:0,height:0}),t=c()(n,2),r=t[0],a=t[1];return(0,R.useEffect)((function(){var n=e.current;if(n){var t=function(){var e=n.getBoundingClientRect();a((function(n){return n.width===e.width&&n.height===e.height?n:{width:e.width,height:e.height}}))},r=new ResizeObserver((function(){t()}));return r.observe(n),t(),function(){r.disconnect()}}}),[e.current]),r},U=t(52676),z=function(e){var n=e.scaleFactor,t=void 0===n?1.2:n,r=e.maxBarCount,a=void 0===r?128:r,u=e.amplitude,o=void 0===u?40:u,i=e.maxWidth,l=e.fixedHeight,s=void 0===l||l,d=e.analyserData,f=e.width,p=e.height,v=R.useRef(null),m=R.useRef(0),h=R.useRef(!1),x=R.useRef(0),g=R.useRef(1),y=R.useRef(null),b=(0,R.useState)(f),w=c()(b,2),j=w[0],k=w[1],C=(0,R.useState)(p),M=c()(C,2),Z=M[0],S=M[1],A=R.useRef(null),N=T(y),_=function(e,n,t,r,u){return r+(.5*Math.sin(n/200+e)+.5)*(u-r)*(t/a)};return R.useEffect((function(){N&&(k(i?Math.min(N.width,i):(null==N?void 0:N.width)||0),s||S((null==N?void 0:N.height)||0))}),[N,i]),(0,R.useEffect)((function(){var e,n;if(v.current){var r=function(){if(v.current){var e=v.current.getContext("2d");e&&e.clearRect(0,0,2*j,2*Z)}};return null!==(e=d.data)&&void 0!==e&&e.length&&null!==(n=d.analyser)&&void 0!==n&&n.current?(function(){var e;if(v.current&&null!==(e=d.data)&&void 0!==e&&e.length){var n=v.current,r=n.getContext("2d");if(r){var u=n.width=2*j,i=n.height=2*Z;h.current||(r.scale(2,2),h.current=!0);var c=Math.floor(i/2),l=o,s=0,f=r.createLinearGradient(0,0,0,i);f.addColorStop(0,"#007BFF"),f.addColorStop(1,"#0069DA"),r.fillStyle=f,function e(n){var o;if(n-s<16)m.current=requestAnimationFrame(e);else{s=n,null===(o=d.analyser)||void 0===o||null===(o=o.current)||void 0===o||o.getByteFrequencyData(d.data),r.clearRect(0,0,u,i);var f=Math.min(a,d.data.length),p=u/2-(10*f-6)/2+x.current;x.current+=g.current,Math.abs(x.current)>20&&(g.current*=-1);for(var v=0;v<f;v++){var h=Math.floor(d.data[v]/2)*t,y=_(v,n,h,10,l),b=h+Math.round(y),w=Math.round(c-b/2),j=Math.round(c+b/2);r.beginPath(),r.moveTo(p,j),r.lineTo(p,w+2),r.arcTo(p+4,w+2,p+4,j,2),r.lineTo(p+4,j),r.closePath(),r.fill(),p+=10}m.current=requestAnimationFrame(e)}}(performance.now())}}}(),function(){cancelAnimationFrame(m.current),r()}):(r(),cancelAnimationFrame(m.current),void(m.current=0))}}),[d,j,Z]),(0,U.jsx)("div",{className:"scroller-wrapper",ref:y,style:{width:"100%",height:"100%"},children:(0,U.jsx)("div",{ref:A,className:"canvas-wrap",style:{width:"100%",height:"100%"},children:(0,U.jsx)("canvas",{ref:v,style:{display:"block"}})})})},I=R.memo(z),E=t(48075),Y=t(39665),F=t(74146),L=t(71482),O=t(16095),D=t(35498),q=t(25408),H=t(79635),B=.5,K=2,G=.25,W=(0,R.forwardRef)((function(e,n){var t=(0,h.useIntl)(),r=e.autoplay,a=void 0!==r&&r,u=e.speed,o=void 0===u?1:u,i=e.extra,l=R.useRef(null),s=R.useState({currentTime:0,duration:0}),d=c()(s,2),f=d[0],p=d[1],v=R.useState(!1),m=c()(v,2),x=m[0],g=m[1],y=R.useState(!1),b=c()(y,2),w=b[0],j=b[1],C=R.useState(1),M=c()(C,2),Z=M[0],S=M[1],A=R.useState(o),N=c()(A,2),_=N[0],P=N[1],T=R.useRef(null);(0,R.useImperativeHandle)(n,(function(){return{play:function(){var e;null===(e=l.current)||void 0===e||e.play()},pause:function(){var e;null===(e=l.current)||void 0===e||e.pause()}}}));(0,R.useCallback)((function(){j(!w)}),[w]),(0,R.useCallback)((function(e){P(e),l.current.playbackRate=e}),[]);var z=(0,R.useCallback)((function(){T.current=setInterval((function(){var e,n;p((function(e){var n,t;return{currentTime:Math.ceil((null===(n=l.current)||void 0===n?void 0:n.currentTime)||0),duration:e.duration||Math.ceil((null===(t=l.current)||void 0===t?void 0:t.duration)||0)}})),(null!==(e=l.current)&&void 0!==e&&e.paused||null!==(n=l.current)&&void 0!==n&&n.ended)&&(clearInterval(T.current),g(!1),p((function(e){var n;return{currentTime:null!==(n=l.current)&&void 0!==n&&n.ended?0:e.currentTime,duration:e.duration}})))}),500)}),[]),I=(0,R.useCallback)((function(){var e,n;(g(!x),x)?null===(e=l.current)||void 0===e||e.pause():null===(n=l.current)||void 0===n||n.play()}),[x]),W=((0,R.useCallback)((function(e){l.current.volume=(0,k.round)(e,2),S((0,k.round)(e,2))}),[]),(0,R.useCallback)((function(n){var t,r=Math.ceil((null===(t=l.current)||void 0===t?void 0:t.duration)||0);p({currentTime:0,duration:r&&r!==1/0?r:e.duration||0}),g(a)}),[a,e.duration])),V=(0,R.useCallback)((function(e){l.current.currentTime=e,p((function(n){return{currentTime:e,duration:n.duration}}))}),[]);(0,R.useCallback)((function(){var n=e.url||"",t=e.name,r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),r.remove()}),[e.url,e.name]);return(0,R.useEffect)((function(){l.current&&l.current&&(l.current.volume=Z,l.current.playbackRate=_)}),[l.current]),(0,R.useEffect)((function(){return function(){clearInterval(T.current)}}),[]),(0,U.jsxs)("div",{className:"player-wrap",style:{width:e.width||"100%"},children:[(0,U.jsx)("div",{className:"player-ui",children:(0,U.jsx)("div",{className:"play-content",children:(0,U.jsxs)("div",{className:"progress-bar",children:[(0,U.jsx)("span",{className:"file-name",children:e.name}),(0,U.jsx)("div",{className:"slider",children:(0,U.jsx)("div",{className:"slider-inner",children:(0,U.jsx)(D.Z,{tooltip:{open:!1},min:0,step:1,styles:{rail:{}},max:f.duration,value:f.currentTime,onChange:V})})}),(0,U.jsxs)("div",{className:"controls",children:[(0,U.jsxs)("div",{className:"audio-control flex-center",children:[(0,U.jsxs)("span",{className:"time current",children:[" ",(0,E.mr)(f.currentTime)]}),(0,U.jsx)(q.Z,{title:t.formatMessage({id:"playground.audio.button.slow"}),children:(0,U.jsx)(H.ZP,{type:"text",size:"small",className:"backward",disabled:_===B||_<B,onClick:function(){P((function(e){if(e-G<B)return B;var n=e-G;return l.current.playbackRate=n,n}))},children:(0,U.jsx)(Y.Z,{className:"font-size-20"})})}),(0,U.jsx)("span",{className:"play-btn",children:(0,U.jsx)(H.ZP,{size:"middle",type:"text",onClick:I,disabled:!(null!=f&&f.duration),icon:x?(0,U.jsx)(L.Z,{style:{fontSize:"22px"}}):(0,U.jsx)(F.Z,{style:{fontSize:"22px"}})})}),(0,U.jsx)(q.Z,{title:t.formatMessage({id:"playground.audio.button.fast"}),children:(0,U.jsx)(H.ZP,{type:"text",size:"small",className:"forward",disabled:_===K||_>K,onClick:function(){P((function(e){if(e+G>K)return K;var n=e+G;return l.current.playbackRate=n,n}))},children:(0,U.jsx)(O.Z,{className:"font-size-20"})})}),(0,U.jsx)("span",{className:"time",children:(0,E.mr)(f.duration)})]}),i]})]})})}),(0,U.jsx)("audio",{crossOrigin:"anonymous",autoPlay:a,src:e.url,ref:l,preload:"metadata",style:{opacity:0,position:"absolute",left:"-9999px"},onPlay:z,onLoadedMetadata:W})]})})),V=R.memo(W),J=t(12272),$=t(13959),Q=t(96096),X=t(93203),ee=t(2825),ne=t(55625),te=t(71891),re=t(47219),ae=t(3246),ue=t(41994),oe=t(66876),ie=(t(55734),t(60669),t(40749)),ce=t(86929),le=t(18843),se=t(71656),de=t.n(se),fe=t(5189),pe={"audio/mpeg":"mp3","audio/mp4":"mp4","audio/wav":"wav","audio/ogg":"ogg","audio/webm":"webm","audio/aac":"aac","audio/x-flac":"flac","audio/pcm":"pcm","audio/flac":"flac","audio/x-wav":"wav","audio/L16":"pcm","audio/opus":"opus"},ve={type:"audio/mpeg",suffix:".mp3"},me=function(e){var n,t=(0,h.useIntl)(),r=(0,R.useState)(!1),u=c()(r,2),i=(u[0],u[1]),l=(0,R.useState)(!1),s=c()(l,2),d=s[0],f=s[1],p=(0,R.useState)(!0),v=c()(p,2),x=v[0],g=v[1],y=(0,R.useRef)(null),b=(0,R.useRef)(null),w=(0,R.useRef)(0),j=(0,R.useRef)(null),k=(0,R.useRef)(null),C=(0,R.useRef)(null),M=(0,R.useRef)(""),Z=(0,R.useRef)(null),S=(0,R.useRef)(null),A=(0,R.useRef)(null),_=(0,R.useRef)(null),P=(0,R.useCallback)((function(){j.current=new(window.AudioContext||window.webkitAudioContext),k.current=j.current.createAnalyser(),k.current.fftSize=512,C.current=new Uint8Array(k.current.frequencyBinCount)}),[]),T=(0,R.useCallback)((function(){_.current=j.current.createMediaStreamSource(y.current),_.current.connect(k.current)}),[]),z=(0,R.useCallback)((function(){Z.current=j.current.createScriptProcessor(4096,1,1),S.current=new fe.d(1,44100,128),A.current=[],Z.current.onaudioprocess=function(e){for(var n=e.inputBuffer.getChannelData(0),t=new Int16Array(n.length),r=0;r<n.length;r++)t[r]=32767*Math.max(-1,Math.min(1,n[r]));var a=S.current.encodeBuffer(t);a.length>0&&A.current.push(a)},_.current.connect(Z.current),Z.current.connect(j.current.destination)}),[]),I=function(){var e,n,t,r;null===(e=y.current)||void 0===e||e.getTracks().forEach((function(e){e.stop()})),null===(n=Z.current)||void 0===n||n.disconnect(),null===(t=_.current)||void 0===t||t.disconnect(),null===(r=j.current)||void 0===r||r.close()},E=function(){var e;f(!1),null===(e=b.current)||void 0===e||e.stop(),I()},Y=(0,R.useCallback)((function(){var e=S.current.flush();return e.length>0&&A.current.push(e),new Blob(A.current,{type:"audio/mpeg"})}),[]),F=function(){var n=o()(a()().mark((function n(){var t;return a()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,navigator.permissions.query({name:"microphone"});case 3:"granted"===(t=n.sent).state?(g(!0),e.onAudioPermission(!0)):"denied"===t.state&&(g(!1),e.onAudioPermission(!1),E()),t.onchange=function(){F()},n.next=10;break;case 8:n.prev=8,n.t0=n.catch(0);case 10:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(){return n.apply(this,arguments)}}(),L=function(){var e=o()(a()().mark((function e(){var n;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===(n=navigator.mediaDevices)||void 0===n?void 0:n.getUserMedia({audio:!0});case 3:y.current=e.sent,y.current.getAudioTracks().forEach((function(e){e.onended=function(){g(!1)}})),i(!0),g(!0),P(),T(),z(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),O=function(e){var n=function(e){var n,t=e||(null===(n=b.current)||void 0===n?void 0:n.mimeType),r=ve;return Object.keys(pe).forEach((function(e){t.includes(e)&&(r={type:t,suffix:".".concat(pe[e])})})),r}(e);return"Recording-".concat(de()().format("YYYY-MM-DD-HH_mm_ss")).concat(n.suffix)},D=function(){var n=o()(a()().mark((function n(){var t;return a()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!d){n.next=3;break}return r=void 0,u=void 0,null===(r=b.current)||void 0===r||r.stop(),f(!1),null===(u=e.onRecord)||void 0===u||u.call(e,!1),n.abrupt("return");case 3:return n.prev=3,n.next=6,L();case 6:URL.revokeObjectURL(M.current),b.current=new MediaRecorder(y.current),b.current.ondataavailable=function(n){var t,r;e.voiceActivity&&(null===(t=k.current)||void 0===t||t.getByteFrequencyData(C.current),null===(r=e.onAnalyse)||void 0===r||r.call(e,C.current,k))},b.current.onstop=o()(a()().mark((function n(){var t,r;return a()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:E(),null===(t=e.onAnalyse)||void 0===t||t.call(e,[],null),r=Y(),M.current=r.size?URL.createObjectURL(r):"",a={chunks:r,size:r.size,type:r.type,url:M.current,name:O(r.type),duration:Math.floor((Date.now()-w.current)/1e3)},u=void 0,null===(u=e.onAudioData)||void 0===u||u.call(e,a);case 5:case"end":return n.stop()}var a,u}),n)}))),f(!0),null===(t=e.onRecord)||void 0===t||t.call(e,!0),w.current=Date.now(),b.current.start(100),n.next=19;break;case 16:n.prev=16,n.t0=n.catch(3);case 19:case"end":return n.stop()}var r,u}),n,null,[[3,16]])})));return function(){return n.apply(this,arguments)}}(),B=(0,R.useMemo)((function(){return x?d?t.formatMessage({id:"playground.audio.stoprecord"}):t.formatMessage({id:"playground.audio.startrecord"}):(0,U.jsx)("span",{children:(0,U.jsxs)("span",{children:[t.formatMessage({id:"playground.audio.enablemic"}),(0,U.jsx)(H.ZP,{size:"small",color:"primary",variant:"link",href:"".concat(ce.q.audioPermission),target:"_blank",style:{paddingInline:0},children:t.formatMessage({id:"playground.audio.enablemic.doc"})})]})})}),[x,d,t]),K=(0,R.useMemo)((function(){return x?{}:{backgroundColor:"var(--ant-color-error-bg-filled-hover)",color:"var(--ant-color-error-border-hover)",border:"none"}}),[x]);return(0,R.useEffect)((function(){return function(){E(),I(),URL.revokeObjectURL(M.current)}}),[]),(0,R.useEffect)((function(){F()}),[]),(0,U.jsx)("div",{className:"audio-input",children:(0,U.jsx)(le.Z,{size:40,className:"btns",children:(0,U.jsx)(q.Z,{title:B,children:(0,U.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16},children:(0,U.jsx)(H.ZP,{disabled:!x,shape:"circle",icon:(0,U.jsx)(m.Z,{}),size:"middle",type:null!==(n=e.type)&&void 0!==n?n:"text",style:N()({},K),danger:d,onClick:D})})})})})},he=t(4806),xe=t(36224),ge=(0,R.forwardRef)((function(e,n){var t,r,u,i=(0,h.useIntl)(),s=e.modelList,d=(0,R.useRef)(0),f=(0,R.useState)([]),p=c()(f,2),v=p[0],m=p[1],x=(0,h.useSearchParams)(),g=c()(x,1)[0],y=g.get("type")||"",b=(g.get("model")?"stt"===y&&g.get("model"):"")||(null===(t=s[0])||void 0===t?void 0:t.value)||"",w=(0,R.useState)({model:b,language:"auto"}),k=c()(w,2),C=k[0],M=k[1],Z=(0,R.useState)(!1),A=c()(Z,2),T=A[0],z=A[1],E=(0,R.useState)(!1),Y=c()(E,2),F=Y[0],L=Y[1],O=(0,R.useState)(null),D=c()(O,2),B=D[0],K=D[1],G=(0,R.useState)(!1),W=c()(G,2),ce=W[0],le=W[1],se=(0,R.useRef)(null),de=(0,R.useRef)(null),fe=(0,R.useState)(!0),pe=c()(fe,2),ve=pe[0],ge=pe[1],ye=(0,R.useState)(null),be=c()(ye,2),we=be[0],je=be[1],ke=(0,R.useState)({data:[],analyser:null}),Ce=c()(ke,2),Re=Ce[0],Me=Ce[1],Ze=(0,R.useState)(!1),Se=c()(Ze,2),Ae=Se[0],Ne=Se[1],_e=(0,R.useRef)(null),Pe=(0,ne.Uq)(),Te=Pe.updateCancelToken,Ue=Pe.getCanceltToken,ze=Pe.cancelRequest,Ie=(0,ee.Z)(),Ee=Ie.initialize,Ye=Ie.updateScrollerPosition,Fe=(0,ee.Z)().initialize;(0,R.useImperativeHandle)(n,(function(){return{viewCode:function(){z(!0)},setCollapse:function(){le(!ce)},collapse:ce}}));var Le=function(){d.current=d.current+1},Oe=(0,R.useMemo)((function(){return(0,ie.A3)({api:S.Or,parameters:N()({},C)})}),[C]),De=function(){var e=o()(a()().mark((function e(){var n,t,r,u,o;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===(n=_e.current)||void 0===n?void 0:n.form.validateFields();case 3:if(C.model){e.next=5;break}return e.abrupt("return");case 5:return L(!0),Le(),K(null),m([]),Te(),(0,_.gn)(Q.Z["/playground/speech"],!0),t=N()(N()({},C),{},{file:new File([we.data],we.name,{type:we.type})}),e.next=14,(0,S.wE)({data:t},{cancelToken:Ue()});case 14:if(!(null!=(r=e.sent)&&r.status_code&&200!==(null==r?void 0:r.status_code)||null!=r&&r.error)){e.next=18;break}return K({error:!0,errorMessage:(0,ue.Yo)(r)}),e.abrupt("return");case 18:m([{content:r.text,uid:d.current}]),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(0),(null!=(o=null===e.t0||void 0===e.t0||null===(u=e.t0.response)||void 0===u?void 0:u.data)&&o.error||null!=o&&o.status_code&&200!==(null==o?void 0:o.status_code))&&K({error:!0,errorMessage:(0,ue.Yo)(o)});case 26:return e.prev=26,L(!1),Ne(!1),(0,_.gn)(Q.Z["/playground/speech"],!1),e.finish(26);case 31:case"end":return e.stop()}}),e,null,[[0,21,26,31]])})));return function(){return e.apply(this,arguments)}}(),qe=(0,R.useCallback)((function(e){je((function(){return{url:e.url,name:e.name,data:e.chunks,type:e.type,duration:e.duration}}))}),[]),He=(0,R.useCallback)((function(e){ge(e)}),[]),Be=(0,R.useCallback)(function(){var e=o()(a()().mark((function e(n){var t;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,te.a5)(n.file);case 3:t=e.sent,je(t),K(null),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}(),[]),Ke=(0,R.useCallback)((function(e,n){Me((function(t){return{data:e,analyser:n}}))}),[]),Ge=(0,R.useCallback)((function(e){Ne(e),je(null),K(null),m([])}),[]),We=function(){var e=o()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!F){e.next=3;break}return ze(),L(!1),e.abrupt("return");case 3:De();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,R.useEffect)((function(){se.current&&Ee(se.current)}),[Ee]),(0,R.useEffect)((function(){de.current&&Fe(de.current)}),[Fe]),(0,R.useEffect)((function(){F&&Ye()}),[v,F]),(0,U.jsxs)("div",{className:"ground-left-wrapper",style:{height:"calc(100vh - ".concat(X.Mz,"px)")},children:[(0,U.jsxs)("div",{className:"ground-left",children:[(0,U.jsx)("div",{className:"ground-left-footer",style:{flex:1},children:(0,U.jsxs)("div",{className:"speech-to-text",children:[(0,U.jsxs)("div",{className:"speech-box",children:[!Ae&&(0,U.jsx)($.Z,{type:"default",accept:ue.ql.join(", "),onChange:Be}),(0,U.jsx)(me,{type:"default",voiceActivity:!0,onAudioData:qe,onAudioPermission:He,onAnalyse:Ke,onRecord:Ge})]}),we?(0,U.jsx)("div",{className:"flex-between flex-center justify-center relative",children:(0,U.jsx)("div",{style:{width:600},children:(0,U.jsx)(V,{url:we.url,name:we.name,duration:we.duration,extra:(0,U.jsx)(q.Z,{title:F?i.formatMessage({id:"common.button.stop"}):i.formatMessage({id:"playground.audio.button.generate"}),children:(0,U.jsx)(H.ZP,{disabled:!we,type:"primary",size:"middle",shape:"circle",onClick:We,icon:F?(0,U.jsx)(l.Z,{type:"icon-stop1",className:"font-size-14"}):(0,U.jsx)(re.Z,{})})})})})}):ve?Ae?(0,U.jsx)(I,{fixedHeight:!0,height:82,width:500,analyserData:Re}):(0,U.jsxs)("div",{className:"tips-text",children:[(0,U.jsx)(l.Z,{type:"icon-audio",style:{fontSize:18}}),(0,U.jsx)("span",{children:i.formatMessage({id:"playground.audio.speechtotext.tips"})})]}):(0,U.jsxs)("div",{className:"tips-text",children:[(0,U.jsx)(l.Z,{type:"icon-audio",style:{fontSize:20}}),(0,U.jsx)("span",{children:i.formatMessage({id:"playground.audio.enablemic"})})]})]})}),(0,U.jsx)("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between",overflow:"auto"},children:(0,U.jsxs)("div",{className:"message-list-wrap",style:{flex:1,position:"relative"},children:[(null==v?void 0:v.length)>0&&(0,U.jsx)("span",{style:{position:"absolute",top:20,right:2},children:(0,U.jsx)(J.Z,{text:null===(r=v[0])||void 0===r?void 0:r.content})}),(0,U.jsx)("div",{className:"content",style:{height:"100%",overflow:"auto"},ref:se,children:(0,U.jsxs)("div",{children:[!B&&(0,U.jsx)("div",{style:{padding:"8px 14px",lineHeight:"20px",display:"flex",justifyContent:"center",wordBreak:"break-word"},children:v.length?null===(u=v[0])||void 0===u?void 0:u.content:(0,U.jsx)("span",{className:"text-tertiary",children:i.formatMessage({id:"playground.audio.generating.tips"})})}),B&&(0,U.jsx)("div",{style:{height:40},children:(0,U.jsx)(P.Z,{type:"danger",message:null==B?void 0:B.errorMessage})})]})}),F&&(0,U.jsx)("div",{style:{width:"100%",flex:1},children:(0,U.jsx)(ae.Z,{size:"small",children:(0,U.jsx)("div",{style:{height:"46px"}})})})]})})]}),(0,U.jsx)("div",{className:j()("params-wrapper",{collapsed:ce}),ref:de,children:(0,U.jsx)("div",{className:"box",children:(0,U.jsx)(he.Z,{ref:_e,onValuesChange:function(e,n){M(n)},paramsConfig:oe.JY,initialValues:C,modelList:s})})}),(0,U.jsx)(xe.Z,{open:T,viewCodeContent:Oe,onCancel:function(){z(!1)},title:i.formatMessage({id:"playground.viewcode"})})]})})),ye=ge,be=t(53722),we=t(18385),je=t(36154),ke=t(56316),Ce=t(86422),Re=t(67825),Me=t.n(Re),Ze=t(2903),Se=["autoplay","audioUrl","speed"],Ae=(0,R.forwardRef)((function(e,n){var t=e.autoplay,r=e.audioUrl,u=e.speed,i=void 0===u?1:u,c=Me()(e,Se),l=(0,R.useRef)(null),s=(0,R.useRef)(null),d=(0,R.useRef)(null),f=(0,R.useRef)(null),p=(0,R.useRef)(null),v=(0,R.useRef)(null),m=(0,R.useCallback)((function(){d.current=new(window.AudioContext||window.webkitAudioContext),f.current=d.current.createAnalyser(),f.current.fftSize=512,p.current=new Uint8Array(f.current.frequencyBinCount)}),[]),h=(0,R.useCallback)((function(){d.current.createMediaElementSource(v.current).connect(f.current),f.current.connect(d.current.destination)}),[]),x=(C().debounce((function(){var e,n;null!==(e=l.current)&&void 0!==e&&e.isPlaying()&&(null===(n=l.current)||void 0===n||n.pause())}),100),function(){var n,a,u,o,d,x,g,y,b,w;null===(n=l.current)||void 0===n||n.destroy(),l.current=Ze.Z.create(N()({container:s.current,url:r,autoplay:t,audioRate:i,waveColor:"#4096ff",progressColor:"rgb(100, 0, 100)",height:60,barWidth:2,barGap:1,barRadius:2,interact:!0,cursorWidth:0},c)),v.current=null===(a=l.current)||void 0===a?void 0:a.getMediaElement(),m(),h(),null===(u=l.current)||void 0===u||u.on("ready",(function(n){var t;null===(t=e.onReady)||void 0===t||t.call(e,n)})),null===(o=l.current)||void 0===o||o.on("click",(function(n){var t;null===(t=e.onClick)||void 0===t||t.call(e,n)})),null===(d=l.current)||void 0===d||d.on("finish",(function(){var n;null===(n=e.onFinish)||void 0===n||n.call(e)})),null===(x=l.current)||void 0===x||x.on("audioprocess",(function(n){var t;null===(t=e.onAudioprocess)||void 0===t||t.call(e,n)})),null===(g=l.current)||void 0===g||g.on("seeking",(function(e){})),null===(y=l.current)||void 0===y||y.on("timeupdate",(function(e){})),null===(b=l.current)||void 0===b||b.on("play",(function(){var n,t,r;null===(n=f.current)||void 0===n||n.getByteFrequencyData(p.current),null===(t=e.onAnalyse)||void 0===t||t.call(e,p.current,f),null===(r=e.onPlay)||void 0===r||r.call(e)})),null===(w=l.current)||void 0===w||w.on("pause",(function(){var n,t,r;null===(n=f.current)||void 0===n||n.getByteFrequencyData(p.current),null===(t=e.onAnalyse)||void 0===t||t.call(e,p.current,f),null===(r=e.onPause)||void 0===r||r.call(e)}))}),g=function(){var e=o()(a()().mark((function e(){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.current&&l.current.play();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){l.current&&l.current.isPlaying()},b=function(){l.current&&l.current.playPause()},w=C().debounce((function(e){l.current&&l.current.seekTo(e)}),50),j=C().debounce((function(e){l.current&&l.current.setTime(e)}),50),k=function(e){l.current&&w(e)},M=function(e){l.current&&j(e)},Z=function(){return l.current?l.current.getDuration():0},S=function(){l.current&&l.current.pause()};return(0,R.useImperativeHandle)(n,(function(){return{play:g,pause:S,duration:Z,seekTo:k,setTime:M,playPause:b,isPlaying:y,wavesurfer:l}})),(0,R.useEffect)((function(){return s.current&&r&&x(),function(){l.current&&l.current.destroy()}}),[r,s.current]),(0,U.jsx)("div",{ref:s,className:"audio-container",style:{display:"none"}})})),Ne=R.memo(Ae),_e=function(e){var n=(0,h.useIntl)(),t=(0,R.useState)(e.autoplay),r=c()(t,2),u=r[0],i=r[1],l=(0,R.useState)(0),s=c()(l,2),d=s[0],f=s[1],p=(0,R.useState)({width:900,height:0}),v=c()(p,2),m=(v[0],v[1]),x=(0,R.useState)(0),g=c()(x,2),y=g[0],b=g[1],w=(0,R.useState)({data:new Uint8Array(128),analyser:null}),j=c()(w,2),M=j[0],Z=j[1],S=(0,R.useRef)(null),A=(0,R.useRef)(null),_=(0,R.useCallback)(o()(a()().mark((function e(){var n,t,r;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===(n=A.current)||void 0===n||null===(n=n.wavesurfer.current)||void 0===n||!n.isPlaying()){e.next=7;break}return null===(t=A.current)||void 0===t||t.pause(),i(!1),e.abrupt("return");case 7:return e.next=9,null===(r=A.current)||void 0===r||null===(r=r.wavesurfer.current)||void 0===r?void 0:r.play();case 9:i(!0);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),[A.current]),P=(0,R.useCallback)((function(e,n){Z((function(t){return{data:e,analyser:n}}))}),[]),T=(0,R.useCallback)((function(){i(!1)}),[]),z=(0,R.useCallback)((function(){i(!0)}),[]),E=(0,R.useCallback)((function(){i(!1)}),[]),Y=(0,k.throttle)((function(e){b(e)}),100),F=(0,R.useCallback)((function(e){Y(e)}),[Y]),L=((0,R.useCallback)((function(n){i(e.autoplay),f(n)}),[]),(0,R.useCallback)((function(e){}),[]),(0,R.useCallback)((function(e){m({width:e.width,height:e.height})}),[]),C().debounce((function(e){var n;null===(n=A.current)||void 0===n||n.seekTo(e/d),b(e)}),200)),O=(0,R.useCallback)((function(e){f(e)}),[]),B=((0,R.useCallback)((function(e){var n;null===(n=A.current)||void 0===n||n.seekTo(e/d),b(e)}),[]),(0,R.useCallback)((function(){var n=e.audioUrl||"",t="audio-".concat(de()().format("YYYYMMDDHHmmss"),".").concat(e.format),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),r.remove()}),[e.audioUrl,e.format]));return(0,U.jsxs)("div",{children:[(0,U.jsx)("div",{className:"speech-item",children:(0,U.jsxs)("div",{className:"wrapper",style:{height:120,width:"100%"},ref:S,children:[(0,U.jsx)(Ne,N()(N()({},e),{},{audioUrl:e.audioUrl,onReady:O,onFinish:T,onPlay:z,onPause:E,onAnalyse:P,onAudioprocess:F,ref:A})),u&&(0,U.jsx)(I,{maxBarCount:100,amplitude:60,fixedHeight:!0,height:120,width:800,analyserData:M})]})}),(0,U.jsx)(D.Z,{className:"slider-progress",value:y,max:d,step:.01,onChange:function(e){L(e)}}),(0,U.jsxs)("div",{className:"speech-actions",children:[(0,U.jsx)("span",{className:"tags",children:(0,U.jsx)("span",{className:"item",children:e.format})}),(0,U.jsx)("span",{className:"duration",children:C().round(y,2)||C().round(d,2)}),(0,U.jsxs)("div",{className:"actions",children:[(0,U.jsx)(q.Z,{title:u?n.formatMessage({id:"playground.audio.button.stop"}):n.formatMessage({id:"playground.audio.button.play"}),children:(0,U.jsx)(H.ZP,{disabled:!e.audioUrl||0===d,onClick:_,icon:u?(0,U.jsx)(je.Z,{className:"font-size-16"}):(0,U.jsx)(ke.Z,{className:"font-size-16"}),type:"text",size:"small"})}),(0,U.jsx)(q.Z,{title:n.formatMessage({id:"playground.audio.button.download"}),children:(0,U.jsx)(H.ZP,{disabled:!e.audioUrl||0===d,onClick:B,icon:(0,U.jsx)(Ce.Z,{className:"font-size-16"}),type:"text",size:"small"})})]})]})]})},Pe=R.memo(_e),Te=function(e){return(0,U.jsx)(U.Fragment,{children:e.dataList.map((function(e){return(0,U.jsx)(Pe,N()({},e),e.uid)}))})},Ue=R.memo(Te),ze=t(26965),Ie=(t(82093),t(46214)),Ee=(0,R.forwardRef)((function(e,n){var t=e.modelList,r=(0,R.useRef)(0),u=(0,R.useState)([]),i=c()(u,2),s=i[0],d=i[1],f=(0,h.getLocale)(),p=(0,h.useIntl)(),v=(0,h.useSearchParams)(),m=c()(v,1)[0],x=m.get("type")||"",g=m.get("model")?"tts"===x&&m.get("model"):"",y=(0,R.useState)({model:g,voice:"",response_format:"mp3"}),b=c()(y,2),w=b[0],k=b[1],M=(0,R.useState)(!1),Z=c()(M,2),A=Z[0],T=Z[1],z=(0,R.useState)(!1),I=c()(z,2),E=I[0],Y=I[1],F=(0,R.useState)(null),L=c()(F,2),O=L[0],D=L[1],q=(0,R.useState)(!1),H=c()(q,2),B=H[0],K=H[1],G=(0,R.useRef)(null),W=(0,R.useRef)(null),V=(0,R.useRef)(null),J=(0,R.useRef)(!0),$=(0,R.useState)(""),X=c()($,2),ne=X[0],te=X[1],re=(0,R.useState)([]),ce=c()(re,2),le=ce[0],se=ce[1],de=(0,R.useRef)(null),fe=(0,ee.Z)().initialize,pe=(0,ee.Z)().initialize;(0,R.useImperativeHandle)(n,(function(){return{viewCode:function(){T(!0)},setCollapse:function(){K(!B)},collapse:B}}));var ve=(0,R.useMemo)((function(){var e;return g||(null===(e=t[0])||void 0===e?void 0:e.value)||""}),[t]),me=(0,R.useMemo)((function(){return(0,ie.Jc)({api:S.Qe,parameters:N()(N()({},w),{},{input:ne})})}),[w,ne]),ge=(0,R.useCallback)((function(e,n){var t="en-US"===e?"english":"chinese";return n.sort((function(e,n){var r=e.value.toLowerCase().includes(t)?1:0;return(n.value.toLowerCase().includes(t)?1:0)-r}))}),[]),ye=(0,R.useMemo)((function(){return le.length?ge(f,le):[]}),[f,le,ge]);(0,R.useEffect)((function(){var e,n,t=ge(f,le);k((function(e){var n;return N()(N()({},e),{},{voice:null===(n=t[0])||void 0===n?void 0:n.value})})),null===(e=de.current)||void 0===e||e.form.setFieldValue("voice",null===(n=t[0])||void 0===n?void 0:n.value)}),[f,le,ge]);var je=function(){r.current=r.current+1},ke=function(){var e=o()(a()().mark((function e(n){var t,u,o,i,c,l,s,f;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===(t=de.current)||void 0===t?void 0:t.form.validateFields();case 3:if(w.model){e.next=5;break}return e.abrupt("return");case 5:return Y(!0),je(),D(null),te((null==n?void 0:n.content)||""),d([]),(0,_.gn)(Q.Z["/playground/speech"],!0),null===(u=G.current)||void 0===u||null===(o=u.abort)||void 0===o||o.call(u),G.current=new AbortController,i=G.current.signal,c=N()(N()({},w),{},{input:(null==n?void 0:n.content)||ne}),e.next=17,(0,S.jQ)({data:c,url:S.qt,signal:i});case 17:if(!(null!=(l=e.sent)&&l.status_code&&200!==(null==l?void 0:l.status_code)||null!=l&&l.error)){e.next=23;break}return D({error:!0,errorMessage:(0,ue.Yo)(l)}),d([]),e.abrupt("return");case 23:d([{input:(null==n?void 0:n.content)||ne,voice:w.voice,format:w.response_format,speed:w.speed,uid:r.current,autoplay:J.current,audioUrl:l.url}]),e.next=31;break;case 26:e.prev=26,e.t0=e.catch(0),null!=(f=null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s?void 0:s.data)&&f.error&&D({error:!0,errorMessage:(0,ue.Yo)(f)});case 31:return e.prev=31,Y(!1),(0,_.gn)(Q.Z["/playground/speech"],!1),e.finish(31);case 35:case"end":return e.stop()}}),e,null,[[0,26,31,35]])})));return function(n){return e.apply(this,arguments)}}(),Ce=(0,R.useCallback)(function(){var e=o()(a()().mark((function e(n){var r,u,o,i;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:u=t.find((function(e){return e.value===n})),o=C().map((null==u||null===(r=u.meta)||void 0===r?void 0:r.voices)||[],(function(e){return{label:e,value:e}})),i=ge(f,o),se(i),k((function(e){var t;return N()(N()({},e),{},{model:n,voice:null===(t=i[0])||void 0===t?void 0:t.value})}));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[t]),Re=(0,R.useCallback)((function(e,n){e.model?Ce(e.model):k(n)}),[Ce]);(0,R.useEffect)((function(){V.current&&pe(V.current)}),[pe]);var Me=(0,R.useMemo)((function(){return oe.I_.map((function(e){var n=N()(N()({},e.attrs),{},{options:"voice"===e.name?ye:e.options,label:e.label.isLocalized?p.formatMessage({id:e.label.text}):e.label.text});return(0,U.jsx)(ze.Z.Item,{name:e.name,rules:e.rules,children:"AutoComplete"===e.type?(0,U.jsx)(be.Z,N()({},n)):(0,U.jsx)(we.Z,N()({},n))},e.name)}))}),[oe.I_,p,ye]);return(0,R.useEffect)((function(){ve&&t.length&&Ce(ve)}),[ve,t.length]),(0,R.useEffect)((function(){W.current&&fe(W.current)}),[fe]),(0,R.useEffect)((function(){V.current&&pe(V.current)}),[pe]),(0,U.jsxs)("div",{className:"ground-left-wrapper",children:[(0,U.jsxs)("div",{className:"ground-left",children:[(0,U.jsx)("div",{className:"message-list-wrap",children:(0,U.jsx)("div",{style:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,U.jsxs)("div",{className:"content",style:{maxWidth:1e3},children:[s.length?(0,U.jsx)(Ue,{dataList:s,loading:E}):(0,U.jsxs)("div",{className:"flex-column font-size-14 flex-center gap-20",children:[(0,U.jsx)("span",{children:(0,U.jsx)(l.Z,{type:"icon-audio ",className:"font-size-32 text-secondary"})}),(0,U.jsx)("span",{children:p.formatMessage({id:"playground.audio.texttospeech.tips"})})]}),E&&(0,U.jsx)(ae.Z,{size:"small",children:(0,U.jsx)("div",{style:{height:"46px"}})})]})})}),O&&(0,U.jsx)("div",{style:{height:40},children:(0,U.jsx)(P.Z,{type:"danger",message:null==O?void 0:O.errorMessage})}),(0,U.jsx)("div",{className:"ground-left-footer",children:(0,U.jsx)(Ie.Z,{actions:["check"],checkLabel:p.formatMessage({id:"playground.toolbar.autoplay"}),placeholer:p.formatMessage({id:"playground.input.text.holder"}),defaultSize:{minRows:5,maxRows:5},title:p.formatMessage({id:"playground.audio.textinput"}),onCheck:function(e){J.current=e.target.checked},loading:E,disabled:!w.model,isEmpty:!0,handleSubmit:function(e){ke(e)},handleAbortFetch:function(){var e,n;null===(e=G.current)||void 0===e||null===(n=e.abort)||void 0===n||n.call(e),Y(!1)},onInputChange:function(e){te(e.target.value)},clearAll:function(){je(),d([]),D(null)},shouldResetMessage:!1})})]}),(0,U.jsx)("div",{className:j()("params-wrapper",{collapsed:B}),ref:V,children:(0,U.jsx)("div",{className:"box",children:(0,U.jsx)(he.Z,{ref:de,onValuesChange:Re,initialValues:w,modelList:t,extra:[Me]})})}),(0,U.jsx)(xe.Z,{open:A,viewCodeContent:me,onCancel:function(){T(!1)},title:p.formatMessage({id:"playground.viewcode"})})]})})),Ye=Ee,Fe=t(9629),Le=(t(48119),"tts"),Oe="stt",De=function(){var e=(0,h.useIntl)(),n=(0,h.useSearchParams)(),t=c()(n,1)[0].get("type")||"",r=(0,f.Z)().size,u=(0,R.useState)(t||Le),i=c()(u,2),w=i[0],k=i[1],A=(0,R.useRef)(null),N=(0,R.useRef)(null),_=(0,R.useState)([]),P=c()(_,2),T=P[0],z=P[1],I=(0,R.useState)([]),E=c()(I,2),Y=E[0],F=E[1],L=(0,R.useMemo)((function(){return[{label:e.formatMessage({id:"playground.audio.texttospeech"}),value:Le,icon:(0,U.jsx)(l.Z,{type:"icon-audio"})},{label:e.formatMessage({id:"playground.audio.speechtotext"}),value:Oe,icon:(0,U.jsx)(m.Z,{})}]}),[e]),O=(0,x.Z)((function(){var e,n;if(w===Le)null===(e=A.current)||void 0===e||null===(n=e.viewCode)||void 0===n||n.call(e);else if(w===Oe){var t,r;null===(t=N.current)||void 0===t||null===(r=t.viewCode)||void 0===r||r.call(t)}})),D=(0,x.Z)((function(){var e,n,t,r;w!==Le?null===(e=N.current)||void 0===e||null===(n=e.setCollapse)||void 0===n||n.call(e):null===(t=A.current)||void 0===t||null===(r=t.setCollapse)||void 0===r||r.call(t)})),q=(0,R.useMemo)((function(){return[{key:"tts",label:"TTS",children:(0,U.jsx)(Ye,{ref:A,modelList:T})},{key:"stt",label:"Realtime",children:(0,U.jsx)(ye,{modelList:Y,ref:N})}]}),[T,Y]);(0,R.useEffect)((function(){if(r.width<s.Z.lg){var e,n,t,a,u,o;if(null===(e=A.current)||void 0===e||!e.collapse)null===(t=A.current)||void 0===t||null===(a=t.setCollapse)||void 0===a||a.call(t);if(null===(n=N.current)||void 0===n||!n.collapse)null===(u=N.current)||void 0===u||null===(o=u.setCollapse)||void 0===o||o.call(u)}}),[r.width]),(0,R.useEffect)((function(){var e=function(){var e=o()(a()().mark((function e(){var n,t,r;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={categories:v.Us.text_to_speech,with_meta:!0},e.next=4,(0,S.nb)(n);case 4:return t=e.sent,r=C().map(t.data||[],(function(e){return{value:e.id,label:e.id,meta:e.meta}})),e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=o()(a()().mark((function e(){var n,t,r;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={categories:v.Us.speech_to_text,with_meta:!0},e.next=4,(0,S.nb)(n);case 4:return t=e.sent,r=C().map(t.data||[],(function(e){return{value:e.id,label:e.id,meta:e.meta}})),e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),t=function(){var t=o()(a()().mark((function t(){var r,u,o,i;return a()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([e(),n()]);case 3:r=t.sent,u=c()(r,2),o=u[0],i=u[1],z(o),F(i),t.next=13;break;case 11:t.prev=11,t.t0=t.catch(0);case 13:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}();t()}),[]);var H=(0,R.useMemo)((function(){return{title:(0,U.jsxs)("div",{className:"flex items-center",children:[(0,U.jsx)("span",{className:"font-600",children:e.formatMessage({id:"menu.playground.speech"})}),(0,U.jsx)(g.Z,{options:L,size:"middle",className:"m-l-40 font-600",value:w,onChange:function(e){return k(e)}})]})}}),[w,L,e]);return(0,M.y1)(d.ZP.RIGHT.join(","),(function(){var e,n;null===(e=A.current)||void 0===e||null===(n=e.setCollapse)||void 0===n||n.call(e)}),{preventDefault:!0}),(0,U.jsx)(Z.R,{header:H,extra:[(0,U.jsx)(Fe.Z,{activeKey:"",handleViewCode:O,handleToggleCollapse:D},"view-code-buttons"),(0,U.jsx)(y.Z,{type:"vertical",style:{height:24,marginInline:16}},"divider"),(0,U.jsx)(p.k,{},"extra-content")],className:j()("playground-container",{compare:"compare"===w,chat:"compare"!==w}),children:(0,U.jsx)("div",{className:"play-ground",children:(0,U.jsx)("div",{className:"chat",children:(0,U.jsx)(b.Z,{items:q,activeKey:w})})})})}},40749:function(e,n,t){t.d(n,{A3:function(){return s},Jc:function(){return f},bC:function(){return d},bx:function(){return l}});var r=t(26068),a=t.n(r),u=t(32699),o=t.n(u),i=t(13507),c=t(65548),l=function(e){var n=e.api,t=e.modelProxy,r=e.parameters,a=window.location.origin,u=t?"".concat(i.kW,"/${YOUR_API_PATH}"):n;return"\ncurl ".concat(a).concat(u,' \\\n-H "Content-Type: multipart/form-data" \\\n-H "Authorization: Bearer ${YOUR_GPUSTACK_API_KEY}" \\').concat(t?'\n-H "X-GPUStack-Model: '.concat(r.model,'" \\'):"",'\n-F model="').concat(r.model,'" \\\n-F file="@/path/to/file/audio.mp3;type=audio/mpeg" \\\n').concat((0,c.Yy)(o().omit(r,"model"),!0)).trim().replace(/\\$/g,"")},s=function(e){var n=e.api,t=e.parameters,r=window.location.origin,u=l({api:n,parameters:t}),o='\nfrom openai import OpenAI\n\naudio_file = open("audio.mp3", "rb")\nclient = OpenAI(\n  base_url="'.concat(r,"/").concat(i.Mo,'", \n  api_key="YOUR_GPUSTACK_API_KEY"\n)\n\nresponse = client.audio.transcriptions.create(\n').concat((0,c.G4)(a()(a()({},t),{},{file:"audio_file"})).replace(/"audio_file"/,"audio_file"),")\n\nprint('response:', response.text)").trim(),s=(0,c.GT)(a()(a()({},t),{},{file:"fs.createReadStream(audio.mp3)"})).replace(/"fs.createReadStream\(audio.mp3\)"/g,'fs.createReadStream("audio.mp3")');return{curlCode:u,pythonCode:o,nodeJsCode:'\nconst fs = require("fs")\nconst OpenAI = require("openai");\n\nconst openai = new OpenAI({\n  "apiKey": "YOUR_GPUSTACK_API_KEY",\n  "baseURL": "'.concat(r,"/").concat(i.Mo,'"\n});\n\nasync function main() {\n  const params = ').concat(s,"; \n  const response = await openai.audio.transcriptions.create(params);\n  console.log(response.text);\n}\n\nmain();").trim()}},d=function(e){var n=e.api,t=e.modelProxy,r=e.parameters,a=window.location.origin,u=t?"".concat(i.kW,"/${YOUR_API_PATH}"):n;return"\ncurl ".concat(a).concat(u,' \\\n-H "Content-Type: application/json" \\\n-H "Authorization: Bearer ${YOUR_GPUSTACK_API_KEY}" \\').concat(t?'\n-H "X-GPUStack-Model: '.concat(r.model,'" \\'):"","\n").concat((0,c.Yy)(r,!1)," \\\n--output output.").concat(r.response_format).trim()},f=function(e){var n=e.api,t=e.parameters,r=window.location.origin,u=d({api:n,parameters:t}),o='\nfrom pathlib import Path\nfrom openai import OpenAI\n\noutput_file_path = Path(__file__).parent / "output.mp3"\nclient = OpenAI(\n  base_url="'.concat(r,"/").concat(i.Mo,'", \n  api_key="YOUR_GPUSTACK_API_KEY"\n)\n\nresponse = client.audio.speech.create(\n').concat((0,c.G4)(a()({},t)),')\n\nwith open(output_file_path, "wb") as f:\n    for chunk in response.iter_bytes(): \n        f.write(chunk)\n\nprint(f"Audio saved to {output_file_path}")').trim(),l=(0,c.GT)(a()({},t));return{curlCode:u,pythonCode:o,nodeJsCode:'\nconst fs = require("fs");\nconst path = require("path");\nconst OpenAI = require("openai");\n\nconst ouptFile = path.resolve("./output.mp3");\n\nconst openai = new OpenAI({\n  "apiKey": "YOUR_GPUSTACK_API_KEY",\n  "baseURL": "'.concat(r,"/").concat(i.Mo,'"\n});\n\nasync function main() {\n  const params = ').concat(l,"; \n  const response = await openai.audio.speech.create(params);\n  console.log(ouptFile);\n  const buffer = Buffer.from(await response.arrayBuffer());\n  await fs.promises.writeFile(ouptFile, buffer);\n}\nmain();").trim()}}}}]);
# mper

[![PyPI version](https://badge.fury.io/py/mper.svg)](https://badge.fury.io/py/mper)
[![Python 3.10+](https://img.shields.io/badge/python-3.10+-blue.svg)](https://www.python.org/downloads/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

**Discord Bot Permission Scanner** - discord.pyã®ã‚³ãƒ¼ãƒ‰ã‚’è§£æã—ã€å¿…è¦ãªãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚’æ¤œå‡ºã—ã¦æ‹›å¾…ãƒªãƒ³ã‚¯ã‚’ç”Ÿæˆã™ã‚‹ãƒ„ãƒ¼ãƒ«ã€‚

## ç‰¹å¾´

| æ©Ÿèƒ½ | èª¬æ˜ |
|------|------|
| **ãƒ¡ã‚½ãƒƒãƒ‰ãƒ™ãƒ¼ã‚¹æ¤œå‡º** | `.ban()`, `.kick()`, `.send()` ãªã©ã®ãƒ¡ã‚½ãƒƒãƒ‰å‘¼ã³å‡ºã—ã‹ã‚‰Botãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚’è‡ªå‹•æ¨æ¸¬ |
| **è¨¼æ‹ ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°** | ã©ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½•è¡Œç›®ã§ã©ã®ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ãŒå¿…è¦ã‹ã‚’è¡¨ç¤º |
| **å…¨49ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³å¯¾å¿œ** | Discord APIã®å…¨ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ã‚’ã‚µãƒãƒ¼ãƒˆ |
| **ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆèªè­˜** | `member.edit(nick=...)` ã¨ `member.edit(mute=...)` ã‚’åŒºåˆ¥ |
| **ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã‚µãƒãƒ¼ãƒˆ** | `@bot_has_permissions`ï¼ˆè£œåŠ©ï¼‰ã€`@has_permissions`ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼è¦ä»¶ã®ã¿ï¼‰ |
| **ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆé€šçŸ¥** | æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸéš›ã«CLIã§é€šçŸ¥ |

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
pip install mper
```

## ä½¿ã„æ–¹

### CLI

```bash
# åŸºæœ¬çš„ãªä½¿ã„æ–¹
mper /path/to/bot/directory CLIENT_ID

# è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆä»˜ã
mper /path/to/bot/directory CLIENT_ID --report

# è©³ç´°å‡ºåŠ›
mper /path/to/bot/directory CLIENT_ID --verbose

# ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’é™¤å¤–
mper /path/to/bot/directory CLIENT_ID --exclude tests docs

# ã‚«ã‚¹ã‚¿ãƒ OAuth2ã‚¹ã‚³ãƒ¼ãƒ—
mper /path/to/bot/directory CLIENT_ID --scope bot --scope applications.commands

# ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå‡ºåŠ›ï¼ˆè‰²ãªã—ï¼‰
mper /path/to/bot/directory CLIENT_ID --plain
```

### CLIã‚ªãƒ—ã‚·ãƒ§ãƒ³

| ã‚ªãƒ—ã‚·ãƒ§ãƒ³ | èª¬æ˜ |
|------------|------|
| `--report` | è¨¼æ‹ ä»˜ãã®è©³ç´°ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ãƒ¬ãƒãƒ¼ãƒˆã‚’è¡¨ç¤º |
| `--verbose`, `-v` | ã‚¹ã‚­ãƒ£ãƒ³ä¸­ã®è©³ç´°å‡ºåŠ›ã‚’è¡¨ç¤º |
| `--no-inferred` | ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã‹ã‚‰ã®å®£è¨€ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ã®ã¿ä½¿ç”¨ |
| `--exclude` | é™¤å¤–ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’è¿½åŠ  |
| `--scope` | æ‹›å¾…ãƒªãƒ³ã‚¯ã®OAuth2ã‚¹ã‚³ãƒ¼ãƒ—ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: bot, applications.commandsï¼‰ |
| `--output`, `-o` | æ‹›å¾…ãƒªãƒ³ã‚¯ã®å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: bot_invite_url.txtï¼‰ |
| `--no-color` | è‰²ä»˜ãå‡ºåŠ›ã‚’ç„¡åŠ¹åŒ– |
| `--plain` | ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå‡ºåŠ›ï¼ˆã‚¹ã‚¿ã‚¤ãƒ«ãªã—ï¼‰ |

### ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦ä½¿ç”¨

```python
import mper

# ç°¡å˜ã«æ‹›å¾…URLã‚’ç”Ÿæˆï¼ˆCLIã¨åŒã˜å‹•ä½œï¼‰
url = mper.generate_invite_url("./my_bot", client_id="123456789012345678")
print(url)

# è©³ç´°ãªã‚¹ã‚­ãƒ£ãƒ³çµæœã‚’å–å¾—
result = mper.scan_directory("./my_bot")
print(f"æ¤œå‡ºã•ã‚ŒãŸãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³: {result['invite_link_permissions']}")

# ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³åã‹ã‚‰æ•´æ•°å€¤ã‚’è¨ˆç®—
perm_int = mper.calculate_permission_integer({'send_messages', 'ban_members'})

# ã‚«ã‚¹ã‚¿ãƒ æ‹›å¾…URLã‚’ä½œæˆ
url = mper.create_invite_link(
    client_id="123456789012345678",
    permissions=perm_int,
    scopes=['bot', 'applications.commands']
)
```

è©³ç´°ãªä½¿ç”¨ä¾‹ã¯ [examples/](examples/) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### å‡ºåŠ›ä¾‹

```
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚  mper - Discord Bot Permission Scanner           â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Scanning: /path/to/bot
Scanned 5 files (0 with errors)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Detected Permissions (from method calls)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Permission      â”‚ Bit Value â”‚ Evidence          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ban_members     â”‚ 0x4       â”‚ bot.py:15         â”‚
â”‚ manage_messages â”‚ 0x2000    â”‚ bot.py:25         â”‚
â”‚ send_messages   â”‚ 0x800     â”‚ bot.py:10, 20, 30 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ ğŸ”— INVITE LINK                                   â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ https://discord.com/oauth2/authorize?...         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

## ä»•çµ„ã¿

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    mper ã‚¹ã‚­ãƒ£ãƒ³ãƒ—ãƒ­ã‚»ã‚¹                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  1. ãƒ¡ã‚½ãƒƒãƒ‰ãƒ™ãƒ¼ã‚¹æ¤œå‡º (PRIMARY)                              â”‚
â”‚     Python ASTè§£æ â†’ discord.pyãƒ¡ã‚½ãƒƒãƒ‰æ¤œå‡º â†’ ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³æ¨æ¸¬ â”‚
â”‚     ä¾‹: member.ban() â†’ ban_members                          â”‚
â”‚                                                             â”‚
â”‚  2. @bot_has_permissions (SUPPLEMENTARY)                    â”‚
â”‚     æ˜ç¤ºçš„ãªBotæ¨©é™å®£è¨€ â†’ æ‹›å¾…ãƒªãƒ³ã‚¯ã«è¿½åŠ                      â”‚
â”‚                                                             â”‚
â”‚  3. @has_permissions (REFERENCE ONLY)                       â”‚
â”‚     ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨©é™è¦ä»¶ â†’ ãƒ¬ãƒãƒ¼ãƒˆã«è¡¨ç¤ºã®ã¿ï¼ˆæ‹›å¾…ãƒªãƒ³ã‚¯ã«ã¯ä¸å«ï¼‰  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å¯¾å¿œãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³

Discord APIã®å…¨49ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ï¼ˆãƒ“ãƒƒãƒˆ0-46, 49-50ï¼‰ã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚

è©³ç´°ã¯ [Discord API Documentation](https://discord.com/developers/docs/topics/permissions) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License - è©³ç´°ã¯ [LICENSE](LICENSE) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## Issues

å•é¡Œã‚„è¦æœ›ãŒã‚ã‚‹å ´åˆã¯ã€é©åˆ‡ãªã‚¿ã‚°ã‚’ä»˜ã‘ã¦Issueã‚’ä½œæˆã—ã¦ãã ã•ã„ï¼š

| ã‚¿ã‚° | ç”¨é€” |
|------|------|
| `bug` | ãƒã‚°å ±å‘Š |
| `enhancement` | æ©Ÿèƒ½è¦æœ› |
| `question` | è³ªå• |

## ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ

- é–‹ç™ºè€…: [@FreeWiFi7749](https://github.com/FreeWiFi7749)

Metadata-Version: 2.4
Name: aquacrop-abses
Version: 0.5.0
Summary: 
License-File: LICENSE
Author: SongshGeo
Author-email: songshgeo@gmail.com
Requires-Python: >=3.11,<3.13
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Requires-Dist: abses (>=0.9.0)
Requires-Dist: aquacrop (>=3,<4)
Requires-Dist: matplotkit (>=0.1.2)
Requires-Dist: seaborn (>=0,<1)
Description-Content-Type: text/markdown

# AquaCrop-ABSESpy

[![Python Version](https://img.shields.io/badge/python-3.11-blue.svg)](https://www.python.org/downloads/)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)

åŸºäº [AquaCrop](https://www.fao.org/aquacrop/) å’Œ [ABSESpy](https://github.com/ABSESpy/ABSESpy) çš„å†œä¸šçŒæº‰å’Œä½œç‰©ç”Ÿé•¿å¤šä¸»ä½“æ¨¡æ‹Ÿç³»ç»Ÿã€‚

## ç®€ä»‹

AquaCrop-ABSESpy æ˜¯ä¸€ä¸ªé›†æˆäº†è”åˆå›½ç²®å†œç»„ç»‡ï¼ˆFAOï¼‰AquaCrop æ¨¡å‹å’Œ ABSESpy å¤šä¸»ä½“å»ºæ¨¡æ¡†æ¶çš„ç³»ç»Ÿï¼Œç”¨äºæ¨¡æ‹Ÿå†œä¸šçŒæº‰å†³ç­–å’Œä½œç‰©ç”Ÿé•¿è¿‡ç¨‹ã€‚æœ¬ç³»ç»Ÿæ”¯æŒï¼š

- ğŸŒ¾ **17ç§ä½œç‰©æ¨¡æ‹Ÿ**ï¼šæ¶µç›–ç²®é£Ÿã€ç»æµã€è”¬èœå’Œç³–æ–™ä½œç‰©
- ğŸ’§ **å¤šç§çŒæº‰ç­–ç•¥**ï¼šä»æ— çŒæº‰åˆ°ä¼˜åŒ–çŒæº‰çš„6ç§æ–¹æ³•
- ğŸ—ºï¸ **ç©ºé—´å¼‚è´¨æ€§**ï¼šæ”¯æŒæ …æ ¼æ•°æ®å’Œç©ºé—´åˆ†å¸ƒå»ºæ¨¡
- ğŸ‘¨â€ğŸŒ¾ **ä¸»ä½“å†³ç­–**ï¼šæ¨¡æ‹Ÿå†œæ°‘çš„çŒæº‰å†³ç­–è¡Œä¸º
- ğŸ“Š **æ°”å€™å“åº”**ï¼šæ•´åˆæ°”è±¡æ•°æ®è¯„ä¼°ä½œç‰©-æ°´åˆ†å…³ç³»

## æ”¯æŒçš„ä½œç‰©

ç³»ç»Ÿç°æ”¯æŒ **17ç§ä½œç‰©**ï¼Œå®Œæ•´é…ç½®äº†ç”Ÿé•¿å‘¨æœŸã€Kcç³»æ•°å’Œç‰©å€™æœŸå‚æ•°ï¼š

### ç²®é£Ÿä½œç‰© (10ç§)
- **æ°´ç¨»** (Rice) - 150å¤©ç”Ÿé•¿æœŸ
- **å†¬å°éº¦** (Winter_Wheat) - 255å¤©ç”Ÿé•¿æœŸ
- **æ˜¥å°éº¦** (Spring_Wheat) - 130å¤©ç”Ÿé•¿æœŸ
- **æ˜¥ç‰ç±³** (Spring_Maize) - 145å¤©ç”Ÿé•¿æœŸ
- **å¤ç‰ç±³** (Summer_Maize) - 100å¤©ç”Ÿé•¿æœŸ
- **æ˜¥å¤§éº¦** (Spring_Barley) - 120å¤©ç”Ÿé•¿æœŸ
- **å†¬å¤§éº¦** (Winter_Barley) - 210å¤©ç”Ÿé•¿æœŸ
- **å°ç±³** (Millet) - 140å¤©ç”Ÿé•¿æœŸ

### ç»æµä½œç‰© (5ç§)
- **å¤§è±†** (Soybean) - 140å¤©ç”Ÿé•¿æœŸ
- **æ£‰èŠ±** (Cotton) - 180å¤©ç”Ÿé•¿æœŸ
- **æ²¹èœç±½** (Rapeseed) - 110å¤©ç”Ÿé•¿æœŸ
- **èŠ±ç”Ÿ** (Groundnut) - 130å¤©ç”Ÿé•¿æœŸ
- **å‘æ—¥è‘µ** (Sunflower) - 130å¤©ç”Ÿé•¿æœŸ

### è”¬èœå’Œå—èŒä½œç‰© (2ç§)
- **é©¬é“ƒè–¯** (Potato) - 145å¤©ç”Ÿé•¿æœŸ
- **è¥¿çº¢æŸ¿** (Tomato) - 135å¤©ç”Ÿé•¿æœŸ

### ç³–æ–™ä½œç‰© (2ç§)
- **ç”˜è”—** (Sugarcane) - 105å¤©ç”Ÿé•¿æœŸ
- **ç”œèœ** (Sugarbeet) - 160å¤©ç”Ÿé•¿æœŸ

> **æ³¨æ„**: ç³»ç»Ÿä¿ç•™ `Wheat` å’Œ `Maize` ä½œä¸º `Spring_Wheat` å’Œ `Spring_Maize` çš„åˆ«åï¼Œç¡®ä¿å‘åå…¼å®¹ã€‚

## å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
pip install aquacrop-abses
```

æˆ–ä»æºç å®‰è£…ï¼š

```bash
git clone https://github.com/SongshGeo/aquacrop_abses.git
cd aquacrop_abses
poetry install
```

### åŸºæœ¬ä½¿ç”¨

```python
from abses import MainModel
from aquacrop_abses import CropLand, CropCell, Farmer
from aquacrop_abses.load_datasets import crop_name_to_crop

# åˆ›å»ºæ¨¡å‹å’Œå†œç”°æ¨¡å—
model = MainModel()
cropland = model.nature.create_module(
    name="cropland",
    module_cls=CropLand,
    shape=(3, 4),  # åˆ›å»º 3x4 çš„ç½‘æ ¼
    cell_cls=CropCell,
)

# è·å–ä¸€ä¸ªå•å…ƒæ ¼
cell = cropland.random.choice()

# æ·»åŠ ä½œç‰©
cell.add_crop("Rice")
cell.soil = 1  # è®¾ç½®åœŸå£¤ç±»å‹

# åˆ›å»ºä½œç‰©å¯¹è±¡å¹¶æŸ¥çœ‹ä¿¡æ¯
rice = crop_name_to_crop("Rice")
print(f"æ°´ç¨»ç§æ¤æ—¥æœŸ: {rice.planting_date}")  # 05/15
print(f"æ°´ç¨»æ”¶è·æ—¥æœŸ: {rice.harvest_date}")    # 10/12
```

### å¤šä½œç‰©è½®ä½œç¤ºä¾‹

```python
from abses import MainModel
from aquacrop_abses import CropLand, CropCell

# åˆ›å»ºæ¨¡å‹å’Œå†œç”°æ¨¡å—
model = MainModel()
cropland = model.nature.create_module(
    name="cropland",
    module_cls=CropLand,
    shape=(3, 4),
    cell_cls=CropCell,
)

# è·å–å•å…ƒæ ¼å¹¶æ·»åŠ å†¬å°éº¦å’Œå¤ç‰ç±³ï¼ˆè½®ä½œï¼‰
cell = cropland.random.choice()
cell.add_crop("Winter_Wheat")  # 10/01-06/13
cell.add_crop("Summer_Maize")   # 06/15-09/23 (æ— é‡å )

# æŸ¥çœ‹ç§æ¤çš„ä½œç‰©
print(f"ç§æ¤äº† {cell.has_crops} ç§ä½œç‰©")
for name, crop in cell.crops.items():
    print(f"  - {name}: {crop.planting_date} è‡³ {crop.harvest_date}")
```

## çŒæº‰ç­–ç•¥

ç³»ç»Ÿæ”¯æŒ6ç§çŒæº‰æ–¹æ³•ï¼ˆ`irr_method` 0-5ï¼‰ï¼š

- **0**: æ— çŒæº‰ï¼ˆé›¨å…»å†œä¸šï¼‰
- **1-3**: åŸºäºåœŸå£¤æ°´åˆ†é˜ˆå€¼çš„çŒæº‰ï¼ˆä¿å®ˆã€ä¸­ç­‰ã€æ¿€è¿›ï¼‰
- **4**: å‡€çŒæº‰ï¼ˆç²¾ç¡®è¡¥æ°´ï¼‰
- **5**: ä¼˜åŒ–çŒæº‰ï¼ˆæœ€å¤§äº§é‡ï¼‰

```python
from aquacrop_abses import Farmer

# åˆ›å»ºä½¿ç”¨å‡€çŒæº‰ç­–ç•¥çš„å†œæ°‘
farmer = Farmer(irr_method=4)
```

## ä¸»è¦åŠŸèƒ½

### ä½œç‰©ç”Ÿé•¿æ¨¡æ‹Ÿ
- å®Œæ•´çš„ä½œç‰©ç‰©å€™æœŸå»ºæ¨¡ï¼ˆåˆå§‹ã€å‘è‚²ã€ä¸­æœŸã€æˆç†Ÿï¼‰
- åŸºäºKcç³»æ•°çš„è’¸è…¾è’¸å‘è®¡ç®—
- æ°´åˆ†èƒè¿«å¯¹äº§é‡çš„å½±å“

### ç©ºé—´å»ºæ¨¡
- æ …æ ¼åŒ–å†œç”°ç©ºé—´è¡¨ç¤º
- ç©ºé—´å¼‚è´¨çš„åœŸå£¤å’Œæ°”è±¡æ¡ä»¶
- ä½œç‰©ç©ºé—´åˆ†å¸ƒé…ç½®

### ä¸»ä½“å†³ç­–
- å†œæ°‘çŒæº‰å†³ç­–æ¨¡æ‹Ÿ
- ä¸åŒçŒæº‰ç­–ç•¥çš„ä¼˜åŒ–
- èµ„æºçº¦æŸä¸‹çš„è¡Œä¸º

### æ•°æ®é›†æˆ
- æ°”è±¡æ•°æ®ï¼ˆæ¸©åº¦ã€é™æ°´ã€è’¸å‘ï¼‰
- åœŸå£¤æ•°æ®ï¼ˆè´¨åœ°ã€æ°´åˆ†ç‰¹æ€§ï¼‰
- ä½œç‰©å‚æ•°ï¼ˆç”Ÿé•¿å‘¨æœŸã€ç³»æ•°ï¼‰

## æ–‡æ¡£

å®Œæ•´æ–‡æ¡£è¯·è®¿é—®: [Documentation](docs/)

- [é…ç½®è¯´æ˜](docs/notebooks/configurations.ipynb)
- [å†œæ°‘ä¸»ä½“](docs/notebooks/farmer.ipynb)
- [è‡ªç„¶ç¯å¢ƒ](docs/notebooks/nature.ipynb)
- [ä¼˜åŒ–æ–¹æ³•](docs/notebooks/optimize.ipynb)
- [ä½œç‰©ä½¿ç”¨æŒ‡å—](CROP_CONVERSION_USAGE.md)

## æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
poetry run pytest tests/ -v

# è¿è¡Œç‰¹å®šæµ‹è¯•
poetry run pytest tests/test_datasets.py -v
```

## å¼•ç”¨

å¦‚æœæ‚¨åœ¨ç ”ç©¶ä¸­ä½¿ç”¨äº†æœ¬ç³»ç»Ÿï¼Œè¯·å¼•ç”¨ï¼š

```bibtex
@software{aquacrop_abses,
  author = {Song, Shuang},
  title = {AquaCrop-ABSESpy: Agent-Based Modeling for Agricultural Irrigation},
  year = {2024},
  url = {https://github.com/SongshGeo/aquacrop_abses}
}
```

## è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·æŸ¥çœ‹ [è´¡çŒ®æŒ‡å—](CONTRIBUTING.md) äº†è§£è¯¦æƒ…ã€‚

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## è‡´è°¢

- [AquaCrop](https://www.fao.org/aquacrop/) - FAOä½œç‰©-æ°´åˆ†ç”Ÿäº§åŠ›æ¨¡å‹
- [ABSESpy](https://github.com/ABSESpy/ABSESpy) - å¤šä¸»ä½“å»ºæ¨¡æ¡†æ¶
- [aquacrop](https://github.com/aquacropos/aquacrop) - Pythonå®ç°çš„AquaCropæ¨¡å‹


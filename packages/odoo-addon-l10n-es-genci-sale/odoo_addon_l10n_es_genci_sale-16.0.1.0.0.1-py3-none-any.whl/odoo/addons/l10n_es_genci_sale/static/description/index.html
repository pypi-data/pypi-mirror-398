<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils: https://docutils.sourceforge.io/" />
<title>Tasa Genci - Ventas</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 9511 2024-01-13 09:50:07Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.
Despite the name, some widely supported CSS2 features are used.

See https://docutils.sourceforge.io/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

.subscript {
  vertical-align: sub;
  font-size: smaller }

.superscript {
  vertical-align: super;
  font-size: smaller }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title, .code .error {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left, table.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right, table.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

table.align-center {
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

.align-top    {
  vertical-align: top }

.align-middle {
  vertical-align: middle }

.align-bottom {
  vertical-align: bottom }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em ;
  margin-right: 2em }

pre.code .ln { color: gray; } /* line numbers */
pre.code, code { background-color: #eeeeee }
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic, pre.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

/* "booktabs" style (no vertical lines) */
table.docutils.booktabs {
  border: 0px;
  border-top: 2px solid;
  border-bottom: 2px solid;
  border-collapse: collapse;
}
table.docutils.booktabs * {
  border: 0px;
}
table.docutils.booktabs th {
  border-bottom: thin solid;
  text-align: left;
}

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="tasa-genci-ventas">
<h1 class="title">Tasa Genci - Ventas</h1>

<!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!! This file is generated by oca-gen-addon-readme !!
!! changes will be overwritten.                   !!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!! source digest: sha256:e4aea25eee0b989b88080701da55611e229f46cb64bbf52427cb1f494752a4d4
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
<p><a class="reference external image-reference" href="https://odoo-community.org/page/development-status"><img alt="Beta" src="https://img.shields.io/badge/maturity-Beta-yellow.png" /></a> <a class="reference external image-reference" href="http://www.gnu.org/licenses/agpl-3.0-standalone.html"><img alt="License: AGPL-3" src="https://img.shields.io/badge/licence-AGPL--3-blue.png" /></a> <a class="reference external image-reference" href="https://github.com/sygel-technology/sy-l10n-spain/tree/16.0/l10n_es_genci_sale"><img alt="sygel-technology/sy-l10n-spain" src="https://img.shields.io/badge/github-sygel--technology%2Fsy--l10n--spain-lightgray.png?logo=github" /></a></p>
<p>This module extends <tt class="docutils literal">l10n_es_genci_account</tt> to integrate GENCI
functionality into the Sales workflow.</p>
<p>It automatically creates GENCI rate lines in sale orders when products
subject to GENCI are added, and ensures correct transfer of GENCI
amounts to customer invoices.</p>
<div class="section" id="key-features">
<h1>Key Features</h1>
<ul class="simple">
<li>“Apply GENCI” checkbox on sale orders to control GENCI application</li>
<li>Automatic creation of GENCI lines based on product rules and
quantities</li>
<li>Consolidation of multiple products with the same rule into single
GENCI lines</li>
<li>Display of GENCI amounts on sale order reports (when enabled in
company settings)</li>
</ul>
<p><strong>Table of contents</strong></p>
</div>
<div class="section" id="installation">
<h1>Installation</h1>
<p>To install this module, you need to:</p>
<ul class="simple">
<li>Only install</li>
</ul>
</div>
<div class="section" id="usage">
<h1>Usage</h1>
</div>
<div class="section" id="prerequisites">
<h1>Prerequisites</h1>
<p>Before using this module, ensure that the base module
<strong>``l10n_es_genci_account``</strong> is properly configured:</p>
<ul class="simple">
<li>Company GENCI is enabled <em>(Settings → Companies → GENCI tab)</em></li>
<li>GENCI rules are created with validity dates if necessary</li>
<li>Products are configured as <strong>“Subject to GENCI”</strong> with linked rules</li>
<li>Partners have <strong>“Subject to GENCI”</strong> checked (default)</li>
</ul>
<p><strong>Important:</strong></p>
<p>For GENCI fee lines to compute and update their invoiced quantities
correctly, ensure that the “Tasa GENCI” product is configured with the
invoicing policy “Based on ordered quantities.” GENCI lines are not
driven by delivered quantities; they must always follow the product’s
ordered quantity invoicing logic.</p>
<p>For detailed configuration instructions, refer to the
<strong>``l10n_es_genci_account``</strong> module documentation.</p>
</div>
<div class="section" id="create-a-sale-order">
<h1>1. Create a Sale Order</h1>
<ol class="arabic simple">
<li>Go to <strong>Sales → Orders → Quotations → Create</strong></li>
<li>Select a partner that has <strong>“Subject to GENCI”</strong> enabled</li>
</ol>
</div>
<div class="section" id="apply-genci-checkbox">
<h1>2. Apply GENCI Checkbox</h1>
<ul class="simple">
<li>The <strong>“Apply GENCI”</strong> checkbox appears in the order header <em>(only when
company GENCI is enabled)</em></li>
<li>If the partner is GENCI-subject, check this box to apply GENCI rates</li>
<li>If it remains unchecked, <strong>GENCI lines will not be created</strong>, even if
products require it</li>
</ul>
</div>
<div class="section" id="add-products">
<h1>3. Add Products</h1>
<ul class="simple">
<li>Add products that are configured as <strong>“Subject to GENCI”</strong></li>
<li>Products must have a valid GENCI rule assigned</li>
<li>The rule’s validity dates must include the order date</li>
</ul>
</div>
<div class="section" id="automatic-genci-line-creation">
<h1>4. Automatic GENCI Line Creation</h1>
<p>GENCI lines are automatically generated when:</p>
<ul class="simple">
<li>You save the order</li>
<li>Or you modify order lines</li>
</ul>
<p>Behavior:</p>
<ul class="simple">
<li><strong>One GENCI line is created per distinct GENCI rule</strong></li>
<li><strong>Quantity = sum of all product quantities using that rule</strong></li>
</ul>
</div>
<div class="section" id="application-logic">
<h1>Application Logic</h1>
<p><strong>Conditions for GENCI Application</strong></p>
<ul class="simple">
<li>Company has GENCI enabled</li>
<li>“Apply GENCI” checkbox is checked on the order</li>
<li>Partner is subject to GENCI</li>
<li>Fiscal position (if set) allows GENCI</li>
<li>Products have valid GENCI rules for the order date</li>
</ul>
</div>
<div class="section" id="known-issues-roadmap">
<h1>Known issues / Roadmap</h1>
<p>Pending Features:</p>
<ul class="simple">
<li><strong>Product GENCI flag type</strong> The <tt class="docutils literal">genci_subject</tt> field on products is
currently a selection (<tt class="docutils literal">yes</tt> / <tt class="docutils literal">no</tt>), inherited from
<tt class="docutils literal">l10n_es_genci_account</tt>. Once this field is migrated to a Boolean in
the parent module, this module should be updated accordingly to use a
Boolean flag.</li>
<li><strong>GENCI logic reuse</strong> Purchase and Sale modules currently share very
similar GENCI logic. As a future improvement or during a migration,
this logic should be extracted into a shared mixin to reduce
duplication and improve maintainability.</li>
<li><strong>Units of Measure handling for GENCI calculations</strong> GENCI amounts are
currently computed per purchased unit (product_qty), without applying
any Unit of Measure (UoM) conversion. This is an intentional design
decision, as GENCI rules are defined per product unit. If future
requirements introduce UoM-dependent GENCI rules (e.g. weight or
volume based), this logic should be reviewed and adapted accordingly.</li>
</ul>
</div>
<div class="section" id="bug-tracker">
<h1>Bug Tracker</h1>
<p>Bugs are tracked on <a class="reference external" href="https://github.com/sygel-technology/sy-l10n-spain/issues">GitHub Issues</a>.
In case of trouble, please check there if your issue has already been reported.
If you spotted it first, help us to smash it by providing a detailed and welcomed
<a class="reference external" href="https://github.com/sygel-technology/sy-l10n-spain/issues/new?body=module:%20l10n_es_genci_sale%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**">feedback</a>.</p>
<p>Do not contact contributors directly about support or help with technical issues.</p>
</div>
<div class="section" id="credits">
<h1>Credits</h1>
<div class="section" id="authors">
<h2>Authors</h2>
<ul class="simple">
<li>Sygel</li>
</ul>
</div>
<div class="section" id="contributors">
<h2>Contributors</h2>
<ul class="simple">
<li><a class="reference external" href="https://www.sygel.es">Sygel</a>:<ul>
<li>Ángel Rivas</li>
<li>Valentín Vinagre</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="maintainers">
<h2>Maintainers</h2>
<p>This module is part of the <a class="reference external" href="https://github.com/sygel-technology/sy-l10n-spain/tree/16.0/l10n_es_genci_sale">sygel-technology/sy-l10n-spain</a> project on GitHub.</p>
<p>You are welcome to contribute.</p>
</div>
</div>
</div>
</body>
</html>

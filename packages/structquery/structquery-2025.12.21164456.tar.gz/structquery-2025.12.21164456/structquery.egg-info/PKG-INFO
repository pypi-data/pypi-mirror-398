Metadata-Version: 2.4
Name: structquery
Version: 2025.12.21164456
Summary: A new package that transforms unstructured text queries into highly structured, search-optimized outputs. The package takes a user's text input, such as a search query or a description of information
Author-email: structquery <hi@eugene.plus>
License: MIT
Project-URL: Homepage, https://github.com/chigwell/structquery
Requires-Python: >=3.9
Description-Content-Type: text/markdown
Requires-Dist: langchain-llm7>=0.0.0
Requires-Dist: llmatch-messages>=0.0.0
Requires-Dist: langchain-core>=0.3.0

# structquery
[![PyPI version](https://badge.fury.io/py/structquery.svg)](https://badge.fury.io/py/structquery)
[![License: MIT](https://img.shields.io/badge/License-MIT-green.svg)](https://opensource.org/licenses/MIT)
[![Downloads](https://static.pepy.tech/badge/structquery)](https://pepy.tech/project/structquery)
[![LinkedIn](https://img.shields.io/badge/LinkedIn-blue)](https://www.linkedin.com/in/eugene-evstafev-716669181/)


**structquery** is a lightweight Python package that converts unstructured text queries into highly structured, searchâ€‘optimized outputs. By leveraging the `llmatchâ€‘messages` utility and a default LLM7 model, the package extracts key elements from user input (e.g., location, difficulty, length) and returns them in a format that is ready for downstream search engines or informationâ€‘retrieval pipelines.

---

## âœ¨ Features

- **Oneâ€‘line transformation** from freeâ€‘form text to a list of structured fields.
- **Builtâ€‘in LLM7 support** (`ChatLLM7` from `langchain_llm7`) with automatic APIâ€‘key handling.
- **Pluggable LLMs** â€“ you can swap in any LangChainâ€‘compatible chat model (OpenAI, Anthropic, Google, etc.).
- **Regexâ€‘driven output validation** via `llmatch` to guarantee format correctness.
- **Zeroâ€‘config defaults** â€“ works outâ€‘ofâ€‘theâ€‘box for common useâ€‘cases.

---

## ğŸ“¦ Installation

```bash
pip install structquery
```

---

## ğŸš€ Quick Start

```python
from structquery import structquery

# Simple call â€“ uses the default ChatLLM7 model
response = structquery(
    user_input="best hiking trails in Colorado"
)

print(response)               # â†’ List of extracted structured strings
```

### Parameters

| Name       | Type                              | Description |
|------------|-----------------------------------|-------------|
| `user_input` | `str` | The raw user query or description you want to structure. |
| `llm`       | `Optional[BaseChatModel]` | Your own LangChain chat model. If omitted, the package creates a `ChatLLM7` instance automatically. |
| `api_key`   | `Optional[str]` | LLM7 API key. If omitted, the package reads `LLM7_API_KEY` from the environment; otherwise it falls back to the placeholder `"None"` (which triggers an error from the LLM service). |

---

## ğŸ”§ Using a Custom LLM

You can provide any LangChainâ€‘compatible chat model that inherits from `BaseChatModel`. Below are examples for the most popular providers.

### OpenAI

```python
from langchain_openai import ChatOpenAI
from structquery import structquery

llm = ChatOpenAI(model="gpt-4o-mini")
response = structquery(
    user_input="latest smartphones under $500",
    llm=llm
)
```

### Anthropic

```python
from langchain_anthropic import ChatAnthropic
from structquery import structquery

llm = ChatAnthropic(model_name="claude-3-haiku-20240307")
response = structquery(
    user_input="affordable vegan meal plan",
    llm=llm
)
```

### Google Generative AI

```python
from langchain_google_genai import ChatGoogleGenerativeAI
from structquery import structquery

llm = ChatGoogleGenerativeAI(model="gemini-1.5-flash")
response = structquery(
    user_input="top-rated bike touring routes in Europe",
    llm=llm
)
```

---

## ğŸ”‘ LLM7 API Key

- The free tier of LLM7 supplies generous rate limits that satisfy most experimentation and production needs.
- To obtain a free API key, register at **[https://token.llm7.io/](https://token.llm7.io/)**.
- You can provide the key in three ways:
  1. **Environment variable**: `export LLM7_API_KEY=your_key`
  2. **Direct argument**: `structquery(user_input, api_key="your_key")`
  3. **Pass a preâ€‘configured `ChatLLM7` instance** via the `llm` argument.

---

## ğŸ Issues & Contributions

- **Bug reports / feature requests**: <https://github.com/chigwell/structquery/issues>
- Contributions are welcome! Fork the repository, make your changes, and submit a pull request.

---

## ğŸ“ License

Distributed under the MIT License. See the `LICENSE` file for details.

---

## ğŸ“§ Contact

**Eugene Evstafev** â€“ [hi@euegne.plus](mailto:hi@euegne.plus)  
GitHub: <https://github.com/chigwell>
